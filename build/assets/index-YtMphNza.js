function o4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function q0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a4(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Fv={exports:{}},Md={},Vv={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xj;function l4(){if(Xj)return ot;Xj=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=f&&$[f]||$["@@iterator"],typeof $=="function"?$:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function k($,ee,he){this.props=$,this.context=ee,this.refs=b,this.updater=he||y}k.prototype.isReactComponent={},k.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},k.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function j(){}j.prototype=k.prototype;function T($,ee,he){this.props=$,this.context=ee,this.refs=b,this.updater=he||y}var E=T.prototype=new j;E.constructor=T,w(E,k.prototype),E.isPureReactComponent=!0;var P=Array.isArray,N=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function M($,ee,he){var B,te={},Te=null,re=null;if(ee!=null)for(B in ee.ref!==void 0&&(re=ee.ref),ee.key!==void 0&&(Te=""+ee.key),ee)N.call(ee,B)&&!I.hasOwnProperty(B)&&(te[B]=ee[B]);var ge=arguments.length-2;if(ge===1)te.children=he;else if(1<ge){for(var _e=Array(ge),ve=0;ve<ge;ve++)_e[ve]=arguments[ve+2];te.children=_e}if($&&$.defaultProps)for(B in ge=$.defaultProps,ge)te[B]===void 0&&(te[B]=ge[B]);return{$$typeof:t,type:$,key:Te,ref:re,props:te,_owner:_.current}}function O($,ee){return{$$typeof:t,type:$.type,key:ee,ref:$.ref,props:$.props,_owner:$._owner}}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function D($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(he){return ee[he]})}var A=/\/+/g;function Z($,ee){return typeof $=="object"&&$!==null&&$.key!=null?D(""+$.key):ee.toString(36)}function se($,ee,he,B,te){var Te=typeof $;(Te==="undefined"||Te==="boolean")&&($=null);var re=!1;if($===null)re=!0;else switch(Te){case"string":case"number":re=!0;break;case"object":switch($.$$typeof){case t:case e:re=!0}}if(re)return re=$,te=te(re),$=B===""?"."+Z(re,0):B,P(te)?(he="",$!=null&&(he=$.replace(A,"$&/")+"/"),se(te,ee,he,"",function(ve){return ve})):te!=null&&(L(te)&&(te=O(te,he+(!te.key||re&&re.key===te.key?"":(""+te.key).replace(A,"$&/")+"/")+$)),ee.push(te)),1;if(re=0,B=B===""?".":B+":",P($))for(var ge=0;ge<$.length;ge++){Te=$[ge];var _e=B+Z(Te,ge);re+=se(Te,ee,he,_e,te)}else if(_e=v($),typeof _e=="function")for($=_e.call($),ge=0;!(Te=$.next()).done;)Te=Te.value,_e=B+Z(Te,ge++),re+=se(Te,ee,he,_e,te);else if(Te==="object")throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return re}function fe($,ee,he){if($==null)return $;var B=[],te=0;return se($,B,"","",function(Te){return ee.call(he,Te,te++)}),B}function ae($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(he){($._status===0||$._status===-1)&&($._status=1,$._result=he)},function(he){($._status===0||$._status===-1)&&($._status=2,$._result=he)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var de={current:null},U={transition:null},G={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:U,ReactCurrentOwner:_};function le(){throw Error("act(...) is not supported in production builds of React.")}return ot.Children={map:fe,forEach:function($,ee,he){fe($,function(){ee.apply(this,arguments)},he)},count:function($){var ee=0;return fe($,function(){ee++}),ee},toArray:function($){return fe($,function(ee){return ee})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}},ot.Component=k,ot.Fragment=n,ot.Profiler=s,ot.PureComponent=T,ot.StrictMode=r,ot.Suspense=d,ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ot.act=le,ot.cloneElement=function($,ee,he){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var B=w({},$.props),te=$.key,Te=$.ref,re=$._owner;if(ee!=null){if(ee.ref!==void 0&&(Te=ee.ref,re=_.current),ee.key!==void 0&&(te=""+ee.key),$.type&&$.type.defaultProps)var ge=$.type.defaultProps;for(_e in ee)N.call(ee,_e)&&!I.hasOwnProperty(_e)&&(B[_e]=ee[_e]===void 0&&ge!==void 0?ge[_e]:ee[_e])}var _e=arguments.length-2;if(_e===1)B.children=he;else if(1<_e){ge=Array(_e);for(var ve=0;ve<_e;ve++)ge[ve]=arguments[ve+2];B.children=ge}return{$$typeof:t,type:$.type,key:te,ref:Te,props:B,_owner:re}},ot.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},ot.createElement=M,ot.createFactory=function($){var ee=M.bind(null,$);return ee.type=$,ee},ot.createRef=function(){return{current:null}},ot.forwardRef=function($){return{$$typeof:l,render:$}},ot.isValidElement=L,ot.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:ae}},ot.memo=function($,ee){return{$$typeof:h,type:$,compare:ee===void 0?null:ee}},ot.startTransition=function($){var ee=U.transition;U.transition={};try{$()}finally{U.transition=ee}},ot.unstable_act=le,ot.useCallback=function($,ee){return de.current.useCallback($,ee)},ot.useContext=function($){return de.current.useContext($)},ot.useDebugValue=function(){},ot.useDeferredValue=function($){return de.current.useDeferredValue($)},ot.useEffect=function($,ee){return de.current.useEffect($,ee)},ot.useId=function(){return de.current.useId()},ot.useImperativeHandle=function($,ee,he){return de.current.useImperativeHandle($,ee,he)},ot.useInsertionEffect=function($,ee){return de.current.useInsertionEffect($,ee)},ot.useLayoutEffect=function($,ee){return de.current.useLayoutEffect($,ee)},ot.useMemo=function($,ee){return de.current.useMemo($,ee)},ot.useReducer=function($,ee,he){return de.current.useReducer($,ee,he)},ot.useRef=function($){return de.current.useRef($)},ot.useState=function($){return de.current.useState($)},ot.useSyncExternalStore=function($,ee,he){return de.current.useSyncExternalStore($,ee,he)},ot.useTransition=function(){return de.current.useTransition()},ot.version="18.3.1",ot}var Qj;function ip(){return Qj||(Qj=1,Vv.exports=l4()),Vv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zj;function c4(){if(Zj)return Md;Zj=1;var t=ip(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(l,d,h){var m,f={},v=null,y=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(y=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(f[m]=d[m]);if(l&&l.defaultProps)for(m in d=l.defaultProps,d)f[m]===void 0&&(f[m]=d[m]);return{$$typeof:e,type:l,key:v,ref:y,props:f,_owner:s.current}}return Md.Fragment=n,Md.jsx=a,Md.jsxs=a,Md}var e1;function d4(){return e1||(e1=1,Fv.exports=c4()),Fv.exports}var i=d4(),gm={},Bv={exports:{}},yr={},$v={exports:{}},zv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1;function u4(){return t1||(t1=1,(function(t){function e(U,G){var le=U.length;U.push(G);e:for(;0<le;){var $=le-1>>>1,ee=U[$];if(0<s(ee,G))U[$]=G,U[le]=ee,le=$;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var G=U[0],le=U.pop();if(le!==G){U[0]=le;e:for(var $=0,ee=U.length,he=ee>>>1;$<he;){var B=2*($+1)-1,te=U[B],Te=B+1,re=U[Te];if(0>s(te,le))Te<ee&&0>s(re,te)?(U[$]=re,U[Te]=le,$=Te):(U[$]=te,U[B]=le,$=B);else if(Te<ee&&0>s(re,le))U[$]=re,U[Te]=le,$=Te;else break e}}return G}function s(U,G){var le=U.sortIndex-G.sortIndex;return le!==0?le:U.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],h=[],m=1,f=null,v=3,y=!1,w=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=U)r(h),G.sortIndex=G.expirationTime,e(d,G);else break;G=n(h)}}function P(U){if(b=!1,E(U),!w)if(n(d)!==null)w=!0,ae(N);else{var G=n(h);G!==null&&de(P,G.startTime-U)}}function N(U,G){w=!1,b&&(b=!1,j(M),M=-1),y=!0;var le=v;try{for(E(G),f=n(d);f!==null&&(!(f.expirationTime>G)||U&&!D());){var $=f.callback;if(typeof $=="function"){f.callback=null,v=f.priorityLevel;var ee=$(f.expirationTime<=G);G=t.unstable_now(),typeof ee=="function"?f.callback=ee:f===n(d)&&r(d),E(G)}else r(d);f=n(d)}if(f!==null)var he=!0;else{var B=n(h);B!==null&&de(P,B.startTime-G),he=!1}return he}finally{f=null,v=le,y=!1}}var _=!1,I=null,M=-1,O=5,L=-1;function D(){return!(t.unstable_now()-L<O)}function A(){if(I!==null){var U=t.unstable_now();L=U;var G=!0;try{G=I(!0,U)}finally{G?Z():(_=!1,I=null)}}else _=!1}var Z;if(typeof T=="function")Z=function(){T(A)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,fe=se.port2;se.port1.onmessage=A,Z=function(){fe.postMessage(null)}}else Z=function(){k(A,0)};function ae(U){I=U,_||(_=!0,Z())}function de(U,G){M=k(function(){U(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ae(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var le=v;v=G;try{return U()}finally{v=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var le=v;v=U;try{return G()}finally{v=le}},t.unstable_scheduleCallback=function(U,G,le){var $=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?$+le:$):le=$,U){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=le+ee,U={id:m++,callback:G,priorityLevel:U,startTime:le,expirationTime:ee,sortIndex:-1},le>$?(U.sortIndex=le,e(h,U),n(d)===null&&U===n(h)&&(b?(j(M),M=-1):b=!0,de(P,le-$))):(U.sortIndex=ee,e(d,U),w||y||(w=!0,ae(N))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var G=v;return function(){var le=v;v=G;try{return U.apply(this,arguments)}finally{v=le}}}})(zv)),zv}var n1;function h4(){return n1||(n1=1,$v.exports=u4()),$v.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1;function m4(){if(r1)return yr;r1=1;var t=ip(),e=h4();function n(c){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+c,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(c,u){a(c,u),a(c+"Capture",u)}function a(c,u){for(s[c]=u,c=0;c<u.length;c++)r.add(u[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function v(c){return d.call(f,c)?!0:d.call(m,c)?!1:h.test(c)?f[c]=!0:(m[c]=!0,!1)}function y(c,u,p,x){if(p!==null&&p.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return x?!1:p!==null?!p.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function w(c,u,p,x){if(u===null||typeof u>"u"||y(c,u,p,x))return!0;if(x)return!1;if(p!==null)switch(p.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function b(c,u,p,x,S,C,R){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=x,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=c,this.type=u,this.sanitizeURL=C,this.removeEmptyString=R}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){k[c]=new b(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var u=c[0];k[u]=new b(u,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){k[c]=new b(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){k[c]=new b(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){k[c]=new b(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){k[c]=new b(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){k[c]=new b(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){k[c]=new b(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){k[c]=new b(c,5,!1,c.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function T(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var u=c.replace(j,T);k[u]=new b(u,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var u=c.replace(j,T);k[u]=new b(u,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var u=c.replace(j,T);k[u]=new b(u,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){k[c]=new b(c,1,!1,c.toLowerCase(),null,!1,!1)}),k.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){k[c]=new b(c,1,!1,c.toLowerCase(),null,!0,!0)});function E(c,u,p,x){var S=k.hasOwnProperty(u)?k[u]:null;(S!==null?S.type!==0:x||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(w(u,p,S,x)&&(p=null),x||S===null?v(u)&&(p===null?c.removeAttribute(u):c.setAttribute(u,""+p)):S.mustUseProperty?c[S.propertyName]=p===null?S.type===3?!1:"":p:(u=S.attributeName,x=S.attributeNamespace,p===null?c.removeAttribute(u):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,x?c.setAttributeNS(x,u,p):c.setAttribute(u,p))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),_=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),D=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),U=Symbol.iterator;function G(c){return c===null||typeof c!="object"?null:(c=U&&c[U]||c["@@iterator"],typeof c=="function"?c:null)}var le=Object.assign,$;function ee(c){if($===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);$=u&&u[1]||""}return`
`+$+c}var he=!1;function B(c,u){if(!c||he)return"";he=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(ne){var x=ne}Reflect.construct(c,[],u)}else{try{u.call()}catch(ne){x=ne}c.call(u.prototype)}else{try{throw Error()}catch(ne){x=ne}c()}}catch(ne){if(ne&&x&&typeof ne.stack=="string"){for(var S=ne.stack.split(`
`),C=x.stack.split(`
`),R=S.length-1,F=C.length-1;1<=R&&0<=F&&S[R]!==C[F];)F--;for(;1<=R&&0<=F;R--,F--)if(S[R]!==C[F]){if(R!==1||F!==1)do if(R--,F--,0>F||S[R]!==C[F]){var z=`
`+S[R].replace(" at new "," at ");return c.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",c.displayName)),z}while(1<=R&&0<=F);break}}}finally{he=!1,Error.prepareStackTrace=p}return(c=c?c.displayName||c.name:"")?ee(c):""}function te(c){switch(c.tag){case 5:return ee(c.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return c=B(c.type,!1),c;case 11:return c=B(c.type.render,!1),c;case 1:return c=B(c.type,!0),c;default:return""}}function Te(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case I:return"Fragment";case _:return"Portal";case O:return"Profiler";case M:return"StrictMode";case Z:return"Suspense";case se:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case D:return(c.displayName||"Context")+".Consumer";case L:return(c._context.displayName||"Context")+".Provider";case A:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case fe:return u=c.displayName||null,u!==null?u:Te(c.type)||"Memo";case ae:u=c._payload,c=c._init;try{return Te(c(u))}catch{}}return null}function re(c){var u=c.type;switch(c.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=u.render,c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(u);case 8:return u===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ge(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function _e(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ve(c){var u=_e(c)?"checked":"value",p=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),x=""+c[u];if(!c.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,C=p.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return S.call(this)},set:function(R){x=""+R,C.call(this,R)}}),Object.defineProperty(c,u,{enumerable:p.enumerable}),{getValue:function(){return x},setValue:function(R){x=""+R},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Ee(c){c._valueTracker||(c._valueTracker=ve(c))}function me(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var p=u.getValue(),x="";return c&&(x=_e(c)?c.checked?"true":"false":c.value),c=x,c!==p?(u.setValue(c),!0):!1}function it(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function yt(c,u){var p=u.checked;return le({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??c._wrapperState.initialChecked})}function vt(c,u){var p=u.defaultValue==null?"":u.defaultValue,x=u.checked!=null?u.checked:u.defaultChecked;p=ge(u.value!=null?u.value:p),c._wrapperState={initialChecked:x,initialValue:p,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function an(c,u){u=u.checked,u!=null&&E(c,"checked",u,!1)}function er(c,u){an(c,u);var p=ge(u.value),x=u.type;if(p!=null)x==="number"?(p===0&&c.value===""||c.value!=p)&&(c.value=""+p):c.value!==""+p&&(c.value=""+p);else if(x==="submit"||x==="reset"){c.removeAttribute("value");return}u.hasOwnProperty("value")?Tn(c,u.type,p):u.hasOwnProperty("defaultValue")&&Tn(c,u.type,ge(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(c.defaultChecked=!!u.defaultChecked)}function ra(c,u,p){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var x=u.type;if(!(x!=="submit"&&x!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+c._wrapperState.initialValue,p||u===c.value||(c.value=u),c.defaultValue=u}p=c.name,p!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,p!==""&&(c.name=p)}function Tn(c,u,p){(u!=="number"||it(c.ownerDocument)!==c)&&(p==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+p&&(c.defaultValue=""+p))}var wi=Array.isArray;function qs(c,u,p,x){if(c=c.options,u){u={};for(var S=0;S<p.length;S++)u["$"+p[S]]=!0;for(p=0;p<c.length;p++)S=u.hasOwnProperty("$"+c[p].value),c[p].selected!==S&&(c[p].selected=S),S&&x&&(c[p].defaultSelected=!0)}else{for(p=""+ge(p),u=null,S=0;S<c.length;S++){if(c[S].value===p){c[S].selected=!0,x&&(c[S].defaultSelected=!0);return}u!==null||c[S].disabled||(u=c[S])}u!==null&&(u.selected=!0)}}function gn(c,u){if(u.dangerouslySetInnerHTML!=null)throw Error(n(91));return le({},u,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function qr(c,u){var p=u.value;if(p==null){if(p=u.children,u=u.defaultValue,p!=null){if(u!=null)throw Error(n(92));if(wi(p)){if(1<p.length)throw Error(n(93));p=p[0]}u=p}u==null&&(u=""),p=u}c._wrapperState={initialValue:ge(p)}}function il(c,u){var p=ge(u.value),x=ge(u.defaultValue);p!=null&&(p=""+p,p!==c.value&&(c.value=p),u.defaultValue==null&&c.defaultValue!==p&&(c.defaultValue=p)),x!=null&&(c.defaultValue=""+x)}function ol(c){var u=c.textContent;u===c._wrapperState.initialValue&&u!==""&&u!==null&&(c.value=u)}function Ws(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sa(c,u){return c==null||c==="http://www.w3.org/1999/xhtml"?Ws(u):c==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Si,no=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,p,x,S){MSApp.execUnsafeLocalFunction(function(){return c(u,p,x,S)})}:c})(function(c,u){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=u;else{for(Si=Si||document.createElement("div"),Si.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Si.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;u.firstChild;)c.appendChild(u.firstChild)}});function mr(c,u){if(u){var p=c.firstChild;if(p&&p===c.lastChild&&p.nodeType===3){p.nodeValue=u;return}}c.textContent=u}var Hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gs=["Webkit","ms","Moz","O"];Object.keys(Hs).forEach(function(c){Gs.forEach(function(u){u=u+c.charAt(0).toUpperCase()+c.substring(1),Hs[u]=Hs[c]})});function al(c,u,p){return u==null||typeof u=="boolean"||u===""?"":p||typeof u!="number"||u===0||Hs.hasOwnProperty(c)&&Hs[c]?(""+u).trim():u+"px"}function ll(c,u){c=c.style;for(var p in u)if(u.hasOwnProperty(p)){var x=p.indexOf("--")===0,S=al(p,u[p],x);p==="float"&&(p="cssFloat"),x?c.setProperty(p,S):c[p]=S}}var cl=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function H(c,u){if(u){if(cl[c]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(n(137,c));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(n(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(n(61))}if(u.style!=null&&typeof u.style!="object")throw Error(n(62))}}function Ie(c,u){if(c.indexOf("-")===-1)return typeof u.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fe=null;function Me(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ke=null,Dt=null,jt=null;function Ks(c){if(c=bd(c)){if(typeof Ke!="function")throw Error(n(280));var u=c.stateNode;u&&(u=Rh(u),Ke(c.stateNode,c.type,u))}}function Ye(c){Dt?jt?jt.push(c):jt=[c]:Dt=c}function St(){if(Dt){var c=Dt,u=jt;if(jt=Dt=null,Ks(c),u)for(c=0;c<u.length;c++)Ks(u[c])}}function Xt(c,u){return c(u)}function vn(){}var ds=!1;function At(c,u,p){if(ds)return c(u,p);ds=!0;try{return Xt(c,u,p)}finally{ds=!1,(Dt!==null||jt!==null)&&(vn(),St())}}function Nn(c,u){var p=c.stateNode;if(p===null)return null;var x=Rh(p);if(x===null)return null;p=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(c=c.type,x=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!x;break e;default:c=!1}if(c)return null;if(p&&typeof p!="function")throw Error(n(231,u,typeof p));return p}var ro=!1;if(l)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){ro=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{ro=!1}function Ar(c,u,p,x,S,C,R,F,z){var ne=Array.prototype.slice.call(arguments,3);try{u.apply(p,ne)}catch(ye){this.onError(ye)}}var so=!1,Wr=null,td=!1,sg=null,mM={onError:function(c){so=!0,Wr=c}};function fM(c,u,p,x,S,C,R,F,z){so=!1,Wr=null,Ar.apply(mM,arguments)}function pM(c,u,p,x,S,C,R,F,z){if(fM.apply(this,arguments),so){if(so){var ne=Wr;so=!1,Wr=null}else throw Error(n(198));td||(td=!0,sg=ne)}}function ia(c){var u=c,p=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(p=u.return),c=u.return;while(c)}return u.tag===3?p:null}function bS(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function wS(c){if(ia(c)!==c)throw Error(n(188))}function gM(c){var u=c.alternate;if(!u){if(u=ia(c),u===null)throw Error(n(188));return u!==c?null:c}for(var p=c,x=u;;){var S=p.return;if(S===null)break;var C=S.alternate;if(C===null){if(x=S.return,x!==null){p=x;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===p)return wS(S),c;if(C===x)return wS(S),u;C=C.sibling}throw Error(n(188))}if(p.return!==x.return)p=S,x=C;else{for(var R=!1,F=S.child;F;){if(F===p){R=!0,p=S,x=C;break}if(F===x){R=!0,x=S,p=C;break}F=F.sibling}if(!R){for(F=C.child;F;){if(F===p){R=!0,p=C,x=S;break}if(F===x){R=!0,x=C,p=S;break}F=F.sibling}if(!R)throw Error(n(189))}}if(p.alternate!==x)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?c:u}function SS(c){return c=gM(c),c!==null?kS(c):null}function kS(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var u=kS(c);if(u!==null)return u;c=c.sibling}return null}var jS=e.unstable_scheduleCallback,CS=e.unstable_cancelCallback,vM=e.unstable_shouldYield,xM=e.unstable_requestPaint,Qt=e.unstable_now,yM=e.unstable_getCurrentPriorityLevel,ig=e.unstable_ImmediatePriority,TS=e.unstable_UserBlockingPriority,uh=e.unstable_NormalPriority,bM=e.unstable_LowPriority,NS=e.unstable_IdlePriority,hh=null,Js=null;function wM(c){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(hh,c,void 0,(c.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:jM,SM=Math.log,kM=Math.LN2;function jM(c){return c>>>=0,c===0?32:31-(SM(c)/kM|0)|0}var mh=64,fh=4194304;function nd(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function ph(c,u){var p=c.pendingLanes;if(p===0)return 0;var x=0,S=c.suspendedLanes,C=c.pingedLanes,R=p&268435455;if(R!==0){var F=R&~S;F!==0?x=nd(F):(C&=R,C!==0&&(x=nd(C)))}else R=p&~S,R!==0?x=nd(R):C!==0&&(x=nd(C));if(x===0)return 0;if(u!==0&&u!==x&&(u&S)===0&&(S=x&-x,C=u&-u,S>=C||S===16&&(C&4194240)!==0))return u;if((x&4)!==0&&(x|=p&16),u=c.entangledLanes,u!==0)for(c=c.entanglements,u&=x;0<u;)p=31-us(u),S=1<<p,x|=c[p],u&=~S;return x}function CM(c,u){switch(c){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TM(c,u){for(var p=c.suspendedLanes,x=c.pingedLanes,S=c.expirationTimes,C=c.pendingLanes;0<C;){var R=31-us(C),F=1<<R,z=S[R];z===-1?((F&p)===0||(F&x)!==0)&&(S[R]=CM(F,u)):z<=u&&(c.expiredLanes|=F),C&=~F}}function og(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ES(){var c=mh;return mh<<=1,(mh&4194240)===0&&(mh=64),c}function ag(c){for(var u=[],p=0;31>p;p++)u.push(c);return u}function rd(c,u,p){c.pendingLanes|=u,u!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,u=31-us(u),c[u]=p}function NM(c,u){var p=c.pendingLanes&~u;c.pendingLanes=u,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=u,c.mutableReadLanes&=u,c.entangledLanes&=u,u=c.entanglements;var x=c.eventTimes;for(c=c.expirationTimes;0<p;){var S=31-us(p),C=1<<S;u[S]=0,x[S]=-1,c[S]=-1,p&=~C}}function lg(c,u){var p=c.entangledLanes|=u;for(c=c.entanglements;p;){var x=31-us(p),S=1<<x;S&u|c[x]&u&&(c[x]|=u),p&=~S}}var bt=0;function PS(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var _S,cg,RS,AS,IS,dg=!1,gh=[],io=null,oo=null,ao=null,sd=new Map,id=new Map,lo=[],EM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OS(c,u){switch(c){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":sd.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(u.pointerId)}}function od(c,u,p,x,S,C){return c===null||c.nativeEvent!==C?(c={blockedOn:u,domEventName:p,eventSystemFlags:x,nativeEvent:C,targetContainers:[S]},u!==null&&(u=bd(u),u!==null&&cg(u)),c):(c.eventSystemFlags|=x,u=c.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),c)}function PM(c,u,p,x,S){switch(u){case"focusin":return io=od(io,c,u,p,x,S),!0;case"dragenter":return oo=od(oo,c,u,p,x,S),!0;case"mouseover":return ao=od(ao,c,u,p,x,S),!0;case"pointerover":var C=S.pointerId;return sd.set(C,od(sd.get(C)||null,c,u,p,x,S)),!0;case"gotpointercapture":return C=S.pointerId,id.set(C,od(id.get(C)||null,c,u,p,x,S)),!0}return!1}function MS(c){var u=oa(c.target);if(u!==null){var p=ia(u);if(p!==null){if(u=p.tag,u===13){if(u=bS(p),u!==null){c.blockedOn=u,IS(c.priority,function(){RS(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){c.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}c.blockedOn=null}function vh(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var p=hg(c.domEventName,c.eventSystemFlags,u[0],c.nativeEvent);if(p===null){p=c.nativeEvent;var x=new p.constructor(p.type,p);Fe=x,p.target.dispatchEvent(x),Fe=null}else return u=bd(p),u!==null&&cg(u),c.blockedOn=p,!1;u.shift()}return!0}function DS(c,u,p){vh(c)&&p.delete(u)}function _M(){dg=!1,io!==null&&vh(io)&&(io=null),oo!==null&&vh(oo)&&(oo=null),ao!==null&&vh(ao)&&(ao=null),sd.forEach(DS),id.forEach(DS)}function ad(c,u){c.blockedOn===u&&(c.blockedOn=null,dg||(dg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_M)))}function ld(c){function u(S){return ad(S,c)}if(0<gh.length){ad(gh[0],c);for(var p=1;p<gh.length;p++){var x=gh[p];x.blockedOn===c&&(x.blockedOn=null)}}for(io!==null&&ad(io,c),oo!==null&&ad(oo,c),ao!==null&&ad(ao,c),sd.forEach(u),id.forEach(u),p=0;p<lo.length;p++)x=lo[p],x.blockedOn===c&&(x.blockedOn=null);for(;0<lo.length&&(p=lo[0],p.blockedOn===null);)MS(p),p.blockedOn===null&&lo.shift()}var dl=P.ReactCurrentBatchConfig,xh=!0;function RM(c,u,p,x){var S=bt,C=dl.transition;dl.transition=null;try{bt=1,ug(c,u,p,x)}finally{bt=S,dl.transition=C}}function AM(c,u,p,x){var S=bt,C=dl.transition;dl.transition=null;try{bt=4,ug(c,u,p,x)}finally{bt=S,dl.transition=C}}function ug(c,u,p,x){if(xh){var S=hg(c,u,p,x);if(S===null)Pg(c,u,x,yh,p),OS(c,x);else if(PM(S,c,u,p,x))x.stopPropagation();else if(OS(c,x),u&4&&-1<EM.indexOf(c)){for(;S!==null;){var C=bd(S);if(C!==null&&_S(C),C=hg(c,u,p,x),C===null&&Pg(c,u,x,yh,p),C===S)break;S=C}S!==null&&x.stopPropagation()}else Pg(c,u,x,null,p)}}var yh=null;function hg(c,u,p,x){if(yh=null,c=Me(x),c=oa(c),c!==null)if(u=ia(c),u===null)c=null;else if(p=u.tag,p===13){if(c=bS(u),c!==null)return c;c=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null);return yh=c,null}function LS(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yM()){case ig:return 1;case TS:return 4;case uh:case bM:return 16;case NS:return 536870912;default:return 16}default:return 16}}var co=null,mg=null,bh=null;function US(){if(bh)return bh;var c,u=mg,p=u.length,x,S="value"in co?co.value:co.textContent,C=S.length;for(c=0;c<p&&u[c]===S[c];c++);var R=p-c;for(x=1;x<=R&&u[p-x]===S[C-x];x++);return bh=S.slice(c,1<x?1-x:void 0)}function wh(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function Sh(){return!0}function FS(){return!1}function Ir(c){function u(p,x,S,C,R){this._reactName=p,this._targetInst=S,this.type=x,this.nativeEvent=C,this.target=R,this.currentTarget=null;for(var F in c)c.hasOwnProperty(F)&&(p=c[F],this[F]=p?p(C):C[F]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Sh:FS,this.isPropagationStopped=FS,this}return le(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Sh)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Sh)},persist:function(){},isPersistent:Sh}),u}var ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=Ir(ul),cd=le({},ul,{view:0,detail:0}),IM=Ir(cd),pg,gg,dd,kh=le({},cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xg,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==dd&&(dd&&c.type==="mousemove"?(pg=c.screenX-dd.screenX,gg=c.screenY-dd.screenY):gg=pg=0,dd=c),pg)},movementY:function(c){return"movementY"in c?c.movementY:gg}}),VS=Ir(kh),OM=le({},kh,{dataTransfer:0}),MM=Ir(OM),DM=le({},cd,{relatedTarget:0}),vg=Ir(DM),LM=le({},ul,{animationName:0,elapsedTime:0,pseudoElement:0}),UM=Ir(LM),FM=le({},ul,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),VM=Ir(FM),BM=le({},ul,{data:0}),BS=Ir(BM),$M={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WM(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=qM[c])?!!u[c]:!1}function xg(){return WM}var HM=le({},cd,{key:function(c){if(c.key){var u=$M[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=wh(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?zM[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xg,charCode:function(c){return c.type==="keypress"?wh(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?wh(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),GM=Ir(HM),KM=le({},kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$S=Ir(KM),JM=le({},cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xg}),YM=Ir(JM),XM=le({},ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),QM=Ir(XM),ZM=le({},kh,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),eD=Ir(ZM),tD=[9,13,27,32],yg=l&&"CompositionEvent"in window,ud=null;l&&"documentMode"in document&&(ud=document.documentMode);var nD=l&&"TextEvent"in window&&!ud,zS=l&&(!yg||ud&&8<ud&&11>=ud),qS=" ",WS=!1;function HS(c,u){switch(c){case"keyup":return tD.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GS(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var hl=!1;function rD(c,u){switch(c){case"compositionend":return GS(u);case"keypress":return u.which!==32?null:(WS=!0,qS);case"textInput":return c=u.data,c===qS&&WS?null:c;default:return null}}function sD(c,u){if(hl)return c==="compositionend"||!yg&&HS(c,u)?(c=US(),bh=mg=co=null,hl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return zS&&u.locale!=="ko"?null:u.data;default:return null}}var iD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KS(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!iD[c.type]:u==="textarea"}function JS(c,u,p,x){Ye(x),u=Eh(u,"onChange"),0<u.length&&(p=new fg("onChange","change",null,p,x),c.push({event:p,listeners:u}))}var hd=null,md=null;function oD(c){mk(c,0)}function jh(c){var u=vl(c);if(me(u))return c}function aD(c,u){if(c==="change")return u}var YS=!1;if(l){var bg;if(l){var wg="oninput"in document;if(!wg){var XS=document.createElement("div");XS.setAttribute("oninput","return;"),wg=typeof XS.oninput=="function"}bg=wg}else bg=!1;YS=bg&&(!document.documentMode||9<document.documentMode)}function QS(){hd&&(hd.detachEvent("onpropertychange",ZS),md=hd=null)}function ZS(c){if(c.propertyName==="value"&&jh(md)){var u=[];JS(u,md,c,Me(c)),At(oD,u)}}function lD(c,u,p){c==="focusin"?(QS(),hd=u,md=p,hd.attachEvent("onpropertychange",ZS)):c==="focusout"&&QS()}function cD(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return jh(md)}function dD(c,u){if(c==="click")return jh(u)}function uD(c,u){if(c==="input"||c==="change")return jh(u)}function hD(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var hs=typeof Object.is=="function"?Object.is:hD;function fd(c,u){if(hs(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var p=Object.keys(c),x=Object.keys(u);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var S=p[x];if(!d.call(u,S)||!hs(c[S],u[S]))return!1}return!0}function ek(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function tk(c,u){var p=ek(c);c=0;for(var x;p;){if(p.nodeType===3){if(x=c+p.textContent.length,c<=u&&x>=u)return{node:p,offset:u-c};c=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=ek(p)}}function nk(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?nk(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function rk(){for(var c=window,u=it();u instanceof c.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)c=u.contentWindow;else break;u=it(c.document)}return u}function Sg(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}function mD(c){var u=rk(),p=c.focusedElem,x=c.selectionRange;if(u!==p&&p&&p.ownerDocument&&nk(p.ownerDocument.documentElement,p)){if(x!==null&&Sg(p)){if(u=x.start,c=x.end,c===void 0&&(c=u),"selectionStart"in p)p.selectionStart=u,p.selectionEnd=Math.min(c,p.value.length);else if(c=(u=p.ownerDocument||document)&&u.defaultView||window,c.getSelection){c=c.getSelection();var S=p.textContent.length,C=Math.min(x.start,S);x=x.end===void 0?C:Math.min(x.end,S),!c.extend&&C>x&&(S=x,x=C,C=S),S=tk(p,C);var R=tk(p,x);S&&R&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==R.node||c.focusOffset!==R.offset)&&(u=u.createRange(),u.setStart(S.node,S.offset),c.removeAllRanges(),C>x?(c.addRange(u),c.extend(R.node,R.offset)):(u.setEnd(R.node,R.offset),c.addRange(u)))}}for(u=[],c=p;c=c.parentNode;)c.nodeType===1&&u.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<u.length;p++)c=u[p],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var fD=l&&"documentMode"in document&&11>=document.documentMode,ml=null,kg=null,pd=null,jg=!1;function sk(c,u,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;jg||ml==null||ml!==it(x)||(x=ml,"selectionStart"in x&&Sg(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),pd&&fd(pd,x)||(pd=x,x=Eh(kg,"onSelect"),0<x.length&&(u=new fg("onSelect","select",null,u,p),c.push({event:u,listeners:x}),u.target=ml)))}function Ch(c,u){var p={};return p[c.toLowerCase()]=u.toLowerCase(),p["Webkit"+c]="webkit"+u,p["Moz"+c]="moz"+u,p}var fl={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionend:Ch("Transition","TransitionEnd")},Cg={},ik={};l&&(ik=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Th(c){if(Cg[c])return Cg[c];if(!fl[c])return c;var u=fl[c],p;for(p in u)if(u.hasOwnProperty(p)&&p in ik)return Cg[c]=u[p];return c}var ok=Th("animationend"),ak=Th("animationiteration"),lk=Th("animationstart"),ck=Th("transitionend"),dk=new Map,uk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(c,u){dk.set(c,u),o(u,[c])}for(var Tg=0;Tg<uk.length;Tg++){var Ng=uk[Tg],pD=Ng.toLowerCase(),gD=Ng[0].toUpperCase()+Ng.slice(1);uo(pD,"on"+gD)}uo(ok,"onAnimationEnd"),uo(ak,"onAnimationIteration"),uo(lk,"onAnimationStart"),uo("dblclick","onDoubleClick"),uo("focusin","onFocus"),uo("focusout","onBlur"),uo(ck,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vD=new Set("cancel close invalid load scroll toggle".split(" ").concat(gd));function hk(c,u,p){var x=c.type||"unknown-event";c.currentTarget=p,pM(x,u,void 0,c),c.currentTarget=null}function mk(c,u){u=(u&4)!==0;for(var p=0;p<c.length;p++){var x=c[p],S=x.event;x=x.listeners;e:{var C=void 0;if(u)for(var R=x.length-1;0<=R;R--){var F=x[R],z=F.instance,ne=F.currentTarget;if(F=F.listener,z!==C&&S.isPropagationStopped())break e;hk(S,F,ne),C=z}else for(R=0;R<x.length;R++){if(F=x[R],z=F.instance,ne=F.currentTarget,F=F.listener,z!==C&&S.isPropagationStopped())break e;hk(S,F,ne),C=z}}}if(td)throw c=sg,td=!1,sg=null,c}function Pt(c,u){var p=u[Mg];p===void 0&&(p=u[Mg]=new Set);var x=c+"__bubble";p.has(x)||(fk(u,c,2,!1),p.add(x))}function Eg(c,u,p){var x=0;u&&(x|=4),fk(p,c,x,u)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function vd(c){if(!c[Nh]){c[Nh]=!0,r.forEach(function(p){p!=="selectionchange"&&(vD.has(p)||Eg(p,!1,c),Eg(p,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[Nh]||(u[Nh]=!0,Eg("selectionchange",!1,u))}}function fk(c,u,p,x){switch(LS(u)){case 1:var S=RM;break;case 4:S=AM;break;default:S=ug}p=S.bind(null,u,p,c),S=void 0,!ro||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),x?S!==void 0?c.addEventListener(u,p,{capture:!0,passive:S}):c.addEventListener(u,p,!0):S!==void 0?c.addEventListener(u,p,{passive:S}):c.addEventListener(u,p,!1)}function Pg(c,u,p,x,S){var C=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var R=x.tag;if(R===3||R===4){var F=x.stateNode.containerInfo;if(F===S||F.nodeType===8&&F.parentNode===S)break;if(R===4)for(R=x.return;R!==null;){var z=R.tag;if((z===3||z===4)&&(z=R.stateNode.containerInfo,z===S||z.nodeType===8&&z.parentNode===S))return;R=R.return}for(;F!==null;){if(R=oa(F),R===null)return;if(z=R.tag,z===5||z===6){x=C=R;continue e}F=F.parentNode}}x=x.return}At(function(){var ne=C,ye=Me(p),be=[];e:{var xe=dk.get(c);if(xe!==void 0){var Ae=fg,De=c;switch(c){case"keypress":if(wh(p)===0)break e;case"keydown":case"keyup":Ae=GM;break;case"focusin":De="focus",Ae=vg;break;case"focusout":De="blur",Ae=vg;break;case"beforeblur":case"afterblur":Ae=vg;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=VS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=MM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=YM;break;case ok:case ak:case lk:Ae=UM;break;case ck:Ae=QM;break;case"scroll":Ae=IM;break;case"wheel":Ae=eD;break;case"copy":case"cut":case"paste":Ae=VM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=$S}var Ve=(u&4)!==0,Zt=!Ve&&c==="scroll",J=Ve?xe!==null?xe+"Capture":null:xe;Ve=[];for(var W=ne,Q;W!==null;){Q=W;var ke=Q.stateNode;if(Q.tag===5&&ke!==null&&(Q=ke,J!==null&&(ke=Nn(W,J),ke!=null&&Ve.push(xd(W,ke,Q)))),Zt)break;W=W.return}0<Ve.length&&(xe=new Ae(xe,De,null,p,ye),be.push({event:xe,listeners:Ve}))}}if((u&7)===0){e:{if(xe=c==="mouseover"||c==="pointerover",Ae=c==="mouseout"||c==="pointerout",xe&&p!==Fe&&(De=p.relatedTarget||p.fromElement)&&(oa(De)||De[ki]))break e;if((Ae||xe)&&(xe=ye.window===ye?ye:(xe=ye.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ae?(De=p.relatedTarget||p.toElement,Ae=ne,De=De?oa(De):null,De!==null&&(Zt=ia(De),De!==Zt||De.tag!==5&&De.tag!==6)&&(De=null)):(Ae=null,De=ne),Ae!==De)){if(Ve=VS,ke="onMouseLeave",J="onMouseEnter",W="mouse",(c==="pointerout"||c==="pointerover")&&(Ve=$S,ke="onPointerLeave",J="onPointerEnter",W="pointer"),Zt=Ae==null?xe:vl(Ae),Q=De==null?xe:vl(De),xe=new Ve(ke,W+"leave",Ae,p,ye),xe.target=Zt,xe.relatedTarget=Q,ke=null,oa(ye)===ne&&(Ve=new Ve(J,W+"enter",De,p,ye),Ve.target=Q,Ve.relatedTarget=Zt,ke=Ve),Zt=ke,Ae&&De)t:{for(Ve=Ae,J=De,W=0,Q=Ve;Q;Q=pl(Q))W++;for(Q=0,ke=J;ke;ke=pl(ke))Q++;for(;0<W-Q;)Ve=pl(Ve),W--;for(;0<Q-W;)J=pl(J),Q--;for(;W--;){if(Ve===J||J!==null&&Ve===J.alternate)break t;Ve=pl(Ve),J=pl(J)}Ve=null}else Ve=null;Ae!==null&&pk(be,xe,Ae,Ve,!1),De!==null&&Zt!==null&&pk(be,Zt,De,Ve,!0)}}e:{if(xe=ne?vl(ne):window,Ae=xe.nodeName&&xe.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&xe.type==="file")var Be=aD;else if(KS(xe))if(YS)Be=uD;else{Be=cD;var We=lD}else(Ae=xe.nodeName)&&Ae.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(Be=dD);if(Be&&(Be=Be(c,ne))){JS(be,Be,p,ye);break e}We&&We(c,xe,ne),c==="focusout"&&(We=xe._wrapperState)&&We.controlled&&xe.type==="number"&&Tn(xe,"number",xe.value)}switch(We=ne?vl(ne):window,c){case"focusin":(KS(We)||We.contentEditable==="true")&&(ml=We,kg=ne,pd=null);break;case"focusout":pd=kg=ml=null;break;case"mousedown":jg=!0;break;case"contextmenu":case"mouseup":case"dragend":jg=!1,sk(be,p,ye);break;case"selectionchange":if(fD)break;case"keydown":case"keyup":sk(be,p,ye)}var He;if(yg)e:{switch(c){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else hl?HS(c,p)&&(Qe="onCompositionEnd"):c==="keydown"&&p.keyCode===229&&(Qe="onCompositionStart");Qe&&(zS&&p.locale!=="ko"&&(hl||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&hl&&(He=US()):(co=ye,mg="value"in co?co.value:co.textContent,hl=!0)),We=Eh(ne,Qe),0<We.length&&(Qe=new BS(Qe,c,null,p,ye),be.push({event:Qe,listeners:We}),He?Qe.data=He:(He=GS(p),He!==null&&(Qe.data=He)))),(He=nD?rD(c,p):sD(c,p))&&(ne=Eh(ne,"onBeforeInput"),0<ne.length&&(ye=new BS("onBeforeInput","beforeinput",null,p,ye),be.push({event:ye,listeners:ne}),ye.data=He))}mk(be,u)})}function xd(c,u,p){return{instance:c,listener:u,currentTarget:p}}function Eh(c,u){for(var p=u+"Capture",x=[];c!==null;){var S=c,C=S.stateNode;S.tag===5&&C!==null&&(S=C,C=Nn(c,p),C!=null&&x.unshift(xd(c,C,S)),C=Nn(c,u),C!=null&&x.push(xd(c,C,S))),c=c.return}return x}function pl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function pk(c,u,p,x,S){for(var C=u._reactName,R=[];p!==null&&p!==x;){var F=p,z=F.alternate,ne=F.stateNode;if(z!==null&&z===x)break;F.tag===5&&ne!==null&&(F=ne,S?(z=Nn(p,C),z!=null&&R.unshift(xd(p,z,F))):S||(z=Nn(p,C),z!=null&&R.push(xd(p,z,F)))),p=p.return}R.length!==0&&c.push({event:u,listeners:R})}var xD=/\r\n?/g,yD=/\u0000|\uFFFD/g;function gk(c){return(typeof c=="string"?c:""+c).replace(xD,`
`).replace(yD,"")}function Ph(c,u,p){if(u=gk(u),gk(c)!==u&&p)throw Error(n(425))}function _h(){}var _g=null,Rg=null;function Ag(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ig=typeof setTimeout=="function"?setTimeout:void 0,bD=typeof clearTimeout=="function"?clearTimeout:void 0,vk=typeof Promise=="function"?Promise:void 0,wD=typeof queueMicrotask=="function"?queueMicrotask:typeof vk<"u"?function(c){return vk.resolve(null).then(c).catch(SD)}:Ig;function SD(c){setTimeout(function(){throw c})}function Og(c,u){var p=u,x=0;do{var S=p.nextSibling;if(c.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(x===0){c.removeChild(S),ld(u);return}x--}else p!=="$"&&p!=="$?"&&p!=="$!"||x++;p=S}while(p);ld(u)}function ho(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return c}function xk(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var p=c.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return c;u--}else p==="/$"&&u++}c=c.previousSibling}return null}var gl=Math.random().toString(36).slice(2),Ys="__reactFiber$"+gl,yd="__reactProps$"+gl,ki="__reactContainer$"+gl,Mg="__reactEvents$"+gl,kD="__reactListeners$"+gl,jD="__reactHandles$"+gl;function oa(c){var u=c[Ys];if(u)return u;for(var p=c.parentNode;p;){if(u=p[ki]||p[Ys]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(c=xk(c);c!==null;){if(p=c[Ys])return p;c=xk(c)}return u}c=p,p=c.parentNode}return null}function bd(c){return c=c[Ys]||c[ki],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function vl(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(n(33))}function Rh(c){return c[yd]||null}var Dg=[],xl=-1;function mo(c){return{current:c}}function _t(c){0>xl||(c.current=Dg[xl],Dg[xl]=null,xl--)}function Ct(c,u){xl++,Dg[xl]=c.current,c.current=u}var fo={},Wn=mo(fo),fr=mo(!1),aa=fo;function yl(c,u){var p=c.type.contextTypes;if(!p)return fo;var x=c.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===u)return x.__reactInternalMemoizedMaskedChildContext;var S={},C;for(C in p)S[C]=u[C];return x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=u,c.__reactInternalMemoizedMaskedChildContext=S),S}function pr(c){return c=c.childContextTypes,c!=null}function Ah(){_t(fr),_t(Wn)}function yk(c,u,p){if(Wn.current!==fo)throw Error(n(168));Ct(Wn,u),Ct(fr,p)}function bk(c,u,p){var x=c.stateNode;if(u=u.childContextTypes,typeof x.getChildContext!="function")return p;x=x.getChildContext();for(var S in x)if(!(S in u))throw Error(n(108,re(c)||"Unknown",S));return le({},p,x)}function Ih(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||fo,aa=Wn.current,Ct(Wn,c),Ct(fr,fr.current),!0}function wk(c,u,p){var x=c.stateNode;if(!x)throw Error(n(169));p?(c=bk(c,u,aa),x.__reactInternalMemoizedMergedChildContext=c,_t(fr),_t(Wn),Ct(Wn,c)):_t(fr),Ct(fr,p)}var ji=null,Oh=!1,Lg=!1;function Sk(c){ji===null?ji=[c]:ji.push(c)}function CD(c){Oh=!0,Sk(c)}function po(){if(!Lg&&ji!==null){Lg=!0;var c=0,u=bt;try{var p=ji;for(bt=1;c<p.length;c++){var x=p[c];do x=x(!0);while(x!==null)}ji=null,Oh=!1}catch(S){throw ji!==null&&(ji=ji.slice(c+1)),jS(ig,po),S}finally{bt=u,Lg=!1}}return null}var bl=[],wl=0,Mh=null,Dh=0,Hr=[],Gr=0,la=null,Ci=1,Ti="";function ca(c,u){bl[wl++]=Dh,bl[wl++]=Mh,Mh=c,Dh=u}function kk(c,u,p){Hr[Gr++]=Ci,Hr[Gr++]=Ti,Hr[Gr++]=la,la=c;var x=Ci;c=Ti;var S=32-us(x)-1;x&=~(1<<S),p+=1;var C=32-us(u)+S;if(30<C){var R=S-S%5;C=(x&(1<<R)-1).toString(32),x>>=R,S-=R,Ci=1<<32-us(u)+S|p<<S|x,Ti=C+c}else Ci=1<<C|p<<S|x,Ti=c}function Ug(c){c.return!==null&&(ca(c,1),kk(c,1,0))}function Fg(c){for(;c===Mh;)Mh=bl[--wl],bl[wl]=null,Dh=bl[--wl],bl[wl]=null;for(;c===la;)la=Hr[--Gr],Hr[Gr]=null,Ti=Hr[--Gr],Hr[Gr]=null,Ci=Hr[--Gr],Hr[Gr]=null}var Or=null,Mr=null,It=!1,ms=null;function jk(c,u){var p=Xr(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=c,u=c.deletions,u===null?(c.deletions=[p],c.flags|=16):u.push(p)}function Ck(c,u){switch(c.tag){case 5:var p=c.type;return u=u.nodeType!==1||p.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(c.stateNode=u,Or=c,Mr=ho(u.firstChild),!0):!1;case 6:return u=c.pendingProps===""||u.nodeType!==3?null:u,u!==null?(c.stateNode=u,Or=c,Mr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(p=la!==null?{id:Ci,overflow:Ti}:null,c.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=Xr(18,null,null,0),p.stateNode=u,p.return=c,c.child=p,Or=c,Mr=null,!0):!1;default:return!1}}function Vg(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Bg(c){if(It){var u=Mr;if(u){var p=u;if(!Ck(c,u)){if(Vg(c))throw Error(n(418));u=ho(p.nextSibling);var x=Or;u&&Ck(c,u)?jk(x,p):(c.flags=c.flags&-4097|2,It=!1,Or=c)}}else{if(Vg(c))throw Error(n(418));c.flags=c.flags&-4097|2,It=!1,Or=c}}}function Tk(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Or=c}function Lh(c){if(c!==Or)return!1;if(!It)return Tk(c),It=!0,!1;var u;if((u=c.tag!==3)&&!(u=c.tag!==5)&&(u=c.type,u=u!=="head"&&u!=="body"&&!Ag(c.type,c.memoizedProps)),u&&(u=Mr)){if(Vg(c))throw Nk(),Error(n(418));for(;u;)jk(c,u),u=ho(u.nextSibling)}if(Tk(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8){var p=c.data;if(p==="/$"){if(u===0){Mr=ho(c.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++}c=c.nextSibling}Mr=null}}else Mr=Or?ho(c.stateNode.nextSibling):null;return!0}function Nk(){for(var c=Mr;c;)c=ho(c.nextSibling)}function Sl(){Mr=Or=null,It=!1}function $g(c){ms===null?ms=[c]:ms.push(c)}var TD=P.ReactCurrentBatchConfig;function wd(c,u,p){if(c=p.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var x=p.stateNode}if(!x)throw Error(n(147,c));var S=x,C=""+c;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===C?u.ref:(u=function(R){var F=S.refs;R===null?delete F[C]:F[C]=R},u._stringRef=C,u)}if(typeof c!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,c))}return c}function Uh(c,u){throw c=Object.prototype.toString.call(u),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c))}function Ek(c){var u=c._init;return u(c._payload)}function Pk(c){function u(J,W){if(c){var Q=J.deletions;Q===null?(J.deletions=[W],J.flags|=16):Q.push(W)}}function p(J,W){if(!c)return null;for(;W!==null;)u(J,W),W=W.sibling;return null}function x(J,W){for(J=new Map;W!==null;)W.key!==null?J.set(W.key,W):J.set(W.index,W),W=W.sibling;return J}function S(J,W){return J=ko(J,W),J.index=0,J.sibling=null,J}function C(J,W,Q){return J.index=Q,c?(Q=J.alternate,Q!==null?(Q=Q.index,Q<W?(J.flags|=2,W):Q):(J.flags|=2,W)):(J.flags|=1048576,W)}function R(J){return c&&J.alternate===null&&(J.flags|=2),J}function F(J,W,Q,ke){return W===null||W.tag!==6?(W=Iv(Q,J.mode,ke),W.return=J,W):(W=S(W,Q),W.return=J,W)}function z(J,W,Q,ke){var Be=Q.type;return Be===I?ye(J,W,Q.props.children,ke,Q.key):W!==null&&(W.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===ae&&Ek(Be)===W.type)?(ke=S(W,Q.props),ke.ref=wd(J,W,Q),ke.return=J,ke):(ke=lm(Q.type,Q.key,Q.props,null,J.mode,ke),ke.ref=wd(J,W,Q),ke.return=J,ke)}function ne(J,W,Q,ke){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=Ov(Q,J.mode,ke),W.return=J,W):(W=S(W,Q.children||[]),W.return=J,W)}function ye(J,W,Q,ke,Be){return W===null||W.tag!==7?(W=va(Q,J.mode,ke,Be),W.return=J,W):(W=S(W,Q),W.return=J,W)}function be(J,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Iv(""+W,J.mode,Q),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case N:return Q=lm(W.type,W.key,W.props,null,J.mode,Q),Q.ref=wd(J,null,W),Q.return=J,Q;case _:return W=Ov(W,J.mode,Q),W.return=J,W;case ae:var ke=W._init;return be(J,ke(W._payload),Q)}if(wi(W)||G(W))return W=va(W,J.mode,Q,null),W.return=J,W;Uh(J,W)}return null}function xe(J,W,Q,ke){var Be=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Be!==null?null:F(J,W,""+Q,ke);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:return Q.key===Be?z(J,W,Q,ke):null;case _:return Q.key===Be?ne(J,W,Q,ke):null;case ae:return Be=Q._init,xe(J,W,Be(Q._payload),ke)}if(wi(Q)||G(Q))return Be!==null?null:ye(J,W,Q,ke,null);Uh(J,Q)}return null}function Ae(J,W,Q,ke,Be){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return J=J.get(Q)||null,F(W,J,""+ke,Be);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case N:return J=J.get(ke.key===null?Q:ke.key)||null,z(W,J,ke,Be);case _:return J=J.get(ke.key===null?Q:ke.key)||null,ne(W,J,ke,Be);case ae:var We=ke._init;return Ae(J,W,Q,We(ke._payload),Be)}if(wi(ke)||G(ke))return J=J.get(Q)||null,ye(W,J,ke,Be,null);Uh(W,ke)}return null}function De(J,W,Q,ke){for(var Be=null,We=null,He=W,Qe=W=0,_n=null;He!==null&&Qe<Q.length;Qe++){He.index>Qe?(_n=He,He=null):_n=He.sibling;var gt=xe(J,He,Q[Qe],ke);if(gt===null){He===null&&(He=_n);break}c&&He&&gt.alternate===null&&u(J,He),W=C(gt,W,Qe),We===null?Be=gt:We.sibling=gt,We=gt,He=_n}if(Qe===Q.length)return p(J,He),It&&ca(J,Qe),Be;if(He===null){for(;Qe<Q.length;Qe++)He=be(J,Q[Qe],ke),He!==null&&(W=C(He,W,Qe),We===null?Be=He:We.sibling=He,We=He);return It&&ca(J,Qe),Be}for(He=x(J,He);Qe<Q.length;Qe++)_n=Ae(He,J,Qe,Q[Qe],ke),_n!==null&&(c&&_n.alternate!==null&&He.delete(_n.key===null?Qe:_n.key),W=C(_n,W,Qe),We===null?Be=_n:We.sibling=_n,We=_n);return c&&He.forEach(function(jo){return u(J,jo)}),It&&ca(J,Qe),Be}function Ve(J,W,Q,ke){var Be=G(Q);if(typeof Be!="function")throw Error(n(150));if(Q=Be.call(Q),Q==null)throw Error(n(151));for(var We=Be=null,He=W,Qe=W=0,_n=null,gt=Q.next();He!==null&&!gt.done;Qe++,gt=Q.next()){He.index>Qe?(_n=He,He=null):_n=He.sibling;var jo=xe(J,He,gt.value,ke);if(jo===null){He===null&&(He=_n);break}c&&He&&jo.alternate===null&&u(J,He),W=C(jo,W,Qe),We===null?Be=jo:We.sibling=jo,We=jo,He=_n}if(gt.done)return p(J,He),It&&ca(J,Qe),Be;if(He===null){for(;!gt.done;Qe++,gt=Q.next())gt=be(J,gt.value,ke),gt!==null&&(W=C(gt,W,Qe),We===null?Be=gt:We.sibling=gt,We=gt);return It&&ca(J,Qe),Be}for(He=x(J,He);!gt.done;Qe++,gt=Q.next())gt=Ae(He,J,Qe,gt.value,ke),gt!==null&&(c&&gt.alternate!==null&&He.delete(gt.key===null?Qe:gt.key),W=C(gt,W,Qe),We===null?Be=gt:We.sibling=gt,We=gt);return c&&He.forEach(function(i4){return u(J,i4)}),It&&ca(J,Qe),Be}function Zt(J,W,Q,ke){if(typeof Q=="object"&&Q!==null&&Q.type===I&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:e:{for(var Be=Q.key,We=W;We!==null;){if(We.key===Be){if(Be=Q.type,Be===I){if(We.tag===7){p(J,We.sibling),W=S(We,Q.props.children),W.return=J,J=W;break e}}else if(We.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===ae&&Ek(Be)===We.type){p(J,We.sibling),W=S(We,Q.props),W.ref=wd(J,We,Q),W.return=J,J=W;break e}p(J,We);break}else u(J,We);We=We.sibling}Q.type===I?(W=va(Q.props.children,J.mode,ke,Q.key),W.return=J,J=W):(ke=lm(Q.type,Q.key,Q.props,null,J.mode,ke),ke.ref=wd(J,W,Q),ke.return=J,J=ke)}return R(J);case _:e:{for(We=Q.key;W!==null;){if(W.key===We)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){p(J,W.sibling),W=S(W,Q.children||[]),W.return=J,J=W;break e}else{p(J,W);break}else u(J,W);W=W.sibling}W=Ov(Q,J.mode,ke),W.return=J,J=W}return R(J);case ae:return We=Q._init,Zt(J,W,We(Q._payload),ke)}if(wi(Q))return De(J,W,Q,ke);if(G(Q))return Ve(J,W,Q,ke);Uh(J,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,W!==null&&W.tag===6?(p(J,W.sibling),W=S(W,Q),W.return=J,J=W):(p(J,W),W=Iv(Q,J.mode,ke),W.return=J,J=W),R(J)):p(J,W)}return Zt}var kl=Pk(!0),_k=Pk(!1),Fh=mo(null),Vh=null,jl=null,zg=null;function qg(){zg=jl=Vh=null}function Wg(c){var u=Fh.current;_t(Fh),c._currentValue=u}function Hg(c,u,p){for(;c!==null;){var x=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),c===p)break;c=c.return}}function Cl(c,u){Vh=c,zg=jl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&u)!==0&&(gr=!0),c.firstContext=null)}function Kr(c){var u=c._currentValue;if(zg!==c)if(c={context:c,memoizedValue:u,next:null},jl===null){if(Vh===null)throw Error(n(308));jl=c,Vh.dependencies={lanes:0,firstContext:c}}else jl=jl.next=c;return u}var da=null;function Gg(c){da===null?da=[c]:da.push(c)}function Rk(c,u,p,x){var S=u.interleaved;return S===null?(p.next=p,Gg(u)):(p.next=S.next,S.next=p),u.interleaved=p,Ni(c,x)}function Ni(c,u){c.lanes|=u;var p=c.alternate;for(p!==null&&(p.lanes|=u),p=c,c=c.return;c!==null;)c.childLanes|=u,p=c.alternate,p!==null&&(p.childLanes|=u),p=c,c=c.return;return p.tag===3?p.stateNode:null}var go=!1;function Kg(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ak(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ei(c,u){return{eventTime:c,lane:u,tag:0,payload:null,callback:null,next:null}}function vo(c,u,p){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(pt&2)!==0){var S=x.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),x.pending=u,Ni(c,p)}return S=x.interleaved,S===null?(u.next=u,Gg(x)):(u.next=S.next,S.next=u),x.interleaved=u,Ni(c,p)}function Bh(c,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var x=u.lanes;x&=c.pendingLanes,p|=x,u.lanes=p,lg(c,p)}}function Ik(c,u){var p=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var S=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var R={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};C===null?S=C=R:C=C.next=R,p=p.next}while(p!==null);C===null?S=C=u:C=C.next=u}else S=C=u;p={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:x.shared,effects:x.effects},c.updateQueue=p;return}c=p.lastBaseUpdate,c===null?p.firstBaseUpdate=u:c.next=u,p.lastBaseUpdate=u}function $h(c,u,p,x){var S=c.updateQueue;go=!1;var C=S.firstBaseUpdate,R=S.lastBaseUpdate,F=S.shared.pending;if(F!==null){S.shared.pending=null;var z=F,ne=z.next;z.next=null,R===null?C=ne:R.next=ne,R=z;var ye=c.alternate;ye!==null&&(ye=ye.updateQueue,F=ye.lastBaseUpdate,F!==R&&(F===null?ye.firstBaseUpdate=ne:F.next=ne,ye.lastBaseUpdate=z))}if(C!==null){var be=S.baseState;R=0,ye=ne=z=null,F=C;do{var xe=F.lane,Ae=F.eventTime;if((x&xe)===xe){ye!==null&&(ye=ye.next={eventTime:Ae,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var De=c,Ve=F;switch(xe=u,Ae=p,Ve.tag){case 1:if(De=Ve.payload,typeof De=="function"){be=De.call(Ae,be,xe);break e}be=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ve.payload,xe=typeof De=="function"?De.call(Ae,be,xe):De,xe==null)break e;be=le({},be,xe);break e;case 2:go=!0}}F.callback!==null&&F.lane!==0&&(c.flags|=64,xe=S.effects,xe===null?S.effects=[F]:xe.push(F))}else Ae={eventTime:Ae,lane:xe,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ye===null?(ne=ye=Ae,z=be):ye=ye.next=Ae,R|=xe;if(F=F.next,F===null){if(F=S.shared.pending,F===null)break;xe=F,F=xe.next,xe.next=null,S.lastBaseUpdate=xe,S.shared.pending=null}}while(!0);if(ye===null&&(z=be),S.baseState=z,S.firstBaseUpdate=ne,S.lastBaseUpdate=ye,u=S.shared.interleaved,u!==null){S=u;do R|=S.lane,S=S.next;while(S!==u)}else C===null&&(S.shared.lanes=0);ma|=R,c.lanes=R,c.memoizedState=be}}function Ok(c,u,p){if(c=u.effects,u.effects=null,c!==null)for(u=0;u<c.length;u++){var x=c[u],S=x.callback;if(S!==null){if(x.callback=null,x=p,typeof S!="function")throw Error(n(191,S));S.call(x)}}}var Sd={},Xs=mo(Sd),kd=mo(Sd),jd=mo(Sd);function ua(c){if(c===Sd)throw Error(n(174));return c}function Jg(c,u){switch(Ct(jd,u),Ct(kd,c),Ct(Xs,Sd),c=u.nodeType,c){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:sa(null,"");break;default:c=c===8?u.parentNode:u,u=c.namespaceURI||null,c=c.tagName,u=sa(u,c)}_t(Xs),Ct(Xs,u)}function Tl(){_t(Xs),_t(kd),_t(jd)}function Mk(c){ua(jd.current);var u=ua(Xs.current),p=sa(u,c.type);u!==p&&(Ct(kd,c),Ct(Xs,p))}function Yg(c){kd.current===c&&(_t(Xs),_t(kd))}var Lt=mo(0);function zh(c){for(var u=c;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Xg=[];function Qg(){for(var c=0;c<Xg.length;c++)Xg[c]._workInProgressVersionPrimary=null;Xg.length=0}var qh=P.ReactCurrentDispatcher,Zg=P.ReactCurrentBatchConfig,ha=0,Ut=null,xn=null,En=null,Wh=!1,Cd=!1,Td=0,ND=0;function Hn(){throw Error(n(321))}function ev(c,u){if(u===null)return!1;for(var p=0;p<u.length&&p<c.length;p++)if(!hs(c[p],u[p]))return!1;return!0}function tv(c,u,p,x,S,C){if(ha=C,Ut=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,qh.current=c===null||c.memoizedState===null?RD:AD,c=p(x,S),Cd){C=0;do{if(Cd=!1,Td=0,25<=C)throw Error(n(301));C+=1,En=xn=null,u.updateQueue=null,qh.current=ID,c=p(x,S)}while(Cd)}if(qh.current=Kh,u=xn!==null&&xn.next!==null,ha=0,En=xn=Ut=null,Wh=!1,u)throw Error(n(300));return c}function nv(){var c=Td!==0;return Td=0,c}function Qs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Ut.memoizedState=En=c:En=En.next=c,En}function Jr(){if(xn===null){var c=Ut.alternate;c=c!==null?c.memoizedState:null}else c=xn.next;var u=En===null?Ut.memoizedState:En.next;if(u!==null)En=u,xn=c;else{if(c===null)throw Error(n(310));xn=c,c={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},En===null?Ut.memoizedState=En=c:En=En.next=c}return En}function Nd(c,u){return typeof u=="function"?u(c):u}function rv(c){var u=Jr(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=c;var x=xn,S=x.baseQueue,C=p.pending;if(C!==null){if(S!==null){var R=S.next;S.next=C.next,C.next=R}x.baseQueue=S=C,p.pending=null}if(S!==null){C=S.next,x=x.baseState;var F=R=null,z=null,ne=C;do{var ye=ne.lane;if((ha&ye)===ye)z!==null&&(z=z.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),x=ne.hasEagerState?ne.eagerState:c(x,ne.action);else{var be={lane:ye,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};z===null?(F=z=be,R=x):z=z.next=be,Ut.lanes|=ye,ma|=ye}ne=ne.next}while(ne!==null&&ne!==C);z===null?R=x:z.next=F,hs(x,u.memoizedState)||(gr=!0),u.memoizedState=x,u.baseState=R,u.baseQueue=z,p.lastRenderedState=x}if(c=p.interleaved,c!==null){S=c;do C=S.lane,Ut.lanes|=C,ma|=C,S=S.next;while(S!==c)}else S===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function sv(c){var u=Jr(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=c;var x=p.dispatch,S=p.pending,C=u.memoizedState;if(S!==null){p.pending=null;var R=S=S.next;do C=c(C,R.action),R=R.next;while(R!==S);hs(C,u.memoizedState)||(gr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),p.lastRenderedState=C}return[C,x]}function Dk(){}function Lk(c,u){var p=Ut,x=Jr(),S=u(),C=!hs(x.memoizedState,S);if(C&&(x.memoizedState=S,gr=!0),x=x.queue,iv(Vk.bind(null,p,x,c),[c]),x.getSnapshot!==u||C||En!==null&&En.memoizedState.tag&1){if(p.flags|=2048,Ed(9,Fk.bind(null,p,x,S,u),void 0,null),Pn===null)throw Error(n(349));(ha&30)!==0||Uk(p,u,S)}return S}function Uk(c,u,p){c.flags|=16384,c={getSnapshot:u,value:p},u=Ut.updateQueue,u===null?(u={lastEffect:null,stores:null},Ut.updateQueue=u,u.stores=[c]):(p=u.stores,p===null?u.stores=[c]:p.push(c))}function Fk(c,u,p,x){u.value=p,u.getSnapshot=x,Bk(u)&&$k(c)}function Vk(c,u,p){return p(function(){Bk(u)&&$k(c)})}function Bk(c){var u=c.getSnapshot;c=c.value;try{var p=u();return!hs(c,p)}catch{return!0}}function $k(c){var u=Ni(c,1);u!==null&&vs(u,c,1,-1)}function zk(c){var u=Qs();return typeof c=="function"&&(c=c()),u.memoizedState=u.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nd,lastRenderedState:c},u.queue=c,c=c.dispatch=_D.bind(null,Ut,c),[u.memoizedState,c]}function Ed(c,u,p,x){return c={tag:c,create:u,destroy:p,deps:x,next:null},u=Ut.updateQueue,u===null?(u={lastEffect:null,stores:null},Ut.updateQueue=u,u.lastEffect=c.next=c):(p=u.lastEffect,p===null?u.lastEffect=c.next=c:(x=p.next,p.next=c,c.next=x,u.lastEffect=c)),c}function qk(){return Jr().memoizedState}function Hh(c,u,p,x){var S=Qs();Ut.flags|=c,S.memoizedState=Ed(1|u,p,void 0,x===void 0?null:x)}function Gh(c,u,p,x){var S=Jr();x=x===void 0?null:x;var C=void 0;if(xn!==null){var R=xn.memoizedState;if(C=R.destroy,x!==null&&ev(x,R.deps)){S.memoizedState=Ed(u,p,C,x);return}}Ut.flags|=c,S.memoizedState=Ed(1|u,p,C,x)}function Wk(c,u){return Hh(8390656,8,c,u)}function iv(c,u){return Gh(2048,8,c,u)}function Hk(c,u){return Gh(4,2,c,u)}function Gk(c,u){return Gh(4,4,c,u)}function Kk(c,u){if(typeof u=="function")return c=c(),u(c),function(){u(null)};if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function Jk(c,u,p){return p=p!=null?p.concat([c]):null,Gh(4,4,Kk.bind(null,u,c),p)}function ov(){}function Yk(c,u){var p=Jr();u=u===void 0?null:u;var x=p.memoizedState;return x!==null&&u!==null&&ev(u,x[1])?x[0]:(p.memoizedState=[c,u],c)}function Xk(c,u){var p=Jr();u=u===void 0?null:u;var x=p.memoizedState;return x!==null&&u!==null&&ev(u,x[1])?x[0]:(c=c(),p.memoizedState=[c,u],c)}function Qk(c,u,p){return(ha&21)===0?(c.baseState&&(c.baseState=!1,gr=!0),c.memoizedState=p):(hs(p,u)||(p=ES(),Ut.lanes|=p,ma|=p,c.baseState=!0),u)}function ED(c,u){var p=bt;bt=p!==0&&4>p?p:4,c(!0);var x=Zg.transition;Zg.transition={};try{c(!1),u()}finally{bt=p,Zg.transition=x}}function Zk(){return Jr().memoizedState}function PD(c,u,p){var x=wo(c);if(p={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null},ej(c))tj(u,p);else if(p=Rk(c,u,p,x),p!==null){var S=nr();vs(p,c,x,S),nj(p,u,x)}}function _D(c,u,p){var x=wo(c),S={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null};if(ej(c))tj(u,S);else{var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer,C!==null))try{var R=u.lastRenderedState,F=C(R,p);if(S.hasEagerState=!0,S.eagerState=F,hs(F,R)){var z=u.interleaved;z===null?(S.next=S,Gg(u)):(S.next=z.next,z.next=S),u.interleaved=S;return}}catch{}finally{}p=Rk(c,u,S,x),p!==null&&(S=nr(),vs(p,c,x,S),nj(p,u,x))}}function ej(c){var u=c.alternate;return c===Ut||u!==null&&u===Ut}function tj(c,u){Cd=Wh=!0;var p=c.pending;p===null?u.next=u:(u.next=p.next,p.next=u),c.pending=u}function nj(c,u,p){if((p&4194240)!==0){var x=u.lanes;x&=c.pendingLanes,p|=x,u.lanes=p,lg(c,p)}}var Kh={readContext:Kr,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},RD={readContext:Kr,useCallback:function(c,u){return Qs().memoizedState=[c,u===void 0?null:u],c},useContext:Kr,useEffect:Wk,useImperativeHandle:function(c,u,p){return p=p!=null?p.concat([c]):null,Hh(4194308,4,Kk.bind(null,u,c),p)},useLayoutEffect:function(c,u){return Hh(4194308,4,c,u)},useInsertionEffect:function(c,u){return Hh(4,2,c,u)},useMemo:function(c,u){var p=Qs();return u=u===void 0?null:u,c=c(),p.memoizedState=[c,u],c},useReducer:function(c,u,p){var x=Qs();return u=p!==void 0?p(u):u,x.memoizedState=x.baseState=u,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:u},x.queue=c,c=c.dispatch=PD.bind(null,Ut,c),[x.memoizedState,c]},useRef:function(c){var u=Qs();return c={current:c},u.memoizedState=c},useState:zk,useDebugValue:ov,useDeferredValue:function(c){return Qs().memoizedState=c},useTransition:function(){var c=zk(!1),u=c[0];return c=ED.bind(null,c[1]),Qs().memoizedState=c,[u,c]},useMutableSource:function(){},useSyncExternalStore:function(c,u,p){var x=Ut,S=Qs();if(It){if(p===void 0)throw Error(n(407));p=p()}else{if(p=u(),Pn===null)throw Error(n(349));(ha&30)!==0||Uk(x,u,p)}S.memoizedState=p;var C={value:p,getSnapshot:u};return S.queue=C,Wk(Vk.bind(null,x,C,c),[c]),x.flags|=2048,Ed(9,Fk.bind(null,x,C,p,u),void 0,null),p},useId:function(){var c=Qs(),u=Pn.identifierPrefix;if(It){var p=Ti,x=Ci;p=(x&~(1<<32-us(x)-1)).toString(32)+p,u=":"+u+"R"+p,p=Td++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=ND++,u=":"+u+"r"+p.toString(32)+":";return c.memoizedState=u},unstable_isNewReconciler:!1},AD={readContext:Kr,useCallback:Yk,useContext:Kr,useEffect:iv,useImperativeHandle:Jk,useInsertionEffect:Hk,useLayoutEffect:Gk,useMemo:Xk,useReducer:rv,useRef:qk,useState:function(){return rv(Nd)},useDebugValue:ov,useDeferredValue:function(c){var u=Jr();return Qk(u,xn.memoizedState,c)},useTransition:function(){var c=rv(Nd)[0],u=Jr().memoizedState;return[c,u]},useMutableSource:Dk,useSyncExternalStore:Lk,useId:Zk,unstable_isNewReconciler:!1},ID={readContext:Kr,useCallback:Yk,useContext:Kr,useEffect:iv,useImperativeHandle:Jk,useInsertionEffect:Hk,useLayoutEffect:Gk,useMemo:Xk,useReducer:sv,useRef:qk,useState:function(){return sv(Nd)},useDebugValue:ov,useDeferredValue:function(c){var u=Jr();return xn===null?u.memoizedState=c:Qk(u,xn.memoizedState,c)},useTransition:function(){var c=sv(Nd)[0],u=Jr().memoizedState;return[c,u]},useMutableSource:Dk,useSyncExternalStore:Lk,useId:Zk,unstable_isNewReconciler:!1};function fs(c,u){if(c&&c.defaultProps){u=le({},u),c=c.defaultProps;for(var p in c)u[p]===void 0&&(u[p]=c[p]);return u}return u}function av(c,u,p,x){u=c.memoizedState,p=p(x,u),p=p==null?u:le({},u,p),c.memoizedState=p,c.lanes===0&&(c.updateQueue.baseState=p)}var Jh={isMounted:function(c){return(c=c._reactInternals)?ia(c)===c:!1},enqueueSetState:function(c,u,p){c=c._reactInternals;var x=nr(),S=wo(c),C=Ei(x,S);C.payload=u,p!=null&&(C.callback=p),u=vo(c,C,S),u!==null&&(vs(u,c,S,x),Bh(u,c,S))},enqueueReplaceState:function(c,u,p){c=c._reactInternals;var x=nr(),S=wo(c),C=Ei(x,S);C.tag=1,C.payload=u,p!=null&&(C.callback=p),u=vo(c,C,S),u!==null&&(vs(u,c,S,x),Bh(u,c,S))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var p=nr(),x=wo(c),S=Ei(p,x);S.tag=2,u!=null&&(S.callback=u),u=vo(c,S,x),u!==null&&(vs(u,c,x,p),Bh(u,c,x))}};function rj(c,u,p,x,S,C,R){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,C,R):u.prototype&&u.prototype.isPureReactComponent?!fd(p,x)||!fd(S,C):!0}function sj(c,u,p){var x=!1,S=fo,C=u.contextType;return typeof C=="object"&&C!==null?C=Kr(C):(S=pr(u)?aa:Wn.current,x=u.contextTypes,C=(x=x!=null)?yl(c,S):fo),u=new u(p,C),c.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Jh,c.stateNode=u,u._reactInternals=c,x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=C),u}function ij(c,u,p,x){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,x),u.state!==c&&Jh.enqueueReplaceState(u,u.state,null)}function lv(c,u,p,x){var S=c.stateNode;S.props=p,S.state=c.memoizedState,S.refs={},Kg(c);var C=u.contextType;typeof C=="object"&&C!==null?S.context=Kr(C):(C=pr(u)?aa:Wn.current,S.context=yl(c,C)),S.state=c.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(av(c,u,C,p),S.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(u=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),u!==S.state&&Jh.enqueueReplaceState(S,S.state,null),$h(c,p,S,x),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function Nl(c,u){try{var p="",x=u;do p+=te(x),x=x.return;while(x);var S=p}catch(C){S=`
Error generating stack: `+C.message+`
`+C.stack}return{value:c,source:u,stack:S,digest:null}}function cv(c,u,p){return{value:c,source:null,stack:p??null,digest:u??null}}function dv(c,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var OD=typeof WeakMap=="function"?WeakMap:Map;function oj(c,u,p){p=Ei(-1,p),p.tag=3,p.payload={element:null};var x=u.value;return p.callback=function(){nm||(nm=!0,Cv=x),dv(c,u)},p}function aj(c,u,p){p=Ei(-1,p),p.tag=3;var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var S=u.value;p.payload=function(){return x(S)},p.callback=function(){dv(c,u)}}var C=c.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(p.callback=function(){dv(c,u),typeof x!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})}),p}function lj(c,u,p){var x=c.pingCache;if(x===null){x=c.pingCache=new OD;var S=new Set;x.set(u,S)}else S=x.get(u),S===void 0&&(S=new Set,x.set(u,S));S.has(p)||(S.add(p),c=KD.bind(null,c,u,p),u.then(c,c))}function cj(c){do{var u;if((u=c.tag===13)&&(u=c.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return c;c=c.return}while(c!==null);return null}function dj(c,u,p,x,S){return(c.mode&1)===0?(c===u?c.flags|=65536:(c.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=Ei(-1,1),u.tag=2,vo(p,u,1))),p.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var MD=P.ReactCurrentOwner,gr=!1;function tr(c,u,p,x){u.child=c===null?_k(u,null,p,x):kl(u,c.child,p,x)}function uj(c,u,p,x,S){p=p.render;var C=u.ref;return Cl(u,S),x=tv(c,u,p,x,C,S),p=nv(),c!==null&&!gr?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~S,Pi(c,u,S)):(It&&p&&Ug(u),u.flags|=1,tr(c,u,x,S),u.child)}function hj(c,u,p,x,S){if(c===null){var C=p.type;return typeof C=="function"&&!Av(C)&&C.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=C,mj(c,u,C,x,S)):(c=lm(p.type,null,x,u,u.mode,S),c.ref=u.ref,c.return=u,u.child=c)}if(C=c.child,(c.lanes&S)===0){var R=C.memoizedProps;if(p=p.compare,p=p!==null?p:fd,p(R,x)&&c.ref===u.ref)return Pi(c,u,S)}return u.flags|=1,c=ko(C,x),c.ref=u.ref,c.return=u,u.child=c}function mj(c,u,p,x,S){if(c!==null){var C=c.memoizedProps;if(fd(C,x)&&c.ref===u.ref)if(gr=!1,u.pendingProps=x=C,(c.lanes&S)!==0)(c.flags&131072)!==0&&(gr=!0);else return u.lanes=c.lanes,Pi(c,u,S)}return uv(c,u,p,x,S)}function fj(c,u,p){var x=u.pendingProps,S=x.children,C=c!==null?c.memoizedState:null;if(x.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Pl,Dr),Dr|=p;else{if((p&1073741824)===0)return c=C!==null?C.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:c,cachePool:null,transitions:null},u.updateQueue=null,Ct(Pl,Dr),Dr|=c,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=C!==null?C.baseLanes:p,Ct(Pl,Dr),Dr|=x}else C!==null?(x=C.baseLanes|p,u.memoizedState=null):x=p,Ct(Pl,Dr),Dr|=x;return tr(c,u,S,p),u.child}function pj(c,u){var p=u.ref;(c===null&&p!==null||c!==null&&c.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function uv(c,u,p,x,S){var C=pr(p)?aa:Wn.current;return C=yl(u,C),Cl(u,S),p=tv(c,u,p,x,C,S),x=nv(),c!==null&&!gr?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~S,Pi(c,u,S)):(It&&x&&Ug(u),u.flags|=1,tr(c,u,p,S),u.child)}function gj(c,u,p,x,S){if(pr(p)){var C=!0;Ih(u)}else C=!1;if(Cl(u,S),u.stateNode===null)Xh(c,u),sj(u,p,x),lv(u,p,x,S),x=!0;else if(c===null){var R=u.stateNode,F=u.memoizedProps;R.props=F;var z=R.context,ne=p.contextType;typeof ne=="object"&&ne!==null?ne=Kr(ne):(ne=pr(p)?aa:Wn.current,ne=yl(u,ne));var ye=p.getDerivedStateFromProps,be=typeof ye=="function"||typeof R.getSnapshotBeforeUpdate=="function";be||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(F!==x||z!==ne)&&ij(u,R,x,ne),go=!1;var xe=u.memoizedState;R.state=xe,$h(u,x,R,S),z=u.memoizedState,F!==x||xe!==z||fr.current||go?(typeof ye=="function"&&(av(u,p,ye,x),z=u.memoizedState),(F=go||rj(u,p,F,x,xe,z,ne))?(be||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=z),R.props=x,R.state=z,R.context=ne,x=F):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{R=u.stateNode,Ak(c,u),F=u.memoizedProps,ne=u.type===u.elementType?F:fs(u.type,F),R.props=ne,be=u.pendingProps,xe=R.context,z=p.contextType,typeof z=="object"&&z!==null?z=Kr(z):(z=pr(p)?aa:Wn.current,z=yl(u,z));var Ae=p.getDerivedStateFromProps;(ye=typeof Ae=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(F!==be||xe!==z)&&ij(u,R,x,z),go=!1,xe=u.memoizedState,R.state=xe,$h(u,x,R,S);var De=u.memoizedState;F!==be||xe!==De||fr.current||go?(typeof Ae=="function"&&(av(u,p,Ae,x),De=u.memoizedState),(ne=go||rj(u,p,ne,x,xe,De,z)||!1)?(ye||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(x,De,z),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(x,De,z)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||F===c.memoizedProps&&xe===c.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||F===c.memoizedProps&&xe===c.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=De),R.props=x,R.state=De,R.context=z,x=ne):(typeof R.componentDidUpdate!="function"||F===c.memoizedProps&&xe===c.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||F===c.memoizedProps&&xe===c.memoizedState||(u.flags|=1024),x=!1)}return hv(c,u,p,x,C,S)}function hv(c,u,p,x,S,C){pj(c,u);var R=(u.flags&128)!==0;if(!x&&!R)return S&&wk(u,p,!1),Pi(c,u,C);x=u.stateNode,MD.current=u;var F=R&&typeof p.getDerivedStateFromError!="function"?null:x.render();return u.flags|=1,c!==null&&R?(u.child=kl(u,c.child,null,C),u.child=kl(u,null,F,C)):tr(c,u,F,C),u.memoizedState=x.state,S&&wk(u,p,!0),u.child}function vj(c){var u=c.stateNode;u.pendingContext?yk(c,u.pendingContext,u.pendingContext!==u.context):u.context&&yk(c,u.context,!1),Jg(c,u.containerInfo)}function xj(c,u,p,x,S){return Sl(),$g(S),u.flags|=256,tr(c,u,p,x),u.child}var mv={dehydrated:null,treeContext:null,retryLane:0};function fv(c){return{baseLanes:c,cachePool:null,transitions:null}}function yj(c,u,p){var x=u.pendingProps,S=Lt.current,C=!1,R=(u.flags&128)!==0,F;if((F=R)||(F=c!==null&&c.memoizedState===null?!1:(S&2)!==0),F?(C=!0,u.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),Ct(Lt,S&1),c===null)return Bg(u),c=u.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((u.mode&1)===0?u.lanes=1:c.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(R=x.children,c=x.fallback,C?(x=u.mode,C=u.child,R={mode:"hidden",children:R},(x&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=R):C=cm(R,x,0,null),c=va(c,x,p,null),C.return=u,c.return=u,C.sibling=c,u.child=C,u.child.memoizedState=fv(p),u.memoizedState=mv,c):pv(u,R));if(S=c.memoizedState,S!==null&&(F=S.dehydrated,F!==null))return DD(c,u,R,x,F,S,p);if(C){C=x.fallback,R=u.mode,S=c.child,F=S.sibling;var z={mode:"hidden",children:x.children};return(R&1)===0&&u.child!==S?(x=u.child,x.childLanes=0,x.pendingProps=z,u.deletions=null):(x=ko(S,z),x.subtreeFlags=S.subtreeFlags&14680064),F!==null?C=ko(F,C):(C=va(C,R,p,null),C.flags|=2),C.return=u,x.return=u,x.sibling=C,u.child=x,x=C,C=u.child,R=c.child.memoizedState,R=R===null?fv(p):{baseLanes:R.baseLanes|p,cachePool:null,transitions:R.transitions},C.memoizedState=R,C.childLanes=c.childLanes&~p,u.memoizedState=mv,x}return C=c.child,c=C.sibling,x=ko(C,{mode:"visible",children:x.children}),(u.mode&1)===0&&(x.lanes=p),x.return=u,x.sibling=null,c!==null&&(p=u.deletions,p===null?(u.deletions=[c],u.flags|=16):p.push(c)),u.child=x,u.memoizedState=null,x}function pv(c,u){return u=cm({mode:"visible",children:u},c.mode,0,null),u.return=c,c.child=u}function Yh(c,u,p,x){return x!==null&&$g(x),kl(u,c.child,null,p),c=pv(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function DD(c,u,p,x,S,C,R){if(p)return u.flags&256?(u.flags&=-257,x=cv(Error(n(422))),Yh(c,u,R,x)):u.memoizedState!==null?(u.child=c.child,u.flags|=128,null):(C=x.fallback,S=u.mode,x=cm({mode:"visible",children:x.children},S,0,null),C=va(C,S,R,null),C.flags|=2,x.return=u,C.return=u,x.sibling=C,u.child=x,(u.mode&1)!==0&&kl(u,c.child,null,R),u.child.memoizedState=fv(R),u.memoizedState=mv,C);if((u.mode&1)===0)return Yh(c,u,R,null);if(S.data==="$!"){if(x=S.nextSibling&&S.nextSibling.dataset,x)var F=x.dgst;return x=F,C=Error(n(419)),x=cv(C,x,void 0),Yh(c,u,R,x)}if(F=(R&c.childLanes)!==0,gr||F){if(x=Pn,x!==null){switch(R&-R){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(x.suspendedLanes|R))!==0?0:S,S!==0&&S!==C.retryLane&&(C.retryLane=S,Ni(c,S),vs(x,c,S,-1))}return Rv(),x=cv(Error(n(421))),Yh(c,u,R,x)}return S.data==="$?"?(u.flags|=128,u.child=c.child,u=JD.bind(null,c),S._reactRetry=u,null):(c=C.treeContext,Mr=ho(S.nextSibling),Or=u,It=!0,ms=null,c!==null&&(Hr[Gr++]=Ci,Hr[Gr++]=Ti,Hr[Gr++]=la,Ci=c.id,Ti=c.overflow,la=u),u=pv(u,x.children),u.flags|=4096,u)}function bj(c,u,p){c.lanes|=u;var x=c.alternate;x!==null&&(x.lanes|=u),Hg(c.return,u,p)}function gv(c,u,p,x,S){var C=c.memoizedState;C===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:S}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=x,C.tail=p,C.tailMode=S)}function wj(c,u,p){var x=u.pendingProps,S=x.revealOrder,C=x.tail;if(tr(c,u,x.children,p),x=Lt.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&bj(c,p,u);else if(c.tag===19)bj(c,p,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}if(Ct(Lt,x),(u.mode&1)===0)u.memoizedState=null;else switch(S){case"forwards":for(p=u.child,S=null;p!==null;)c=p.alternate,c!==null&&zh(c)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),gv(u,!1,S,p,C);break;case"backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(c=S.alternate,c!==null&&zh(c)===null){u.child=S;break}c=S.sibling,S.sibling=p,p=S,S=c}gv(u,!0,p,null,C);break;case"together":gv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Xh(c,u){(u.mode&1)===0&&c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2)}function Pi(c,u,p){if(c!==null&&(u.dependencies=c.dependencies),ma|=u.lanes,(p&u.childLanes)===0)return null;if(c!==null&&u.child!==c.child)throw Error(n(153));if(u.child!==null){for(c=u.child,p=ko(c,c.pendingProps),u.child=p,p.return=u;c.sibling!==null;)c=c.sibling,p=p.sibling=ko(c,c.pendingProps),p.return=u;p.sibling=null}return u.child}function LD(c,u,p){switch(u.tag){case 3:vj(u),Sl();break;case 5:Mk(u);break;case 1:pr(u.type)&&Ih(u);break;case 4:Jg(u,u.stateNode.containerInfo);break;case 10:var x=u.type._context,S=u.memoizedProps.value;Ct(Fh,x._currentValue),x._currentValue=S;break;case 13:if(x=u.memoizedState,x!==null)return x.dehydrated!==null?(Ct(Lt,Lt.current&1),u.flags|=128,null):(p&u.child.childLanes)!==0?yj(c,u,p):(Ct(Lt,Lt.current&1),c=Pi(c,u,p),c!==null?c.sibling:null);Ct(Lt,Lt.current&1);break;case 19:if(x=(p&u.childLanes)!==0,(c.flags&128)!==0){if(x)return wj(c,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ct(Lt,Lt.current),x)break;return null;case 22:case 23:return u.lanes=0,fj(c,u,p)}return Pi(c,u,p)}var Sj,vv,kj,jj;Sj=function(c,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)c.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},vv=function(){},kj=function(c,u,p,x){var S=c.memoizedProps;if(S!==x){c=u.stateNode,ua(Xs.current);var C=null;switch(p){case"input":S=yt(c,S),x=yt(c,x),C=[];break;case"select":S=le({},S,{value:void 0}),x=le({},x,{value:void 0}),C=[];break;case"textarea":S=gn(c,S),x=gn(c,x),C=[];break;default:typeof S.onClick!="function"&&typeof x.onClick=="function"&&(c.onclick=_h)}H(p,x);var R;p=null;for(ne in S)if(!x.hasOwnProperty(ne)&&S.hasOwnProperty(ne)&&S[ne]!=null)if(ne==="style"){var F=S[ne];for(R in F)F.hasOwnProperty(R)&&(p||(p={}),p[R]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(s.hasOwnProperty(ne)?C||(C=[]):(C=C||[]).push(ne,null));for(ne in x){var z=x[ne];if(F=S?.[ne],x.hasOwnProperty(ne)&&z!==F&&(z!=null||F!=null))if(ne==="style")if(F){for(R in F)!F.hasOwnProperty(R)||z&&z.hasOwnProperty(R)||(p||(p={}),p[R]="");for(R in z)z.hasOwnProperty(R)&&F[R]!==z[R]&&(p||(p={}),p[R]=z[R])}else p||(C||(C=[]),C.push(ne,p)),p=z;else ne==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,F=F?F.__html:void 0,z!=null&&F!==z&&(C=C||[]).push(ne,z)):ne==="children"?typeof z!="string"&&typeof z!="number"||(C=C||[]).push(ne,""+z):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(s.hasOwnProperty(ne)?(z!=null&&ne==="onScroll"&&Pt("scroll",c),C||F===z||(C=[])):(C=C||[]).push(ne,z))}p&&(C=C||[]).push("style",p);var ne=C;(u.updateQueue=ne)&&(u.flags|=4)}},jj=function(c,u,p,x){p!==x&&(u.flags|=4)};function Pd(c,u){if(!It)switch(c.tailMode){case"hidden":u=c.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?c.tail=null:p.sibling=null;break;case"collapsed":p=c.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function Gn(c){var u=c.alternate!==null&&c.alternate.child===c.child,p=0,x=0;if(u)for(var S=c.child;S!==null;)p|=S.lanes|S.childLanes,x|=S.subtreeFlags&14680064,x|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)p|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=x,c.childLanes=p,u}function UD(c,u,p){var x=u.pendingProps;switch(Fg(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(u),null;case 1:return pr(u.type)&&Ah(),Gn(u),null;case 3:return x=u.stateNode,Tl(),_t(fr),_t(Wn),Qg(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(c===null||c.child===null)&&(Lh(u)?u.flags|=4:c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ms!==null&&(Ev(ms),ms=null))),vv(c,u),Gn(u),null;case 5:Yg(u);var S=ua(jd.current);if(p=u.type,c!==null&&u.stateNode!=null)kj(c,u,p,x,S),c.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!x){if(u.stateNode===null)throw Error(n(166));return Gn(u),null}if(c=ua(Xs.current),Lh(u)){x=u.stateNode,p=u.type;var C=u.memoizedProps;switch(x[Ys]=u,x[yd]=C,c=(u.mode&1)!==0,p){case"dialog":Pt("cancel",x),Pt("close",x);break;case"iframe":case"object":case"embed":Pt("load",x);break;case"video":case"audio":for(S=0;S<gd.length;S++)Pt(gd[S],x);break;case"source":Pt("error",x);break;case"img":case"image":case"link":Pt("error",x),Pt("load",x);break;case"details":Pt("toggle",x);break;case"input":vt(x,C),Pt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!C.multiple},Pt("invalid",x);break;case"textarea":qr(x,C),Pt("invalid",x)}H(p,C),S=null;for(var R in C)if(C.hasOwnProperty(R)){var F=C[R];R==="children"?typeof F=="string"?x.textContent!==F&&(C.suppressHydrationWarning!==!0&&Ph(x.textContent,F,c),S=["children",F]):typeof F=="number"&&x.textContent!==""+F&&(C.suppressHydrationWarning!==!0&&Ph(x.textContent,F,c),S=["children",""+F]):s.hasOwnProperty(R)&&F!=null&&R==="onScroll"&&Pt("scroll",x)}switch(p){case"input":Ee(x),ra(x,C,!0);break;case"textarea":Ee(x),ol(x);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(x.onclick=_h)}x=S,u.updateQueue=x,x!==null&&(u.flags|=4)}else{R=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Ws(p)),c==="http://www.w3.org/1999/xhtml"?p==="script"?(c=R.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof x.is=="string"?c=R.createElement(p,{is:x.is}):(c=R.createElement(p),p==="select"&&(R=c,x.multiple?R.multiple=!0:x.size&&(R.size=x.size))):c=R.createElementNS(c,p),c[Ys]=u,c[yd]=x,Sj(c,u,!1,!1),u.stateNode=c;e:{switch(R=Ie(p,x),p){case"dialog":Pt("cancel",c),Pt("close",c),S=x;break;case"iframe":case"object":case"embed":Pt("load",c),S=x;break;case"video":case"audio":for(S=0;S<gd.length;S++)Pt(gd[S],c);S=x;break;case"source":Pt("error",c),S=x;break;case"img":case"image":case"link":Pt("error",c),Pt("load",c),S=x;break;case"details":Pt("toggle",c),S=x;break;case"input":vt(c,x),S=yt(c,x),Pt("invalid",c);break;case"option":S=x;break;case"select":c._wrapperState={wasMultiple:!!x.multiple},S=le({},x,{value:void 0}),Pt("invalid",c);break;case"textarea":qr(c,x),S=gn(c,x),Pt("invalid",c);break;default:S=x}H(p,S),F=S;for(C in F)if(F.hasOwnProperty(C)){var z=F[C];C==="style"?ll(c,z):C==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&no(c,z)):C==="children"?typeof z=="string"?(p!=="textarea"||z!=="")&&mr(c,z):typeof z=="number"&&mr(c,""+z):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?z!=null&&C==="onScroll"&&Pt("scroll",c):z!=null&&E(c,C,z,R))}switch(p){case"input":Ee(c),ra(c,x,!1);break;case"textarea":Ee(c),ol(c);break;case"option":x.value!=null&&c.setAttribute("value",""+ge(x.value));break;case"select":c.multiple=!!x.multiple,C=x.value,C!=null?qs(c,!!x.multiple,C,!1):x.defaultValue!=null&&qs(c,!!x.multiple,x.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=_h)}switch(p){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Gn(u),null;case 6:if(c&&u.stateNode!=null)jj(c,u,c.memoizedProps,x);else{if(typeof x!="string"&&u.stateNode===null)throw Error(n(166));if(p=ua(jd.current),ua(Xs.current),Lh(u)){if(x=u.stateNode,p=u.memoizedProps,x[Ys]=u,(C=x.nodeValue!==p)&&(c=Or,c!==null))switch(c.tag){case 3:Ph(x.nodeValue,p,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Ph(x.nodeValue,p,(c.mode&1)!==0)}C&&(u.flags|=4)}else x=(p.nodeType===9?p:p.ownerDocument).createTextNode(x),x[Ys]=u,u.stateNode=x}return Gn(u),null;case 13:if(_t(Lt),x=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(It&&Mr!==null&&(u.mode&1)!==0&&(u.flags&128)===0)Nk(),Sl(),u.flags|=98560,C=!1;else if(C=Lh(u),x!==null&&x.dehydrated!==null){if(c===null){if(!C)throw Error(n(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Ys]=u}else Sl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Gn(u),C=!1}else ms!==null&&(Ev(ms),ms=null),C=!0;if(!C)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=p,u):(x=x!==null,x!==(c!==null&&c.memoizedState!==null)&&x&&(u.child.flags|=8192,(u.mode&1)!==0&&(c===null||(Lt.current&1)!==0?yn===0&&(yn=3):Rv())),u.updateQueue!==null&&(u.flags|=4),Gn(u),null);case 4:return Tl(),vv(c,u),c===null&&vd(u.stateNode.containerInfo),Gn(u),null;case 10:return Wg(u.type._context),Gn(u),null;case 17:return pr(u.type)&&Ah(),Gn(u),null;case 19:if(_t(Lt),C=u.memoizedState,C===null)return Gn(u),null;if(x=(u.flags&128)!==0,R=C.rendering,R===null)if(x)Pd(C,!1);else{if(yn!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(R=zh(c),R!==null){for(u.flags|=128,Pd(C,!1),x=R.updateQueue,x!==null&&(u.updateQueue=x,u.flags|=4),u.subtreeFlags=0,x=p,p=u.child;p!==null;)C=p,c=x,C.flags&=14680066,R=C.alternate,R===null?(C.childLanes=0,C.lanes=c,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=R.childLanes,C.lanes=R.lanes,C.child=R.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=R.memoizedProps,C.memoizedState=R.memoizedState,C.updateQueue=R.updateQueue,C.type=R.type,c=R.dependencies,C.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),p=p.sibling;return Ct(Lt,Lt.current&1|2),u.child}c=c.sibling}C.tail!==null&&Qt()>_l&&(u.flags|=128,x=!0,Pd(C,!1),u.lanes=4194304)}else{if(!x)if(c=zh(R),c!==null){if(u.flags|=128,x=!0,p=c.updateQueue,p!==null&&(u.updateQueue=p,u.flags|=4),Pd(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!It)return Gn(u),null}else 2*Qt()-C.renderingStartTime>_l&&p!==1073741824&&(u.flags|=128,x=!0,Pd(C,!1),u.lanes=4194304);C.isBackwards?(R.sibling=u.child,u.child=R):(p=C.last,p!==null?p.sibling=R:u.child=R,C.last=R)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=Qt(),u.sibling=null,p=Lt.current,Ct(Lt,x?p&1|2:p&1),u):(Gn(u),null);case 22:case 23:return _v(),x=u.memoizedState!==null,c!==null&&c.memoizedState!==null!==x&&(u.flags|=8192),x&&(u.mode&1)!==0?(Dr&1073741824)!==0&&(Gn(u),u.subtreeFlags&6&&(u.flags|=8192)):Gn(u),null;case 24:return null;case 25:return null}throw Error(n(156,u.tag))}function FD(c,u){switch(Fg(u),u.tag){case 1:return pr(u.type)&&Ah(),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return Tl(),_t(fr),_t(Wn),Qg(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 5:return Yg(u),null;case 13:if(_t(Lt),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Sl()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return _t(Lt),null;case 4:return Tl(),null;case 10:return Wg(u.type._context),null;case 22:case 23:return _v(),null;case 24:return null;default:return null}}var Qh=!1,Kn=!1,VD=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function El(c,u){var p=c.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(x){$t(c,u,x)}else p.current=null}function xv(c,u,p){try{p()}catch(x){$t(c,u,x)}}var Cj=!1;function BD(c,u){if(_g=xh,c=rk(),Sg(c)){if("selectionStart"in c)var p={start:c.selectionStart,end:c.selectionEnd};else e:{p=(p=c.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var S=x.anchorOffset,C=x.focusNode;x=x.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var R=0,F=-1,z=-1,ne=0,ye=0,be=c,xe=null;t:for(;;){for(var Ae;be!==p||S!==0&&be.nodeType!==3||(F=R+S),be!==C||x!==0&&be.nodeType!==3||(z=R+x),be.nodeType===3&&(R+=be.nodeValue.length),(Ae=be.firstChild)!==null;)xe=be,be=Ae;for(;;){if(be===c)break t;if(xe===p&&++ne===S&&(F=R),xe===C&&++ye===x&&(z=R),(Ae=be.nextSibling)!==null)break;be=xe,xe=be.parentNode}be=Ae}p=F===-1||z===-1?null:{start:F,end:z}}else p=null}p=p||{start:0,end:0}}else p=null;for(Rg={focusedElem:c,selectionRange:p},xh=!1,Oe=u;Oe!==null;)if(u=Oe,c=u.child,(u.subtreeFlags&1028)!==0&&c!==null)c.return=u,Oe=c;else for(;Oe!==null;){u=Oe;try{var De=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Ve=De.memoizedProps,Zt=De.memoizedState,J=u.stateNode,W=J.getSnapshotBeforeUpdate(u.elementType===u.type?Ve:fs(u.type,Ve),Zt);J.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Q=u.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ke){$t(u,u.return,ke)}if(c=u.sibling,c!==null){c.return=u.return,Oe=c;break}Oe=u.return}return De=Cj,Cj=!1,De}function _d(c,u,p){var x=u.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var S=x=x.next;do{if((S.tag&c)===c){var C=S.destroy;S.destroy=void 0,C!==void 0&&xv(u,p,C)}S=S.next}while(S!==x)}}function Zh(c,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&c)===c){var x=p.create;p.destroy=x()}p=p.next}while(p!==u)}}function yv(c){var u=c.ref;if(u!==null){var p=c.stateNode;switch(c.tag){case 5:c=p;break;default:c=p}typeof u=="function"?u(c):u.current=c}}function Tj(c){var u=c.alternate;u!==null&&(c.alternate=null,Tj(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&(delete u[Ys],delete u[yd],delete u[Mg],delete u[kD],delete u[jD])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Nj(c){return c.tag===5||c.tag===3||c.tag===4}function Ej(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Nj(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function bv(c,u,p){var x=c.tag;if(x===5||x===6)c=c.stateNode,u?p.nodeType===8?p.parentNode.insertBefore(c,u):p.insertBefore(c,u):(p.nodeType===8?(u=p.parentNode,u.insertBefore(c,p)):(u=p,u.appendChild(c)),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=_h));else if(x!==4&&(c=c.child,c!==null))for(bv(c,u,p),c=c.sibling;c!==null;)bv(c,u,p),c=c.sibling}function wv(c,u,p){var x=c.tag;if(x===5||x===6)c=c.stateNode,u?p.insertBefore(c,u):p.appendChild(c);else if(x!==4&&(c=c.child,c!==null))for(wv(c,u,p),c=c.sibling;c!==null;)wv(c,u,p),c=c.sibling}var Fn=null,ps=!1;function xo(c,u,p){for(p=p.child;p!==null;)Pj(c,u,p),p=p.sibling}function Pj(c,u,p){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(hh,p)}catch{}switch(p.tag){case 5:Kn||El(p,u);case 6:var x=Fn,S=ps;Fn=null,xo(c,u,p),Fn=x,ps=S,Fn!==null&&(ps?(c=Fn,p=p.stateNode,c.nodeType===8?c.parentNode.removeChild(p):c.removeChild(p)):Fn.removeChild(p.stateNode));break;case 18:Fn!==null&&(ps?(c=Fn,p=p.stateNode,c.nodeType===8?Og(c.parentNode,p):c.nodeType===1&&Og(c,p),ld(c)):Og(Fn,p.stateNode));break;case 4:x=Fn,S=ps,Fn=p.stateNode.containerInfo,ps=!0,xo(c,u,p),Fn=x,ps=S;break;case 0:case 11:case 14:case 15:if(!Kn&&(x=p.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){S=x=x.next;do{var C=S,R=C.destroy;C=C.tag,R!==void 0&&((C&2)!==0||(C&4)!==0)&&xv(p,u,R),S=S.next}while(S!==x)}xo(c,u,p);break;case 1:if(!Kn&&(El(p,u),x=p.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=p.memoizedProps,x.state=p.memoizedState,x.componentWillUnmount()}catch(F){$t(p,u,F)}xo(c,u,p);break;case 21:xo(c,u,p);break;case 22:p.mode&1?(Kn=(x=Kn)||p.memoizedState!==null,xo(c,u,p),Kn=x):xo(c,u,p);break;default:xo(c,u,p)}}function _j(c){var u=c.updateQueue;if(u!==null){c.updateQueue=null;var p=c.stateNode;p===null&&(p=c.stateNode=new VD),u.forEach(function(x){var S=YD.bind(null,c,x);p.has(x)||(p.add(x),x.then(S,S))})}}function gs(c,u){var p=u.deletions;if(p!==null)for(var x=0;x<p.length;x++){var S=p[x];try{var C=c,R=u,F=R;e:for(;F!==null;){switch(F.tag){case 5:Fn=F.stateNode,ps=!1;break e;case 3:Fn=F.stateNode.containerInfo,ps=!0;break e;case 4:Fn=F.stateNode.containerInfo,ps=!0;break e}F=F.return}if(Fn===null)throw Error(n(160));Pj(C,R,S),Fn=null,ps=!1;var z=S.alternate;z!==null&&(z.return=null),S.return=null}catch(ne){$t(S,u,ne)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Rj(u,c),u=u.sibling}function Rj(c,u){var p=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(gs(u,c),Zs(c),x&4){try{_d(3,c,c.return),Zh(3,c)}catch(Ve){$t(c,c.return,Ve)}try{_d(5,c,c.return)}catch(Ve){$t(c,c.return,Ve)}}break;case 1:gs(u,c),Zs(c),x&512&&p!==null&&El(p,p.return);break;case 5:if(gs(u,c),Zs(c),x&512&&p!==null&&El(p,p.return),c.flags&32){var S=c.stateNode;try{mr(S,"")}catch(Ve){$t(c,c.return,Ve)}}if(x&4&&(S=c.stateNode,S!=null)){var C=c.memoizedProps,R=p!==null?p.memoizedProps:C,F=c.type,z=c.updateQueue;if(c.updateQueue=null,z!==null)try{F==="input"&&C.type==="radio"&&C.name!=null&&an(S,C),Ie(F,R);var ne=Ie(F,C);for(R=0;R<z.length;R+=2){var ye=z[R],be=z[R+1];ye==="style"?ll(S,be):ye==="dangerouslySetInnerHTML"?no(S,be):ye==="children"?mr(S,be):E(S,ye,be,ne)}switch(F){case"input":er(S,C);break;case"textarea":il(S,C);break;case"select":var xe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!C.multiple;var Ae=C.value;Ae!=null?qs(S,!!C.multiple,Ae,!1):xe!==!!C.multiple&&(C.defaultValue!=null?qs(S,!!C.multiple,C.defaultValue,!0):qs(S,!!C.multiple,C.multiple?[]:"",!1))}S[yd]=C}catch(Ve){$t(c,c.return,Ve)}}break;case 6:if(gs(u,c),Zs(c),x&4){if(c.stateNode===null)throw Error(n(162));S=c.stateNode,C=c.memoizedProps;try{S.nodeValue=C}catch(Ve){$t(c,c.return,Ve)}}break;case 3:if(gs(u,c),Zs(c),x&4&&p!==null&&p.memoizedState.isDehydrated)try{ld(u.containerInfo)}catch(Ve){$t(c,c.return,Ve)}break;case 4:gs(u,c),Zs(c);break;case 13:gs(u,c),Zs(c),S=c.child,S.flags&8192&&(C=S.memoizedState!==null,S.stateNode.isHidden=C,!C||S.alternate!==null&&S.alternate.memoizedState!==null||(jv=Qt())),x&4&&_j(c);break;case 22:if(ye=p!==null&&p.memoizedState!==null,c.mode&1?(Kn=(ne=Kn)||ye,gs(u,c),Kn=ne):gs(u,c),Zs(c),x&8192){if(ne=c.memoizedState!==null,(c.stateNode.isHidden=ne)&&!ye&&(c.mode&1)!==0)for(Oe=c,ye=c.child;ye!==null;){for(be=Oe=ye;Oe!==null;){switch(xe=Oe,Ae=xe.child,xe.tag){case 0:case 11:case 14:case 15:_d(4,xe,xe.return);break;case 1:El(xe,xe.return);var De=xe.stateNode;if(typeof De.componentWillUnmount=="function"){x=xe,p=xe.return;try{u=x,De.props=u.memoizedProps,De.state=u.memoizedState,De.componentWillUnmount()}catch(Ve){$t(x,p,Ve)}}break;case 5:El(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Oj(be);continue}}Ae!==null?(Ae.return=xe,Oe=Ae):Oj(be)}ye=ye.sibling}e:for(ye=null,be=c;;){if(be.tag===5){if(ye===null){ye=be;try{S=be.stateNode,ne?(C=S.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(F=be.stateNode,z=be.memoizedProps.style,R=z!=null&&z.hasOwnProperty("display")?z.display:null,F.style.display=al("display",R))}catch(Ve){$t(c,c.return,Ve)}}}else if(be.tag===6){if(ye===null)try{be.stateNode.nodeValue=ne?"":be.memoizedProps}catch(Ve){$t(c,c.return,Ve)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===c)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===c)break e;for(;be.sibling===null;){if(be.return===null||be.return===c)break e;ye===be&&(ye=null),be=be.return}ye===be&&(ye=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:gs(u,c),Zs(c),x&4&&_j(c);break;case 21:break;default:gs(u,c),Zs(c)}}function Zs(c){var u=c.flags;if(u&2){try{e:{for(var p=c.return;p!==null;){if(Nj(p)){var x=p;break e}p=p.return}throw Error(n(160))}switch(x.tag){case 5:var S=x.stateNode;x.flags&32&&(mr(S,""),x.flags&=-33);var C=Ej(c);wv(c,C,S);break;case 3:case 4:var R=x.stateNode.containerInfo,F=Ej(c);bv(c,F,R);break;default:throw Error(n(161))}}catch(z){$t(c,c.return,z)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function $D(c,u,p){Oe=c,Aj(c)}function Aj(c,u,p){for(var x=(c.mode&1)!==0;Oe!==null;){var S=Oe,C=S.child;if(S.tag===22&&x){var R=S.memoizedState!==null||Qh;if(!R){var F=S.alternate,z=F!==null&&F.memoizedState!==null||Kn;F=Qh;var ne=Kn;if(Qh=R,(Kn=z)&&!ne)for(Oe=S;Oe!==null;)R=Oe,z=R.child,R.tag===22&&R.memoizedState!==null?Mj(S):z!==null?(z.return=R,Oe=z):Mj(S);for(;C!==null;)Oe=C,Aj(C),C=C.sibling;Oe=S,Qh=F,Kn=ne}Ij(c)}else(S.subtreeFlags&8772)!==0&&C!==null?(C.return=S,Oe=C):Ij(c)}}function Ij(c){for(;Oe!==null;){var u=Oe;if((u.flags&8772)!==0){var p=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Kn||Zh(5,u);break;case 1:var x=u.stateNode;if(u.flags&4&&!Kn)if(p===null)x.componentDidMount();else{var S=u.elementType===u.type?p.memoizedProps:fs(u.type,p.memoizedProps);x.componentDidUpdate(S,p.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var C=u.updateQueue;C!==null&&Ok(u,C,x);break;case 3:var R=u.updateQueue;if(R!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=u.child.stateNode;break;case 1:p=u.child.stateNode}Ok(u,R,p)}break;case 5:var F=u.stateNode;if(p===null&&u.flags&4){p=F;var z=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&p.focus();break;case"img":z.src&&(p.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var ne=u.alternate;if(ne!==null){var ye=ne.memoizedState;if(ye!==null){var be=ye.dehydrated;be!==null&&ld(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Kn||u.flags&512&&yv(u)}catch(xe){$t(u,u.return,xe)}}if(u===c){Oe=null;break}if(p=u.sibling,p!==null){p.return=u.return,Oe=p;break}Oe=u.return}}function Oj(c){for(;Oe!==null;){var u=Oe;if(u===c){Oe=null;break}var p=u.sibling;if(p!==null){p.return=u.return,Oe=p;break}Oe=u.return}}function Mj(c){for(;Oe!==null;){var u=Oe;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{Zh(4,u)}catch(z){$t(u,p,z)}break;case 1:var x=u.stateNode;if(typeof x.componentDidMount=="function"){var S=u.return;try{x.componentDidMount()}catch(z){$t(u,S,z)}}var C=u.return;try{yv(u)}catch(z){$t(u,C,z)}break;case 5:var R=u.return;try{yv(u)}catch(z){$t(u,R,z)}}}catch(z){$t(u,u.return,z)}if(u===c){Oe=null;break}var F=u.sibling;if(F!==null){F.return=u.return,Oe=F;break}Oe=u.return}}var zD=Math.ceil,em=P.ReactCurrentDispatcher,Sv=P.ReactCurrentOwner,Yr=P.ReactCurrentBatchConfig,pt=0,Pn=null,ln=null,Vn=0,Dr=0,Pl=mo(0),yn=0,Rd=null,ma=0,tm=0,kv=0,Ad=null,vr=null,jv=0,_l=1/0,_i=null,nm=!1,Cv=null,yo=null,rm=!1,bo=null,sm=0,Id=0,Tv=null,im=-1,om=0;function nr(){return(pt&6)!==0?Qt():im!==-1?im:im=Qt()}function wo(c){return(c.mode&1)===0?1:(pt&2)!==0&&Vn!==0?Vn&-Vn:TD.transition!==null?(om===0&&(om=ES()),om):(c=bt,c!==0||(c=window.event,c=c===void 0?16:LS(c.type)),c)}function vs(c,u,p,x){if(50<Id)throw Id=0,Tv=null,Error(n(185));rd(c,p,x),((pt&2)===0||c!==Pn)&&(c===Pn&&((pt&2)===0&&(tm|=p),yn===4&&So(c,Vn)),xr(c,x),p===1&&pt===0&&(u.mode&1)===0&&(_l=Qt()+500,Oh&&po()))}function xr(c,u){var p=c.callbackNode;TM(c,u);var x=ph(c,c===Pn?Vn:0);if(x===0)p!==null&&CS(p),c.callbackNode=null,c.callbackPriority=0;else if(u=x&-x,c.callbackPriority!==u){if(p!=null&&CS(p),u===1)c.tag===0?CD(Lj.bind(null,c)):Sk(Lj.bind(null,c)),wD(function(){(pt&6)===0&&po()}),p=null;else{switch(PS(x)){case 1:p=ig;break;case 4:p=TS;break;case 16:p=uh;break;case 536870912:p=NS;break;default:p=uh}p=Wj(p,Dj.bind(null,c))}c.callbackPriority=u,c.callbackNode=p}}function Dj(c,u){if(im=-1,om=0,(pt&6)!==0)throw Error(n(327));var p=c.callbackNode;if(Rl()&&c.callbackNode!==p)return null;var x=ph(c,c===Pn?Vn:0);if(x===0)return null;if((x&30)!==0||(x&c.expiredLanes)!==0||u)u=am(c,x);else{u=x;var S=pt;pt|=2;var C=Fj();(Pn!==c||Vn!==u)&&(_i=null,_l=Qt()+500,pa(c,u));do try{HD();break}catch(F){Uj(c,F)}while(!0);qg(),em.current=C,pt=S,ln!==null?u=0:(Pn=null,Vn=0,u=yn)}if(u!==0){if(u===2&&(S=og(c),S!==0&&(x=S,u=Nv(c,S))),u===1)throw p=Rd,pa(c,0),So(c,x),xr(c,Qt()),p;if(u===6)So(c,x);else{if(S=c.current.alternate,(x&30)===0&&!qD(S)&&(u=am(c,x),u===2&&(C=og(c),C!==0&&(x=C,u=Nv(c,C))),u===1))throw p=Rd,pa(c,0),So(c,x),xr(c,Qt()),p;switch(c.finishedWork=S,c.finishedLanes=x,u){case 0:case 1:throw Error(n(345));case 2:ga(c,vr,_i);break;case 3:if(So(c,x),(x&130023424)===x&&(u=jv+500-Qt(),10<u)){if(ph(c,0)!==0)break;if(S=c.suspendedLanes,(S&x)!==x){nr(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=Ig(ga.bind(null,c,vr,_i),u);break}ga(c,vr,_i);break;case 4:if(So(c,x),(x&4194240)===x)break;for(u=c.eventTimes,S=-1;0<x;){var R=31-us(x);C=1<<R,R=u[R],R>S&&(S=R),x&=~C}if(x=S,x=Qt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*zD(x/1960))-x,10<x){c.timeoutHandle=Ig(ga.bind(null,c,vr,_i),x);break}ga(c,vr,_i);break;case 5:ga(c,vr,_i);break;default:throw Error(n(329))}}}return xr(c,Qt()),c.callbackNode===p?Dj.bind(null,c):null}function Nv(c,u){var p=Ad;return c.current.memoizedState.isDehydrated&&(pa(c,u).flags|=256),c=am(c,u),c!==2&&(u=vr,vr=p,u!==null&&Ev(u)),c}function Ev(c){vr===null?vr=c:vr.push.apply(vr,c)}function qD(c){for(var u=c;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var x=0;x<p.length;x++){var S=p[x],C=S.getSnapshot;S=S.value;try{if(!hs(C(),S))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function So(c,u){for(u&=~kv,u&=~tm,c.suspendedLanes|=u,c.pingedLanes&=~u,c=c.expirationTimes;0<u;){var p=31-us(u),x=1<<p;c[p]=-1,u&=~x}}function Lj(c){if((pt&6)!==0)throw Error(n(327));Rl();var u=ph(c,0);if((u&1)===0)return xr(c,Qt()),null;var p=am(c,u);if(c.tag!==0&&p===2){var x=og(c);x!==0&&(u=x,p=Nv(c,x))}if(p===1)throw p=Rd,pa(c,0),So(c,u),xr(c,Qt()),p;if(p===6)throw Error(n(345));return c.finishedWork=c.current.alternate,c.finishedLanes=u,ga(c,vr,_i),xr(c,Qt()),null}function Pv(c,u){var p=pt;pt|=1;try{return c(u)}finally{pt=p,pt===0&&(_l=Qt()+500,Oh&&po())}}function fa(c){bo!==null&&bo.tag===0&&(pt&6)===0&&Rl();var u=pt;pt|=1;var p=Yr.transition,x=bt;try{if(Yr.transition=null,bt=1,c)return c()}finally{bt=x,Yr.transition=p,pt=u,(pt&6)===0&&po()}}function _v(){Dr=Pl.current,_t(Pl)}function pa(c,u){c.finishedWork=null,c.finishedLanes=0;var p=c.timeoutHandle;if(p!==-1&&(c.timeoutHandle=-1,bD(p)),ln!==null)for(p=ln.return;p!==null;){var x=p;switch(Fg(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Ah();break;case 3:Tl(),_t(fr),_t(Wn),Qg();break;case 5:Yg(x);break;case 4:Tl();break;case 13:_t(Lt);break;case 19:_t(Lt);break;case 10:Wg(x.type._context);break;case 22:case 23:_v()}p=p.return}if(Pn=c,ln=c=ko(c.current,null),Vn=Dr=u,yn=0,Rd=null,kv=tm=ma=0,vr=Ad=null,da!==null){for(u=0;u<da.length;u++)if(p=da[u],x=p.interleaved,x!==null){p.interleaved=null;var S=x.next,C=p.pending;if(C!==null){var R=C.next;C.next=S,x.next=R}p.pending=x}da=null}return c}function Uj(c,u){do{var p=ln;try{if(qg(),qh.current=Kh,Wh){for(var x=Ut.memoizedState;x!==null;){var S=x.queue;S!==null&&(S.pending=null),x=x.next}Wh=!1}if(ha=0,En=xn=Ut=null,Cd=!1,Td=0,Sv.current=null,p===null||p.return===null){yn=1,Rd=u,ln=null;break}e:{var C=c,R=p.return,F=p,z=u;if(u=Vn,F.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var ne=z,ye=F,be=ye.tag;if((ye.mode&1)===0&&(be===0||be===11||be===15)){var xe=ye.alternate;xe?(ye.updateQueue=xe.updateQueue,ye.memoizedState=xe.memoizedState,ye.lanes=xe.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Ae=cj(R);if(Ae!==null){Ae.flags&=-257,dj(Ae,R,F,C,u),Ae.mode&1&&lj(C,ne,u),u=Ae,z=ne;var De=u.updateQueue;if(De===null){var Ve=new Set;Ve.add(z),u.updateQueue=Ve}else De.add(z);break e}else{if((u&1)===0){lj(C,ne,u),Rv();break e}z=Error(n(426))}}else if(It&&F.mode&1){var Zt=cj(R);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),dj(Zt,R,F,C,u),$g(Nl(z,F));break e}}C=z=Nl(z,F),yn!==4&&(yn=2),Ad===null?Ad=[C]:Ad.push(C),C=R;do{switch(C.tag){case 3:C.flags|=65536,u&=-u,C.lanes|=u;var J=oj(C,z,u);Ik(C,J);break e;case 1:F=z;var W=C.type,Q=C.stateNode;if((C.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(yo===null||!yo.has(Q)))){C.flags|=65536,u&=-u,C.lanes|=u;var ke=aj(C,F,u);Ik(C,ke);break e}}C=C.return}while(C!==null)}Bj(p)}catch(Be){u=Be,ln===p&&p!==null&&(ln=p=p.return);continue}break}while(!0)}function Fj(){var c=em.current;return em.current=Kh,c===null?Kh:c}function Rv(){(yn===0||yn===3||yn===2)&&(yn=4),Pn===null||(ma&268435455)===0&&(tm&268435455)===0||So(Pn,Vn)}function am(c,u){var p=pt;pt|=2;var x=Fj();(Pn!==c||Vn!==u)&&(_i=null,pa(c,u));do try{WD();break}catch(S){Uj(c,S)}while(!0);if(qg(),pt=p,em.current=x,ln!==null)throw Error(n(261));return Pn=null,Vn=0,yn}function WD(){for(;ln!==null;)Vj(ln)}function HD(){for(;ln!==null&&!vM();)Vj(ln)}function Vj(c){var u=qj(c.alternate,c,Dr);c.memoizedProps=c.pendingProps,u===null?Bj(c):ln=u,Sv.current=null}function Bj(c){var u=c;do{var p=u.alternate;if(c=u.return,(u.flags&32768)===0){if(p=UD(p,u,Dr),p!==null){ln=p;return}}else{if(p=FD(p,u),p!==null){p.flags&=32767,ln=p;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{yn=6,ln=null;return}}if(u=u.sibling,u!==null){ln=u;return}ln=u=c}while(u!==null);yn===0&&(yn=5)}function ga(c,u,p){var x=bt,S=Yr.transition;try{Yr.transition=null,bt=1,GD(c,u,p,x)}finally{Yr.transition=S,bt=x}return null}function GD(c,u,p,x){do Rl();while(bo!==null);if((pt&6)!==0)throw Error(n(327));p=c.finishedWork;var S=c.finishedLanes;if(p===null)return null;if(c.finishedWork=null,c.finishedLanes=0,p===c.current)throw Error(n(177));c.callbackNode=null,c.callbackPriority=0;var C=p.lanes|p.childLanes;if(NM(c,C),c===Pn&&(ln=Pn=null,Vn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||rm||(rm=!0,Wj(uh,function(){return Rl(),null})),C=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||C){C=Yr.transition,Yr.transition=null;var R=bt;bt=1;var F=pt;pt|=4,Sv.current=null,BD(c,p),Rj(p,c),mD(Rg),xh=!!_g,Rg=_g=null,c.current=p,$D(p),xM(),pt=F,bt=R,Yr.transition=C}else c.current=p;if(rm&&(rm=!1,bo=c,sm=S),C=c.pendingLanes,C===0&&(yo=null),wM(p.stateNode),xr(c,Qt()),u!==null)for(x=c.onRecoverableError,p=0;p<u.length;p++)S=u[p],x(S.value,{componentStack:S.stack,digest:S.digest});if(nm)throw nm=!1,c=Cv,Cv=null,c;return(sm&1)!==0&&c.tag!==0&&Rl(),C=c.pendingLanes,(C&1)!==0?c===Tv?Id++:(Id=0,Tv=c):Id=0,po(),null}function Rl(){if(bo!==null){var c=PS(sm),u=Yr.transition,p=bt;try{if(Yr.transition=null,bt=16>c?16:c,bo===null)var x=!1;else{if(c=bo,bo=null,sm=0,(pt&6)!==0)throw Error(n(331));var S=pt;for(pt|=4,Oe=c.current;Oe!==null;){var C=Oe,R=C.child;if((Oe.flags&16)!==0){var F=C.deletions;if(F!==null){for(var z=0;z<F.length;z++){var ne=F[z];for(Oe=ne;Oe!==null;){var ye=Oe;switch(ye.tag){case 0:case 11:case 15:_d(8,ye,C)}var be=ye.child;if(be!==null)be.return=ye,Oe=be;else for(;Oe!==null;){ye=Oe;var xe=ye.sibling,Ae=ye.return;if(Tj(ye),ye===ne){Oe=null;break}if(xe!==null){xe.return=Ae,Oe=xe;break}Oe=Ae}}}var De=C.alternate;if(De!==null){var Ve=De.child;if(Ve!==null){De.child=null;do{var Zt=Ve.sibling;Ve.sibling=null,Ve=Zt}while(Ve!==null)}}Oe=C}}if((C.subtreeFlags&2064)!==0&&R!==null)R.return=C,Oe=R;else e:for(;Oe!==null;){if(C=Oe,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:_d(9,C,C.return)}var J=C.sibling;if(J!==null){J.return=C.return,Oe=J;break e}Oe=C.return}}var W=c.current;for(Oe=W;Oe!==null;){R=Oe;var Q=R.child;if((R.subtreeFlags&2064)!==0&&Q!==null)Q.return=R,Oe=Q;else e:for(R=W;Oe!==null;){if(F=Oe,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Zh(9,F)}}catch(Be){$t(F,F.return,Be)}if(F===R){Oe=null;break e}var ke=F.sibling;if(ke!==null){ke.return=F.return,Oe=ke;break e}Oe=F.return}}if(pt=S,po(),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(hh,c)}catch{}x=!0}return x}finally{bt=p,Yr.transition=u}}return!1}function $j(c,u,p){u=Nl(p,u),u=oj(c,u,1),c=vo(c,u,1),u=nr(),c!==null&&(rd(c,1,u),xr(c,u))}function $t(c,u,p){if(c.tag===3)$j(c,c,p);else for(;u!==null;){if(u.tag===3){$j(u,c,p);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(yo===null||!yo.has(x))){c=Nl(p,c),c=aj(u,c,1),u=vo(u,c,1),c=nr(),u!==null&&(rd(u,1,c),xr(u,c));break}}u=u.return}}function KD(c,u,p){var x=c.pingCache;x!==null&&x.delete(u),u=nr(),c.pingedLanes|=c.suspendedLanes&p,Pn===c&&(Vn&p)===p&&(yn===4||yn===3&&(Vn&130023424)===Vn&&500>Qt()-jv?pa(c,0):kv|=p),xr(c,u)}function zj(c,u){u===0&&((c.mode&1)===0?u=1:(u=fh,fh<<=1,(fh&130023424)===0&&(fh=4194304)));var p=nr();c=Ni(c,u),c!==null&&(rd(c,u,p),xr(c,p))}function JD(c){var u=c.memoizedState,p=0;u!==null&&(p=u.retryLane),zj(c,p)}function YD(c,u){var p=0;switch(c.tag){case 13:var x=c.stateNode,S=c.memoizedState;S!==null&&(p=S.retryLane);break;case 19:x=c.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(u),zj(c,p)}var qj;qj=function(c,u,p){if(c!==null)if(c.memoizedProps!==u.pendingProps||fr.current)gr=!0;else{if((c.lanes&p)===0&&(u.flags&128)===0)return gr=!1,LD(c,u,p);gr=(c.flags&131072)!==0}else gr=!1,It&&(u.flags&1048576)!==0&&kk(u,Dh,u.index);switch(u.lanes=0,u.tag){case 2:var x=u.type;Xh(c,u),c=u.pendingProps;var S=yl(u,Wn.current);Cl(u,p),S=tv(null,u,x,c,S,p);var C=nv();return u.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,pr(x)?(C=!0,Ih(u)):C=!1,u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Kg(u),S.updater=Jh,u.stateNode=S,S._reactInternals=u,lv(u,x,c,p),u=hv(null,u,x,!0,C,p)):(u.tag=0,It&&C&&Ug(u),tr(null,u,S,p),u=u.child),u;case 16:x=u.elementType;e:{switch(Xh(c,u),c=u.pendingProps,S=x._init,x=S(x._payload),u.type=x,S=u.tag=QD(x),c=fs(x,c),S){case 0:u=uv(null,u,x,c,p);break e;case 1:u=gj(null,u,x,c,p);break e;case 11:u=uj(null,u,x,c,p);break e;case 14:u=hj(null,u,x,fs(x.type,c),p);break e}throw Error(n(306,x,""))}return u;case 0:return x=u.type,S=u.pendingProps,S=u.elementType===x?S:fs(x,S),uv(c,u,x,S,p);case 1:return x=u.type,S=u.pendingProps,S=u.elementType===x?S:fs(x,S),gj(c,u,x,S,p);case 3:e:{if(vj(u),c===null)throw Error(n(387));x=u.pendingProps,C=u.memoizedState,S=C.element,Ak(c,u),$h(u,x,null,p);var R=u.memoizedState;if(x=R.element,C.isDehydrated)if(C={element:x,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},u.updateQueue.baseState=C,u.memoizedState=C,u.flags&256){S=Nl(Error(n(423)),u),u=xj(c,u,x,p,S);break e}else if(x!==S){S=Nl(Error(n(424)),u),u=xj(c,u,x,p,S);break e}else for(Mr=ho(u.stateNode.containerInfo.firstChild),Or=u,It=!0,ms=null,p=_k(u,null,x,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Sl(),x===S){u=Pi(c,u,p);break e}tr(c,u,x,p)}u=u.child}return u;case 5:return Mk(u),c===null&&Bg(u),x=u.type,S=u.pendingProps,C=c!==null?c.memoizedProps:null,R=S.children,Ag(x,S)?R=null:C!==null&&Ag(x,C)&&(u.flags|=32),pj(c,u),tr(c,u,R,p),u.child;case 6:return c===null&&Bg(u),null;case 13:return yj(c,u,p);case 4:return Jg(u,u.stateNode.containerInfo),x=u.pendingProps,c===null?u.child=kl(u,null,x,p):tr(c,u,x,p),u.child;case 11:return x=u.type,S=u.pendingProps,S=u.elementType===x?S:fs(x,S),uj(c,u,x,S,p);case 7:return tr(c,u,u.pendingProps,p),u.child;case 8:return tr(c,u,u.pendingProps.children,p),u.child;case 12:return tr(c,u,u.pendingProps.children,p),u.child;case 10:e:{if(x=u.type._context,S=u.pendingProps,C=u.memoizedProps,R=S.value,Ct(Fh,x._currentValue),x._currentValue=R,C!==null)if(hs(C.value,R)){if(C.children===S.children&&!fr.current){u=Pi(c,u,p);break e}}else for(C=u.child,C!==null&&(C.return=u);C!==null;){var F=C.dependencies;if(F!==null){R=C.child;for(var z=F.firstContext;z!==null;){if(z.context===x){if(C.tag===1){z=Ei(-1,p&-p),z.tag=2;var ne=C.updateQueue;if(ne!==null){ne=ne.shared;var ye=ne.pending;ye===null?z.next=z:(z.next=ye.next,ye.next=z),ne.pending=z}}C.lanes|=p,z=C.alternate,z!==null&&(z.lanes|=p),Hg(C.return,p,u),F.lanes|=p;break}z=z.next}}else if(C.tag===10)R=C.type===u.type?null:C.child;else if(C.tag===18){if(R=C.return,R===null)throw Error(n(341));R.lanes|=p,F=R.alternate,F!==null&&(F.lanes|=p),Hg(R,p,u),R=C.sibling}else R=C.child;if(R!==null)R.return=C;else for(R=C;R!==null;){if(R===u){R=null;break}if(C=R.sibling,C!==null){C.return=R.return,R=C;break}R=R.return}C=R}tr(c,u,S.children,p),u=u.child}return u;case 9:return S=u.type,x=u.pendingProps.children,Cl(u,p),S=Kr(S),x=x(S),u.flags|=1,tr(c,u,x,p),u.child;case 14:return x=u.type,S=fs(x,u.pendingProps),S=fs(x.type,S),hj(c,u,x,S,p);case 15:return mj(c,u,u.type,u.pendingProps,p);case 17:return x=u.type,S=u.pendingProps,S=u.elementType===x?S:fs(x,S),Xh(c,u),u.tag=1,pr(x)?(c=!0,Ih(u)):c=!1,Cl(u,p),sj(u,x,S),lv(u,x,S,p),hv(null,u,x,!0,c,p);case 19:return wj(c,u,p);case 22:return fj(c,u,p)}throw Error(n(156,u.tag))};function Wj(c,u){return jS(c,u)}function XD(c,u,p,x){this.tag=c,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(c,u,p,x){return new XD(c,u,p,x)}function Av(c){return c=c.prototype,!(!c||!c.isReactComponent)}function QD(c){if(typeof c=="function")return Av(c)?1:0;if(c!=null){if(c=c.$$typeof,c===A)return 11;if(c===fe)return 14}return 2}function ko(c,u){var p=c.alternate;return p===null?(p=Xr(c.tag,u,c.key,c.mode),p.elementType=c.elementType,p.type=c.type,p.stateNode=c.stateNode,p.alternate=c,c.alternate=p):(p.pendingProps=u,p.type=c.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=c.flags&14680064,p.childLanes=c.childLanes,p.lanes=c.lanes,p.child=c.child,p.memoizedProps=c.memoizedProps,p.memoizedState=c.memoizedState,p.updateQueue=c.updateQueue,u=c.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=c.sibling,p.index=c.index,p.ref=c.ref,p}function lm(c,u,p,x,S,C){var R=2;if(x=c,typeof c=="function")Av(c)&&(R=1);else if(typeof c=="string")R=5;else e:switch(c){case I:return va(p.children,S,C,u);case M:R=8,S|=8;break;case O:return c=Xr(12,p,u,S|2),c.elementType=O,c.lanes=C,c;case Z:return c=Xr(13,p,u,S),c.elementType=Z,c.lanes=C,c;case se:return c=Xr(19,p,u,S),c.elementType=se,c.lanes=C,c;case de:return cm(p,S,C,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case L:R=10;break e;case D:R=9;break e;case A:R=11;break e;case fe:R=14;break e;case ae:R=16,x=null;break e}throw Error(n(130,c==null?c:typeof c,""))}return u=Xr(R,p,u,S),u.elementType=c,u.type=x,u.lanes=C,u}function va(c,u,p,x){return c=Xr(7,c,x,u),c.lanes=p,c}function cm(c,u,p,x){return c=Xr(22,c,x,u),c.elementType=de,c.lanes=p,c.stateNode={isHidden:!1},c}function Iv(c,u,p){return c=Xr(6,c,null,u),c.lanes=p,c}function Ov(c,u,p){return u=Xr(4,c.children!==null?c.children:[],c.key,u),u.lanes=p,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function ZD(c,u,p,x,S){this.tag=u,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ag(0),this.expirationTimes=ag(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ag(0),this.identifierPrefix=x,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Mv(c,u,p,x,S,C,R,F,z){return c=new ZD(c,u,p,F,z),u===1?(u=1,C===!0&&(u|=8)):u=0,C=Xr(3,null,null,u),c.current=C,C.stateNode=c,C.memoizedState={element:x,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kg(C),c}function e4(c,u,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:x==null?null:""+x,children:c,containerInfo:u,implementation:p}}function Hj(c){if(!c)return fo;c=c._reactInternals;e:{if(ia(c)!==c||c.tag!==1)throw Error(n(170));var u=c;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(pr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(n(171))}if(c.tag===1){var p=c.type;if(pr(p))return bk(c,p,u)}return u}function Gj(c,u,p,x,S,C,R,F,z){return c=Mv(p,x,!0,c,S,C,R,F,z),c.context=Hj(null),p=c.current,x=nr(),S=wo(p),C=Ei(x,S),C.callback=u??null,vo(p,C,S),c.current.lanes=S,rd(c,S,x),xr(c,x),c}function dm(c,u,p,x){var S=u.current,C=nr(),R=wo(S);return p=Hj(p),u.context===null?u.context=p:u.pendingContext=p,u=Ei(C,R),u.payload={element:c},x=x===void 0?null:x,x!==null&&(u.callback=x),c=vo(S,u,R),c!==null&&(vs(c,S,R,C),Bh(c,S,R)),R}function um(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Kj(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var p=c.retryLane;c.retryLane=p!==0&&p<u?p:u}}function Dv(c,u){Kj(c,u),(c=c.alternate)&&Kj(c,u)}function t4(){return null}var Jj=typeof reportError=="function"?reportError:function(c){console.error(c)};function Lv(c){this._internalRoot=c}hm.prototype.render=Lv.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(n(409));dm(c,u,null,null)},hm.prototype.unmount=Lv.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;fa(function(){dm(null,c,null,null)}),u[ki]=null}};function hm(c){this._internalRoot=c}hm.prototype.unstable_scheduleHydration=function(c){if(c){var u=AS();c={blockedOn:null,target:c,priority:u};for(var p=0;p<lo.length&&u!==0&&u<lo[p].priority;p++);lo.splice(p,0,c),p===0&&MS(c)}};function Uv(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function mm(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Yj(){}function n4(c,u,p,x,S){if(S){if(typeof x=="function"){var C=x;x=function(){var ne=um(R);C.call(ne)}}var R=Gj(u,x,c,0,null,!1,!1,"",Yj);return c._reactRootContainer=R,c[ki]=R.current,vd(c.nodeType===8?c.parentNode:c),fa(),R}for(;S=c.lastChild;)c.removeChild(S);if(typeof x=="function"){var F=x;x=function(){var ne=um(z);F.call(ne)}}var z=Mv(c,0,!1,null,null,!1,!1,"",Yj);return c._reactRootContainer=z,c[ki]=z.current,vd(c.nodeType===8?c.parentNode:c),fa(function(){dm(u,z,p,x)}),z}function fm(c,u,p,x,S){var C=p._reactRootContainer;if(C){var R=C;if(typeof S=="function"){var F=S;S=function(){var z=um(R);F.call(z)}}dm(u,R,c,S)}else R=n4(p,u,c,S,x);return um(R)}_S=function(c){switch(c.tag){case 3:var u=c.stateNode;if(u.current.memoizedState.isDehydrated){var p=nd(u.pendingLanes);p!==0&&(lg(u,p|1),xr(u,Qt()),(pt&6)===0&&(_l=Qt()+500,po()))}break;case 13:fa(function(){var x=Ni(c,1);if(x!==null){var S=nr();vs(x,c,1,S)}}),Dv(c,1)}},cg=function(c){if(c.tag===13){var u=Ni(c,134217728);if(u!==null){var p=nr();vs(u,c,134217728,p)}Dv(c,134217728)}},RS=function(c){if(c.tag===13){var u=wo(c),p=Ni(c,u);if(p!==null){var x=nr();vs(p,c,u,x)}Dv(c,u)}},AS=function(){return bt},IS=function(c,u){var p=bt;try{return bt=c,u()}finally{bt=p}},Ke=function(c,u,p){switch(u){case"input":if(er(c,p),u=p.name,p.type==="radio"&&u!=null){for(p=c;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<p.length;u++){var x=p[u];if(x!==c&&x.form===c.form){var S=Rh(x);if(!S)throw Error(n(90));me(x),er(x,S)}}}break;case"textarea":il(c,p);break;case"select":u=p.value,u!=null&&qs(c,!!p.multiple,u,!1)}},Xt=Pv,vn=fa;var r4={usingClientEntryPoint:!1,Events:[bd,vl,Rh,Ye,St,Pv]},Od={findFiberByHostInstance:oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s4={bundleType:Od.bundleType,version:Od.version,rendererPackageName:Od.rendererPackageName,rendererConfig:Od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=SS(c),c===null?null:c.stateNode},findFiberByHostInstance:Od.findFiberByHostInstance||t4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{hh=pm.inject(s4),Js=pm}catch{}}return yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r4,yr.createPortal=function(c,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uv(u))throw Error(n(200));return e4(c,u,null,p)},yr.createRoot=function(c,u){if(!Uv(c))throw Error(n(299));var p=!1,x="",S=Jj;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),u=Mv(c,1,!1,null,null,p,!1,x,S),c[ki]=u.current,vd(c.nodeType===8?c.parentNode:c),new Lv(u)},yr.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=SS(u),c=c===null?null:c.stateNode,c},yr.flushSync=function(c){return fa(c)},yr.hydrate=function(c,u,p){if(!mm(u))throw Error(n(200));return fm(null,c,u,!0,p)},yr.hydrateRoot=function(c,u,p){if(!Uv(c))throw Error(n(405));var x=p!=null&&p.hydratedSources||null,S=!1,C="",R=Jj;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onRecoverableError!==void 0&&(R=p.onRecoverableError)),u=Gj(u,null,c,1,p??null,S,!1,C,R),c[ki]=u.current,vd(c),x)for(c=0;c<x.length;c++)p=x[c],S=p._getVersion,S=S(p._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[p,S]:u.mutableSourceEagerHydrationData.push(p,S);return new hm(u)},yr.render=function(c,u,p){if(!mm(u))throw Error(n(200));return fm(null,c,u,!1,p)},yr.unmountComponentAtNode=function(c){if(!mm(c))throw Error(n(40));return c._reactRootContainer?(fa(function(){fm(null,null,c,!1,function(){c._reactRootContainer=null,c[ki]=null})}),!0):!1},yr.unstable_batchedUpdates=Pv,yr.unstable_renderSubtreeIntoContainer=function(c,u,p,x){if(!mm(p))throw Error(n(200));if(c==null||c._reactInternals===void 0)throw Error(n(38));return fm(c,u,p,!1,x)},yr.version="18.3.1-next-f1338f8080-20240426",yr}var s1;function _E(){if(s1)return Bv.exports;s1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bv.exports=m4(),Bv.exports}var i1;function f4(){if(i1)return gm;i1=1;var t=_E();return gm.createRoot=t.createRoot,gm.hydrateRoot=t.hydrateRoot,gm}var p4=f4();const g4="modulepreload",v4=function(t){return"/"+t},o1={},Xn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");s=a(n.map(h=>{if(h=v4(h),h in o1)return;o1[h]=!0;const m=h.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":g4,m||(v.as="script"),v.crossOrigin="",v.href=h,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((y,w)=>{v.addEventListener("load",y),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};var g=ip();const we=q0(g),RE=o4({__proto__:null,default:we},[g]);function a1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function op(...t){return e=>{let n=!1;const r=t.map(s=>{const o=a1(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():a1(t[s],null)}}}}function ct(...t){return g.useCallback(op(...t),t)}function Ua(t){const e=x4(t),n=g.forwardRef((r,s)=>{const{children:o,...a}=r,l=g.Children.toArray(o),d=l.find(y4);if(d){const h=d.props.children,m=l.map(f=>f===d?g.Children.count(h)>1?g.Children.only(null):g.isValidElement(h)?h.props.children:null:f);return i.jsx(e,{...a,ref:s,children:g.isValidElement(h)?g.cloneElement(h,void 0,m):null})}return i.jsx(e,{...a,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}var ap=Ua("Slot");function x4(t){const e=g.forwardRef((n,r)=>{const{children:s,...o}=n;if(g.isValidElement(s)){const a=w4(s),l=b4(o,s.props);return s.type!==g.Fragment&&(l.ref=r?op(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var AE=Symbol("radix.slottable");function IE(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=AE,e}function y4(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===AE}function b4(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const d=o(...l);return s(...l),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function w4(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function OE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=OE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ME(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=OE(t))&&(r&&(r+=" "),r+=e);return r}const l1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,c1=ME,lp=(t,e)=>n=>{var r;if(e?.variants==null)return c1(t,n?.class,n?.className);const{variants:s,defaultVariants:o}=e,a=Object.keys(s).map(h=>{const m=n?.[h],f=o?.[h];if(m===null)return null;const v=l1(m)||l1(f);return s[h][v]}),l=n&&Object.entries(n).reduce((h,m)=>{let[f,v]=m;return v===void 0||(h[f]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:f,className:v,...y}=m;return Object.entries(y).every(w=>{let[b,k]=w;return Array.isArray(k)?k.includes({...o,...l}[b]):{...o,...l}[b]===k})?[...h,f,v]:h},[]);return c1(t,a,d,n?.class,n?.className)};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),d1=t=>{const e=k4(t);return e.charAt(0).toUpperCase()+e.slice(1)},DE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var j4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},d)=>g.createElement("svg",{ref:d,...j4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:DE("lucide",s),...l},[...a.map(([h,m])=>g.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(t,e)=>{const n=g.forwardRef(({className:r,...s},o)=>g.createElement(C4,{ref:o,iconNode:e,className:DE(`lucide-${S4(d1(t))}`,`lucide-${t}`,r),...s}));return n.displayName=d1(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],W0=Ce("arrow-left",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],E4=Ce("arrow-right",N4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ia=Ce("award",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],R4=Ce("book-open",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],u1=Ce("bug",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jr=Ce("calendar",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Nr=Ce("camera",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mc=Ce("chart-column",M4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ns=Ce("check",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],cp=Ce("chevron-down",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],LE=Ce("chevron-up",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],UE=Ce("chrome",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Jt=Ce("circle-alert",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$4=Ce("circle-check-big",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$e=Ce("circle-check",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fc=Ce("circle-x",q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Vr=Ce("clock",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tc=Ce("copy",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],H0=Ce("crown",G4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],FE=Ce("dollar-sign",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Lo=Ce("download",J4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],X4=Ce("ellipsis-vertical",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Z4=Ce("ellipsis",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],is=Ce("eye",eL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],nL=Ce("facebook",tL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sL=Ce("file-text",rL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],oL=Ce("flag",iL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],lL=Ce("gift",aL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],VE=Ce("globe",cL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],uL=Ce("grid-3x3",dL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],h1=Ce("hash",hL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Es=Ce("heart",mL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],pL=Ce("house",fL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],BE=Ce("image",gL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xL=Ce("info",vL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],qv=Ce("lightbulb",yL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],wL=Ce("list",bL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],or=Ce("loader-circle",SL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],m1=Ce("log-in",kL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],CL=Ce("log-out",jL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ty=Ce("mail",TL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_s=Ce("map-pin",NL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],PL=Ce("maximize",EL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],RL=Ce("medal",_L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],du=Ce("message-circle",AL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Mo=Ce("message-square",IL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],ML=Ce("mic-off",OL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],LL=Ce("mic",DL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],FL=Ce("minimize",UL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],BL=Ce("pen",VL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ff=Ce("play",$L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pf=Ce("plus",zL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],In=Ce("radio",qL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],G0=Ce("refresh-cw",WL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],GL=Ce("rocket",HL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],JL=Ce("ruler",KL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],f1=Ce("save",YL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],K0=Ce("search",XL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ZL=Ce("send",QL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Uo=Ce("share-2",e3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qn=Ce("shield",t3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}]],r3=Ce("signal-high",n3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}]],i3=Ce("signal-low",s3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],a3=Ce("signal",o3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],$E=Ce("smartphone",l3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],d3=Ce("smile",c3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Rs=Ce("sparkles",u3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zE=Ce("square-pen",h3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],uu=Ce("star",m3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],p3=Ce("store",f3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],gf=Ce("target",g3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Bi=Ce("trash-2",v3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],_c=Ce("trending-up",x3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],b3=Ce("triangle-alert",y3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Nt=Ce("trophy",w3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],k3=Ce("twitter",S3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],dp=Ce("upload",j3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hu=Ce("user-plus",C3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],N3=Ce("user-x",T3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mu=Ce("user",E3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],wt=Ce("users",P3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],p1=Ce("video-off",_3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],js=Ce("video",R3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],I3=Ce("weight",A3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vf=Ce("wifi-off",O3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ny=Ce("wifi",M3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],L3=Ce("wrench",D3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cr=Ce("x",U3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fu=Ce("zap",F3),Wv=768;function V3(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Wv-1}px)`),r=()=>{e(window.innerWidth<Wv)};return n.addEventListener("change",r),e(window.innerWidth<Wv),()=>n.removeEventListener("change",r)},[]),!!t}const J0="-",B3=t=>{const e=z3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(J0);return l[0]===""&&l.length!==1&&l.shift(),qE(l,e)||$3(a)},getConflictingClassGroupIds:(a,l)=>{const d=n[a]||[];return l&&r[a]?[...d,...r[a]]:d}}},qE=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?qE(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(J0);return e.validators.find(({validator:a})=>a(o))?.classGroupId},g1=/^\[(.+)\]$/,$3=t=>{if(g1.test(t)){const e=g1.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},z3=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)ry(n[s],r,s,e);return r},ry=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:v1(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(q3(s)){ry(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{ry(a,v1(e,o),n,r)})})},v1=(t,e)=>{let n=t;return e.split(J0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},q3=t=>t.isThemeGetter,W3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},sy="!",iy=":",H3=iy.length,G3=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const o=[];let a=0,l=0,d=0,h;for(let w=0;w<s.length;w++){let b=s[w];if(a===0&&l===0){if(b===iy){o.push(s.slice(d,w)),d=w+H3;continue}if(b==="/"){h=w;continue}}b==="["?a++:b==="]"?a--:b==="("?l++:b===")"&&l--}const m=o.length===0?s:s.substring(d),f=K3(m),v=f!==m,y=h&&h>d?h-d:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:f,maybePostfixModifierPosition:y}};if(e){const s=e+iy,o=r;r=a=>a.startsWith(s)?o(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},K3=t=>t.endsWith(sy)?t.substring(0,t.length-1):t.startsWith(sy)?t.substring(1):t,J3=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(a=>{a[0]==="["||e[a]?(s.push(...o.sort(),a),o=[]):o.push(a)}),s.push(...o.sort()),s}},Y3=t=>({cache:W3(t.cacheSize),parseClassName:G3(t),sortModifiers:J3(t),...B3(t)}),X3=/\s+/,Q3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,a=[],l=t.trim().split(X3);let d="";for(let h=l.length-1;h>=0;h-=1){const m=l[h],{isExternal:f,modifiers:v,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:b}=n(m);if(f){d=m+(d.length>0?" "+d:d);continue}let k=!!b,j=r(k?w.substring(0,b):w);if(!j){if(!k){d=m+(d.length>0?" "+d:d);continue}if(j=r(w),!j){d=m+(d.length>0?" "+d:d);continue}k=!1}const T=o(v).join(":"),E=y?T+sy:T,P=E+j;if(a.includes(P))continue;a.push(P);const N=s(j,k);for(let _=0;_<N.length;++_){const I=N[_];a.push(E+I)}d=m+(d.length>0?" "+d:d)}return d};function Z3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=WE(e))&&(r&&(r+=" "),r+=n);return r}const WE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=WE(t[r]))&&(n&&(n+=" "),n+=e);return n};function eU(t,...e){let n,r,s,o=a;function a(d){const h=e.reduce((m,f)=>f(m),t());return n=Y3(h),r=n.cache.get,s=n.cache.set,o=l,l(d)}function l(d){const h=r(d);if(h)return h;const m=Q3(d,n);return s(d,m),m}return function(){return o(Z3.apply(null,arguments))}}const bn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},HE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,GE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tU=/^\d+\/\d+$/,nU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,iU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Al=t=>tU.test(t),rt=t=>!!t&&!Number.isNaN(Number(t)),Co=t=>!!t&&Number.isInteger(Number(t)),Hv=t=>t.endsWith("%")&&rt(t.slice(0,-1)),Ri=t=>nU.test(t),aU=()=>!0,lU=t=>rU.test(t)&&!sU.test(t),KE=()=>!1,cU=t=>iU.test(t),dU=t=>oU.test(t),uU=t=>!Le(t)&&!Ue(t),hU=t=>$c(t,XE,KE),Le=t=>HE.test(t),xa=t=>$c(t,QE,lU),Gv=t=>$c(t,vU,rt),x1=t=>$c(t,JE,KE),mU=t=>$c(t,YE,dU),vm=t=>$c(t,ZE,cU),Ue=t=>GE.test(t),Dd=t=>zc(t,QE),fU=t=>zc(t,xU),y1=t=>zc(t,JE),pU=t=>zc(t,XE),gU=t=>zc(t,YE),xm=t=>zc(t,ZE,!0),$c=(t,e,n)=>{const r=HE.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},zc=(t,e,n=!1)=>{const r=GE.exec(t);return r?r[1]?e(r[1]):n:!1},JE=t=>t==="position"||t==="percentage",YE=t=>t==="image"||t==="url",XE=t=>t==="length"||t==="size"||t==="bg-size",QE=t=>t==="length",vU=t=>t==="number",xU=t=>t==="family-name",ZE=t=>t==="shadow",yU=()=>{const t=bn("color"),e=bn("font"),n=bn("text"),r=bn("font-weight"),s=bn("tracking"),o=bn("leading"),a=bn("breakpoint"),l=bn("container"),d=bn("spacing"),h=bn("radius"),m=bn("shadow"),f=bn("inset-shadow"),v=bn("text-shadow"),y=bn("drop-shadow"),w=bn("blur"),b=bn("perspective"),k=bn("aspect"),j=bn("ease"),T=bn("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...P(),Ue,Le],_=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],M=()=>[Ue,Le,d],O=()=>[Al,"full","auto",...M()],L=()=>[Co,"none","subgrid",Ue,Le],D=()=>["auto",{span:["full",Co,Ue,Le]},Co,Ue,Le],A=()=>[Co,"auto",Ue,Le],Z=()=>["auto","min","max","fr",Ue,Le],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],fe=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...M()],de=()=>[Al,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...M()],U=()=>[t,Ue,Le],G=()=>[...P(),y1,x1,{position:[Ue,Le]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",pU,hU,{size:[Ue,Le]}],ee=()=>[Hv,Dd,xa],he=()=>["","none","full",h,Ue,Le],B=()=>["",rt,Dd,xa],te=()=>["solid","dashed","dotted","double"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[rt,Hv,y1,x1],ge=()=>["","none",w,Ue,Le],_e=()=>["none",rt,Ue,Le],ve=()=>["none",rt,Ue,Le],Ee=()=>[rt,Ue,Le],me=()=>[Al,"full",...M()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ri],breakpoint:[Ri],color:[aU],container:[Ri],"drop-shadow":[Ri],ease:["in","out","in-out"],font:[uU],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ri],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ri],shadow:[Ri],spacing:["px",rt],text:[Ri],"text-shadow":[Ri],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Al,Le,Ue,k]}],container:["container"],columns:[{columns:[rt,Le,Ue,l]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Co,"auto",Ue,Le]}],basis:[{basis:[Al,"full","auto",l,...M()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[rt,Al,"auto","initial","none",Le]}],grow:[{grow:["",rt,Ue,Le]}],shrink:[{shrink:["",rt,Ue,Le]}],order:[{order:[Co,"first","last","none",Ue,Le]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...fe()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...fe(),"baseline"]}],"place-self":[{"place-self":["auto",...fe()]}],p:[{p:M()}],px:[{px:M()}],py:[{py:M()}],ps:[{ps:M()}],pe:[{pe:M()}],pt:[{pt:M()}],pr:[{pr:M()}],pb:[{pb:M()}],pl:[{pl:M()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":M()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":M()}],"space-y-reverse":["space-y-reverse"],size:[{size:de()}],w:[{w:[l,"screen",...de()]}],"min-w":[{"min-w":[l,"screen","none",...de()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...de()]}],h:[{h:["screen","lh",...de()]}],"min-h":[{"min-h":["screen","lh","none",...de()]}],"max-h":[{"max-h":["screen","lh",...de()]}],"font-size":[{text:["base",n,Dd,xa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ue,Gv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Hv,Le]}],"font-family":[{font:[fU,Le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ue,Le]}],"line-clamp":[{"line-clamp":[rt,"none",Ue,Gv]}],leading:[{leading:[o,...M()]}],"list-image":[{"list-image":["none",Ue,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:[rt,"from-font","auto",Ue,xa]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[rt,"auto",Ue,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Co,Ue,Le],radial:["",Ue,Le],conic:[Co,Ue,Le]},gU,mU]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:B()}],"border-w-x":[{"border-x":B()}],"border-w-y":[{"border-y":B()}],"border-w-s":[{"border-s":B()}],"border-w-e":[{"border-e":B()}],"border-w-t":[{"border-t":B()}],"border-w-r":[{"border-r":B()}],"border-w-b":[{"border-b":B()}],"border-w-l":[{"border-l":B()}],"divide-x":[{"divide-x":B()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":B()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...te(),"hidden","none"]}],"divide-style":[{divide:[...te(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[rt,Ue,Le]}],"outline-w":[{outline:["",rt,Dd,xa]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",m,xm,vm]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",f,xm,vm]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[rt,xa]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":B()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",v,xm,vm]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[rt,Ue,Le]}],"mix-blend":[{"mix-blend":[...Te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[rt]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Ue,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[rt]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,Le]}],filter:[{filter:["","none",Ue,Le]}],blur:[{blur:ge()}],brightness:[{brightness:[rt,Ue,Le]}],contrast:[{contrast:[rt,Ue,Le]}],"drop-shadow":[{"drop-shadow":["","none",y,xm,vm]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",rt,Ue,Le]}],"hue-rotate":[{"hue-rotate":[rt,Ue,Le]}],invert:[{invert:["",rt,Ue,Le]}],saturate:[{saturate:[rt,Ue,Le]}],sepia:[{sepia:["",rt,Ue,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,Le]}],"backdrop-blur":[{"backdrop-blur":ge()}],"backdrop-brightness":[{"backdrop-brightness":[rt,Ue,Le]}],"backdrop-contrast":[{"backdrop-contrast":[rt,Ue,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",rt,Ue,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[rt,Ue,Le]}],"backdrop-invert":[{"backdrop-invert":["",rt,Ue,Le]}],"backdrop-opacity":[{"backdrop-opacity":[rt,Ue,Le]}],"backdrop-saturate":[{"backdrop-saturate":[rt,Ue,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",rt,Ue,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":M()}],"border-spacing-x":[{"border-spacing-x":M()}],"border-spacing-y":[{"border-spacing-y":M()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[rt,"initial",Ue,Le]}],ease:[{ease:["linear","initial",j,Ue,Le]}],delay:[{delay:[rt,Ue,Le]}],animate:[{animate:["none",T,Ue,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Ue,Le]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:_e()}],"rotate-x":[{"rotate-x":_e()}],"rotate-y":[{"rotate-y":_e()}],"rotate-z":[{"rotate-z":_e()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:Ee()}],"skew-x":[{"skew-x":Ee()}],"skew-y":[{"skew-y":Ee()}],transform:[{transform:[Ue,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,Le]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[rt,Dd,xa,Gv]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},bU=eU(yU);function Pe(...t){return bU(ME(t))}const Y0=lp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),q=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const a=r?ap:"button";return i.jsx(a,{"data-slot":"button",className:Pe(Y0({variant:e,size:n,className:t})),ref:o,...s})});q.displayName="Button";function ht({className:t,type:e,...n}){return i.jsx("input",{type:e,"data-slot":"input",className:Pe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var Hu=_E();const eP=q0(Hu);var wU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Je=wU.reduce((t,e)=>{const n=Ua(`Primitive.${e}`),r=g.forwardRef((s,o)=>{const{asChild:a,...l}=s,d=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(d,{...l,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function tP(t,e){t&&Hu.flushSync(()=>t.dispatchEvent(e))}var SU="Separator",b1="horizontal",kU=["horizontal","vertical"],nP=g.forwardRef((t,e)=>{const{decorative:n,orientation:r=b1,...s}=t,o=jU(r)?r:b1,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(Je.div,{"data-orientation":o,...l,...s,ref:e})});nP.displayName=SU;function jU(t){return kU.includes(t)}var CU=nP;function Jn({className:t,orientation:e="horizontal",decorative:n=!0,...r}){return i.jsx(CU,{"data-slot":"separator-root",decorative:n,orientation:e,className:Pe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}function Re(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function TU(t,e){const n=g.createContext(e),r=o=>{const{children:a,...l}=o,d=g.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:d,children:a})};r.displayName=t+"Provider";function s(o){const a=g.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function zr(t,e=[]){let n=[];function r(o,a){const l=g.createContext(a),d=n.length;n=[...n,a];const h=f=>{const{scope:v,children:y,...w}=f,b=v?.[t]?.[d]||l,k=g.useMemo(()=>w,Object.values(w));return i.jsx(b.Provider,{value:k,children:y})};h.displayName=o+"Provider";function m(f,v){const y=v?.[t]?.[d]||l,w=g.useContext(y);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[h,m]}const s=()=>{const o=n.map(a=>g.createContext(a));return function(l){const d=l?.[t]||o;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return s.scopeName=t,[r,NU(s,...e)]}function NU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:d,scopeName:h})=>{const f=d(o)[`__scope${h}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var mn=globalThis?.document?g.useLayoutEffect:()=>{},EU=RE[" useId ".trim().toString()]||(()=>{}),PU=0;function As(t){const[e,n]=g.useState(EU());return mn(()=>{n(r=>r??String(PU++))},[t]),t||(e?`radix-${e}`:"")}var _U=RE[" useInsertionEffect ".trim().toString()]||mn;function Fa({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,o,a]=RU({defaultProp:e,onChange:n}),l=t!==void 0,d=l?t:s;{const m=g.useRef(t!==void 0);g.useEffect(()=>{const f=m.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,r])}const h=g.useCallback(m=>{if(l){const f=AU(m)?m(t):m;f!==t&&a.current?.(f)}else o(m)},[l,t,o,a]);return[d,h]}function RU({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),o=g.useRef(e);return _U(()=>{o.current=e},[e]),g.useEffect(()=>{s.current!==n&&(o.current?.(n),s.current=n)},[n,s]),[n,r,o]}function AU(t){return typeof t=="function"}function Mn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>e.current?.(...n),[])}function IU(t,e=globalThis?.document){const n=Mn(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var OU="DismissableLayer",oy="dismissableLayer.update",MU="dismissableLayer.pointerDownOutside",DU="dismissableLayer.focusOutside",w1,rP=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gu=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...d}=t,h=g.useContext(rP),[m,f]=g.useState(null),v=m?.ownerDocument??globalThis?.document,[,y]=g.useState({}),w=ct(e,I=>f(I)),b=Array.from(h.layers),[k]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),j=b.indexOf(k),T=m?b.indexOf(m):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,P=T>=j,N=FU(I=>{const M=I.target,O=[...h.branches].some(L=>L.contains(M));!P||O||(s?.(I),a?.(I),I.defaultPrevented||l?.())},v),_=VU(I=>{const M=I.target;[...h.branches].some(L=>L.contains(M))||(o?.(I),a?.(I),I.defaultPrevented||l?.())},v);return IU(I=>{T===h.layers.size-1&&(r?.(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},v),g.useEffect(()=>{if(m)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(w1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),S1(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=w1)}},[m,v,n,h]),g.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),S1())},[m,h]),g.useEffect(()=>{const I=()=>y({});return document.addEventListener(oy,I),()=>document.removeEventListener(oy,I)},[]),i.jsx(Je.div,{...d,ref:w,style:{pointerEvents:E?P?"auto":"none":void 0,...t.style},onFocusCapture:Re(t.onFocusCapture,_.onFocusCapture),onBlurCapture:Re(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Re(t.onPointerDownCapture,N.onPointerDownCapture)})});Gu.displayName=OU;var LU="DismissableLayerBranch",UU=g.forwardRef((t,e)=>{const n=g.useContext(rP),r=g.useRef(null),s=ct(e,r);return g.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(Je.div,{...t,ref:s})});UU.displayName=LU;function FU(t,e=globalThis?.document){const n=Mn(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let d=function(){sP(MU,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function VU(t,e=globalThis?.document){const n=Mn(t),r=g.useRef(!1);return g.useEffect(()=>{const s=o=>{o.target&&!r.current&&sP(DU,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function S1(){const t=new CustomEvent(oy);document.dispatchEvent(t)}function sP(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?tP(s,o):s.dispatchEvent(o)}var Kv="focusScope.autoFocusOnMount",Jv="focusScope.autoFocusOnUnmount",k1={bubbles:!1,cancelable:!0},BU="FocusScope",up=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=t,[l,d]=g.useState(null),h=Mn(s),m=Mn(o),f=g.useRef(null),v=ct(e,b=>d(b)),y=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let b=function(E){if(y.paused||!l)return;const P=E.target;l.contains(P)?f.current=P:Po(f.current,{select:!0})},k=function(E){if(y.paused||!l)return;const P=E.relatedTarget;P!==null&&(l.contains(P)||Po(f.current,{select:!0}))},j=function(E){if(document.activeElement===document.body)for(const N of E)N.removedNodes.length>0&&Po(l)};document.addEventListener("focusin",b),document.addEventListener("focusout",k);const T=new MutationObserver(j);return l&&T.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",k),T.disconnect()}}},[r,l,y.paused]),g.useEffect(()=>{if(l){C1.add(y);const b=document.activeElement;if(!l.contains(b)){const j=new CustomEvent(Kv,k1);l.addEventListener(Kv,h),l.dispatchEvent(j),j.defaultPrevented||($U(GU(iP(l)),{select:!0}),document.activeElement===b&&Po(l))}return()=>{l.removeEventListener(Kv,h),setTimeout(()=>{const j=new CustomEvent(Jv,k1);l.addEventListener(Jv,m),l.dispatchEvent(j),j.defaultPrevented||Po(b??document.body,{select:!0}),l.removeEventListener(Jv,m),C1.remove(y)},0)}}},[l,h,m,y]);const w=g.useCallback(b=>{if(!n&&!r||y.paused)return;const k=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,j=document.activeElement;if(k&&j){const T=b.currentTarget,[E,P]=zU(T);E&&P?!b.shiftKey&&j===P?(b.preventDefault(),n&&Po(E,{select:!0})):b.shiftKey&&j===E&&(b.preventDefault(),n&&Po(P,{select:!0})):j===T&&b.preventDefault()}},[n,r,y.paused]);return i.jsx(Je.div,{tabIndex:-1,...a,ref:v,onKeyDown:w})});up.displayName=BU;function $U(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Po(r,{select:e}),document.activeElement!==n)return}function zU(t){const e=iP(t),n=j1(e,t),r=j1(e.reverse(),t);return[n,r]}function iP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function j1(t,e){for(const n of t)if(!qU(n,{upTo:e}))return n}function qU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function WU(t){return t instanceof HTMLInputElement&&"select"in t}function Po(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&WU(t)&&e&&t.select()}}var C1=HU();function HU(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=T1(t,e),t.unshift(e)},remove(e){t=T1(t,e),t[0]?.resume()}}}function T1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function GU(t){return t.filter(e=>e.tagName!=="A")}var KU="Portal",Ku=g.forwardRef((t,e)=>{const{container:n,...r}=t,[s,o]=g.useState(!1);mn(()=>o(!0),[]);const a=n||s&&globalThis?.document?.body;return a?eP.createPortal(i.jsx(Je.div,{...r,ref:e}),a):null});Ku.displayName=KU;function JU(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var dr=t=>{const{present:e,children:n}=t,r=YU(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),o=ct(r.ref,XU(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:o}):null};dr.displayName="Presence";function YU(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),o=g.useRef("none"),a=t?"mounted":"unmounted",[l,d]=JU(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const h=ym(r.current);o.current=l==="mounted"?h:"none"},[l]),mn(()=>{const h=r.current,m=s.current;if(m!==t){const v=o.current,y=ym(h);t?d("MOUNT"):y==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&v!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,d]),mn(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,f=y=>{const b=ym(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&b&&(d("ANIMATION_END"),!s.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},v=y=>{y.target===e&&(o.current=ym(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function ym(t){return t?.animationName||"none"}function XU(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Yv=0;function X0(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??N1()),document.body.insertAdjacentElement("beforeend",t[1]??N1()),Yv++,()=>{Yv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Yv--}},[])}function N1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ii=function(){return ii=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ii.apply(this,arguments)};function oP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function QU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Hm="right-scroll-bar-position",Gm="width-before-scroll-bar",ZU="with-scroll-bars-hidden",e6="--removed-body-scroll-bar-size";function Xv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function t6(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var n6=typeof window<"u"?g.useLayoutEffect:g.useEffect,E1=new WeakMap;function r6(t,e){var n=t6(null,function(r){return t.forEach(function(s){return Xv(s,r)})});return n6(function(){var r=E1.get(n);if(r){var s=new Set(r),o=new Set(t),a=n.current;s.forEach(function(l){o.has(l)||Xv(l,null)}),o.forEach(function(l){s.has(l)||Xv(l,a)})}E1.set(n,t)},[t]),n}function s6(t){return t}function i6(t,e){e===void 0&&(e=s6);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var d=function(){var m=a;a=[],m.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(m){a.push(m),h()},filter:function(m){return a=a.filter(m),n}}}};return s}function o6(t){t===void 0&&(t={});var e=i6(null);return e.options=ii({async:!0,ssr:!1},t),e}var aP=function(t){var e=t.sideCar,n=oP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,ii({},n))};aP.isSideCarExport=!0;function a6(t,e){return t.useMedium(e),aP}var lP=o6(),Qv=function(){},hp=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Qv,onWheelCapture:Qv,onTouchMoveCapture:Qv}),s=r[0],o=r[1],a=t.forwardProps,l=t.children,d=t.className,h=t.removeScrollBar,m=t.enabled,f=t.shards,v=t.sideCar,y=t.noRelative,w=t.noIsolation,b=t.inert,k=t.allowPinchZoom,j=t.as,T=j===void 0?"div":j,E=t.gapMode,P=oP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=v,_=r6([n,e]),I=ii(ii({},P),s);return g.createElement(g.Fragment,null,m&&g.createElement(N,{sideCar:lP,removeScrollBar:h,shards:f,noRelative:y,noIsolation:w,inert:b,setCallbacks:o,allowPinchZoom:!!k,lockRef:n,gapMode:E}),a?g.cloneElement(g.Children.only(l),ii(ii({},I),{ref:_})):g.createElement(T,ii({},I,{className:d,ref:_}),l))});hp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hp.classNames={fullWidth:Gm,zeroRight:Hm};var l6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function c6(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=l6();return e&&t.setAttribute("nonce",e),t}function d6(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function u6(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var h6=function(){var t=0,e=null;return{add:function(n){t==0&&(e=c6())&&(d6(e,n),u6(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},m6=function(){var t=h6();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},cP=function(){var t=m6(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},f6={left:0,top:0,right:0,gap:0},Zv=function(t){return parseInt(t||"",10)||0},p6=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Zv(n),Zv(r),Zv(s)]},g6=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return f6;var e=p6(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},v6=cP(),pc="data-scroll-locked",x6=function(t,e,n,r){var s=t.left,o=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(ZU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(pc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hm,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gm,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Hm," .").concat(Hm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gm," .").concat(Gm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pc,`] {
    `).concat(e6,": ").concat(l,`px;
  }
`)},P1=function(){var t=parseInt(document.body.getAttribute(pc)||"0",10);return isFinite(t)?t:0},y6=function(){g.useEffect(function(){return document.body.setAttribute(pc,(P1()+1).toString()),function(){var t=P1()-1;t<=0?document.body.removeAttribute(pc):document.body.setAttribute(pc,t.toString())}},[])},b6=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;y6();var o=g.useMemo(function(){return g6(s)},[s]);return g.createElement(v6,{styles:x6(o,!e,s,n?"":"!important")})},ay=!1;if(typeof window<"u")try{var bm=Object.defineProperty({},"passive",{get:function(){return ay=!0,!0}});window.addEventListener("test",bm,bm),window.removeEventListener("test",bm,bm)}catch{ay=!1}var Il=ay?{passive:!1}:!1,w6=function(t){return t.tagName==="TEXTAREA"},dP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!w6(t)&&n[e]==="visible")},S6=function(t){return dP(t,"overflowY")},k6=function(t){return dP(t,"overflowX")},_1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=uP(t,r);if(s){var o=hP(t,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},j6=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},C6=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},uP=function(t,e){return t==="v"?S6(e):k6(e)},hP=function(t,e){return t==="v"?j6(e):C6(e)},T6=function(t,e){return t==="h"&&e==="rtl"?-1:1},N6=function(t,e,n,r,s){var o=T6(t,window.getComputedStyle(e).direction),a=o*r,l=n.target,d=e.contains(l),h=!1,m=a>0,f=0,v=0;do{if(!l)break;var y=hP(t,l),w=y[0],b=y[1],k=y[2],j=b-k-o*w;(w||j)&&uP(t,l)&&(f+=j,v+=w);var T=l.parentNode;l=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(m&&Math.abs(f)<1||!m&&Math.abs(v)<1)&&(h=!0),h},wm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},R1=function(t){return[t.deltaX,t.deltaY]},A1=function(t){return t&&"current"in t?t.current:t},E6=function(t,e){return t[0]===e[0]&&t[1]===e[1]},P6=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},_6=0,Ol=[];function R6(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(_6++)[0],o=g.useState(cP)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var b=QU([t.lockRef.current],(t.shards||[]).map(A1),!0).filter(Boolean);return b.forEach(function(k){return k.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(b,k){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!a.current.allowPinchZoom;var j=wm(b),T=n.current,E="deltaX"in b?b.deltaX:T[0]-j[0],P="deltaY"in b?b.deltaY:T[1]-j[1],N,_=b.target,I=Math.abs(E)>Math.abs(P)?"h":"v";if("touches"in b&&I==="h"&&_.type==="range")return!1;var M=_1(I,_);if(!M)return!0;if(M?N=I:(N=I==="v"?"h":"v",M=_1(I,_)),!M)return!1;if(!r.current&&"changedTouches"in b&&(E||P)&&(r.current=N),!N)return!0;var O=r.current||N;return N6(O,k,b,O==="h"?E:P)},[]),d=g.useCallback(function(b){var k=b;if(!(!Ol.length||Ol[Ol.length-1]!==o)){var j="deltaY"in k?R1(k):wm(k),T=e.current.filter(function(N){return N.name===k.type&&(N.target===k.target||k.target===N.shadowParent)&&E6(N.delta,j)})[0];if(T&&T.should){k.cancelable&&k.preventDefault();return}if(!T){var E=(a.current.shards||[]).map(A1).filter(Boolean).filter(function(N){return N.contains(k.target)}),P=E.length>0?l(k,E[0]):!a.current.noIsolation;P&&k.cancelable&&k.preventDefault()}}},[]),h=g.useCallback(function(b,k,j,T){var E={name:b,delta:k,target:j,should:T,shadowParent:A6(j)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(P){return P!==E})},1)},[]),m=g.useCallback(function(b){n.current=wm(b),r.current=void 0},[]),f=g.useCallback(function(b){h(b.type,R1(b),b.target,l(b,t.lockRef.current))},[]),v=g.useCallback(function(b){h(b.type,wm(b),b.target,l(b,t.lockRef.current))},[]);g.useEffect(function(){return Ol.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Il),document.addEventListener("touchmove",d,Il),document.addEventListener("touchstart",m,Il),function(){Ol=Ol.filter(function(b){return b!==o}),document.removeEventListener("wheel",d,Il),document.removeEventListener("touchmove",d,Il),document.removeEventListener("touchstart",m,Il)}},[]);var y=t.removeScrollBar,w=t.inert;return g.createElement(g.Fragment,null,w?g.createElement(o,{styles:P6(s)}):null,y?g.createElement(b6,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function A6(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const I6=a6(lP,R6);var mp=g.forwardRef(function(t,e){return g.createElement(hp,ii({},t,{ref:e,sideCar:I6}))});mp.classNames=hp.classNames;var O6=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ml=new WeakMap,Sm=new WeakMap,km={},ex=0,mP=function(t){return t&&(t.host||mP(t.parentNode))},M6=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=mP(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},D6=function(t,e,n,r){var s=M6(e,Array.isArray(t)?t:[t]);km[n]||(km[n]=new WeakMap);var o=km[n],a=[],l=new Set,d=new Set(s),h=function(f){!f||l.has(f)||(l.add(f),h(f.parentNode))};s.forEach(h);var m=function(f){!f||d.has(f)||Array.prototype.forEach.call(f.children,function(v){if(l.has(v))m(v);else try{var y=v.getAttribute(r),w=y!==null&&y!=="false",b=(Ml.get(v)||0)+1,k=(o.get(v)||0)+1;Ml.set(v,b),o.set(v,k),a.push(v),b===1&&w&&Sm.set(v,!0),k===1&&v.setAttribute(n,"true"),w||v.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",v,j)}})};return m(e),l.clear(),ex++,function(){a.forEach(function(f){var v=Ml.get(f)-1,y=o.get(f)-1;Ml.set(f,v),o.set(f,y),v||(Sm.has(f)||f.removeAttribute(r),Sm.delete(f)),y||f.removeAttribute(n)}),ex--,ex||(Ml=new WeakMap,Ml=new WeakMap,Sm=new WeakMap,km={})}},Q0=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=O6(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),D6(r,s,n,"aria-hidden")):function(){return null}},fp="Dialog",[fP,pP]=zr(fp),[L6,Bs]=fP(fp),gP=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=g.useRef(null),d=g.useRef(null),[h,m]=Fa({prop:r,defaultProp:s??!1,onChange:o,caller:fp});return i.jsx(L6,{scope:e,triggerRef:l,contentRef:d,contentId:As(),titleId:As(),descriptionId:As(),open:h,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(f=>!f),[m]),modal:a,children:n})};gP.displayName=fp;var vP="DialogTrigger",xP=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Bs(vP,n),o=ct(e,s.triggerRef);return i.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tb(s.open),...r,ref:o,onClick:Re(t.onClick,s.onOpenToggle)})});xP.displayName=vP;var Z0="DialogPortal",[U6,yP]=fP(Z0,{forceMount:void 0}),bP=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=Bs(Z0,e);return i.jsx(U6,{scope:e,forceMount:n,children:g.Children.map(r,a=>i.jsx(dr,{present:n||o.open,children:i.jsx(Ku,{asChild:!0,container:s,children:a})}))})};bP.displayName=Z0;var xf="DialogOverlay",wP=g.forwardRef((t,e)=>{const n=yP(xf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Bs(xf,t.__scopeDialog);return o.modal?i.jsx(dr,{present:r||o.open,children:i.jsx(V6,{...s,ref:e})}):null});wP.displayName=xf;var F6=Ua("DialogOverlay.RemoveScroll"),V6=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Bs(xf,n);return i.jsx(mp,{as:F6,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Je.div,{"data-state":tb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Va="DialogContent",SP=g.forwardRef((t,e)=>{const n=yP(Va,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Bs(Va,t.__scopeDialog);return i.jsx(dr,{present:r||o.open,children:o.modal?i.jsx(B6,{...s,ref:e}):i.jsx($6,{...s,ref:e})})});SP.displayName=Va;var B6=g.forwardRef((t,e)=>{const n=Bs(Va,t.__scopeDialog),r=g.useRef(null),s=ct(e,n.contentRef,r);return g.useEffect(()=>{const o=r.current;if(o)return Q0(o)},[]),i.jsx(kP,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Re(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:Re(t.onFocusOutside,o=>o.preventDefault())})}),$6=g.forwardRef((t,e)=>{const n=Bs(Va,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return i.jsx(kP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),kP=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=t,l=Bs(Va,n),d=g.useRef(null),h=ct(e,d);return X0(),i.jsxs(i.Fragment,{children:[i.jsx(up,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Gu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tb(l.open),...a,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(q6,{titleId:l.titleId}),i.jsx(H6,{contentRef:d,descriptionId:l.descriptionId})]})]})}),eb="DialogTitle",jP=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Bs(eb,n);return i.jsx(Je.h2,{id:s.titleId,...r,ref:e})});jP.displayName=eb;var CP="DialogDescription",TP=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Bs(CP,n);return i.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});TP.displayName=CP;var NP="DialogClose",EP=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Bs(NP,n);return i.jsx(Je.button,{type:"button",...r,ref:e,onClick:Re(t.onClick,()=>s.onOpenChange(!1))})});EP.displayName=NP;function tb(t){return t?"open":"closed"}var PP="DialogTitleWarning",[z6,_P]=TU(PP,{contentName:Va,titleName:eb,docsSlug:"dialog"}),q6=({titleId:t})=>{const e=_P(PP),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},W6="DialogDescriptionWarning",H6=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_P(W6).contentName}}.`;return g.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},nb=gP,RP=xP,rb=bP,sb=wP,ib=SP,ob=jP,ab=TP,pp=EP;function G6({...t}){return i.jsx(nb,{"data-slot":"sheet",...t})}function K6({...t}){return i.jsx(rb,{"data-slot":"sheet-portal",...t})}function J6({className:t,...e}){return i.jsx(sb,{"data-slot":"sheet-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Y6({className:t,children:e,side:n="right",...r}){return i.jsxs(K6,{children:[i.jsx(J6,{}),i.jsxs(ib,{"data-slot":"sheet-content",className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[e,i.jsxs(pp,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[i.jsx(cr,{className:"size-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function X6({className:t,...e}){return i.jsx("div",{"data-slot":"sheet-header",className:Pe("flex flex-col gap-1.5 p-4",t),...e})}function Q6({className:t,...e}){return i.jsx(ob,{"data-slot":"sheet-title",className:Pe("text-foreground font-semibold",t),...e})}function Z6({className:t,...e}){return i.jsx(ab,{"data-slot":"sheet-description",className:Pe("text-muted-foreground text-sm",t),...e})}const eF=["top","right","bottom","left"],zo=Math.min,Ur=Math.max,yf=Math.round,jm=Math.floor,li=t=>({x:t,y:t}),tF={left:"right",right:"left",bottom:"top",top:"bottom"},nF={start:"end",end:"start"};function ly(t,e,n){return Ur(t,zo(e,n))}function $i(t,e){return typeof t=="function"?t(e):t}function zi(t){return t.split("-")[0]}function qc(t){return t.split("-")[1]}function lb(t){return t==="x"?"y":"x"}function cb(t){return t==="y"?"height":"width"}const rF=new Set(["top","bottom"]);function ai(t){return rF.has(zi(t))?"y":"x"}function db(t){return lb(ai(t))}function sF(t,e,n){n===void 0&&(n=!1);const r=qc(t),s=db(t),o=cb(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=bf(a)),[a,bf(a)]}function iF(t){const e=bf(t);return[cy(t),e,cy(e)]}function cy(t){return t.replace(/start|end/g,e=>nF[e])}const I1=["left","right"],O1=["right","left"],oF=["top","bottom"],aF=["bottom","top"];function lF(t,e,n){switch(t){case"top":case"bottom":return n?e?O1:I1:e?I1:O1;case"left":case"right":return e?oF:aF;default:return[]}}function cF(t,e,n,r){const s=qc(t);let o=lF(zi(t),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(cy)))),o}function bf(t){return t.replace(/left|right|bottom|top/g,e=>tF[e])}function dF(t){return{top:0,right:0,bottom:0,left:0,...t}}function AP(t){return typeof t!="number"?dF(t):{top:t,right:t,bottom:t,left:t}}function wf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function M1(t,e,n){let{reference:r,floating:s}=t;const o=ai(e),a=db(e),l=cb(a),d=zi(e),h=o==="y",m=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,v=r[l]/2-s[l]/2;let y;switch(d){case"top":y={x:m,y:r.y-s.height};break;case"bottom":y={x:m,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(qc(e)){case"start":y[a]-=v*(n&&h?-1:1);break;case"end":y[a]+=v*(n&&h?-1:1);break}return y}const uF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:m,y:f}=M1(h,r,d),v=r,y={},w=0;for(let b=0;b<l.length;b++){const{name:k,fn:j}=l[b],{x:T,y:E,data:P,reset:N}=await j({x:m,y:f,initialPlacement:r,placement:v,strategy:s,middlewareData:y,rects:h,platform:a,elements:{reference:t,floating:e}});m=T??m,f=E??f,y={...y,[k]:{...y[k],...P}},N&&w<=50&&(w++,typeof N=="object"&&(N.placement&&(v=N.placement),N.rects&&(h=N.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):N.rects),{x:m,y:f}=M1(h,v,d)),b=-1)}return{x:m,y:f,placement:v,strategy:s,middlewareData:y}};async function pu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:v=!1,padding:y=0}=$i(e,t),w=AP(y),k=l[v?f==="floating"?"reference":"floating":f],j=wf(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:h,rootBoundary:m,strategy:d})),T=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),P=await(o.isElement==null?void 0:o.isElement(E))?await(o.getScale==null?void 0:o.getScale(E))||{x:1,y:1}:{x:1,y:1},N=wf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:T,offsetParent:E,strategy:d}):T);return{top:(j.top-N.top+w.top)/P.y,bottom:(N.bottom-j.bottom+w.bottom)/P.y,left:(j.left-N.left+w.left)/P.x,right:(N.right-j.right+w.right)/P.x}}const hF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:d}=e,{element:h,padding:m=0}=$i(t,e)||{};if(h==null)return{};const f=AP(m),v={x:n,y:r},y=db(s),w=cb(y),b=await a.getDimensions(h),k=y==="y",j=k?"top":"left",T=k?"bottom":"right",E=k?"clientHeight":"clientWidth",P=o.reference[w]+o.reference[y]-v[y]-o.floating[w],N=v[y]-o.reference[y],_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let I=_?_[E]:0;(!I||!await(a.isElement==null?void 0:a.isElement(_)))&&(I=l.floating[E]||o.floating[w]);const M=P/2-N/2,O=I/2-b[w]/2-1,L=zo(f[j],O),D=zo(f[T],O),A=L,Z=I-b[w]-D,se=I/2-b[w]/2+M,fe=ly(A,se,Z),ae=!d.arrow&&qc(s)!=null&&se!==fe&&o.reference[w]/2-(se<A?L:D)-b[w]/2<0,de=ae?se<A?se-A:se-Z:0;return{[y]:v[y]+de,data:{[y]:fe,centerOffset:se-fe-de,...ae&&{alignmentOffset:de}},reset:ae}}}),mF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:b=!0,...k}=$i(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const j=zi(s),T=ai(l),E=zi(l)===l,P=await(d.isRTL==null?void 0:d.isRTL(h.floating)),N=v||(E||!b?[bf(l)]:iF(l)),_=w!=="none";!v&&_&&N.push(...cF(l,b,w,P));const I=[l,...N],M=await pu(e,k),O=[];let L=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&O.push(M[j]),f){const se=sF(s,a,P);O.push(M[se[0]],M[se[1]])}if(L=[...L,{placement:s,overflows:O}],!O.every(se=>se<=0)){var D,A;const se=(((D=o.flip)==null?void 0:D.index)||0)+1,fe=I[se];if(fe&&(!(f==="alignment"?T!==ai(fe):!1)||L.every(U=>ai(U.placement)===T?U.overflows[0]>0:!0)))return{data:{index:se,overflows:L},reset:{placement:fe}};let ae=(A=L.filter(de=>de.overflows[0]<=0).sort((de,U)=>de.overflows[1]-U.overflows[1])[0])==null?void 0:A.placement;if(!ae)switch(y){case"bestFit":{var Z;const de=(Z=L.filter(U=>{if(_){const G=ai(U.placement);return G===T||G==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(G=>G>0).reduce((G,le)=>G+le,0)]).sort((U,G)=>U[1]-G[1])[0])==null?void 0:Z[0];de&&(ae=de);break}case"initialPlacement":ae=l;break}if(s!==ae)return{reset:{placement:ae}}}return{}}}};function D1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function L1(t){return eF.some(e=>t[e]>=0)}const fF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=$i(t,e);switch(r){case"referenceHidden":{const o=await pu(e,{...s,elementContext:"reference"}),a=D1(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:L1(a)}}}case"escaped":{const o=await pu(e,{...s,altBoundary:!0}),a=D1(o,n.floating);return{data:{escapedOffsets:a,escaped:L1(a)}}}default:return{}}}}},IP=new Set(["left","top"]);async function pF(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=zi(n),l=qc(n),d=ai(n)==="y",h=IP.has(a)?-1:1,m=o&&d?-1:1,f=$i(e,t);let{mainAxis:v,crossAxis:y,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(y=l==="end"?w*-1:w),d?{x:y*m,y:v*h}:{x:v*h,y:y*m}}const gF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=e,d=await pF(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:a}}}}},vF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:k=>{let{x:j,y:T}=k;return{x:j,y:T}}},...d}=$i(t,e),h={x:n,y:r},m=await pu(e,d),f=ai(zi(s)),v=lb(f);let y=h[v],w=h[f];if(o){const k=v==="y"?"top":"left",j=v==="y"?"bottom":"right",T=y+m[k],E=y-m[j];y=ly(T,y,E)}if(a){const k=f==="y"?"top":"left",j=f==="y"?"bottom":"right",T=w+m[k],E=w-m[j];w=ly(T,w,E)}const b=l.fn({...e,[v]:y,[f]:w});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[v]:o,[f]:a}}}}}},xF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=e,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=$i(t,e),m={x:n,y:r},f=ai(s),v=lb(f);let y=m[v],w=m[f];const b=$i(l,e),k=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const E=v==="y"?"height":"width",P=o.reference[v]-o.floating[E]+k.mainAxis,N=o.reference[v]+o.reference[E]-k.mainAxis;y<P?y=P:y>N&&(y=N)}if(h){var j,T;const E=v==="y"?"width":"height",P=IP.has(zi(s)),N=o.reference[f]-o.floating[E]+(P&&((j=a.offset)==null?void 0:j[f])||0)+(P?0:k.crossAxis),_=o.reference[f]+o.reference[E]+(P?0:((T=a.offset)==null?void 0:T[f])||0)-(P?k.crossAxis:0);w<N?w=N:w>_&&(w=_)}return{[v]:y,[f]:w}}}},yF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:a,elements:l}=e,{apply:d=()=>{},...h}=$i(t,e),m=await pu(e,h),f=zi(s),v=qc(s),y=ai(s)==="y",{width:w,height:b}=o.floating;let k,j;f==="top"||f==="bottom"?(k=f,j=v===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(j=f,k=v==="end"?"top":"bottom");const T=b-m.top-m.bottom,E=w-m.left-m.right,P=zo(b-m[k],T),N=zo(w-m[j],E),_=!e.middlewareData.shift;let I=P,M=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(M=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=T),_&&!v){const L=Ur(m.left,0),D=Ur(m.right,0),A=Ur(m.top,0),Z=Ur(m.bottom,0);y?M=w-2*(L!==0||D!==0?L+D:Ur(m.left,m.right)):I=b-2*(A!==0||Z!==0?A+Z:Ur(m.top,m.bottom))}await d({...e,availableWidth:M,availableHeight:I});const O=await a.getDimensions(l.floating);return w!==O.width||b!==O.height?{reset:{rects:!0}}:{}}}};function gp(){return typeof window<"u"}function Wc(t){return OP(t)?(t.nodeName||"").toLowerCase():"#document"}function Br(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gi(t){var e;return(e=(OP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OP(t){return gp()?t instanceof Node||t instanceof Br(t).Node:!1}function Is(t){return gp()?t instanceof Element||t instanceof Br(t).Element:!1}function mi(t){return gp()?t instanceof HTMLElement||t instanceof Br(t).HTMLElement:!1}function U1(t){return!gp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Br(t).ShadowRoot}const bF=new Set(["inline","contents"]);function Ju(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Os(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!bF.has(s)}const wF=new Set(["table","td","th"]);function SF(t){return wF.has(Wc(t))}const kF=[":popover-open",":modal"];function vp(t){return kF.some(e=>{try{return t.matches(e)}catch{return!1}})}const jF=["transform","translate","scale","rotate","perspective"],CF=["transform","translate","scale","rotate","perspective","filter"],TF=["paint","layout","strict","content"];function ub(t){const e=hb(),n=Is(t)?Os(t):t;return jF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||CF.some(r=>(n.willChange||"").includes(r))||TF.some(r=>(n.contain||"").includes(r))}function NF(t){let e=qo(t);for(;mi(e)&&!Rc(e);){if(ub(e))return e;if(vp(e))return null;e=qo(e)}return null}function hb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const EF=new Set(["html","body","#document"]);function Rc(t){return EF.has(Wc(t))}function Os(t){return Br(t).getComputedStyle(t)}function xp(t){return Is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function qo(t){if(Wc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||U1(t)&&t.host||gi(t);return U1(e)?e.host:e}function MP(t){const e=qo(t);return Rc(e)?t.ownerDocument?t.ownerDocument.body:t.body:mi(e)&&Ju(e)?e:MP(e)}function gu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=MP(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),a=Br(s);if(o){const l=dy(a);return e.concat(a,a.visualViewport||[],Ju(s)?s:[],l&&n?gu(l):[])}return e.concat(s,gu(s,[],n))}function dy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function DP(t){const e=Os(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=mi(t),o=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=yf(n)!==o||yf(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function mb(t){return Is(t)?t:t.contextElement}function gc(t){const e=mb(t);if(!mi(e))return li(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=DP(e);let a=(o?yf(n.width):n.width)/r,l=(o?yf(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const PF=li(0);function LP(t){const e=Br(t);return!hb()||!e.visualViewport?PF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _F(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Br(t)?!1:e}function Ba(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=mb(t);let a=li(1);e&&(r?Is(r)&&(a=gc(r)):a=gc(t));const l=_F(o,n,r)?LP(o):li(0);let d=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,m=s.width/a.x,f=s.height/a.y;if(o){const v=Br(o),y=r&&Is(r)?Br(r):r;let w=v,b=dy(w);for(;b&&r&&y!==w;){const k=gc(b),j=b.getBoundingClientRect(),T=Os(b),E=j.left+(b.clientLeft+parseFloat(T.paddingLeft))*k.x,P=j.top+(b.clientTop+parseFloat(T.paddingTop))*k.y;d*=k.x,h*=k.y,m*=k.x,f*=k.y,d+=E,h+=P,w=Br(b),b=dy(w)}}return wf({width:m,height:f,x:d,y:h})}function yp(t,e){const n=xp(t).scrollLeft;return e?e.left+n:Ba(gi(t)).left+n}function UP(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-yp(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function RF(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",a=gi(r),l=e?vp(e.floating):!1;if(r===a||l&&o)return n;let d={scrollLeft:0,scrollTop:0},h=li(1);const m=li(0),f=mi(r);if((f||!f&&!o)&&((Wc(r)!=="body"||Ju(a))&&(d=xp(r)),mi(r))){const y=Ba(r);h=gc(r),m.x=y.x+r.clientLeft,m.y=y.y+r.clientTop}const v=a&&!f&&!o?UP(a,d):li(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+m.x+v.x,y:n.y*h.y-d.scrollTop*h.y+m.y+v.y}}function AF(t){return Array.from(t.getClientRects())}function IF(t){const e=gi(t),n=xp(t),r=t.ownerDocument.body,s=Ur(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ur(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+yp(t);const l=-n.scrollTop;return Os(r).direction==="rtl"&&(a+=Ur(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}const F1=25;function OF(t,e){const n=Br(t),r=gi(t),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,d=0;if(s){o=s.width,a=s.height;const m=hb();(!m||m&&e==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}const h=yp(r);if(h<=0){const m=r.ownerDocument,f=m.body,v=getComputedStyle(f),y=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,w=Math.abs(r.clientWidth-f.clientWidth-y);w<=F1&&(o-=w)}else h<=F1&&(o+=h);return{width:o,height:a,x:l,y:d}}const MF=new Set(["absolute","fixed"]);function DF(t,e){const n=Ba(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=mi(t)?gc(t):li(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,d=s*o.x,h=r*o.y;return{width:a,height:l,x:d,y:h}}function V1(t,e,n){let r;if(e==="viewport")r=OF(t,n);else if(e==="document")r=IF(gi(t));else if(Is(e))r=DF(e,n);else{const s=LP(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return wf(r)}function FP(t,e){const n=qo(t);return n===e||!Is(n)||Rc(n)?!1:Os(n).position==="fixed"||FP(n,e)}function LF(t,e){const n=e.get(t);if(n)return n;let r=gu(t,[],!1).filter(l=>Is(l)&&Wc(l)!=="body"),s=null;const o=Os(t).position==="fixed";let a=o?qo(t):t;for(;Is(a)&&!Rc(a);){const l=Os(a),d=ub(a);!d&&l.position==="fixed"&&(s=null),(o?!d&&!s:!d&&l.position==="static"&&!!s&&MF.has(s.position)||Ju(a)&&!d&&FP(t,a))?r=r.filter(m=>m!==a):s=l,a=qo(a)}return e.set(t,r),r}function UF(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?vp(e)?[]:LF(e,this._c):[].concat(n),r],l=a[0],d=a.reduce((h,m)=>{const f=V1(e,m,s);return h.top=Ur(f.top,h.top),h.right=zo(f.right,h.right),h.bottom=zo(f.bottom,h.bottom),h.left=Ur(f.left,h.left),h},V1(e,l,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function FF(t){const{width:e,height:n}=DP(t);return{width:e,height:n}}function VF(t,e,n){const r=mi(e),s=gi(e),o=n==="fixed",a=Ba(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const d=li(0);function h(){d.x=yp(s)}if(r||!r&&!o)if((Wc(e)!=="body"||Ju(s))&&(l=xp(e)),r){const y=Ba(e,!0,o,e);d.x=y.x+e.clientLeft,d.y=y.y+e.clientTop}else s&&h();o&&!r&&s&&h();const m=s&&!r&&!o?UP(s,l):li(0),f=a.left+l.scrollLeft-d.x-m.x,v=a.top+l.scrollTop-d.y-m.y;return{x:f,y:v,width:a.width,height:a.height}}function tx(t){return Os(t).position==="static"}function B1(t,e){if(!mi(t)||Os(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return gi(t)===n&&(n=n.ownerDocument.body),n}function VP(t,e){const n=Br(t);if(vp(t))return n;if(!mi(t)){let s=qo(t);for(;s&&!Rc(s);){if(Is(s)&&!tx(s))return s;s=qo(s)}return n}let r=B1(t,e);for(;r&&SF(r)&&tx(r);)r=B1(r,e);return r&&Rc(r)&&tx(r)&&!ub(r)?n:r||NF(t)||n}const BF=async function(t){const e=this.getOffsetParent||VP,n=this.getDimensions,r=await n(t.floating);return{reference:VF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $F(t){return Os(t).direction==="rtl"}const zF={convertOffsetParentRelativeRectToViewportRelativeRect:RF,getDocumentElement:gi,getClippingRect:UF,getOffsetParent:VP,getElementRects:BF,getClientRects:AF,getDimensions:FF,getScale:gc,isElement:Is,isRTL:$F};function BP(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function qF(t,e){let n=null,r;const s=gi(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),o();const h=t.getBoundingClientRect(),{left:m,top:f,width:v,height:y}=h;if(l||e(),!v||!y)return;const w=jm(f),b=jm(s.clientWidth-(m+v)),k=jm(s.clientHeight-(f+y)),j=jm(m),E={rootMargin:-w+"px "+-b+"px "+-k+"px "+-j+"px",threshold:Ur(0,zo(1,d))||1};let P=!0;function N(_){const I=_[0].intersectionRatio;if(I!==d){if(!P)return a();I?a(!1,I):r=setTimeout(()=>{a(!1,1e-7)},1e3)}I===1&&!BP(h,t.getBoundingClientRect())&&a(),P=!1}try{n=new IntersectionObserver(N,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,E)}n.observe(t)}return a(!0),o}function WF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=mb(t),m=s||o?[...h?gu(h):[],...gu(e)]:[];m.forEach(j=>{s&&j.addEventListener("scroll",n,{passive:!0}),o&&j.addEventListener("resize",n)});const f=h&&l?qF(h,n):null;let v=-1,y=null;a&&(y=new ResizeObserver(j=>{let[T]=j;T&&T.target===h&&y&&(y.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(e)})),n()}),h&&!d&&y.observe(h),y.observe(e));let w,b=d?Ba(t):null;d&&k();function k(){const j=Ba(t);b&&!BP(b,j)&&n(),b=j,w=requestAnimationFrame(k)}return n(),()=>{var j;m.forEach(T=>{s&&T.removeEventListener("scroll",n),o&&T.removeEventListener("resize",n)}),f?.(),(j=y)==null||j.disconnect(),y=null,d&&cancelAnimationFrame(w)}}const HF=gF,GF=vF,KF=mF,JF=yF,YF=fF,$1=hF,XF=xF,QF=(t,e,n)=>{const r=new Map,s={platform:zF,...n},o={...s.platform,_c:r};return uF(t,e,{...s,platform:o})};var ZF=typeof document<"u",eV=function(){},Km=ZF?g.useLayoutEffect:eV;function Sf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!Sf(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function $P(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function z1(t,e){const n=$P(t);return Math.round(e*n)/n}function nx(t){const e=g.useRef(t);return Km(()=>{e.current=t}),e}function tV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:d,open:h}=t,[m,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,y]=g.useState(r);Sf(v,r)||y(r);const[w,b]=g.useState(null),[k,j]=g.useState(null),T=g.useCallback(U=>{U!==_.current&&(_.current=U,b(U))},[]),E=g.useCallback(U=>{U!==I.current&&(I.current=U,j(U))},[]),P=o||w,N=a||k,_=g.useRef(null),I=g.useRef(null),M=g.useRef(m),O=d!=null,L=nx(d),D=nx(s),A=nx(h),Z=g.useCallback(()=>{if(!_.current||!I.current)return;const U={placement:e,strategy:n,middleware:v};D.current&&(U.platform=D.current),QF(_.current,I.current,U).then(G=>{const le={...G,isPositioned:A.current!==!1};se.current&&!Sf(M.current,le)&&(M.current=le,Hu.flushSync(()=>{f(le)}))})},[v,e,n,D,A]);Km(()=>{h===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[h]);const se=g.useRef(!1);Km(()=>(se.current=!0,()=>{se.current=!1}),[]),Km(()=>{if(P&&(_.current=P),N&&(I.current=N),P&&N){if(L.current)return L.current(P,N,Z);Z()}},[P,N,Z,L,O]);const fe=g.useMemo(()=>({reference:_,floating:I,setReference:T,setFloating:E}),[T,E]),ae=g.useMemo(()=>({reference:P,floating:N}),[P,N]),de=g.useMemo(()=>{const U={position:n,left:0,top:0};if(!ae.floating)return U;const G=z1(ae.floating,m.x),le=z1(ae.floating,m.y);return l?{...U,transform:"translate("+G+"px, "+le+"px)",...$P(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:le}},[n,l,ae.floating,m.x,m.y]);return g.useMemo(()=>({...m,update:Z,refs:fe,elements:ae,floatingStyles:de}),[m,Z,fe,ae,de])}const nV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?$1({element:r.current,padding:s}).fn(n):{}:r?$1({element:r,padding:s}).fn(n):{}}}},rV=(t,e)=>({...HF(t),options:[t,e]}),sV=(t,e)=>({...GF(t),options:[t,e]}),iV=(t,e)=>({...XF(t),options:[t,e]}),oV=(t,e)=>({...KF(t),options:[t,e]}),aV=(t,e)=>({...JF(t),options:[t,e]}),lV=(t,e)=>({...YF(t),options:[t,e]}),cV=(t,e)=>({...nV(t),options:[t,e]});var dV="Arrow",zP=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return i.jsx(Je.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});zP.displayName=dV;var uV=zP;function hV(t){const[e,n]=g.useState(void 0);return mn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const d=o.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,l=h.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var fb="Popper",[qP,Hc]=zr(fb),[mV,WP]=qP(fb),HP=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return i.jsx(mV,{scope:e,anchor:r,onAnchorChange:s,children:n})};HP.displayName=fb;var GP="PopperAnchor",KP=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=WP(GP,n),a=g.useRef(null),l=ct(e,a),d=g.useRef(null);return g.useEffect(()=>{const h=d.current;d.current=r?.current||a.current,h!==d.current&&o.onAnchorChange(d.current)}),r?null:i.jsx(Je.div,{...s,ref:l})});KP.displayName=GP;var pb="PopperContent",[fV,pV]=qP(pb),JP=g.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:v=!1,updatePositionStrategy:y="optimized",onPlaced:w,...b}=t,k=WP(pb,n),[j,T]=g.useState(null),E=ct(e,re=>T(re)),[P,N]=g.useState(null),_=hV(P),I=_?.width??0,M=_?.height??0,O=r+(o!=="center"?"-"+o:""),L=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},D=Array.isArray(h)?h:[h],A=D.length>0,Z={padding:L,boundary:D.filter(vV),altBoundary:A},{refs:se,floatingStyles:fe,placement:ae,isPositioned:de,middlewareData:U}=tV({strategy:"fixed",placement:O,whileElementsMounted:(...re)=>WF(...re,{animationFrame:y==="always"}),elements:{reference:k.anchor},middleware:[rV({mainAxis:s+M,alignmentAxis:a}),d&&sV({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?iV():void 0,...Z}),d&&oV({...Z}),aV({...Z,apply:({elements:re,rects:ge,availableWidth:_e,availableHeight:ve})=>{const{width:Ee,height:me}=ge.reference,it=re.floating.style;it.setProperty("--radix-popper-available-width",`${_e}px`),it.setProperty("--radix-popper-available-height",`${ve}px`),it.setProperty("--radix-popper-anchor-width",`${Ee}px`),it.setProperty("--radix-popper-anchor-height",`${me}px`)}}),P&&cV({element:P,padding:l}),xV({arrowWidth:I,arrowHeight:M}),v&&lV({strategy:"referenceHidden",...Z})]}),[G,le]=QP(ae),$=Mn(w);mn(()=>{de&&$?.()},[de,$]);const ee=U.arrow?.x,he=U.arrow?.y,B=U.arrow?.centerOffset!==0,[te,Te]=g.useState();return mn(()=>{j&&Te(window.getComputedStyle(j).zIndex)},[j]),i.jsx("div",{ref:se.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:de?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(fV,{scope:n,placedSide:G,onArrowChange:N,arrowX:ee,arrowY:he,shouldHideArrow:B,children:i.jsx(Je.div,{"data-side":G,"data-align":le,...b,ref:E,style:{...b.style,animation:de?void 0:"none"}})})})});JP.displayName=pb;var YP="PopperArrow",gV={top:"bottom",right:"left",bottom:"top",left:"right"},XP=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=pV(YP,r),a=gV[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(uV,{...s,ref:n,style:{...s.style,display:"block"}})})});XP.displayName=YP;function vV(t){return t!==null}var xV=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,l=a?0:t.arrowWidth,d=a?0:t.arrowHeight,[h,m]=QP(n),f={start:"0%",center:"50%",end:"100%"}[m],v=(s.arrow?.x??0)+l/2,y=(s.arrow?.y??0)+d/2;let w="",b="";return h==="bottom"?(w=a?f:`${v}px`,b=`${-d}px`):h==="top"?(w=a?f:`${v}px`,b=`${r.floating.height+d}px`):h==="right"?(w=`${-d}px`,b=a?f:`${y}px`):h==="left"&&(w=`${r.floating.width+d}px`,b=a?f:`${y}px`),{data:{x:w,y:b}}}});function QP(t){const[e,n="center"]=t.split("-");return[e,n]}var gb=HP,vb=KP,xb=JP,yb=XP,ZP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yV="VisuallyHidden",e_=g.forwardRef((t,e)=>i.jsx(Je.span,{...t,ref:e,style:{...ZP,...t.style}}));e_.displayName=yV;var bV=e_,[bp]=zr("Tooltip",[Hc]),wp=Hc(),t_="TooltipProvider",wV=700,uy="tooltip.open",[SV,bb]=bp(t_),n_=t=>{const{__scopeTooltip:e,delayDuration:n=wV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,a=g.useRef(!0),l=g.useRef(!1),d=g.useRef(0);return g.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),i.jsx(SV,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(d.current),a.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(h=>{l.current=h},[]),disableHoverableContent:s,children:o})};n_.displayName=t_;var vu="Tooltip",[kV,Yu]=bp(vu),r_=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:o,disableHoverableContent:a,delayDuration:l}=t,d=bb(vu,t.__scopeTooltip),h=wp(e),[m,f]=g.useState(null),v=As(),y=g.useRef(0),w=a??d.disableHoverableContent,b=l??d.delayDuration,k=g.useRef(!1),[j,T]=Fa({prop:r,defaultProp:s??!1,onChange:I=>{I?(d.onOpen(),document.dispatchEvent(new CustomEvent(uy))):d.onClose(),o?.(I)},caller:vu}),E=g.useMemo(()=>j?k.current?"delayed-open":"instant-open":"closed",[j]),P=g.useCallback(()=>{window.clearTimeout(y.current),y.current=0,k.current=!1,T(!0)},[T]),N=g.useCallback(()=>{window.clearTimeout(y.current),y.current=0,T(!1)},[T]),_=g.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{k.current=!0,T(!0),y.current=0},b)},[b,T]);return g.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),i.jsx(gb,{...h,children:i.jsx(kV,{scope:e,contentId:v,open:j,stateAttribute:E,trigger:m,onTriggerChange:f,onTriggerEnter:g.useCallback(()=>{d.isOpenDelayedRef.current?_():P()},[d.isOpenDelayedRef,_,P]),onTriggerLeave:g.useCallback(()=>{w?N():(window.clearTimeout(y.current),y.current=0)},[N,w]),onOpen:P,onClose:N,disableHoverableContent:w,children:n})})};r_.displayName=vu;var hy="TooltipTrigger",s_=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Yu(hy,n),o=bb(hy,n),a=wp(n),l=g.useRef(null),d=ct(e,l,s.onTriggerChange),h=g.useRef(!1),m=g.useRef(!1),f=g.useCallback(()=>h.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(vb,{asChild:!0,...a,children:i.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:d,onPointerMove:Re(t.onPointerMove,v=>{v.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:Re(t.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:Re(t.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Re(t.onFocus,()=>{h.current||s.onOpen()}),onBlur:Re(t.onBlur,s.onClose),onClick:Re(t.onClick,s.onClose)})})});s_.displayName=hy;var wb="TooltipPortal",[jV,CV]=bp(wb,{forceMount:void 0}),i_=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,o=Yu(wb,e);return i.jsx(jV,{scope:e,forceMount:n,children:i.jsx(dr,{present:n||o.open,children:i.jsx(Ku,{asChild:!0,container:s,children:r})})})};i_.displayName=wb;var Ac="TooltipContent",o_=g.forwardRef((t,e)=>{const n=CV(Ac,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,a=Yu(Ac,t.__scopeTooltip);return i.jsx(dr,{present:r||a.open,children:a.disableHoverableContent?i.jsx(a_,{side:s,...o,ref:e}):i.jsx(TV,{side:s,...o,ref:e})})}),TV=g.forwardRef((t,e)=>{const n=Yu(Ac,t.__scopeTooltip),r=bb(Ac,t.__scopeTooltip),s=g.useRef(null),o=ct(e,s),[a,l]=g.useState(null),{trigger:d,onClose:h}=n,m=s.current,{onPointerInTransitChange:f}=r,v=g.useCallback(()=>{l(null),f(!1)},[f]),y=g.useCallback((w,b)=>{const k=w.currentTarget,j={x:w.clientX,y:w.clientY},T=_V(j,k.getBoundingClientRect()),E=RV(j,T),P=AV(b.getBoundingClientRect()),N=OV([...E,...P]);l(N),f(!0)},[f]);return g.useEffect(()=>()=>v(),[v]),g.useEffect(()=>{if(d&&m){const w=k=>y(k,m),b=k=>y(k,d);return d.addEventListener("pointerleave",w),m.addEventListener("pointerleave",b),()=>{d.removeEventListener("pointerleave",w),m.removeEventListener("pointerleave",b)}}},[d,m,y,v]),g.useEffect(()=>{if(a){const w=b=>{const k=b.target,j={x:b.clientX,y:b.clientY},T=d?.contains(k)||m?.contains(k),E=!IV(j,a);T?v():E&&(v(),h())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[d,m,a,h,v]),i.jsx(a_,{...t,ref:o})}),[NV,EV]=bp(vu,{isInside:!1}),PV=IE("TooltipContent"),a_=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=t,d=Yu(Ac,n),h=wp(n),{onClose:m}=d;return g.useEffect(()=>(document.addEventListener(uy,m),()=>document.removeEventListener(uy,m)),[m]),g.useEffect(()=>{if(d.trigger){const f=v=>{v.target?.contains(d.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,m]),i.jsx(Gu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:i.jsxs(xb,{"data-state":d.stateAttribute,...h,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(PV,{children:r}),i.jsx(NV,{scope:n,isInside:!0,children:i.jsx(bV,{id:d.contentId,role:"tooltip",children:s||r})})]})})});o_.displayName=Ac;var l_="TooltipArrow",c_=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=wp(n);return EV(l_,n).isInside?null:i.jsx(yb,{...s,...r,ref:e})});c_.displayName=l_;function _V(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function RV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function AV(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function IV(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o],d=e[a],h=l.x,m=l.y,f=d.x,v=d.y;m>r!=v>r&&n<(f-h)*(r-m)/(v-m)+h&&(s=!s)}return s}function OV(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),MV(e)}function MV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var DV=n_,LV=r_,UV=s_,FV=i_,VV=o_,BV=c_;function d_({delayDuration:t=0,...e}){return i.jsx(DV,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function $V({...t}){return i.jsx(d_,{children:i.jsx(LV,{"data-slot":"tooltip",...t})})}function zV({...t}){return i.jsx(UV,{"data-slot":"tooltip-trigger",...t})}function qV({className:t,sideOffset:e=0,children:n,...r}){return i.jsx(FV,{children:i.jsxs(VV,{"data-slot":"tooltip-content",sideOffset:e,className:Pe("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...r,children:[n,i.jsx(BV,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const WV="sidebar_state",HV=3600*24*7,GV="16rem",KV="18rem",JV="3rem",YV="b",u_=g.createContext(null);function h_(){const t=g.useContext(u_);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function XV({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:o,...a}){const l=V3(),[d,h]=g.useState(!1),[m,f]=g.useState(t),v=e??m,y=g.useCallback(j=>{const T=typeof j=="function"?j(v):j;n?n(T):f(T),document.cookie=`${WV}=${T}; path=/; max-age=${HV}`},[n,v]),w=g.useCallback(()=>l?h(j=>!j):y(j=>!j),[l,y,h]);g.useEffect(()=>{const j=T=>{T.key===YV&&(T.metaKey||T.ctrlKey)&&(T.preventDefault(),w())};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[w]);const b=v?"expanded":"collapsed",k=g.useMemo(()=>({state:b,open:v,setOpen:y,isMobile:l,openMobile:d,setOpenMobile:h,toggleSidebar:w}),[b,v,y,l,d,h,w]);return i.jsx(u_.Provider,{value:k,children:i.jsx(d_,{delayDuration:0,children:i.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":GV,"--sidebar-width-icon":JV,...s},className:Pe("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...a,children:o})})})}function QV({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...o}){const{isMobile:a,state:l,openMobile:d,setOpenMobile:h}=h_();return n==="none"?i.jsx("div",{"data-slot":"sidebar",className:Pe("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",r),...o,children:s}):a?i.jsx(G6,{open:d,onOpenChange:h,...o,children:i.jsxs(Y6,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":KV},side:t,children:[i.jsxs(X6,{className:"sr-only",children:[i.jsx(Q6,{children:"Sidebar"}),i.jsx(Z6,{children:"Displays the mobile sidebar."})]}),i.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):i.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[i.jsx("div",{"data-slot":"sidebar-gap",className:Pe("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),i.jsx("div",{"data-slot":"sidebar-container",className:Pe("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...o,children:i.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:s})})]})}function ZV({className:t,...e}){return i.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:Pe("flex flex-col gap-2 p-2",t),...e})}function e8({className:t,...e}){return i.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Pe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e})}function t8({className:t,...e}){return i.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Pe("relative flex w-full min-w-0 flex-col p-2",t),...e})}function n8({className:t,asChild:e=!1,...n}){const r=e?ap:"div";return i.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Pe("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})}function r8({className:t,...e}){return i.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:Pe("w-full text-sm",t),...e})}function s8({className:t,...e}){return i.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Pe("flex w-full min-w-0 flex-col gap-1",t),...e})}function i8({className:t,...e}){return i.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Pe("group/menu-item relative",t),...e})}const o8=lp("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function a8({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:o,...a}){const l=t?ap:"button",{isMobile:d,state:h}=h_(),m=i.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":e,className:Pe(o8({variant:n,size:r}),o),...a});return s?(typeof s=="string"&&(s={children:s}),i.jsxs($V,{children:[i.jsx(zV,{asChild:!0,children:m}),i.jsx(qV,{side:"right",align:"center",hidden:h!=="collapsed"||d,...s})]})):m}const rx="/assets/67bd6f31bc6e950b2dd7989fff8ddb235a0b77a2-CMQ9807z.png";function vc({variant:t="full",className:e,withShadow:n=!1}){if(t==="icon")return i.jsx("div",{className:Pe("relative",e),style:{width:"48px",height:"48px"},children:i.jsx("img",{src:rx,alt:"VolleyPro",className:"w-full h-full object-cover",style:{clipPath:"circle(50% at 50% 50%)",objectPosition:"center"}})});if(t==="compact"){const r=n?{textShadow:"0 0 8px rgba(255,255,255,0.8), 0 0 12px rgba(255,255,255,0.6), 0 2px 4px rgba(0,0,0,0.3)",filter:"drop-shadow(0 0 2px rgba(255,255,255,0.9))"}:{};return i.jsxs("div",{className:Pe("flex items-center gap-3",e),children:[i.jsx("div",{className:"relative flex-shrink-0",style:{width:"40px",height:"40px"},children:i.jsx("img",{src:rx,alt:"VolleyPro",className:"w-full h-full object-cover",style:{clipPath:"circle(50% at 50% 50%)",objectPosition:"center",filter:n?"drop-shadow(0 2px 4px rgba(0,0,0,0.3))":"none"}})}),i.jsxs("div",{className:"flex items-baseline gap-0.5",children:[i.jsx("span",{className:"text-2xl font-black tracking-tight",style:{background:"linear-gradient(135deg, #0066ff 0%, #0052cc 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",...r},children:"Volley"}),i.jsx("span",{className:"text-2xl font-black tracking-tight",style:{background:"linear-gradient(135deg, #FFC72C 0%, #ff6b35 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",...r},children:"Pro"})]})]})}return i.jsxs("div",{className:Pe("flex items-center gap-3",e),children:[i.jsx("div",{className:"relative flex-shrink-0",style:{width:"56px",height:"56px"},children:i.jsx("img",{src:rx,alt:"VolleyPro - Rede Social do Vôlei",className:"w-full h-full object-cover",style:{clipPath:"circle(50% at 50% 50%)",objectPosition:"center"}})}),i.jsxs("div",{className:"flex flex-col leading-none",children:[i.jsxs("div",{className:"flex items-baseline",children:[i.jsx("span",{className:"text-3xl font-black tracking-tight",style:{background:"linear-gradient(135deg, #0066ff 0%, #0052cc 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Volley"}),i.jsx("span",{className:"text-3xl font-black tracking-tight",style:{background:"linear-gradient(135deg, #FFC72C 0%, #ff6b35 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Pro"})]}),i.jsx("span",{className:"text-[11px] tracking-widest uppercase text-muted-foreground ml-0.5",children:"Rede Social do Vôlei"})]})]})}const el="waibxabxlcbfyxyagaow",Gc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhaWJ4YWJ4bGNiZnl4eWFnYW93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMzg2MzYsImV4cCI6MjA3NTcxNDYzNn0.NbBYwWHQ0dcdPk1QTXc5tPgsr0NPuoFUDS6uVd4PVqw",m_=Object.freeze(Object.defineProperty({__proto__:null,projectId:el,publicAnonKey:Gc},Symbol.toStringTag,{value:"Module"})),my=`https://${el}.supabase.co/functions/v1/make-server-0ea22bba`;async function Sb(t,e=2,n=300){try{return await t()}catch(r){if(e>0&&r.message?.includes("Unauthorized"))return console.log(`⏳ Retrying in ${n}ms... (${e} retries left)`),await new Promise(s=>setTimeout(s,n)),Sb(t,e-1,n);throw r}}async function f_(){if(typeof window>"u")return null;try{const{createClient:t}=await Xn(async()=>{const{createClient:s}=await Promise.resolve().then(()=>Aa);return{createClient:s}},void 0),e=t(),{data:{session:n},error:r}=await e.auth.getSession();return r?(console.error("❌ Erro ao obter sessão:",r),null):n?.access_token?(localStorage.setItem("volleypro_token",n.access_token),localStorage.setItem("volleypro_user_id",n.user.id),n.access_token):(console.warn("⚠️ Nenhuma sessão ativa encontrada"),null)}catch(t){return console.error("❌ Erro ao obter token:",t),null}}async function qe(t,e={}){const n=await f_();n||console.warn("⚠️ Nenhum token de autenticação encontrado");const r={"Content-Type":"application/json",Authorization:`Bearer ${n||Gc}`,...e.headers};let s,o;try{s=await fetch(`${my}${t}`,{...e,headers:r,signal:AbortSignal.timeout(3e4)}),o=await s.json()}catch(a){throw a.name==="AbortError"?new Error("Tempo limite de requisição excedido. Verifique sua conexão."):a.message?.includes("Failed to fetch")||a.name==="TypeError"?new Error("Erro de conexão. Verifique se você está online e se o servidor está acessível."):a}if(!s.ok){if(o.needsRefresh||o.code==="TOKEN_INVALID"){console.log("🔄 Token inválido, tentando refresh...");try{const{createClient:a}=await Xn(async()=>{const{createClient:m}=await Promise.resolve().then(()=>Aa);return{createClient:m}},void 0),l=a(),{data:d,error:h}=await l.auth.refreshSession();if(!h&&d.session){console.log("✅ Sessão renovada com sucesso"),typeof window<"u"&&(localStorage.setItem("volleypro_token",d.session.access_token),localStorage.setItem("volleypro_user_id",d.session.user.id));const m={"Content-Type":"application/json",Authorization:`Bearer ${d.session.access_token}`,...e.headers},f=await fetch(`${my}${t}`,{...e,headers:m}),v=await f.json();if(!f.ok)throw new Error(v.error||"API request failed after refresh");return v}else console.error("❌ Erro ao renovar sessão:",h),await Rt.signOut(),window.location.reload()}catch(a){console.error("❌ Erro crítico ao renovar sessão:",a),await Rt.signOut(),window.location.reload()}}throw new Error(o.error||"API request failed")}return o}const Rt={async signUp(t,e,n,r,s){console.log("📡 Chamando API de signup...");try{const o=await qe("/auth/signup",{method:"POST",body:JSON.stringify({email:t,password:e,name:n,userType:r,...s})});return console.log("✅ Signup API retornou sucesso"),o}catch(o){throw console.error("❌ Erro na API de signup:",o),o}},async signIn(t,e){console.log("📡 [Chrome-Optimized] Iniciando login...");try{const{createClient:n}=await Xn(async()=>{const{createClient:a}=await Promise.resolve().then(()=>Aa);return{createClient:a}},void 0),r=n();await r.auth.signOut({scope:"local"}),console.log("🔐 Fazendo login com email/senha...");const{data:s,error:o}=await r.auth.signInWithPassword({email:t.trim().toLowerCase(),password:e});if(o)throw console.error("❌ Erro do Supabase:",o.message),new Error(o.message);if(!s.session||!s.user)throw new Error("Sessão inválida após login");if(typeof window<"u")try{localStorage.setItem("volleypro_token",s.session.access_token),localStorage.setItem("volleypro_user_id",s.user.id),sessionStorage.setItem("volleypro_session_active","true"),console.log("✅ Sessão salva com sucesso")}catch(a){console.error("⚠️ Erro ao salvar no localStorage:",a)}return console.log("✅ Login concluído com sucesso!"),s}catch(n){throw console.error("❌ Erro no signIn:",n),new Error(n.message||"Erro ao fazer login")}},async signOut(){console.log("🚪 Fazendo logout...");try{const{createClient:t}=await Xn(async()=>{const{createClient:n}=await Promise.resolve().then(()=>Aa);return{createClient:n}},void 0);if(await t().auth.signOut(),typeof window<"u")try{localStorage.removeItem("volleypro_token"),localStorage.removeItem("volleypro_user_id"),sessionStorage.removeItem("volleypro_session_active");const n=[];for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);s&&s.startsWith("supabase.auth.")&&n.push(s)}n.forEach(r=>localStorage.removeItem(r)),console.log("✅ Dados locais limpos")}catch(n){console.error("⚠️ Erro ao limpar localStorage:",n)}console.log("✅ Logout concluído")}catch(t){throw console.error("❌ Erro no logout:",t),t}},async getSession(){try{const{createClient:t}=await Xn(async()=>{const{createClient:o}=await Promise.resolve().then(()=>Aa);return{createClient:o}},void 0),e=t(),{data:n,error:r}=await e.auth.getSession();if(r)return console.error("❌ Erro ao obter sessão:",r),null;if(!n.session)return console.log("ℹ️ Nenhuma sessão ativa"),null;const s=n.session.expires_at;if(s){const o=Math.floor(Date.now()/1e3);if(s-o<300){console.log("⏰ Token expirando em breve, fazendo refresh preventivo...");const{data:l,error:d}=await e.auth.refreshSession();!d&&l.session&&(console.log("✅ Sessão renovada preventivamente"),n.session=l.session)}}if(n.session?.access_token&&typeof window<"u")try{localStorage.setItem("volleypro_token",n.session.access_token),localStorage.setItem("volleypro_user_id",n.session.user.id),sessionStorage.setItem("volleypro_session_active","true")}catch(o){console.error("⚠️ Erro ao atualizar storage:",o)}return n.session}catch(t){return console.error("❌ Erro ao verificar sessão:",t),null}},getCurrentUserId(){if(typeof window>"u")return null;try{return localStorage.getItem("volleypro_user_id")}catch(t){return console.error("Erro ao ler user ID:",t),null}},async getCurrentUserIdAsync(){if(typeof window>"u")return null;try{const t=localStorage.getItem("volleypro_user_id");if(t)return t;const{createClient:e}=await Xn(async()=>{const{createClient:o}=await Promise.resolve().then(()=>Aa);return{createClient:o}},void 0),n=e(),{data:{session:r},error:s}=await n.auth.getSession();return s||!r?(console.warn("⚠️ Nenhuma sessão ativa para obter userId"),null):(localStorage.setItem("volleypro_user_id",r.user.id),r.user.id)}catch(t){return console.error("❌ Erro ao obter user ID:",t),null}},isAuthenticated(){if(typeof window>"u")return!1;try{const t=localStorage.getItem("volleypro_token"),e=localStorage.getItem("volleypro_user_id"),n=sessionStorage.getItem("volleypro_session_active");return!!(t&&e&&n)}catch(t){return console.error("Erro ao verificar autenticação:",t),!1}}},ar={async getCurrentUser(){return Sb(()=>qe("/users/me"))},async updateCurrentUser(t){const e=Rt.getCurrentUserId();if(!e)throw new Error("Not authenticated");return qe(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)})},async getUser(t){return qe(`/users/${t}`)},async updateUser(t,e){return qe(`/users/${t}`,{method:"PUT",body:JSON.stringify(e)})},async getUsers(t){const e=new URLSearchParams;return t?.type&&e.append("type",t.type),t?.position&&e.append("position",t.position),qe(`/users?${e.toString()}`)},async toggleFreeAgent(t){const e=Rt.getCurrentUserId();if(!e)throw new Error("Not authenticated");return qe(`/users/${e}/free-agent`,{method:"PUT",body:JSON.stringify({freeAgent:t})})}},Sa={async uploadMedia(t){const e=await f_();if(!e)throw new Error("Você precisa estar autenticado para fazer upload");console.log("📤 Iniciando upload de mídia:",{name:t.name,type:t.type,size:`${(t.size/1024/1024).toFixed(2)} MB`});const n=new FormData;n.append("file",t);const r=new AbortController,s=setTimeout(()=>r.abort(),12e4);try{const o=await fetch(`${my}/upload`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:n,signal:r.signal});clearTimeout(s);const a=await o.json();if(!o.ok)throw console.error("❌ Erro no upload:",a),new Error(a.error||"Falha no upload");return console.log("✅ Upload concluído com sucesso:",a.mediaType),a}catch(o){throw clearTimeout(s),o.name==="AbortError"?(console.error("❌ Upload timeout após 120 segundos"),new Error("Upload muito demorado. Tente um arquivo menor ou verifique sua conexão.")):o.message?.includes("Failed to fetch")?(console.error("❌ Erro de rede no upload"),new Error("Erro de conexão. Verifique sua internet e tente novamente.")):(console.error("❌ Erro desconhecido no upload:",o),o)}},async createPost(t,e,n){return qe("/posts",{method:"POST",body:JSON.stringify({content:t,mediaType:e,mediaUrl:n})})},async getPosts(){return qe("/posts")},async likePost(t){return qe(`/posts/${t}/like`,{method:"POST"})},async getComments(t){return qe(`/posts/${t}/comments`)},async createComment(t,e){return qe(`/posts/${t}/comments`,{method:"POST",body:JSON.stringify({content:e})})},async deleteComment(t,e){return qe(`/posts/${t}/comments/${e}`,{method:"DELETE"})}},Sp={async toggleFollow(t){return qe(`/follow/${t}`,{method:"POST"})},async getFollowingIds(){return qe("/follow/check")}},Yn={async createTournament(t){return qe("/tournaments",{method:"POST",body:JSON.stringify(t)})},async getTournaments(t){const e=t?`?status=${t}`:"";return qe(`/tournaments${e}`)},async getTournamentDetails(t){return qe(`/tournaments/${t}`)},async registerTeam(t){return qe(`/tournaments/${t}/register`,{method:"POST"})},async unregisterTeam(t){return qe(`/tournaments/${t}/register`,{method:"DELETE"})},async drawBrackets(t){return qe(`/tournaments/${t}/draw`,{method:"POST"})},async updateMatchResult(t,e,n){return qe(`/tournaments/${t}/matches/${e}`,{method:"PUT",body:JSON.stringify(n)})},async getStandings(t){return qe(`/tournaments/${t}/standings`)},async voteForMVP(t,e,n){return qe(`/tournaments/${t}/mvp/vote`,{method:"POST",body:JSON.stringify({athleteId:e,points:n})})},async getMVPRankings(t){return qe(`/tournaments/${t}/mvp`)},async cancelTournament(t,e){return qe(`/tournaments/${t}/cancel`,{method:"POST",body:JSON.stringify({reason:e})})},async getRoster(t,e){return qe(`/tournaments/${t}/roster/${e}`)},async saveRoster(t,e,n){return qe(`/tournaments/${t}/roster`,{method:"POST",body:JSON.stringify({teamId:e,roster:n})})},async searchPlayerByCPF(t,e){return qe(`/teams/${e}/search-player?cpf=${t}`)},async confirmRosterCallup(t,e){return qe(`/tournaments/${t}/roster/${e}/confirm`,{method:"POST"})},async declineRosterCallup(t,e){return qe(`/tournaments/${t}/roster/${e}/decline`,{method:"POST"})}},kf={async getInvitations(){try{return await qe("/invitations/me")}catch(t){return console.error("❌ Error fetching invitations:",t),{invitations:[]}}},async sendInvitation(t,e){return qe("/invitations/send",{method:"POST",body:JSON.stringify({athleteId:t,message:e})})},async getAthleteInvitations(){return qe("/invitations/athlete")},async getTeamInvitations(){return qe("/invitations/team")},async acceptInvitation(t){return qe(`/invitations/${t}/accept`,{method:"POST"})},async rejectInvitation(t){return qe(`/invitations/${t}/reject`,{method:"POST"})},async respondToInvitation(t,e){return qe(`/invitations/${t}/respond`,{method:"POST",body:JSON.stringify({status:e})})},async cancelInvitation(t){return qe(`/invitations/${t}`,{method:"DELETE"})},async leaveTeam(){return qe("/teams/leave",{method:"POST"})}},Wo={async checkMasterStatus(){return Sb(()=>qe("/admin/check-master"))},async deletePost(t){return qe(`/admin/posts/${t}`,{method:"DELETE"})},async deleteTournament(t){return qe(`/admin/tournaments/${t}`,{method:"DELETE"})},async getAllUsers(){return qe("/admin/users")},async deleteUser(t){return qe(`/admin/users/${t}`,{method:"DELETE"})}},Sr={async createLive(t){return qe("/lives",{method:"POST",body:JSON.stringify(t)})},async getLives(t){const e=t?`?status=${t}`:"";return qe(`/lives${e}`)},async getLive(t){return qe(`/lives/${t}`)},async startLive(t){return qe(`/lives/${t}/start`,{method:"POST"})},async endLive(t){return qe(`/lives/${t}/end`,{method:"POST"})},async sendChatMessage(t,e){return qe(`/lives/${t}/chat`,{method:"POST",body:JSON.stringify({message:e})})},async getChatMessages(t,e=50){return qe(`/lives/${t}/chat?limit=${e}`)},async updateViewerCount(t,e){return qe(`/lives/${t}/viewers`,{method:"POST",body:JSON.stringify({action:e})})},async deleteLive(t){return qe(`/lives/${t}`,{method:"DELETE"})}},l8=Object.freeze(Object.defineProperty({__proto__:null,authApi:Rt,followApi:Sp,invitationApi:kf,liveApi:Sr,masterAdminApi:Wo,postApi:Sa,tournamentApi:Yn,userApi:ar},Symbol.toStringTag,{value:"Module"})),c8=[{id:"polls",label:"Enquetes",icon:mc},{id:"photos",label:"Fotos",icon:Nr},{id:"videos",label:"Vídeos",icon:js},{id:"verified",label:"Verificar",icon:$e}];function d8({currentView:t,onNavigate:e,isAuthenticated:n=!1,onProfileClick:r}){const[s,o]=g.useState(null),[a,l]=g.useState(!1);g.useEffect(()=>{n?d():o(null)},[n]),g.useEffect(()=>{const f=()=>{console.log("🔄 Perfil atualizado - recarregando sidebar..."),n&&d()};return window.addEventListener("profileUpdated",f),()=>window.removeEventListener("profileUpdated",f)},[n]);async function d(){if(n){l(!0);try{const{profile:f}=await ar.getCurrentUser();console.log("📊 Perfil carregado na sidebar:",f),o(f)}catch(f){if(console.error("❌ Erro ao carregar perfil na sidebar:",f),f.message?.includes("Failed to fetch")||f.name==="TypeError"){console.log("⚠️ Erro de rede - usando dados em cache se disponível");try{const v=localStorage.getItem("volleypro_cached_profile");v&&(o(JSON.parse(v)),console.log("✅ Usando perfil em cache"))}catch(v){console.error("❌ Erro ao ler cache:",v)}}}finally{l(!1)}}}const h=s?.nickname||s?.name||"Usuário",m=h.split(" ").map(f=>f[0]).join("").toUpperCase().slice(0,2);return i.jsxs(QV,{children:[i.jsx(ZV,{className:"border-b border-sidebar-border p-4 bg-gradient-to-br from-primary to-secondary",children:i.jsx(vc,{variant:"compact",className:"[&_svg]:w-10 [&_svg]:h-10 [&_span]:text-white"})}),n?i.jsxs("div",{className:"m-3 mb-4 rounded-xl overflow-hidden cursor-pointer group shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-primary/20 hover:border-primary/40",onClick:r,title:"Ver meu perfil",children:[i.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-primary/20 to-secondary/20 overflow-hidden",children:[s?.photoUrl?i.jsx("img",{src:s.photoUrl,alt:h,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:i.jsx("span",{className:"text-white text-6xl font-bold",children:a?"...":m})}),i.jsx("div",{className:"absolute inset-x-0 bottom-0 h-24 bg-gradient-to-t from-black/60 to-transparent"}),s?.verified&&i.jsx("div",{className:"absolute top-3 right-3 bg-primary text-white rounded-full p-1.5 shadow-lg",children:i.jsx($e,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"bg-white dark:bg-card p-4 space-y-2",children:[i.jsx("h3",{className:"font-semibold text-center text-sidebar-foreground truncate group-hover:text-primary transition-colors",children:a?"Carregando...":h}),s&&s.userType==="athlete"&&s.position&&i.jsx("p",{className:"text-sm text-center text-muted-foreground truncate",children:s.position}),s&&s.userType==="athlete"&&i.jsx("p",{className:"text-sm text-center font-medium truncate",children:s.currentTeam?i.jsxs("span",{className:"text-primary",children:["🏐 ",s.currentTeam]}):i.jsx("span",{className:"text-secondary",children:"✨ Disponível"})}),s&&s.userType!=="athlete"&&i.jsx("p",{className:"text-sm text-center text-muted-foreground truncate",children:s.userType==="team"?"⚡ Time":"🎉 Fã/Torcedor"})]})]}):null,i.jsx(e8,{children:i.jsxs(t8,{children:[i.jsx(n8,{children:"Recursos"}),i.jsx(r8,{children:i.jsx(s8,{children:c8.map(f=>{const v=t===f.id;return i.jsx(i8,{children:i.jsxs(a8,{onClick:()=>e(f.id),isActive:v,className:"justify-start gap-3 px-3 py-2 hover:bg-sidebar-accent data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",children:[i.jsx(f.icon,{className:"h-5 w-5"}),i.jsx("span",{children:f.label})]})},f.id)})})})]})})]})}function ie({className:t,...e}){return i.jsx("div",{"data-slot":"card",className:Pe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function et({className:t,...e}){return i.jsx("div",{"data-slot":"card-header",className:Pe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function Vt({className:t,...e}){return i.jsx("h4",{"data-slot":"card-title",className:Pe("leading-none",t),...e})}function xc({className:t,...e}){return i.jsx("p",{"data-slot":"card-description",className:Pe("text-muted-foreground",t),...e})}function ce({className:t,...e}){return i.jsx("div",{"data-slot":"card-content",className:Pe("px-6 [&:last-child]:pb-6",t),...e})}function q1({className:t,...e}){return i.jsx("div",{"data-slot":"card-footer",className:Pe("flex items-center px-6 pb-6 [.border-t]:pt-6",t),...e})}var sx={exports:{}},ix={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function u8(){if(W1)return ix;W1=1;var t=ip();function e(f,v){return f===v&&(f!==0||1/f===1/v)||f!==f&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,a=t.useDebugValue;function l(f,v){var y=v(),w=r({inst:{value:y,getSnapshot:v}}),b=w[0].inst,k=w[1];return o(function(){b.value=y,b.getSnapshot=v,d(b)&&k({inst:b})},[f,y,v]),s(function(){return d(b)&&k({inst:b}),f(function(){d(b)&&k({inst:b})})},[f]),a(y),y}function d(f){var v=f.getSnapshot;f=f.value;try{var y=v();return!n(f,y)}catch{return!0}}function h(f,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return ix.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,ix}var H1;function h8(){return H1||(H1=1,sx.exports=u8()),sx.exports}var m8=h8();function f8(){return m8.useSyncExternalStore(p8,()=>!0,()=>!1)}function p8(){return()=>{}}var kb="Avatar",[g8]=zr(kb),[v8,p_]=g8(kb),g_=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,o]=g.useState("idle");return i.jsx(v8,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:i.jsx(Je.span,{...r,ref:e})})});g_.displayName=kb;var v_="AvatarImage",x_=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=t,a=p_(v_,n),l=x8(r,o),d=Mn(h=>{s(h),a.onImageLoadingStatusChange(h)});return mn(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?i.jsx(Je.img,{...o,ref:e,src:r}):null});x_.displayName=v_;var y_="AvatarFallback",b_=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,o=p_(y_,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(Je.span,{...s,ref:e}):null});b_.displayName=y_;function G1(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function x8(t,{referrerPolicy:e,crossOrigin:n}){const r=f8(),s=g.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>G1(o,t));return mn(()=>{l(G1(o,t))},[o,t]),mn(()=>{const d=f=>()=>{l(f)};if(!o)return;const h=d("loaded"),m=d("error");return o.addEventListener("load",h),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",h),o.removeEventListener("error",m)}},[o,n,e]),a}var y8=g_,b8=x_,w8=b_;function Gt({className:t,...e}){return i.jsx(y8,{"data-slot":"avatar",className:Pe("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function rn({className:t,...e}){return i.jsx(b8,{"data-slot":"avatar-image",className:Pe("aspect-square size-full",t),...e})}function Kt({className:t,...e}){return i.jsx(w8,{"data-slot":"avatar-fallback",className:Pe("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}function os({className:t,...e}){return i.jsx("textarea",{"data-slot":"textarea",className:Pe("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const S8=lp("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Se({className:t,variant:e,asChild:n=!1,...r}){const s=n?ap:"span";return i.jsx(s,{"data-slot":"badge",className:Pe(S8({variant:e}),t),...r})}const jb=g.createContext({});function Cb(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const Tb=typeof window<"u",w_=Tb?g.useLayoutEffect:g.useEffect,kp=g.createContext(null);function Nb(t,e){t.indexOf(e)===-1&&t.push(e)}function Eb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const qi=(t,e,n)=>n>e?e:n<t?t:n;let Pb=()=>{};const Wi={},S_=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function k_(t){return typeof t=="object"&&t!==null}const j_=t=>/^0[^.\s]+$/u.test(t);function _b(t){let e;return()=>(e===void 0&&(e=t()),e)}const as=t=>t,k8=(t,e)=>n=>e(t(n)),Xu=(...t)=>t.reduce(k8),xu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Rb{constructor(){this.subscriptions=[]}add(e){return Nb(this.subscriptions,e),()=>Eb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ci=t=>t*1e3,rs=t=>t/1e3;function C_(t,e){return e?t*(1e3/e):0}const T_=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,j8=1e-7,C8=12;function T8(t,e,n,r,s){let o,a,l=0;do a=e+(n-e)/2,o=T_(a,r,s)-t,o>0?n=a:e=a;while(Math.abs(o)>j8&&++l<C8);return a}function Qu(t,e,n,r){if(t===e&&n===r)return as;const s=o=>T8(o,0,1,t,n);return o=>o===0||o===1?o:T_(s(o),e,r)}const N_=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,E_=t=>e=>1-t(1-e),P_=Qu(.33,1.53,.69,.99),Ab=E_(P_),__=N_(Ab),R_=t=>(t*=2)<1?.5*Ab(t):.5*(2-Math.pow(2,-10*(t-1))),Ib=t=>1-Math.sin(Math.acos(t)),A_=E_(Ib),I_=N_(Ib),N8=Qu(.42,0,1,1),E8=Qu(0,0,.58,1),O_=Qu(.42,0,.58,1),P8=t=>Array.isArray(t)&&typeof t[0]!="number",M_=t=>Array.isArray(t)&&typeof t[0]=="number",_8={linear:as,easeIn:N8,easeInOut:O_,easeOut:E8,circIn:Ib,circInOut:I_,circOut:A_,backIn:Ab,backInOut:__,backOut:P_,anticipate:R_},R8=t=>typeof t=="string",K1=t=>{if(M_(t)){Pb(t.length===4);const[e,n,r,s]=t;return Qu(e,n,r,s)}else if(R8(t))return _8[t];return t},Cm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function A8(t,e){let n=new Set,r=new Set,s=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(m){a.has(m)&&(h.schedule(m),t()),m(l)}const h={schedule:(m,f=!1,v=!1)=>{const w=v&&s?n:r;return f&&a.add(m),w.has(m)||w.add(m),m},cancel:m=>{r.delete(m),a.delete(m)},process:m=>{if(l=m,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,o&&(o=!1,h.process(m))}};return h}const I8=40;function D_(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Cm.reduce((E,P)=>(E[P]=A8(o),E),{}),{setup:l,read:d,resolveKeyframes:h,preUpdate:m,update:f,preRender:v,render:y,postRender:w}=a,b=()=>{const E=Wi.useManualTiming?s.timestamp:performance.now();n=!1,Wi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,I8),1)),s.timestamp=E,s.isProcessing=!0,l.process(s),d.process(s),h.process(s),m.process(s),f.process(s),v.process(s),y.process(s),w.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(b))},k=()=>{n=!0,r=!0,s.isProcessing||t(b)};return{schedule:Cm.reduce((E,P)=>{const N=a[P];return E[P]=(_,I=!1,M=!1)=>(n||k(),N.schedule(_,I,M)),E},{}),cancel:E=>{for(let P=0;P<Cm.length;P++)a[Cm[P]].cancel(E)},state:s,steps:a}}const{schedule:Mt,cancel:Ho,state:zn,steps:ox}=D_(typeof requestAnimationFrame<"u"?requestAnimationFrame:as,!0);let Jm;function O8(){Jm=void 0}const Cr={now:()=>(Jm===void 0&&Cr.set(zn.isProcessing||Wi.useManualTiming?zn.timestamp:performance.now()),Jm),set:t=>{Jm=t,queueMicrotask(O8)}},L_=t=>e=>typeof e=="string"&&e.startsWith(t),Ob=L_("--"),M8=L_("var(--"),Mb=t=>M8(t)?D8.test(t.split("/*")[0].trim()):!1,D8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Kc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yu={...Kc,transform:t=>qi(0,1,t)},Tm={...Kc,default:1},Qd=t=>Math.round(t*1e5)/1e5,Db=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function L8(t){return t==null}const U8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lb=(t,e)=>n=>!!(typeof n=="string"&&U8.test(n)&&n.startsWith(t)||e&&!L8(n)&&Object.prototype.hasOwnProperty.call(n,e)),U_=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,a,l]=r.match(Db);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},F8=t=>qi(0,255,t),ax={...Kc,transform:t=>Math.round(F8(t))},Pa={test:Lb("rgb","red"),parse:U_("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ax.transform(t)+", "+ax.transform(e)+", "+ax.transform(n)+", "+Qd(yu.transform(r))+")"};function V8(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const fy={test:Lb("#"),parse:V8,transform:Pa.transform},Zu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_o=Zu("deg"),di=Zu("%"),Xe=Zu("px"),B8=Zu("vh"),$8=Zu("vw"),J1={...di,parse:t=>di.parse(t)/100,transform:t=>di.transform(t*100)},nc={test:Lb("hsl","hue"),parse:U_("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+di.transform(Qd(e))+", "+di.transform(Qd(n))+", "+Qd(yu.transform(r))+")"},un={test:t=>Pa.test(t)||fy.test(t)||nc.test(t),parse:t=>Pa.test(t)?Pa.parse(t):nc.test(t)?nc.parse(t):fy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Pa.transform(t):nc.transform(t),getAnimatableNone:t=>{const e=un.parse(t);return e.alpha=0,un.transform(e)}},z8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function q8(t){return isNaN(t)&&typeof t=="string"&&(t.match(Db)?.length||0)+(t.match(z8)?.length||0)>0}const F_="number",V_="color",W8="var",H8="var(",Y1="${}",G8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const l=e.replace(G8,d=>(un.test(d)?(r.color.push(o),s.push(V_),n.push(un.parse(d))):d.startsWith(H8)?(r.var.push(o),s.push(W8),n.push(d)):(r.number.push(o),s.push(F_),n.push(parseFloat(d))),++o,Y1)).split(Y1);return{values:n,split:l,indexes:r,types:s}}function B_(t){return bu(t).values}function $_(t){const{split:e,types:n}=bu(t),r=e.length;return s=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],s[a]!==void 0){const l=n[a];l===F_?o+=Qd(s[a]):l===V_?o+=un.transform(s[a]):o+=s[a]}return o}}const K8=t=>typeof t=="number"?0:un.test(t)?un.getAnimatableNone(t):t;function J8(t){const e=B_(t);return $_(t)(e.map(K8))}const Go={test:q8,parse:B_,createTransformer:$_,getAnimatableNone:J8};function lx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Y8({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,a=0;if(!e)s=o=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,d=2*n-l;s=lx(d,l,t+1/3),o=lx(d,l,t),a=lx(d,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function jf(t,e){return n=>n>0?e:t}const Bt=(t,e,n)=>t+(e-t)*n,cx=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},X8=[fy,Pa,nc],Q8=t=>X8.find(e=>e.test(t));function X1(t){const e=Q8(t);if(!e)return!1;let n=e.parse(t);return e===nc&&(n=Y8(n)),n}const Q1=(t,e)=>{const n=X1(t),r=X1(e);if(!n||!r)return jf(t,e);const s={...n};return o=>(s.red=cx(n.red,r.red,o),s.green=cx(n.green,r.green,o),s.blue=cx(n.blue,r.blue,o),s.alpha=Bt(n.alpha,r.alpha,o),Pa.transform(s))},py=new Set(["none","hidden"]);function Z8(t,e){return py.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function eB(t,e){return n=>Bt(t,e,n)}function Ub(t){return typeof t=="number"?eB:typeof t=="string"?Mb(t)?jf:un.test(t)?Q1:rB:Array.isArray(t)?z_:typeof t=="object"?un.test(t)?Q1:tB:jf}function z_(t,e){const n=[...t],r=n.length,s=t.map((o,a)=>Ub(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=s[a](o);return n}}function tB(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Ub(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function nB(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][r[o]],l=t.values[a]??0;n[s]=l,r[o]++}return n}const rB=(t,e)=>{const n=Go.createTransformer(e),r=bu(t),s=bu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?py.has(t)&&!s.values.length||py.has(e)&&!r.values.length?Z8(t,e):Xu(z_(nB(r,s),s.values),n):jf(t,e)};function q_(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Bt(t,e,n):Ub(t)(t,e)}const sB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Mt.update(e,n),stop:()=>Ho(e),now:()=>zn.isProcessing?zn.timestamp:Cr.now()}},W_=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Cf=2e4;function Fb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Cf;)e+=n,r=t.next(e);return e>=Cf?1/0:e}function iB(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Fb(r),Cf);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:rs(s)}}const oB=5;function H_(t,e,n){const r=Math.max(e-oB,0);return C_(n-t(r),e-r)}const zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dx=.001;function aB({duration:t=zt.duration,bounce:e=zt.bounce,velocity:n=zt.velocity,mass:r=zt.mass}){let s,o,a=1-e;a=qi(zt.minDamping,zt.maxDamping,a),t=qi(zt.minDuration,zt.maxDuration,rs(t)),a<1?(s=h=>{const m=h*a,f=m*t,v=m-n,y=gy(h,a),w=Math.exp(-f);return dx-v/y*w},o=h=>{const f=h*a*t,v=f*n+n,y=Math.pow(a,2)*Math.pow(h,2)*t,w=Math.exp(-f),b=gy(Math.pow(h,2),a);return(-s(h)+dx>0?-1:1)*((v-y)*w)/b}):(s=h=>{const m=Math.exp(-h*t),f=(h-n)*t+1;return-dx+m*f},o=h=>{const m=Math.exp(-h*t),f=(n-h)*(t*t);return m*f});const l=5/t,d=cB(s,o,l);if(t=ci(t),isNaN(d))return{stiffness:zt.stiffness,damping:zt.damping,duration:t};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:t}}}const lB=12;function cB(t,e,n){let r=n;for(let s=1;s<lB;s++)r=r-t(r)/e(r);return r}function gy(t,e){return t*Math.sqrt(1-e*e)}const dB=["duration","bounce"],uB=["stiffness","damping","mass"];function Z1(t,e){return e.some(n=>t[n]!==void 0)}function hB(t){let e={velocity:zt.velocity,stiffness:zt.stiffness,damping:zt.damping,mass:zt.mass,isResolvedFromDuration:!1,...t};if(!Z1(t,uB)&&Z1(t,dB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*qi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:zt.mass,stiffness:s,damping:o}}else{const n=aB(t);e={...e,...n,mass:zt.mass},e.isResolvedFromDuration=!0}return e}function Tf(t=zt.visualDuration,e=zt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:d,damping:h,mass:m,duration:f,velocity:v,isResolvedFromDuration:y}=hB({...n,velocity:-rs(n.velocity||0)}),w=v||0,b=h/(2*Math.sqrt(d*m)),k=a-o,j=rs(Math.sqrt(d/m)),T=Math.abs(k)<5;r||(r=T?zt.restSpeed.granular:zt.restSpeed.default),s||(s=T?zt.restDelta.granular:zt.restDelta.default);let E;if(b<1){const N=gy(j,b);E=_=>{const I=Math.exp(-b*j*_);return a-I*((w+b*j*k)/N*Math.sin(N*_)+k*Math.cos(N*_))}}else if(b===1)E=N=>a-Math.exp(-j*N)*(k+(w+j*k)*N);else{const N=j*Math.sqrt(b*b-1);E=_=>{const I=Math.exp(-b*j*_),M=Math.min(N*_,300);return a-I*((w+b*j*k)*Math.sinh(M)+N*k*Math.cosh(M))/N}}const P={calculatedDuration:y&&f||null,next:N=>{const _=E(N);if(y)l.done=N>=f;else{let I=N===0?w:0;b<1&&(I=N===0?ci(w):H_(E,N,_));const M=Math.abs(I)<=r,O=Math.abs(a-_)<=s;l.done=M&&O}return l.value=l.done?a:_,l},toString:()=>{const N=Math.min(Fb(P),Cf),_=W_(I=>P.next(N*I).value,N,30);return N+"ms "+_},toTransition:()=>{}};return P}Tf.applyToOptions=t=>{const e=iB(t,100,Tf);return t.ease=e.ease,t.duration=ci(e.duration),t.type="keyframes",t};function vy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:d,restDelta:h=.5,restSpeed:m}){const f=t[0],v={done:!1,value:f},y=M=>l!==void 0&&M<l||d!==void 0&&M>d,w=M=>l===void 0?d:d===void 0||Math.abs(l-M)<Math.abs(d-M)?l:d;let b=n*e;const k=f+b,j=a===void 0?k:a(k);j!==k&&(b=j-f);const T=M=>-b*Math.exp(-M/r),E=M=>j+T(M),P=M=>{const O=T(M),L=E(M);v.done=Math.abs(O)<=h,v.value=v.done?j:L};let N,_;const I=M=>{y(v.value)&&(N=M,_=Tf({keyframes:[v.value,w(v.value)],velocity:H_(E,M,v.value),damping:s,stiffness:o,restDelta:h,restSpeed:m}))};return I(0),{calculatedDuration:null,next:M=>{let O=!1;return!_&&N===void 0&&(O=!0,P(M),I(M)),N!==void 0&&M>=N?_.next(M-N):(!O&&P(M),v)}}}function mB(t,e,n){const r=[],s=n||Wi.mix||q_,o=t.length-1;for(let a=0;a<o;a++){let l=s(t[a],t[a+1]);if(e){const d=Array.isArray(e)?e[a]||as:e;l=Xu(d,l)}r.push(l)}return r}function fB(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(Pb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=mB(e,r,s),d=l.length,h=m=>{if(a&&m<t[0])return e[0];let f=0;if(d>1)for(;f<t.length-2&&!(m<t[f+1]);f++);const v=xu(t[f],t[f+1],m);return l[f](v)};return n?m=>h(qi(t[0],t[o-1],m)):h}function pB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=xu(0,e,r);t.push(Bt(n,1,s))}}function gB(t){const e=[0];return pB(e,t.length-1),e}function vB(t,e){return t.map(n=>n*e)}function xB(t,e){return t.map(()=>e||O_).splice(0,t.length-1)}function Zd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=P8(r)?r.map(K1):K1(r),o={done:!1,value:e[0]},a=vB(n&&n.length===e.length?n:gB(e),t),l=fB(a,e,{ease:Array.isArray(s)?s:xB(e,s)});return{calculatedDuration:t,next:d=>(o.value=l(d),o.done=d>=t,o)}}const yB=t=>t!==null;function Vb(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(yB),l=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const bB={decay:vy,inertia:vy,tween:Zd,keyframes:Zd,spring:Tf};function G_(t){typeof t.type=="string"&&(t.type=bB[t.type])}class Bb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const wB=t=>t/100;class $b extends Bb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Cr.now()&&this.tick(Cr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;G_(e);const{type:n=Zd,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=e;let{keyframes:l}=e;const d=n||Zd;d!==Zd&&typeof l[0]!="number"&&(this.mixKeyframes=Xu(wB,q_(l[0],l[1])),l=[0,100]);const h=d({...e,keyframes:l});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...l].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=Fb(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:f,repeatType:v,repeatDelay:y,type:w,onUpdate:b,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-h*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let E=this.currentTime,P=r;if(f){const M=Math.min(this.currentTime,s)/l;let O=Math.floor(M),L=M%1;!L&&M>=1&&(L=1),L===1&&O--,O=Math.min(O,f+1),!!(O%2)&&(v==="reverse"?(L=1-L,y&&(L-=y/l)):v==="mirror"&&(P=a)),E=qi(0,1,L)*l}const N=T?{done:!1,value:m[0]}:P.next(E);o&&(N.value=o(N.value));let{done:_}=N;!T&&d!==null&&(_=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return I&&w!==vy&&(N.value=Vb(m,this.options,k,this.speed)),b&&b(N.value),I&&this.finish(),N}then(e,n){return this.finished.then(e,n)}get duration(){return rs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+rs(e)}get time(){return rs(this.currentTime)}set time(e){e=ci(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Cr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=rs(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=sB,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function SB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const _a=t=>t*180/Math.PI,xy=t=>{const e=_a(Math.atan2(t[1],t[0]));return yy(e)},kB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:xy,rotateZ:xy,skewX:t=>_a(Math.atan(t[1])),skewY:t=>_a(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},yy=t=>(t=t%360,t<0&&(t+=360),t),eC=xy,tC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),nC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),jB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tC,scaleY:nC,scale:t=>(tC(t)+nC(t))/2,rotateX:t=>yy(_a(Math.atan2(t[6],t[5]))),rotateY:t=>yy(_a(Math.atan2(-t[2],t[0]))),rotateZ:eC,rotate:eC,skewX:t=>_a(Math.atan(t[4])),skewY:t=>_a(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function by(t){return t.includes("scale")?1:0}function wy(t,e){if(!t||t==="none")return by(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=jB,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=kB,s=l}if(!s)return by(e);const o=r[e],a=s[1].split(",").map(TB);return typeof o=="function"?o(a):a[o]}const CB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return wy(n,e)};function TB(t){return parseFloat(t.trim())}const Jc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yc=new Set(Jc),rC=t=>t===Kc||t===Xe,NB=new Set(["x","y","z"]),EB=Jc.filter(t=>!NB.has(t));function PB(t){const e=[];return EB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Oa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>wy(e,"x"),y:(t,{transform:e})=>wy(e,"y")};Oa.translateX=Oa.x;Oa.translateY=Oa.y;const Ma=new Set;let Sy=!1,ky=!1,jy=!1;function K_(){if(ky){const t=Array.from(Ma).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=PB(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,a])=>{r.getValue(o)?.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ky=!1,Sy=!1,Ma.forEach(t=>t.complete(jy)),Ma.clear()}function J_(){Ma.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ky=!0)})}function _B(){jy=!0,J_(),K_(),jy=!1}class zb{constructor(e,n,r,s,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Ma.add(this),Sy||(Sy=!0,Mt.read(J_),Mt.resolveKeyframes(K_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}SB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ma.delete(this)}cancel(){this.state==="scheduled"&&(Ma.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const RB=t=>t.startsWith("--");function AB(t,e,n){RB(e)?t.style.setProperty(e,n):t.style[e]=n}const IB=_b(()=>window.ScrollTimeline!==void 0),OB={};function MB(t,e){const n=_b(t);return()=>OB[e]??n()}const Y_=MB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,sC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hd([0,.65,.55,1]),circOut:Hd([.55,0,1,.45]),backIn:Hd([.31,.01,.66,-.59]),backOut:Hd([.33,1.53,.69,.99])};function X_(t,e){if(t)return typeof t=="function"?Y_()?W_(t,e):"ease-out":M_(t)?Hd(t):Array.isArray(t)?t.map(n=>X_(n,e)||sC.easeOut):sC[t]}function DB(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:d}={},h=void 0){const m={[e]:n};d&&(m.offset=d);const f=X_(l,s);Array.isArray(f)&&(m.easing=f);const v={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),t.animate(m,v)}function Q_(t){return typeof t=="function"&&"applyToOptions"in t}function LB({type:t,...e}){return Q_(t)&&Y_()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class UB extends Bb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,Pb(typeof e.type!="string");const h=LB(e);this.animation=DB(n,r,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=Vb(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):AB(n,r,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return rs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+rs(e)}get time(){return rs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ci(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&IB()?(this.animation.timeline=e,as):n(this)}}const Z_={anticipate:R_,backInOut:__,circInOut:I_};function FB(t){return t in Z_}function VB(t){typeof t.ease=="string"&&FB(t.ease)&&(t.ease=Z_[t.ease])}const iC=10;class BB extends UB{constructor(e){VB(e),G_(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new $b({...a,autoplay:!1}),d=ci(this.finishedTime??this.time);n.setWithVelocity(l.sample(d-iC).value,l.sample(d).value,iC),l.stop()}}const oC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Go.test(t)||t==="0")&&!t.startsWith("url("));function $B(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function zB(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=oC(s,e),l=oC(o,e);return!a||!l?!1:$B(t)||(n==="spring"||Q_(n))&&r}function Cy(t){t.duration=0,t.type="keyframes"}const qB=new Set(["opacity","clipPath","filter","transform"]),WB=_b(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HB(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return WB()&&n&&qB.has(n)&&(n!=="transform"||!h)&&!d&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}const GB=40;class KB extends Bb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:d,motionValue:h,element:m,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Cr.now();const v={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:a,name:d,motionValue:h,element:m,...f},y=m?.KeyframeResolver||zb;this.keyframeResolver=new y(l,(w,b,k)=>this.onKeyframesResolved(w,b,v,!k),d,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:d,isHandoff:h,onUpdate:m}=r;this.resolvedAt=Cr.now(),zB(e,o,a,l)||((Wi.instantAnimations||!d)&&m?.(Vb(e,r,n)),e[0]=e[e.length-1],Cy(r),r.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>GB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!h&&HB(v)?new BB({...v,element:v.motionValue.owner.current}):new $b(v);y.finished.then(()=>this.notifyFinished()).catch(as),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),_B()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const JB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YB(t){const e=JB.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function e2(t,e,n=1){const[r,s]=YB(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return S_(a)?parseFloat(a):a}return Mb(s)?e2(s,e,n+1):s}function qb(t,e){return t?.[e]??t?.default??t}const t2=new Set(["width","height","top","left","right","bottom",...Jc]),XB={test:t=>t==="auto",parse:t=>t},n2=t=>e=>e.test(t),r2=[Kc,Xe,di,_o,$8,B8,XB],aC=t=>r2.find(n2(t));function QB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||j_(t):!0}const ZB=new Set(["brightness","contrast","saturate","opacity"]);function e$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Db)||[];if(!r)return t;const s=n.replace(r,"");let o=ZB.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const t$=/\b([a-z-]*)\(.*?\)/gu,Ty={...Go,getAnimatableNone:t=>{const e=t.match(t$);return e?e.map(e$).join(" "):t}},lC={...Kc,transform:Math.round},n$={rotate:_o,rotateX:_o,rotateY:_o,rotateZ:_o,scale:Tm,scaleX:Tm,scaleY:Tm,scaleZ:Tm,skew:_o,skewX:_o,skewY:_o,distance:Xe,translateX:Xe,translateY:Xe,translateZ:Xe,x:Xe,y:Xe,z:Xe,perspective:Xe,transformPerspective:Xe,opacity:yu,originX:J1,originY:J1,originZ:Xe},Wb={borderWidth:Xe,borderTopWidth:Xe,borderRightWidth:Xe,borderBottomWidth:Xe,borderLeftWidth:Xe,borderRadius:Xe,radius:Xe,borderTopLeftRadius:Xe,borderTopRightRadius:Xe,borderBottomRightRadius:Xe,borderBottomLeftRadius:Xe,width:Xe,maxWidth:Xe,height:Xe,maxHeight:Xe,top:Xe,right:Xe,bottom:Xe,left:Xe,padding:Xe,paddingTop:Xe,paddingRight:Xe,paddingBottom:Xe,paddingLeft:Xe,margin:Xe,marginTop:Xe,marginRight:Xe,marginBottom:Xe,marginLeft:Xe,backgroundPositionX:Xe,backgroundPositionY:Xe,...n$,zIndex:lC,fillOpacity:yu,strokeOpacity:yu,numOctaves:lC},r$={...Wb,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:Ty,WebkitFilter:Ty},s2=t=>r$[t];function i2(t,e){let n=s2(t);return n!==Ty&&(n=Go),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const s$=new Set(["auto","none","0"]);function i$(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!s$.has(o)&&bu(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=i2(n,s)}class o$ extends zb{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),Mb(h))){const m=e2(h,n.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!t2.has(r)||e.length!==2)return;const[s,o]=e,a=aC(s),l=aC(o);if(a!==l)if(rC(a)&&rC(l))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Oa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||QB(e[s]))&&r.push(s);r.length&&i$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Oa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Oa[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,d])=>{e.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function a$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const o2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function a2(t){return k_(t)&&"offsetHeight"in t}const cC=30,l$=t=>!isNaN(parseFloat(t));class c${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=Cr.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Cr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=l$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Rb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Mt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cC);return C_(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ic(t,e){return new c$(t,e)}const{schedule:Hb}=D_(queueMicrotask,!1),bs={x:!1,y:!1};function l2(){return bs.x||bs.y}function d$(t){return t==="x"||t==="y"?bs[t]?null:(bs[t]=!0,()=>{bs[t]=!1}):bs.x||bs.y?null:(bs.x=bs.y=!0,()=>{bs.x=bs.y=!1})}function c2(t,e){const n=a$(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function dC(t){return!(t.pointerType==="touch"||l2())}function u$(t,e,n={}){const[r,s,o]=c2(t,n),a=l=>{if(!dC(l))return;const{target:d}=l,h=e(d,l);if(typeof h!="function"||!d)return;const m=f=>{dC(f)&&(h(f),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,s)};return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),o}const d2=(t,e)=>e?t===e?!0:d2(t,e.parentElement):!1,Gb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,h$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function m$(t){return h$.has(t.tagName)||t.tabIndex!==-1}const Ym=new WeakSet;function uC(t){return e=>{e.key==="Enter"&&t(e)}}function ux(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const f$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=uC(()=>{if(Ym.has(n))return;ux(n,"down");const s=uC(()=>{ux(n,"up")}),o=()=>ux(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function hC(t){return Gb(t)&&!l2()}function p$(t,e,n={}){const[r,s,o]=c2(t,n),a=l=>{const d=l.currentTarget;if(!hC(l))return;Ym.add(d);const h=e(d,l),m=(y,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",v),Ym.has(d)&&Ym.delete(d),hC(y)&&typeof h=="function"&&h(y,{success:w})},f=y=>{m(y,d===window||d===document||n.useGlobalTarget||d2(d,y.target))},v=y=>{m(y,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",v,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),a2(l)&&(l.addEventListener("focus",h=>f$(h,s)),!m$(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function u2(t){return k_(t)&&"ownerSVGElement"in t}function g$(t){return u2(t)&&t.tagName==="svg"}const Zn=t=>!!(t&&t.getVelocity),v$=[...r2,un,Go],x$=t=>v$.find(n2(t)),Kb=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function mC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function y$(...t){return e=>{let n=!1;const r=t.map(s=>{const o=mC(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():mC(t[s],null)}}}}function b$(...t){return g.useCallback(y$(...t),t)}class w$ extends g.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=a2(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function S$({children:t,isPresent:e,anchorX:n,root:r}){const s=g.useId(),o=g.useRef(null),a=g.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=g.useContext(Kb),d=b$(o,t?.ref);return g.useInsertionEffect(()=>{const{width:h,height:m,top:f,left:v,right:y}=a.current;if(e||!o.current||!h||!m)return;const w=n==="left"?`left: ${v}`:`right: ${y}`;o.current.dataset.motionPopId=s;const b=document.createElement("style");l&&(b.nonce=l);const k=r??document.head;return k.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${m}px !important;
            ${w}px !important;
            top: ${f}px !important;
          }
        `),()=>{k.contains(b)&&k.removeChild(b)}},[e]),i.jsx(w$,{isPresent:e,childRef:o,sizeRef:a,children:g.cloneElement(t,{ref:d})})}const k$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:a,anchorX:l,root:d})=>{const h=Cb(j$),m=g.useId();let f=!0,v=g.useMemo(()=>(f=!1,{id:m,initial:e,isPresent:n,custom:s,onExitComplete:y=>{h.set(y,!0);for(const w of h.values())if(!w)return;r&&r()},register:y=>(h.set(y,!1),()=>h.delete(y))}),[n,h,r]);return o&&f&&(v={...v}),g.useMemo(()=>{h.forEach((y,w)=>h.set(w,!1))},[n]),g.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),a==="popLayout"&&(t=i.jsx(S$,{isPresent:n,anchorX:l,root:d,children:t})),i.jsx(kp.Provider,{value:v,children:t})};function j$(){return new Map}function h2(t=!0){const e=g.useContext(kp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=g.useId();g.useEffect(()=>{if(t)return s(o)},[t]);const a=g.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const Nm=t=>t.key||"";function fC(t){const e=[];return g.Children.forEach(t,n=>{g.isValidElement(n)&&e.push(n)}),e}const pC=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:d})=>{const[h,m]=h2(a),f=g.useMemo(()=>fC(t),[t]),v=a&&!h?[]:f.map(Nm),y=g.useRef(!0),w=g.useRef(f),b=Cb(()=>new Map),[k,j]=g.useState(f),[T,E]=g.useState(f);w_(()=>{y.current=!1,w.current=f;for(let _=0;_<T.length;_++){const I=Nm(T[_]);v.includes(I)?b.delete(I):b.get(I)!==!0&&b.set(I,!1)}},[T,v.length,v.join("-")]);const P=[];if(f!==k){let _=[...f];for(let I=0;I<T.length;I++){const M=T[I],O=Nm(M);v.includes(O)||(_.splice(I,0,M),P.push(M))}return o==="wait"&&P.length&&(_=P),E(fC(_)),j(f),null}const{forceRender:N}=g.useContext(jb);return i.jsx(i.Fragment,{children:T.map(_=>{const I=Nm(_),M=a&&!h?!1:f===T||v.includes(I),O=()=>{if(b.has(I))b.set(I,!0);else return;let L=!0;b.forEach(D=>{D||(L=!1)}),L&&(N?.(),E(w.current),a&&m?.(),r&&r())};return i.jsx(k$,{isPresent:M,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:M?void 0:O,anchorX:l,children:_},I)})})},m2=g.createContext({strict:!1}),gC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Oc={};for(const t in gC)Oc[t]={isEnabled:e=>gC[t].some(n=>!!e[n])};function C$(t){for(const e in t)Oc[e]={...Oc[e],...t[e]}}const T$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||T$.has(t)}let f2=t=>!Nf(t);function N$(t){typeof t=="function"&&(f2=e=>e.startsWith("on")?!Nf(e):t(e))}try{N$(require("@emotion/is-prop-valid").default)}catch{}function E$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(f2(s)||n===!0&&Nf(s)||!e&&!Nf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const jp=g.createContext({});function Cp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function wu(t){return typeof t=="string"||Array.isArray(t)}const Jb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yb=["initial",...Jb];function Tp(t){return Cp(t.animate)||Yb.some(e=>wu(t[e]))}function p2(t){return!!(Tp(t)||t.variants)}function P$(t,e){if(Tp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||wu(n)?n:void 0,animate:wu(r)?r:void 0}}return t.inherit!==!1?e:{}}function _$(t){const{initial:e,animate:n}=P$(t,g.useContext(jp));return g.useMemo(()=>({initial:e,animate:n}),[vC(e),vC(n)])}function vC(t){return Array.isArray(t)?t.join(" "):t}const Su={};function R$(t){for(const e in t)Su[e]=t[e],Ob(e)&&(Su[e].isCSSVariable=!0)}function g2(t,{layout:e,layoutId:n}){return Yc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Su[t]||t==="opacity")}const A$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},I$=Jc.length;function O$(t,e,n){let r="",s=!0;for(let o=0;o<I$;o++){const a=Jc[o],l=t[a];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(a.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||n){const h=o2(l,Wb[a]);if(!d){s=!1;const m=A$[a]||a;r+=`${m}(${h}) `}n&&(e[a]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Xb(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let a=!1,l=!1;for(const d in e){const h=e[d];if(Yc.has(d)){a=!0;continue}else if(Ob(d)){s[d]=h;continue}else{const m=o2(h,Wb[d]);d.startsWith("origin")?(l=!0,o[d]=m):r[d]=m}}if(e.transform||(a||n?r.transform=O$(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:d="50%",originY:h="50%",originZ:m=0}=o;r.transformOrigin=`${d} ${h} ${m}`}}const Qb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function v2(t,e,n){for(const r in e)!Zn(e[r])&&!g2(r,n)&&(t[r]=e[r])}function M$({transformTemplate:t},e){return g.useMemo(()=>{const n=Qb();return Xb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function D$(t,e){const n=t.style||{},r={};return v2(r,n,t),Object.assign(r,M$(t,e)),r}function L$(t,e){const n={},r=D$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const U$={offset:"stroke-dashoffset",array:"stroke-dasharray"},F$={offset:"strokeDashoffset",array:"strokeDasharray"};function V$(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?U$:F$;t[o.offset]=Xe.transform(-r);const a=Xe.transform(e),l=Xe.transform(n);t[o.array]=`${a} ${l}`}function x2(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:a=0,...l},d,h,m){if(Xb(t,l,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:v}=t;f.transform&&(v.transform=f.transform,delete f.transform),(v.transform||f.transformOrigin)&&(v.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),v.transform&&(v.transformBox=m?.transformBox??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&V$(f,s,o,a,!1)}const y2=()=>({...Qb(),attrs:{}}),b2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function B$(t,e,n,r){const s=g.useMemo(()=>{const o=y2();return x2(o,e,b2(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};v2(o,t.style,t),s.style={...o,...s.style}}return s}const $$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zb(t){return typeof t!="string"||t.includes("-")?!1:!!($$.indexOf(t)>-1||/[A-Z]/u.test(t))}function z$(t,e,n,{latestValues:r},s,o=!1){const l=(Zb(t)?B$:L$)(e,r,s,t),d=E$(e,typeof t=="string",o),h=t!==g.Fragment?{...d,...l,ref:n}:{},{children:m}=e,f=g.useMemo(()=>Zn(m)?m.get():m,[m]);return g.createElement(t,{...h,children:f})}function xC(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ew(t,e,n,r){if(typeof e=="function"){const[s,o]=xC(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=xC(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function Xm(t){return Zn(t)?t.get():t}function q$({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:W$(n,r,s,t),renderState:e()}}function W$(t,e,n,r){const s={},o=r(t,{});for(const v in o)s[v]=Xm(o[v]);let{initial:a,animate:l}=t;const d=Tp(t),h=p2(t);e&&h&&!d&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const f=m?l:a;if(f&&typeof f!="boolean"&&!Cp(f)){const v=Array.isArray(f)?f:[f];for(let y=0;y<v.length;y++){const w=ew(t,v[y]);if(w){const{transitionEnd:b,transition:k,...j}=w;for(const T in j){let E=j[T];if(Array.isArray(E)){const P=m?E.length-1:0;E=E[P]}E!==null&&(s[T]=E)}for(const T in b)s[T]=b[T]}}}return s}const w2=t=>(e,n)=>{const r=g.useContext(jp),s=g.useContext(kp),o=()=>q$(t,e,r,s);return n?o():Cb(o)};function tw(t,e,n){const{style:r}=t,s={};for(const o in r)(Zn(r[o])||e.style&&Zn(e.style[o])||g2(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const H$=w2({scrapeMotionValuesFromProps:tw,createRenderState:Qb});function S2(t,e,n){const r=tw(t,e,n);for(const s in t)if(Zn(t[s])||Zn(e[s])){const o=Jc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const G$=w2({scrapeMotionValuesFromProps:S2,createRenderState:y2}),K$=Symbol.for("motionComponentSymbol");function rc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function J$(t,e,n){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):rc(n)&&(n.current=r))},[e])}const nw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Y$="framerAppearId",k2="data-"+nw(Y$),j2=g.createContext({});function X$(t,e,n,r,s){const{visualElement:o}=g.useContext(jp),a=g.useContext(m2),l=g.useContext(kp),d=g.useContext(Kb).reducedMotion,h=g.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,f=g.useContext(j2);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&Q$(h.current,n,s,f);const v=g.useRef(!1);g.useInsertionEffect(()=>{m&&v.current&&m.update(n,l)});const y=n[k2],w=g.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return w_(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),g.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),w.current=!1),m.enteringChildren=void 0)}),m}function Q$(t,e,n,r){const{layoutId:s,layout:o,drag:a,dragConstraints:l,layoutScroll:d,layoutRoot:h,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:C2(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!a||l&&rc(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:h})}function C2(t){if(t)return t.options.allowProjection!==!1?t.projection:C2(t.parent)}function hx(t,{forwardMotionProps:e=!1}={},n,r){n&&C$(n);const s=Zb(t)?G$:H$;function o(l,d){let h;const m={...g.useContext(Kb),...l,layoutId:Z$(l)},{isStatic:f}=m,v=_$(l),y=s(l,f);if(!f&&Tb){e9();const w=t9(m);h=w.MeasureLayout,v.visualElement=X$(t,y,m,r,w.ProjectionNode)}return i.jsxs(jp.Provider,{value:v,children:[h&&v.visualElement?i.jsx(h,{visualElement:v.visualElement,...m}):null,z$(t,l,J$(y,v.visualElement,d),y,f,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=g.forwardRef(o);return a[K$]=t,a}function Z$({layoutId:t}){const e=g.useContext(jb).id;return e&&t!==void 0?e+"-"+t:t}function e9(t,e){g.useContext(m2).strict}function t9(t){const{drag:e,layout:n}=Oc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function n9(t,e){if(typeof Proxy>"u")return hx;const n=new Map,r=(o,a)=>hx(o,a,t,e),s=(o,a)=>r(o,a);return new Proxy(s,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,hx(a,void 0,t,e)),n.get(a))})}function T2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function r9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function s9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function mx(t){return t===void 0||t===1}function Ny({scale:t,scaleX:e,scaleY:n}){return!mx(t)||!mx(e)||!mx(n)}function ka(t){return Ny(t)||N2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function N2(t){return yC(t.x)||yC(t.y)}function yC(t){return t&&t!=="0%"}function Ef(t,e,n){const r=t-n,s=e*r;return n+s}function bC(t,e,n,r,s){return s!==void 0&&(t=Ef(t,s,r)),Ef(t,n,r)+e}function Ey(t,e=0,n=1,r,s){t.min=bC(t.min,e,n,r,s),t.max=bC(t.max,e,n,r,s)}function E2(t,{x:e,y:n}){Ey(t.x,e.translate,e.scale,e.originPoint),Ey(t.y,n.translate,n.scale,n.originPoint)}const wC=.999999999999,SC=1.0000000000001;function i9(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,a;for(let l=0;l<s;l++){o=n[l],a=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ic(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,E2(t,a)),r&&ka(o.latestValues)&&ic(t,o.latestValues))}e.x<SC&&e.x>wC&&(e.x=1),e.y<SC&&e.y>wC&&(e.y=1)}function sc(t,e){t.min=t.min+e,t.max=t.max+e}function kC(t,e,n,r,s=.5){const o=Bt(t.min,t.max,s);Ey(t,e,n,o,r)}function ic(t,e){kC(t.x,e.x,e.scaleX,e.scale,e.originX),kC(t.y,e.y,e.scaleY,e.scale,e.originY)}function P2(t,e){return T2(s9(t.getBoundingClientRect(),e))}function o9(t,e,n){const r=P2(t,n),{scroll:s}=e;return s&&(sc(r.x,s.offset.x),sc(r.y,s.offset.y)),r}const jC=()=>({translate:0,scale:1,origin:0,originPoint:0}),oc=()=>({x:jC(),y:jC()}),CC=()=>({min:0,max:0}),en=()=>({x:CC(),y:CC()}),Py={current:null},_2={current:!1};function a9(){if(_2.current=!0,!!Tb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Py.current=t.matches;t.addEventListener("change",e),e()}else Py.current=!1}const l9=new WeakMap;function c9(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Zn(s))t.addValue(r,s);else if(Zn(o))t.addValue(r,Ic(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,Ic(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const TC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class d9{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Cr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Mt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Tp(n),this.isVariantNode=p2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in f){const y=f[v];d[v]!==void 0&&Zn(y)&&y.set(d[v])}}mount(e){this.current=e,l9.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),_2.current||a9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Py.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ho(this.notifyUpdate),Ho(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Yc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Mt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Oc){const n=Oc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):en()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<TC.length;r++){const s=TC[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,a=e[o];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=c9(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ic(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(S_(r)||j_(r))?r=parseFloat(r):!x$(r)&&Go.test(n)&&(r=i2(e,n)),this.setBaseTarget(e,Zn(r)?r.get():r)),Zn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=ew(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Zn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Rb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Hb.render(this.render)}}class R2 extends d9{constructor(){super(...arguments),this.KeyframeResolver=o$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function A2(t,{style:e,vars:n},r,s){const o=t.style;let a;for(a in e)o[a]=e[a];s?.applyProjectionStyles(o,r);for(a in n)o.setProperty(a,n[a])}function u9(t){return window.getComputedStyle(t)}class h9 extends R2{constructor(){super(...arguments),this.type="html",this.renderInstance=A2}readValueFromInstance(e,n){if(Yc.has(n))return this.projection?.isProjecting?by(n):CB(e,n);{const r=u9(e),s=(Ob(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return P2(e,n)}build(e,n,r){Xb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return tw(e,n,r)}}const I2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function m9(t,e,n,r){A2(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(I2.has(s)?s:nw(s),e.attrs[s])}class f9 extends R2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=en}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Yc.has(n)){const r=s2(n);return r&&r.default||0}return n=I2.has(n)?n:nw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return S2(e,n,r)}build(e,n,r){x2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){m9(e,n,r,s)}mount(e){this.isSVGTag=b2(e.tagName),super.mount(e)}}const p9=(t,e)=>Zb(t)?new f9(e):new h9(e,{allowProjection:t!==g.Fragment});function yc(t,e,n){const r=t.getProps();return ew(r,e,n!==void 0?n:r.custom,t)}const _y=t=>Array.isArray(t);function g9(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ic(n))}function v9(t){return _y(t)?t[t.length-1]||0:t}function x9(t,e){const n=yc(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const a in o){const l=v9(o[a]);g9(t,a,l)}}function y9(t){return!!(Zn(t)&&t.add)}function Ry(t,e){const n=t.getValue("willChange");if(y9(n))return n.add(e);if(!n&&Wi.WillChange){const r=new Wi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function O2(t){return t.props[k2]}const b9=t=>t!==null;function w9(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(b9),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const S9={type:"spring",stiffness:500,damping:25,restSpeed:10},k9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),j9={type:"keyframes",duration:.8},C9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T9=(t,{keyframes:e})=>e.length>2?j9:Yc.has(t)?t.startsWith("scale")?k9(e[1]):S9:C9;function N9({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:d,elapsed:h,...m}){return!!Object.keys(m).length}const rw=(t,e,n,r={},s,o)=>a=>{const l=qb(r,t)||{},d=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ci(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:s};N9(l)||Object.assign(m,T9(t,m)),m.duration&&(m.duration=ci(m.duration)),m.repeatDelay&&(m.repeatDelay=ci(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let f=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Cy(m),m.delay===0&&(f=!0)),(Wi.instantAnimations||Wi.skipAnimations)&&(f=!0,Cy(m),m.delay=0),m.allowFlatten=!l.type&&!l.ease,f&&!o&&e.get()!==void 0){const v=w9(m.keyframes,l);if(v!==void 0){Mt.update(()=>{m.onUpdate(v),m.onComplete()});return}}return l.isSync?new $b(m):new KB(m)};function E9({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function M2(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const d=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const m in l){const f=t.getValue(m,t.latestValues[m]??null),v=l[m];if(v===void 0||h&&E9(h,m))continue;const y={delay:n,...qb(o||{},m)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(v)&&v===w&&!y.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const j=O2(t);if(j){const T=window.MotionHandoffAnimation(j,m,Mt);T!==null&&(y.startTime=T,b=!0)}}Ry(t,m),f.start(rw(m,f,v,t.shouldReduceMotion&&t2.has(m)?{type:!1}:y,t,b));const k=f.animation;k&&d.push(k)}return a&&Promise.all(d).then(()=>{Mt.update(()=>{a&&x9(t,a)})}),d}function D2(t,e,n,r=0,s=1){const o=Array.from(t).sort((h,m)=>h.sortNodePosition(m)).indexOf(e),a=t.size,l=(a-1)*r;return typeof n=="function"?n(o,a):s===1?o*r:l-o*r}function Ay(t,e,n={}){const r=yc(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(M2(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=s;return P9(t,e,d,h,m,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[d,h]=l==="beforeChildren"?[o,a]:[a,o];return d().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function P9(t,e,n=0,r=0,s=0,o=1,a){const l=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),l.push(Ay(d,e,{...a,delay:n+(typeof r=="function"?0:r)+D2(t.variantChildren,d,r,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(l)}function _9(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>Ay(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=Ay(t,e,n);else{const s=typeof e=="function"?yc(t,e,n.custom):e;r=Promise.all(M2(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function L2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const R9=Yb.length;function U2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?U2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<R9;n++){const r=Yb[n],s=t.props[r];(wu(s)||s===!1)&&(e[r]=s)}return e}const A9=[...Jb].reverse(),I9=Jb.length;function O9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>_9(t,n,r)))}function M9(t){let e=O9(t),n=NC(),r=!0;const s=d=>(h,m)=>{const f=yc(t,m,d==="exit"?t.presenceContext?.custom:void 0);if(f){const{transition:v,transitionEnd:y,...w}=f;h={...h,...w,...y}}return h};function o(d){e=d(t)}function a(d){const{props:h}=t,m=U2(t.parent)||{},f=[],v=new Set;let y={},w=1/0;for(let k=0;k<I9;k++){const j=A9[k],T=n[j],E=h[j]!==void 0?h[j]:m[j],P=wu(E),N=j===d?T.isActive:null;N===!1&&(w=k);let _=E===m[j]&&E!==h[j]&&P;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...y},!T.isActive&&N===null||!E&&!T.prevProp||Cp(E)||typeof E=="boolean")continue;const I=D9(T.prevProp,E);let M=I||j===d&&T.isActive&&!_&&P||k>w&&P,O=!1;const L=Array.isArray(E)?E:[E];let D=L.reduce(s(j),{});N===!1&&(D={});const{prevResolvedValues:A={}}=T,Z={...A,...D},se=de=>{M=!0,v.has(de)&&(O=!0,v.delete(de)),T.needsAnimating[de]=!0;const U=t.getValue(de);U&&(U.liveStyle=!1)};for(const de in Z){const U=D[de],G=A[de];if(y.hasOwnProperty(de))continue;let le=!1;_y(U)&&_y(G)?le=!L2(U,G):le=U!==G,le?U!=null?se(de):v.add(de):U!==void 0&&v.has(de)?se(de):T.protectedKeys[de]=!0}T.prevProp=E,T.prevResolvedValues=D,T.isActive&&(y={...y,...D}),r&&t.blockInitialAnimation&&(M=!1);const fe=_&&I;M&&(!fe||O)&&f.push(...L.map(de=>{const U={type:j};if(typeof de=="string"&&r&&!fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:G}=t,le=yc(G,de);if(G.enteringChildren&&le){const{delayChildren:$}=le.transition||{};U.delay=D2(G.enteringChildren,t,$)}}return{animation:de,options:U}}))}if(v.size){const k={};if(typeof h.initial!="boolean"){const j=yc(t,Array.isArray(h.initial)?h.initial[0]:h.initial);j&&j.transition&&(k.transition=j.transition)}v.forEach(j=>{const T=t.getBaseTarget(j),E=t.getValue(j);E&&(E.liveStyle=!0),k[j]=T??null}),f.push({animation:k})}let b=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(f):Promise.resolve()}function l(d,h){if(n[d].isActive===h)return Promise.resolve();t.variantChildren?.forEach(f=>f.animationState?.setActive(d,h)),n[d].isActive=h;const m=a(d);for(const f in n)n[f].protectedKeys={};return m}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=NC()}}}function D9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!L2(e,t):!1}function ya(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NC(){return{animate:ya(!0),whileInView:ya(),whileHover:ya(),whileTap:ya(),whileDrag:ya(),whileFocus:ya(),exit:ya()}}class Xo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class L9 extends Xo{constructor(e){super(e),e.animationState||(e.animationState=M9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Cp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let U9=0;class F9 extends Xo{constructor(){super(...arguments),this.id=U9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const V9={animation:{Feature:L9},exit:{Feature:F9}};function ku(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function eh(t){return{point:{x:t.pageX,y:t.pageY}}}const B9=t=>e=>Gb(e)&&t(e,eh(e));function eu(t,e,n,r){return ku(t,e,B9(n),r)}const F2=1e-4,$9=1-F2,z9=1+F2,V2=.01,q9=0-V2,W9=0+V2;function ir(t){return t.max-t.min}function H9(t,e,n){return Math.abs(t-e)<=n}function EC(t,e,n,r=.5){t.origin=r,t.originPoint=Bt(e.min,e.max,t.origin),t.scale=ir(n)/ir(e),t.translate=Bt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=$9&&t.scale<=z9||isNaN(t.scale))&&(t.scale=1),(t.translate>=q9&&t.translate<=W9||isNaN(t.translate))&&(t.translate=0)}function tu(t,e,n,r){EC(t.x,e.x,n.x,r?r.originX:void 0),EC(t.y,e.y,n.y,r?r.originY:void 0)}function PC(t,e,n){t.min=n.min+e.min,t.max=t.min+ir(e)}function G9(t,e,n){PC(t.x,e.x,n.x),PC(t.y,e.y,n.y)}function _C(t,e,n){t.min=e.min-n.min,t.max=t.min+ir(e)}function nu(t,e,n){_C(t.x,e.x,n.x),_C(t.y,e.y,n.y)}function Zr(t){return[t("x"),t("y")]}const B2=({current:t})=>t?t.ownerDocument.defaultView:null,RC=(t,e)=>Math.abs(t-e);function K9(t,e){const n=RC(t.x,e.x),r=RC(t.y,e.y);return Math.sqrt(n**2+r**2)}class $2{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=px(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=K9(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!w)return;const{point:b}=v,{timestamp:k}=zn;this.history.push({...b,timestamp:k});const{onStart:j,onMove:T}=this.handlers;y||(j&&j(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=fx(y,this.transformPagePoint),Mt.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:w,onSessionEnd:b,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=px(v.type==="pointercancel"?this.lastMoveEventInfo:fx(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,j),b&&b(v,j)},!Gb(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const l=eh(e),d=fx(l,this.transformPagePoint),{point:h}=d,{timestamp:m}=zn;this.history=[{...h,timestamp:m}];const{onSessionStart:f}=n;f&&f(e,px(d,this.history)),this.removeListeners=Xu(eu(this.contextWindow,"pointermove",this.handlePointerMove),eu(this.contextWindow,"pointerup",this.handlePointerUp),eu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ho(this.updatePoint)}}function fx(t,e){return e?{point:e(t.point)}:t}function AC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function px({point:t},e){return{point:t,delta:AC(t,z2(e)),offset:AC(t,J9(e)),velocity:Y9(e,.1)}}function J9(t){return t[0]}function z2(t){return t[t.length-1]}function Y9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=z2(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ci(e)));)n--;if(!r)return{x:0,y:0};const o=rs(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function X9(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Bt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Bt(n,t,r.max):Math.min(t,n)),t}function IC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Q9(t,{top:e,left:n,bottom:r,right:s}){return{x:IC(t.x,n,s),y:IC(t.y,e,r)}}function OC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Z9(t,e){return{x:OC(t.x,e.x),y:OC(t.y,e.y)}}function ez(t,e){let n=.5;const r=ir(t),s=ir(e);return s>r?n=xu(e.min,e.max-r,t.min):r>s&&(n=xu(t.min,t.max-s,e.min)),qi(0,1,n)}function tz(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Iy=.35;function nz(t=Iy){return t===!1?t=0:t===!0&&(t=Iy),{x:MC(t,"left","right"),y:MC(t,"top","bottom")}}function MC(t,e,n){return{min:DC(t,e),max:DC(t,n)}}function DC(t,e){return typeof t=="number"?t:t[e]||0}const rz=new WeakMap;class sz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=en(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=f=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(eh(f).point)},a=(f,v)=>{const{drag:y,dragPropagation:w,onDragStart:b}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d$(y),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zr(j=>{let T=this.getAxisMotionValue(j).get()||0;if(di.test(T)){const{projection:E}=this.visualElement;if(E&&E.layout){const P=E.layout.layoutBox[j];P&&(T=ir(P)*(parseFloat(T)/100))}}this.originPoint[j]=T}),b&&Mt.postRender(()=>b(f,v)),Ry(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},l=(f,v)=>{this.latestPointerEvent=f,this.latestPanInfo=v;const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:b,onDrag:k}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:j}=v;if(w&&this.currentDirection===null){this.currentDirection=iz(j),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",v.point,j),this.updateAxis("y",v.point,j),this.visualElement.render(),k&&k(f,v)},d=(f,v)=>{this.latestPointerEvent=f,this.latestPanInfo=v,this.stop(f,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Zr(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new $2(e,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:B2(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Mt.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Em(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=X9(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&rc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Q9(r.layoutBox,e):this.constraints=!1,this.elastic=nz(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=tz(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!rc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=o9(r,s.root,this.visualElement.getTransformPagePoint());let a=Z9(s.layout.layoutBox,o);if(n){const l=n(r9(a));this.hasMutatedConstraints=!!l,l&&(a=T2(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=Zr(m=>{if(!Em(m,n,this.currentDirection))return;let f=d&&d[m]||{};a&&(f={min:0,max:0});const v=s?200:1e6,y=s?40:1e7,w={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(m,w)});return Promise.all(h).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Ry(this.visualElement,e),r.start(rw(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zr(n=>{const{drag:r}=this.getProps();if(!Em(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];o.set(e[n]-Bt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rc(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zr(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const d=l.get();s[a]=ez({min:d,max:d},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zr(a=>{if(!Em(a,e,null))return;const l=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];l.set(Bt(d,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;rz.set(this.visualElement,this);const e=this.visualElement.current,n=eu(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();rc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Mt.read(r);const a=ku(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Zr(m=>{const f=this.getAxisMotionValue(m);f&&(this.originPoint[m]+=d[m].translate,f.set(f.get()+d[m].translate))}),this.visualElement.render())}));return()=>{a(),n(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=Iy,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Em(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function iz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class oz extends Xo{constructor(e){super(e),this.removeGroupControls=as,this.removeListeners=as,this.controls=new sz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||as}unmount(){this.removeGroupControls(),this.removeListeners()}}const LC=t=>(e,n)=>{t&&Mt.postRender(()=>t(e,n))};class az extends Xo{constructor(){super(...arguments),this.removePointerDownListener=as}onPointerDown(e){this.session=new $2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:B2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:LC(e),onStart:LC(n),onMove:r,onEnd:(o,a)=>{delete this.session,s&&Mt.postRender(()=>s(o,a))}}}mount(){this.removePointerDownListener=eu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Qm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ld={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xe.test(t))t=parseFloat(t);else return t;const n=UC(t,e.target.x),r=UC(t,e.target.y);return`${n}% ${r}%`}},lz={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Go.parse(t);if(s.length>5)return r;const o=Go.createTransformer(t),a=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,d=n.y.scale*e.y;s[0+a]/=l,s[1+a]/=d;const h=Bt(l,d,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),o(s)}};let gx=!1;class cz extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;R$(dz),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),gx&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Qm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,gx=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Mt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Hb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;gx=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function q2(t){const[e,n]=h2(),r=g.useContext(jb);return i.jsx(cz,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(j2),isPresent:e,safeToRemove:n})}const dz={borderRadius:{...Ld,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ld,borderTopRightRadius:Ld,borderBottomLeftRadius:Ld,borderBottomRightRadius:Ld,boxShadow:lz};function uz(t,e,n){const r=Zn(t)?t:Ic(t);return r.start(rw("",r,e,n)),r.animation}const hz=(t,e)=>t.depth-e.depth;class mz{constructor(){this.children=[],this.isDirty=!1}add(e){Nb(this.children,e),this.isDirty=!0}remove(e){Eb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hz),this.isDirty=!1,this.children.forEach(e)}}function fz(t,e){const n=Cr.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Ho(r),t(o-e))};return Mt.setup(r,!0),()=>Ho(r)}const W2=["TopLeft","TopRight","BottomLeft","BottomRight"],pz=W2.length,FC=t=>typeof t=="string"?parseFloat(t):t,VC=t=>typeof t=="number"||Xe.test(t);function gz(t,e,n,r,s,o){s?(t.opacity=Bt(0,n.opacity??1,vz(r)),t.opacityExit=Bt(e.opacity??1,0,xz(r))):o&&(t.opacity=Bt(e.opacity??1,n.opacity??1,r));for(let a=0;a<pz;a++){const l=`border${W2[a]}Radius`;let d=BC(e,l),h=BC(n,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||VC(d)===VC(h)?(t[l]=Math.max(Bt(FC(d),FC(h),r),0),(di.test(h)||di.test(d))&&(t[l]+="%")):t[l]=h}(e.rotate||n.rotate)&&(t.rotate=Bt(e.rotate||0,n.rotate||0,r))}function BC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const vz=H2(0,.5,A_),xz=H2(.5,.95,as);function H2(t,e,n){return r=>r<t?0:r>e?1:n(xu(t,e,r))}function $C(t,e){t.min=e.min,t.max=e.max}function Qr(t,e){$C(t.x,e.x),$C(t.y,e.y)}function zC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function qC(t,e,n,r,s){return t-=e,t=Ef(t,1/n,r),s!==void 0&&(t=Ef(t,1/s,r)),t}function yz(t,e=0,n=1,r=.5,s,o=t,a=t){if(di.test(e)&&(e=parseFloat(e),e=Bt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Bt(o.min,o.max,r);t===o&&(l-=e),t.min=qC(t.min,e,n,l,s),t.max=qC(t.max,e,n,l,s)}function WC(t,e,[n,r,s],o,a){yz(t,e[n],e[r],e[s],e.scale,o,a)}const bz=["x","scaleX","originX"],wz=["y","scaleY","originY"];function HC(t,e,n,r){WC(t.x,e,bz,n?n.x:void 0,r?r.x:void 0),WC(t.y,e,wz,n?n.y:void 0,r?r.y:void 0)}function GC(t){return t.translate===0&&t.scale===1}function G2(t){return GC(t.x)&&GC(t.y)}function KC(t,e){return t.min===e.min&&t.max===e.max}function Sz(t,e){return KC(t.x,e.x)&&KC(t.y,e.y)}function JC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function K2(t,e){return JC(t.x,e.x)&&JC(t.y,e.y)}function YC(t){return ir(t.x)/ir(t.y)}function XC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class kz{constructor(){this.members=[]}add(e){Nb(this.members,e),e.scheduleRender()}remove(e){if(Eb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jz(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,a=n?.z||0;if((s||o||a)&&(r=`translate3d(${s}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:f,rotateY:v,skewX:y,skewY:w}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),f&&(r+=`rotateX(${f}deg) `),v&&(r+=`rotateY(${v}deg) `),y&&(r+=`skewX(${y}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,d=t.y.scale*e.y;return(l!==1||d!==1)&&(r+=`scale(${l}, ${d})`),r||"none"}const vx=["","X","Y","Z"],Cz=1e3;let Tz=0;function xx(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function J2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=O2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Mt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&J2(r)}function Y2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=e?.()){this.id=Tz++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Pz),this.nodes.forEach(Iz),this.nodes.forEach(Oz),this.nodes.forEach(_z)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new mz)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Rb),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const d=this.eventHandlers.get(a);d&&d.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=u2(a)&&!g$(a),this.instance=a;const{layoutId:l,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),t){let m,f=0;const v=()=>this.root.updateBlockedByResize=!1;Mt.read(()=>{f=window.innerWidth}),t(a,()=>{const y=window.innerWidth;y!==f&&(f=y,this.root.updateBlockedByResize=!0,m&&m(),m=fz(v,250),Qm.hasAnimatedSinceResize&&(Qm.hasAnimatedSinceResize=!1,this.nodes.forEach(eT)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeLayoutChanged:v,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||Fz,{onLayoutAnimationStart:b,onLayoutAnimationComplete:k}=h.getProps(),j=!this.targetLayout||!K2(this.targetLayout,y),T=!f&&v;if(this.options.layoutRoot||this.resumeFrom||T||f&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...qb(w,"layout"),onPlay:b,onComplete:k};(h.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(m,T)}else f||eT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ho(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Mz),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&J2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const f=this.path[m];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ZC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Az),this.nodes.forEach(Nz),this.nodes.forEach(Ez)):this.nodes.forEach(ZC),this.clearAllSnapshots();const l=Cr.now();zn.delta=qi(0,1e3/60,l-zn.timestamp),zn.timestamp=l,zn.isProcessing=!0,ox.update.process(zn),ox.preRender.process(zn),ox.render.process(zn),zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Rz),this.sharedNodes.forEach(Dz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ir(this.snapshot.measuredBox.x)&&!ir(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=en(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!G2(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&this.instance&&(l||ka(this.latestValues)||m)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return a&&(d=this.removeTransform(d)),Vz(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return en();const l=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Bz))){const{scroll:h}=this.root;h&&(sc(l.x,h.offset.x),sc(l.y,h.offset.y))}return l}removeElementScroll(a){const l=en();if(Qr(l,a),this.scroll?.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&Qr(l,a),sc(l.x,m.offset.x),sc(l.y,m.offset.y))}return l}applyTransform(a,l=!1){const d=en();Qr(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ic(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ka(m.latestValues)&&ic(d,m.latestValues)}return ka(this.latestValues)&&ic(d,this.latestValues),d}removeTransform(a){const l=en();Qr(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ka(h.latestValues))continue;Ny(h.latestValues)&&h.updateSnapshot();const m=en(),f=h.measurePageBox();Qr(m,f),HC(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ka(this.latestValues)&&HC(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!(!this.layout||!(m||f))){if(this.resolvedRelativeTargetAt=zn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),nu(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=en(),this.targetWithTransforms=en()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),G9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qr(this.target,this.layout.layoutBox),E2(this.target,this.targetDelta)):Qr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),nu(this.relativeTargetOrigin,this.target,v.target),Qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ny(this.parent.latestValues)||N2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),l=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===zn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Qr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,v=this.treeScale.y;i9(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=en());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zC(this.prevProjectionDelta.x,this.projectionDelta.x),zC(this.prevProjectionDelta.y,this.projectionDelta.y)),tu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==v||!XC(this.projectionDelta.x,this.prevProjectionDelta.x)||!XC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=oc(),this.projectionDelta=oc(),this.projectionDeltaWithTransform=oc()}setAnimationOrigin(a,l=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},f=oc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=en(),y=d?d.source:void 0,w=this.layout?this.layout.source:void 0,b=y!==w,k=this.getStack(),j=!k||k.members.length<=1,T=!!(b&&!j&&this.options.crossfade===!0&&!this.path.some(Uz));this.animationProgress=0;let E;this.mixTargetDelta=P=>{const N=P/1e3;tT(f.x,a.x,N),tT(f.y,a.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lz(this.relativeTarget,this.relativeTargetOrigin,v,N),E&&Sz(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=en()),Qr(E,this.relativeTarget)),b&&(this.animationValues=m,gz(m,h,this.latestValues,N,T,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ho(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mt.update(()=>{Qm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ic(0)),this.currentAnimation=uz(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Cz),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:m}=a;if(!(!l||!d||!h)){if(this!==a&&this.layout&&h&&X2(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||en();const f=ir(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+f;const v=ir(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}Qr(l,d),ic(l,m),tu(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new kz),this.sharedNodes.get(a).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const h={};d.z&&xx("z",a,h,this.animationValues);for(let m=0;m<vx.length;m++)xx(`rotate${vx[m]}`,a,h,this.animationValues),xx(`skew${vx[m]}`,a,h,this.animationValues);a.render();for(const m in h)a.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Xm(l?.pointerEvents)||"",a.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Xm(l?.pointerEvents)||""),this.hasProjected&&!ka(this.latestValues)&&(a.transform=d?d({},""):"none",this.hasProjected=!1);return}a.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let f=jz(this.projectionDeltaWithTransform,this.treeScale,m);d&&(f=d(m,f)),a.transform=f;const{x:v,y}=this.projectionDelta;a.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,h.animationValues?a.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:a.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in Su){if(m[w]===void 0)continue;const{correct:b,applyTo:k,isCSSVariable:j}=Su[w],T=f==="none"?m[w]:b(m[w],h);if(k){const E=k.length;for(let P=0;P<E;P++)a[k[P]]=T}else j?this.options.visualElement.renderState.vars[w]=T:a[w]=T}this.options.layoutId&&(a.pointerEvents=h===this?Xm(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(QC),this.root.sharedNodes.clear()}}}function Nz(t){t.updateLayout()}function Ez(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Zr(m=>{const f=o?e.measuredBox[m]:e.layoutBox[m],v=ir(f);f.min=n[m].min,f.max=f.min+v}):X2(s,e.layoutBox,n)&&Zr(m=>{const f=o?e.measuredBox[m]:e.layoutBox[m],v=ir(n[m]);f.max=f.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+v)});const a=oc();tu(a,n,e.layoutBox);const l=oc();o?tu(l,t.applyTransform(r,!0),e.measuredBox):tu(l,n,e.layoutBox);const d=!G2(a);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:v}=m;if(f&&v){const y=en();nu(y,e.layoutBox,f.layoutBox);const w=en();nu(w,n,v.layoutBox),K2(y,w)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Pz(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _z(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Rz(t){t.clearSnapshot()}function QC(t){t.clearMeasurements()}function ZC(t){t.isLayoutDirty=!1}function Az(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function eT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Iz(t){t.resolveTargetDelta()}function Oz(t){t.calcProjection()}function Mz(t){t.resetSkewAndRotation()}function Dz(t){t.removeLeadSnapshot()}function tT(t,e,n){t.translate=Bt(e.translate,0,n),t.scale=Bt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function nT(t,e,n,r){t.min=Bt(e.min,n.min,r),t.max=Bt(e.max,n.max,r)}function Lz(t,e,n,r){nT(t.x,e.x,n.x,r),nT(t.y,e.y,n.y,r)}function Uz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Fz={duration:.45,ease:[.4,0,.1,1]},rT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sT=rT("applewebkit/")&&!rT("chrome/")?Math.round:as;function iT(t){t.min=sT(t.min),t.max=sT(t.max)}function Vz(t){iT(t.x),iT(t.y)}function X2(t,e,n){return t==="position"||t==="preserve-aspect"&&!H9(YC(e),YC(n),.2)}function Bz(t){return t!==t.root&&t.scroll?.wasRoot}const $z=Y2({attachResizeListener:(t,e)=>ku(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yx={current:void 0},Q2=Y2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!yx.current){const t=new $z({});t.mount(window),t.setOptions({layoutScroll:!0}),yx.current=t}return yx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),zz={pan:{Feature:az},drag:{Feature:oz,ProjectionNode:Q2,MeasureLayout:q2}};function oT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Mt.postRender(()=>o(e,eh(e)))}class qz extends Xo{mount(){const{current:e}=this.node;e&&(this.unmount=u$(e,(n,r)=>(oT(this.node,r,"Start"),s=>oT(this.node,s,"End"))))}unmount(){}}class Wz extends Xo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xu(ku(this.node.current,"focus",()=>this.onFocus()),ku(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aT(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Mt.postRender(()=>o(e,eh(e)))}class Hz extends Xo{mount(){const{current:e}=this.node;e&&(this.unmount=p$(e,(n,r)=>(aT(this.node,r,"Start"),(s,{success:o})=>aT(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Oy=new WeakMap,bx=new WeakMap,Gz=t=>{const e=Oy.get(t.target);e&&e(t)},Kz=t=>{t.forEach(Gz)};function Jz({root:t,...e}){const n=t||document;bx.has(n)||bx.set(n,{});const r=bx.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Kz,{root:t,...e})),r[s]}function Yz(t,e,n){const r=Jz(e);return Oy.set(t,n),r.observe(t),()=>{Oy.delete(t),r.unobserve(t)}}const Xz={some:0,all:1};class Qz extends Xo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Xz[s]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:f}=this.node.getProps(),v=h?m:f;v&&v(d)};return Yz(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Zz(e,n))&&this.startObserver()}unmount(){}}function Zz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const e7={inView:{Feature:Qz},tap:{Feature:Hz},focus:{Feature:Wz},hover:{Feature:qz}},t7={layout:{ProjectionNode:Q2,MeasureLayout:q2}},n7={...V9,...e7,...zz,...t7},si=n9(n7,p9),ac=[{emoji:"🏐",label:"Vôlei",color:"#0066ff"},{emoji:"⚡",label:"Ataque",color:"#fbbf24"},{emoji:"🔥",label:"Pegou Fogo",color:"#ef4444"},{emoji:"💪",label:"Força",color:"#8b5cf6"},{emoji:"🙌",label:"Levantada",color:"#22c55e"},{emoji:"🎯",label:"Precisão",color:"#ec4899"},{emoji:"🏆",label:"MVP",color:"#f59e0b"},{emoji:"❤️",label:"Emoção",color:"#dc2626"}];function r7({onSelect:t,isOpen:e,onClose:n}){const[r,s]=g.useState(null),o=a=>{t(a),n()};return i.jsx(pC,{children:e&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:n}),i.jsx(si.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{duration:.2,ease:"easeOut"},className:"absolute bottom-full left-0 mb-2 z-50",children:i.jsx("div",{className:"bg-card border border-border rounded-full shadow-2xl px-2 py-2 flex items-center gap-1",children:ac.map(a=>i.jsxs(si.button,{onClick:()=>o(a.emoji),onMouseEnter:()=>s(a.emoji),onMouseLeave:()=>s(null),className:"relative flex flex-col items-center group",whileHover:{scale:1.3},whileTap:{scale:.9},transition:{duration:.1},children:[i.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-muted/50 transition-colors",children:i.jsx("span",{className:"text-2xl",children:a.emoji})}),i.jsx(pC,{children:r===a.emoji&&i.jsxs(si.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute -top-10 whitespace-nowrap bg-foreground text-background text-xs px-2 py-1 rounded shadow-lg",children:[a.label,i.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 w-2 h-2 rotate-45 bg-foreground"})]})})]},a.emoji))})})]})})}function s7({reactions:t,userReaction:e,onReactionClick:n,compact:r=!1}){if(Object.keys(t).length===0)return null;const s=Object.entries(t).filter(([o,a])=>a>0).sort(([,o],[,a])=>a-o);return s.length===0?null:i.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:s.map(([o,a])=>{const l=e===o,d=ac.find(h=>h.emoji===o);return i.jsxs(si.button,{onClick:()=>n(o),whileHover:{scale:1.05},whileTap:{scale:.95},className:`
              inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs
              transition-all duration-200
              ${l?"bg-primary/20 border border-primary/50 text-primary":"bg-muted/50 hover:bg-muted border border-transparent text-muted-foreground hover:text-foreground"}
            `,style:l&&d?{borderColor:d.color+"80",backgroundColor:d.color+"20"}:{},children:[i.jsx("span",{className:r?"text-base":"text-sm",children:o}),i.jsx("span",{className:"font-medium",children:a})]},o)})})}const sn=nb,i7=RP,o7=rb,Z2=g.forwardRef(({className:t,...e},n)=>i.jsx(sb,{ref:n,"data-slot":"dialog-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));Z2.displayName="DialogOverlay";const Yt=g.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(o7,{children:[i.jsx(Z2,{}),i.jsxs(ib,{ref:r,"data-slot":"dialog-content",className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[e,i.jsxs(pp,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[i.jsx(cr,{}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Yt.displayName="DialogContent";const fn=({className:t,...e})=>i.jsx("div",{"data-slot":"dialog-header",className:Pe("flex flex-col gap-2 text-center sm:text-left",t),...e});fn.displayName="DialogHeader";const Hi=({className:t,...e})=>i.jsx("div",{"data-slot":"dialog-footer",className:Pe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e});Hi.displayName="DialogFooter";const on=g.forwardRef(({className:t,...e},n)=>i.jsx(ob,{ref:n,"data-slot":"dialog-title",className:Pe("text-lg leading-none font-semibold",t),...e}));on.displayName="DialogTitle";const Ln=g.forwardRef(({className:t,...e},n)=>i.jsx(ab,{ref:n,"data-slot":"dialog-description",className:Pe("text-muted-foreground text-sm",t),...e}));Ln.displayName="DialogDescription";function sw(t){const e=t+"CollectionProvider",[n,r]=zr(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:k,children:j}=b,T=we.useRef(null),E=we.useRef(new Map).current;return i.jsx(s,{scope:k,itemMap:E,collectionRef:T,children:j})};a.displayName=e;const l=t+"CollectionSlot",d=Ua(l),h=we.forwardRef((b,k)=>{const{scope:j,children:T}=b,E=o(l,j),P=ct(k,E.collectionRef);return i.jsx(d,{ref:P,children:T})});h.displayName=l;const m=t+"CollectionItemSlot",f="data-radix-collection-item",v=Ua(m),y=we.forwardRef((b,k)=>{const{scope:j,children:T,...E}=b,P=we.useRef(null),N=ct(k,P),_=o(m,j);return we.useEffect(()=>(_.itemMap.set(P,{ref:P,...E}),()=>void _.itemMap.delete(P))),i.jsx(v,{[f]:"",ref:N,children:T})});y.displayName=m;function w(b){const k=o(t+"CollectionConsumer",b);return we.useCallback(()=>{const T=k.collectionRef.current;if(!T)return[];const E=Array.from(T.querySelectorAll(`[${f}]`));return Array.from(k.itemMap.values()).sort((_,I)=>E.indexOf(_.ref.current)-E.indexOf(I.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:a,Slot:h,ItemSlot:y},w,r]}var a7=g.createContext(void 0);function th(t){const e=g.useContext(a7);return t||e||"ltr"}var wx="rovingFocusGroup.onEntryFocus",l7={bubbles:!1,cancelable:!0},nh="RovingFocusGroup",[My,eR,c7]=sw(nh),[d7,Np]=zr(nh,[c7]),[u7,h7]=d7(nh),tR=g.forwardRef((t,e)=>i.jsx(My.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(My.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(m7,{...t,ref:e})})}));tR.displayName=nh;var m7=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...f}=t,v=g.useRef(null),y=ct(e,v),w=th(o),[b,k]=Fa({prop:a,defaultProp:l??null,onChange:d,caller:nh}),[j,T]=g.useState(!1),E=Mn(h),P=eR(n),N=g.useRef(!1),[_,I]=g.useState(0);return g.useEffect(()=>{const M=v.current;if(M)return M.addEventListener(wx,E),()=>M.removeEventListener(wx,E)},[E]),i.jsx(u7,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:b,onItemFocus:g.useCallback(M=>k(M),[k]),onItemShiftTab:g.useCallback(()=>T(!0),[]),onFocusableItemAdd:g.useCallback(()=>I(M=>M+1),[]),onFocusableItemRemove:g.useCallback(()=>I(M=>M-1),[]),children:i.jsx(Je.div,{tabIndex:j||_===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:Re(t.onMouseDown,()=>{N.current=!0}),onFocus:Re(t.onFocus,M=>{const O=!N.current;if(M.target===M.currentTarget&&O&&!j){const L=new CustomEvent(wx,l7);if(M.currentTarget.dispatchEvent(L),!L.defaultPrevented){const D=P().filter(ae=>ae.focusable),A=D.find(ae=>ae.active),Z=D.find(ae=>ae.id===b),fe=[A,Z,...D].filter(Boolean).map(ae=>ae.ref.current);sR(fe,m)}}N.current=!1}),onBlur:Re(t.onBlur,()=>T(!1))})})}),nR="RovingFocusGroupItem",rR=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:a,...l}=t,d=As(),h=o||d,m=h7(nR,n),f=m.currentTabStopId===h,v=eR(n),{onFocusableItemAdd:y,onFocusableItemRemove:w,currentTabStopId:b}=m;return g.useEffect(()=>{if(r)return y(),()=>w()},[r,y,w]),i.jsx(My.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:i.jsx(Je.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...l,ref:e,onMouseDown:Re(t.onMouseDown,k=>{r?m.onItemFocus(h):k.preventDefault()}),onFocus:Re(t.onFocus,()=>m.onItemFocus(h)),onKeyDown:Re(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){m.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const j=g7(k,m.orientation,m.dir);if(j!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let E=v().filter(P=>P.focusable).map(P=>P.ref.current);if(j==="last")E.reverse();else if(j==="prev"||j==="next"){j==="prev"&&E.reverse();const P=E.indexOf(k.currentTarget);E=m.loop?v7(E,P+1):E.slice(P+1)}setTimeout(()=>sR(E))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:b!=null}):a})})});rR.displayName=nR;var f7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function p7(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function g7(t,e,n){const r=p7(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return f7[r]}function sR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function v7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var iR=tR,oR=rR,Ep="Tabs",[x7]=zr(Ep,[Np]),aR=Np(),[y7,iw]=x7(Ep),lR=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:d="automatic",...h}=t,m=th(l),[f,v]=Fa({prop:r,onChange:s,defaultProp:o??"",caller:Ep});return i.jsx(y7,{scope:n,baseId:As(),value:f,onValueChange:v,orientation:a,dir:m,activationMode:d,children:i.jsx(Je.div,{dir:m,"data-orientation":a,...h,ref:e})})});lR.displayName=Ep;var cR="TabsList",dR=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,o=iw(cR,n),a=aR(n);return i.jsx(iR,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(Je.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});dR.displayName=cR;var uR="TabsTrigger",hR=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=t,a=iw(uR,n),l=aR(n),d=pR(a.baseId,r),h=gR(a.baseId,r),m=r===a.value;return i.jsx(oR,{asChild:!0,...l,focusable:!s,active:m,children:i.jsx(Je.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...o,ref:e,onMouseDown:Re(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:Re(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:Re(t.onFocus,()=>{const f=a.activationMode!=="manual";!m&&!s&&f&&a.onValueChange(r)})})})});hR.displayName=uR;var mR="TabsContent",fR=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=t,l=iw(mR,n),d=pR(l.baseId,r),h=gR(l.baseId,r),m=r===l.value,f=g.useRef(m);return g.useEffect(()=>{const v=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(v)},[]),i.jsx(dr,{present:s||m,children:({present:v})=>i.jsx(Je.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:h,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:v&&o})})});fR.displayName=mR;function pR(t,e){return`${t}-trigger-${e}`}function gR(t,e){return`${t}-content-${e}`}var b7=lR,w7=dR,S7=hR,k7=fR;function Ji({className:t,...e}){return i.jsx(b7,{"data-slot":"tabs",className:Pe("flex flex-col gap-2",t),...e})}function Yi({className:t,...e}){return i.jsx(w7,{"data-slot":"tabs-list",className:Pe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function mt({className:t,...e}){return i.jsx(S7,{"data-slot":"tabs-trigger",className:Pe("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function ft({className:t,...e}){return i.jsx(k7,{"data-slot":"tabs-content",className:Pe("flex-1 outline-none",t),...e})}function Dy(t,[e,n]){return Math.min(n,Math.max(e,t))}function j7(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var ow="ScrollArea",[vR]=zr(ow),[C7,cs]=vR(ow),xR=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=t,[l,d]=g.useState(null),[h,m]=g.useState(null),[f,v]=g.useState(null),[y,w]=g.useState(null),[b,k]=g.useState(null),[j,T]=g.useState(0),[E,P]=g.useState(0),[N,_]=g.useState(!1),[I,M]=g.useState(!1),O=ct(e,D=>d(D)),L=th(s);return i.jsx(C7,{scope:n,type:r,dir:L,scrollHideDelay:o,scrollArea:l,viewport:h,onViewportChange:m,content:f,onContentChange:v,scrollbarX:y,onScrollbarXChange:w,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:b,onScrollbarYChange:k,scrollbarYEnabled:I,onScrollbarYEnabledChange:M,onCornerWidthChange:T,onCornerHeightChange:P,children:i.jsx(Je.div,{dir:L,...a,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});xR.displayName=ow;var yR="ScrollAreaViewport",bR=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=t,a=cs(yR,n),l=g.useRef(null),d=ct(e,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});bR.displayName=yR;var vi="ScrollAreaScrollbar",wR=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=cs(vi,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return g.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(T7,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(N7,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(SR,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(aw,{...r,ref:e}):null});wR.displayName=vi;var T7=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=cs(vi,t.__scopeScrollArea),[o,a]=g.useState(!1);return g.useEffect(()=>{const l=s.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),a(!0)},m=()=>{d=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(dr,{present:n||o,children:i.jsx(SR,{"data-state":o?"visible":"hidden",...r,ref:e})})}),N7=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=cs(vi,t.__scopeScrollArea),o=t.orientation==="horizontal",a=_p(()=>d("SCROLL_END"),100),[l,d]=j7("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,s.scrollHideDelay,d]),g.useEffect(()=>{const h=s.viewport,m=o?"scrollLeft":"scrollTop";if(h){let f=h[m];const v=()=>{const y=h[m];f!==y&&(d("SCROLL"),a()),f=y};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,o,d,a]),i.jsx(dr,{present:n||l!=="hidden",children:i.jsx(aw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Re(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Re(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),SR=g.forwardRef((t,e)=>{const n=cs(vi,t.__scopeScrollArea),{forceMount:r,...s}=t,[o,a]=g.useState(!1),l=t.orientation==="horizontal",d=_p(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?h:m)}},10);return Mc(n.viewport,d),Mc(n.content,d),i.jsx(dr,{present:r||o,children:i.jsx(aw,{"data-state":o?"visible":"hidden",...s,ref:e})})}),aw=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=cs(vi,t.__scopeScrollArea),o=g.useRef(null),a=g.useRef(0),[l,d]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=NR(l.viewport,l.content),m={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:v=>o.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function f(v,y){return I7(v,a.current,l,y)}return n==="horizontal"?i.jsx(E7,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollLeft,y=lT(v,l,s.dir);o.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=f(v,s.dir))}}):n==="vertical"?i.jsx(P7,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollTop,y=lT(v,l);o.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=f(v))}}):null}),E7=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=cs(vi,t.__scopeScrollArea),[a,l]=g.useState(),d=g.useRef(null),h=ct(e,d,o.onScrollbarXChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),i.jsx(jR,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pp(n)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(o.viewport){const v=o.viewport.scrollLeft+m.deltaX;t.onWheelScroll(v),PR(v,f)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:_f(a.paddingLeft),paddingEnd:_f(a.paddingRight)}})}})}),P7=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=cs(vi,t.__scopeScrollArea),[a,l]=g.useState(),d=g.useRef(null),h=ct(e,d,o.onScrollbarYChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),i.jsx(jR,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pp(n)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(o.viewport){const v=o.viewport.scrollTop+m.deltaY;t.onWheelScroll(v),PR(v,f)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:_f(a.paddingTop),paddingEnd:_f(a.paddingBottom)}})}})}),[_7,kR]=vR(vi),jR=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:m,onResize:f,...v}=t,y=cs(vi,n),[w,b]=g.useState(null),k=ct(e,O=>b(O)),j=g.useRef(null),T=g.useRef(""),E=y.viewport,P=r.content-r.viewport,N=Mn(m),_=Mn(d),I=_p(f,10);function M(O){if(j.current){const L=O.clientX-j.current.left,D=O.clientY-j.current.top;h({x:L,y:D})}}return g.useEffect(()=>{const O=L=>{const D=L.target;w?.contains(D)&&N(L,P)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[E,w,P,N]),g.useEffect(_,[r,_]),Mc(w,I),Mc(y.content,I),i.jsx(_7,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:Mn(o),onThumbPointerUp:Mn(a),onThumbPositionChange:_,onThumbPointerDown:Mn(l),children:i.jsx(Je.div,{...v,ref:k,style:{position:"absolute",...v.style},onPointerDown:Re(t.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),j.current=w.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),M(O))}),onPointerMove:Re(t.onPointerMove,M),onPointerUp:Re(t.onPointerUp,O=>{const L=O.target;L.hasPointerCapture(O.pointerId)&&L.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=T.current,y.viewport&&(y.viewport.style.scrollBehavior=""),j.current=null})})})}),Pf="ScrollAreaThumb",CR=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=kR(Pf,t.__scopeScrollArea);return i.jsx(dr,{present:n||s.hasThumb,children:i.jsx(R7,{ref:e,...r})})}),R7=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,o=cs(Pf,n),a=kR(Pf,n),{onThumbPositionChange:l}=a,d=ct(e,f=>a.onThumbChange(f)),h=g.useRef(void 0),m=_p(()=>{h.current&&(h.current(),h.current=void 0)},100);return g.useEffect(()=>{const f=o.viewport;if(f){const v=()=>{if(m(),!h.current){const y=O7(f,l);h.current=y,l()}};return l(),f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[o.viewport,m,l]),i.jsx(Je.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Re(t.onPointerDownCapture,f=>{const y=f.target.getBoundingClientRect(),w=f.clientX-y.left,b=f.clientY-y.top;a.onThumbPointerDown({x:w,y:b})}),onPointerUp:Re(t.onPointerUp,a.onThumbPointerUp)})});CR.displayName=Pf;var lw="ScrollAreaCorner",TR=g.forwardRef((t,e)=>{const n=cs(lw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(A7,{...t,ref:e}):null});TR.displayName=lw;var A7=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=cs(lw,n),[o,a]=g.useState(0),[l,d]=g.useState(0),h=!!(o&&l);return Mc(s.scrollbarX,()=>{const m=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(m),d(m)}),Mc(s.scrollbarY,()=>{const m=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(m),a(m)}),h?i.jsx(Je.div,{...r,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function _f(t){return t?parseInt(t,10):0}function NR(t,e){const n=t/e;return isNaN(n)?0:n}function Pp(t){const e=NR(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function I7(t,e,n,r="ltr"){const s=Pp(n),o=s/2,a=e||o,l=s-a,d=n.scrollbar.paddingStart+a,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,m=n.content-n.viewport,f=r==="ltr"?[0,m]:[m*-1,0];return ER([d,h],f)(t)}function lT(t,e,n="ltr"){const r=Pp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,a=e.content-e.viewport,l=o-r,d=n==="ltr"?[0,a]:[a*-1,0],h=Dy(t,d);return ER([0,a],[0,l])(h)}function ER(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function PR(t,e){return t>0&&t<e}var O7=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function s(){const o={left:t.scrollLeft,top:t.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&e(),n=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function _p(t,e){const n=Mn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Mc(t,e){const n=Mn(e);mn(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var M7=xR,D7=bR,L7=TR;function lc({className:t,children:e,...n}){return i.jsxs(M7,{"data-slot":"scroll-area",className:Pe("relative",t),...n,children:[i.jsx(D7,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),i.jsx(U7,{}),i.jsx(L7,{})]})}function U7({className:t,orientation:e="vertical",...n}){return i.jsx(wR,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Pe("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:i.jsx(CR,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const Pm=[{id:"game-victory",title:"Vitória no Jogo",category:"jogo",icon:"🏆",description:"Compartilhe a vitória do seu time",template:`🏐 VITÓRIA! [Seu Time] [Placar] [Time Adversário]

[Descreva o jogo e destaque os pontos altos]

#VolleyPro #Vitoria`,placeholder:`Ex: Minas Tênis 3x1 Dentil/Praia Clube

Que jogo incrível! Virada épica no terceiro set! 🔥`,hashtags:["#VolleyPro","#Vitoria","#Volei"],color:"#22c55e",examples:[`🏐 VITÓRIA! Minas 3x1 Osasco

Que partida! Recuperação incrível no 3º set! Carol liderou com 18 pontos. Próximo jogo já é clássico! 💪🏐

#VolleyPro #Vitoria #Superliga`,`🏆 VENCEMOS! Sesi Bauru 3x0 Goiás

Dominação total! Bloqueio funcionou perfeitamente (12 bloqueios). Wallace imparável com 21 pontos! 🔥

#VolleyPro #Vitoria #Volei`]},{id:"training",title:"Dia de Treino",category:"treino",icon:"💪",description:"Mostre sua dedicação nos treinos",template:`💪 TREINO PESADO HOJE!

[O que treinou]
[Como foi o treino]

Foco em [objetivo]

#VolleyPro #Treino #Foco`,placeholder:`Ex: Treino de ataque e bloqueio por 3 horas!
Foco total na precisão.`,hashtags:["#VolleyPro","#Treino","#Foco","#Dedicacao"],color:"#f59e0b",examples:[`💪 TREINO PESADO HOJE!

3 horas de saque e recepção. Batemos 200 saques cada! 🎯

Foco no jogo de sábado contra o Flamengo. Vamos com tudo! 🔥

#VolleyPro #Treino #Foco`,`🏋️ DIA DE FORÇA!

Academia + quadra = combinação perfeita
Salto vertical aumentando 💪

Preparação física é 50% do jogo!

#VolleyPro #Treino #PreparacaoFisica`]},{id:"motivation",title:"Mensagem Motivacional",category:"motivacao",icon:"🔥",description:"Inspire seus seguidores e equipe",template:`🔥 [Sua mensagem motivacional]

[Reflexão ou objetivo]

#VolleyPro #Motivacao #Volei`,placeholder:`Ex: Cada treino é uma oportunidade de evoluir.
Não desista dos seus sonhos! 💪`,hashtags:["#VolleyPro","#Motivacao","#Foco","#Superacao"],color:"#ef4444",examples:[`🔥 "O impossível é apenas uma opinião."

Cada bola defendida, cada ponto conquistado, cada treino pesado... tudo isso constrói campeões! 💪

Nunca desista! 🏐

#VolleyPro #Motivacao #Superacao`,`⚡ A diferença entre o possível e o impossível está na sua VONTADE!

Hoje acordei às 5h para treinar.
Amanhã faço de novo.
E depois de amanhã também.

É assim que se chega ao topo! 🏆

#VolleyPro #Determinacao #Foco`]},{id:"achievement",title:"Conquista Pessoal",category:"conquista",icon:"🎯",description:"Celebre suas conquistas e marcos",template:`🎯 CONQUISTA DESBLOQUEADA!

[Sua conquista]

[Como chegou até aqui]

Grato(a) a [agradecimentos]

#VolleyPro #Conquista`,placeholder:`Ex: 100 jogos pela Seleção! 🇧🇷
Jornada incrível até aqui!`,hashtags:["#VolleyPro","#Conquista","#Milestone"],color:"#a855f7",examples:[`🎯 CONQUISTA DESBLOQUEADA!

1000 PONTOS NA CARREIRA! 🏐

São anos de dedicação, suor e muita paixão pelo vôlei. Cada ponto tem uma história especial.

Grato à minha família, técnicos e companheiros de equipe! 🙏

#VolleyPro #Milestone #1000Pontos`,`🏆 MEU PRIMEIRO TÍTULO PROFISSIONAL!

Campeão da Copa Brasil! Ainda não acredito! 😭🏐

Todo o sacrifício valeu a pena. Obrigado time, você foi SENSACIONAL! 💪

#VolleyPro #Campeao #CopaBrasil`]},{id:"statistics",title:"Números do Jogo",category:"estatistica",icon:"📊",description:"Compartilhe estatísticas impressionantes",template:`📊 NÚMEROS DO JOGO:

[Estatísticas]

[Análise breve]

#VolleyPro #Stats`,placeholder:`Ex: 25 pontos | 65% de ataque | 8 bloqueios
Melhor partida da temporada!`,hashtags:["#VolleyPro","#Stats","#Numeros"],color:"#3b82f6",examples:[`📊 NÚMEROS DO JOGO:

⚡ 28 pontos
🎯 72% de eficiência no ataque
🛡️ 6 bloqueios
💪 3 aces

Melhor performance individual da temporada! Mas o importante foi a VITÓRIA! 🏆

#VolleyPro #Stats #Performance`,`📊 ESTATÍSTICAS ABSURDAS DO JOGO:

🏐 Time: 15 bloqueios
⚡ 58% de ataque
🎯 95% de recepção

Esse é o vôlei que a gente gosta! Defesa impecável! 🛡️

#VolleyPro #Defesa #Stats`]},{id:"tip",title:"Dica Técnica",category:"dica",icon:"💡",description:"Compartilhe conhecimento técnico",template:`💡 DICA DO DIA:

[Fundamento/Técnica]

[Explicação e dica]

#VolleyPro #Dica #Tecnica`,placeholder:`Ex: Dica para melhorar o saque:
Foco no movimento do braço e timing!`,hashtags:["#VolleyPro","#Dica","#Tecnica","#Fundamentos"],color:"#eab308",examples:[`💡 DICA DO DIA: Saque Viagem

🎯 Segredo: Bater na bola SECA, sem efeito
⚡ A bola flutua e engana o recebedor
💪 Foco no timing do braço

Treinem! Esse saque ganha muitos pontos! 🏐

#VolleyPro #Dica #Saque`,`💡 DICA PARA PONTEIROS:

🏐 Ataque de fundo é sobre TIMING, não força
⏱️ Espere a bola chegar
👀 Leia o bloqueio
⚡ Execute com precisão

Potência vem do movimento completo! 💪

#VolleyPro #Dica #Ataque`]},{id:"behind-scenes",title:"Bastidores",category:"bastidores",icon:"🎬",description:"Mostre os bastidores do vôlei",template:`🎬 BASTIDORES:

[O que está acontecendo]

[Contexto divertido ou interessante]

#VolleyPro #Bastidores`,placeholder:`Ex: Concentração antes do jogo decisivo!
Equipe focada e confiante! 💪`,hashtags:["#VolleyPro","#Bastidores","#Volei"],color:"#ec4899",examples:[`🎬 BASTIDORES: Aquecimento pré-jogo

Aquela energia antes de entrar em quadra! ⚡
Time concentrado, música rolando, clima pesado! 🔥

Daqui a pouco é GUERRA! 🏐💪

#VolleyPro #Bastidores #PreJogo`,`🎬 VIAGEM DE ÔNIBUS

8 horas de estrada = campeonato de truco infinito 😂

Ninguém aguenta mais o Robertão ganhando!

Jogo amanhã, mas hoje a diversão é garantida! 🚌🏐

#VolleyPro #Bastidores #Viagem`]},{id:"call-up",title:"Convocação/Convite",category:"convocacao",icon:"📢",description:"Anuncie convocações ou convites",template:`📢 [Tipo de convocação]!

[Detalhes]

[Sentimento/Objetivo]

#VolleyPro #Convocacao`,placeholder:`Ex: CONVOCADO para a Seleção! 🇧🇷
Sonho realizado! Vamos buscar o ouro!`,hashtags:["#VolleyPro","#Convocacao","#SelecaoBrasileira"],color:"#10b981",examples:[`📢 CONVOCADO PARA A SELEÇÃO BRASILEIRA! 🇧🇷

Não tenho palavras para descrever esse momento! Sonho desde criança! 😭🏐

Vou representar nosso país com muita HONRA e GARRA! Vamos buscar o título! 🏆💪

#VolleyPro #SelecaoBrasileira #Convocacao`,`📢 NOVO DESAFIO!

Assinei com o Minas Tênis Clube! 🏐⭐

Feliz demais por fazer parte desse time gigante! Vamos brigar por todos os títulos! 🏆

Obrigado à diretoria pela confiança! 💛🖤

#VolleyPro #NovoTime #Minas`]}],cT=[{category:"🏐 Sobre Jogos",ideas:["Compartilhe o placar e destaque da partida","Poste uma foto do momento decisivo","Agradeça à torcida pelo apoio","Analise taticamente o jogo","Destaque o MVP da partida","Celebre uma virada épica"]},{category:"💪 Sobre Treinos",ideas:["Mostre sua rotina de treinos","Compartilhe exercícios específicos","Fale sobre preparação física","Destaque evolução técnica","Poste treino com companheiros","Mostre treino de fundamentos"]},{category:"🎯 Conquistas",ideas:["Celebre títulos conquistados","Marcos pessoais (100 jogos, 1000 pontos)","Prêmios individuais","Recordes batidos","Convocações para seleção","Renovação de contrato"]},{category:"🔥 Motivação",ideas:["Frases inspiradoras","História de superação","Objetivo para a temporada","Mensagem para jovens atletas","Reflexão sobre dedicação","Agradecer apoio da família"]},{category:"💡 Educativo",ideas:["Dica técnica de fundamentos","Explicar uma tática","Ensinar uma jogada","Falar sobre posicionamento","Dicas de aquecimento","Importância da alimentação"]},{category:"🎬 Bastidores",ideas:["Concentração pré-jogo","Viagens com o time","Momento engraçado no treino","Rotina no dia do jogo","Vestiário após vitória","Hotel com a equipe"]}],F7={geral:["#VolleyPro","#Volei","#Volleyball","#Brasil"],competicoes:["#Superliga","#LigaDasNacoes","#VNL","#Mundial","#Olimpiadas"],times:["#Minas","#Sesi","#Praia","#Flamengo","#Sesc","#Osasco","#Dentil"],fundamentos:["#Ataque","#Bloqueio","#Saque","#Levantada","#Defesa","#Recepção"],inspiracao:["#Motivacao","#Foco","#Dedicacao","#Superacao","#Determinacao"],treino:["#Treino","#PreparacaoFisica","#Academia","#Fundamentos"]},V7=["📸 Posts com fotos recebem 3x mais engajamento!","🎬 Vídeos de jogadas incríveis viralizam facilmente!","#️⃣ Use 3-5 hashtags relevantes em cada post","⏰ Poste após jogos enquanto está quente!","💬 Responda comentários para aumentar engajamento","🏐 Mencione companheiros de equipe nos posts","🎯 Seja autêntico - mostre sua personalidade!","📊 Compartilhe suas estatísticas impressionantes","🔥 Use emojis para tornar posts mais visuais","💪 Inspire outros atletas com sua jornada!"];function B7(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const $7=t=>{switch(t){case"success":return W7;case"info":return G7;case"warning":return H7;case"error":return K7;default:return null}},z7=Array(12).fill(0),q7=({visible:t,className:e})=>we.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},we.createElement("div",{className:"sonner-spinner"},z7.map((n,r)=>we.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),W7=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),H7=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),G7=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),K7=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),J7=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},we.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),we.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Y7=()=>{const[t,e]=we.useState(document.hidden);return we.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Ly=1;class X7{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,o=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Ly++,a=this.toasts.find(d=>d.id===o),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...e,id:o,title:r}),{...d,...e,id:o,dismissible:l,title:r}):d):this.addToast({title:r,...s,dismissible:l,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,a;const l=s.then(async h=>{if(a=["resolve",h],we.isValidElement(h))o=!1,this.create({id:r,type:"default",message:h});else if(Z7(h)&&!h.ok){o=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,w=typeof f=="object"&&!we.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:v,...w})}else if(h instanceof Error){o=!1;const f=typeof n.error=="function"?await n.error(h):n.error,v=typeof n.description=="function"?await n.description(h):n.description,w=typeof f=="object"&&!we.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:v,...w})}else if(n.success!==void 0){o=!1;const f=typeof n.success=="function"?await n.success(h):n.success,v=typeof n.description=="function"?await n.description(h):n.description,w=typeof f=="object"&&!we.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:v,...w})}}).catch(async h=>{if(a=["reject",h],n.error!==void 0){o=!1;const m=typeof n.error=="function"?await n.error(h):n.error,f=typeof n.description=="function"?await n.description(h):n.description,y=typeof m=="object"&&!we.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:f,...y})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((h,m)=>l.then(()=>a[0]==="reject"?m(a[1]):h(a[1])).catch(m));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,n)=>{const r=n?.id||Ly++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const wr=new X7,Q7=(t,e)=>{const n=e?.id||Ly++;return wr.addToast({title:t,...e,id:n}),n},Z7=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",eq=Q7,tq=()=>wr.toasts,nq=()=>wr.getActiveToasts(),K=Object.assign(eq,{success:wr.success,info:wr.info,warning:wr.warning,error:wr.error,custom:wr.custom,message:wr.message,promise:wr.promise,dismiss:wr.dismiss,loading:wr.loading},{getHistory:tq,getToasts:nq});B7("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _m(t){return t.label!==void 0}const rq=3,sq="24px",iq="16px",dT=4e3,oq=356,aq=14,lq=45,cq=200;function ei(...t){return t.filter(Boolean).join(" ")}function dq(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const uq=t=>{var e,n,r,s,o,a,l,d,h;const{invert:m,toast:f,unstyled:v,interacting:y,setHeights:w,visibleToasts:b,heights:k,index:j,toasts:T,expanded:E,removeToast:P,defaultRichColors:N,closeButton:_,style:I,cancelButtonStyle:M,actionButtonStyle:O,className:L="",descriptionClassName:D="",duration:A,position:Z,gap:se,expandByDefault:fe,classNames:ae,icons:de,closeButtonAriaLabel:U="Close toast"}=t,[G,le]=we.useState(null),[$,ee]=we.useState(null),[he,B]=we.useState(!1),[te,Te]=we.useState(!1),[re,ge]=we.useState(!1),[_e,ve]=we.useState(!1),[Ee,me]=we.useState(!1),[it,yt]=we.useState(0),[vt,an]=we.useState(0),er=we.useRef(f.duration||A||dT),ra=we.useRef(null),Tn=we.useRef(null),wi=j===0,qs=j+1<=b,gn=f.type,qr=f.dismissible!==!1,il=f.className||"",ol=f.descriptionClassName||"",Ws=we.useMemo(()=>k.findIndex(Ye=>Ye.toastId===f.id)||0,[k,f.id]),sa=we.useMemo(()=>{var Ye;return(Ye=f.closeButton)!=null?Ye:_},[f.closeButton,_]),Si=we.useMemo(()=>f.duration||A||dT,[f.duration,A]),no=we.useRef(0),mr=we.useRef(0),Hs=we.useRef(0),Gs=we.useRef(null),[al,ll]=Z.split("-"),cl=we.useMemo(()=>k.reduce((Ye,St,Xt)=>Xt>=Ws?Ye:Ye+St.height,0),[k,Ws]),H=Y7(),Ie=f.invert||m,Fe=gn==="loading";mr.current=we.useMemo(()=>Ws*se+cl,[Ws,cl]),we.useEffect(()=>{er.current=Si},[Si]),we.useEffect(()=>{B(!0)},[]),we.useEffect(()=>{const Ye=Tn.current;if(Ye){const St=Ye.getBoundingClientRect().height;return an(St),w(Xt=>[{toastId:f.id,height:St,position:f.position},...Xt]),()=>w(Xt=>Xt.filter(vn=>vn.toastId!==f.id))}},[w,f.id]),we.useLayoutEffect(()=>{if(!he)return;const Ye=Tn.current,St=Ye.style.height;Ye.style.height="auto";const Xt=Ye.getBoundingClientRect().height;Ye.style.height=St,an(Xt),w(vn=>vn.find(At=>At.toastId===f.id)?vn.map(At=>At.toastId===f.id?{...At,height:Xt}:At):[{toastId:f.id,height:Xt,position:f.position},...vn])},[he,f.title,f.description,w,f.id,f.jsx,f.action,f.cancel]);const Me=we.useCallback(()=>{Te(!0),yt(mr.current),w(Ye=>Ye.filter(St=>St.toastId!==f.id)),setTimeout(()=>{P(f)},cq)},[f,P,w,mr]);we.useEffect(()=>{if(f.promise&&gn==="loading"||f.duration===1/0||f.type==="loading")return;let Ye;return E||y||H?(()=>{if(Hs.current<no.current){const vn=new Date().getTime()-no.current;er.current=er.current-vn}Hs.current=new Date().getTime()})():(()=>{er.current!==1/0&&(no.current=new Date().getTime(),Ye=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Me()},er.current))})(),()=>clearTimeout(Ye)},[E,y,f,gn,H,Me]),we.useEffect(()=>{f.delete&&(Me(),f.onDismiss==null||f.onDismiss.call(f,f))},[Me,f.delete]);function Ke(){var Ye;if(de?.loading){var St;return we.createElement("div",{className:ei(ae?.loader,f==null||(St=f.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":gn==="loading"},de.loading)}return we.createElement(q7,{className:ei(ae?.loader,f==null||(Ye=f.classNames)==null?void 0:Ye.loader),visible:gn==="loading"})}const Dt=f.icon||de?.[gn]||$7(gn);var jt,Ks;return we.createElement("li",{tabIndex:0,ref:Tn,className:ei(L,il,ae?.toast,f==null||(e=f.classNames)==null?void 0:e.toast,ae?.default,ae?.[gn],f==null||(n=f.classNames)==null?void 0:n[gn]),"data-sonner-toast":"","data-rich-colors":(jt=f.richColors)!=null?jt:N,"data-styled":!(f.jsx||f.unstyled||v),"data-mounted":he,"data-promise":!!f.promise,"data-swiped":Ee,"data-removed":te,"data-visible":qs,"data-y-position":al,"data-x-position":ll,"data-index":j,"data-front":wi,"data-swiping":re,"data-dismissible":qr,"data-type":gn,"data-invert":Ie,"data-swipe-out":_e,"data-swipe-direction":$,"data-expanded":!!(E||fe&&he),"data-testid":f.testId,style:{"--index":j,"--toasts-before":j,"--z-index":T.length-j,"--offset":`${te?it:mr.current}px`,"--initial-height":fe?"auto":`${vt}px`,...I,...f.style},onDragEnd:()=>{ge(!1),le(null),Gs.current=null},onPointerDown:Ye=>{Ye.button!==2&&(Fe||!qr||(ra.current=new Date,yt(mr.current),Ye.target.setPointerCapture(Ye.pointerId),Ye.target.tagName!=="BUTTON"&&(ge(!0),Gs.current={x:Ye.clientX,y:Ye.clientY})))},onPointerUp:()=>{var Ye,St,Xt;if(_e||!qr)return;Gs.current=null;const vn=Number(((Ye=Tn.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ds=Number(((St=Tn.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),At=new Date().getTime()-((Xt=ra.current)==null?void 0:Xt.getTime()),Nn=G==="x"?vn:ds,ro=Math.abs(Nn)/At;if(Math.abs(Nn)>=lq||ro>.11){yt(mr.current),f.onDismiss==null||f.onDismiss.call(f,f),ee(G==="x"?vn>0?"right":"left":ds>0?"down":"up"),Me(),ve(!0);return}else{var Un,Ar;(Un=Tn.current)==null||Un.style.setProperty("--swipe-amount-x","0px"),(Ar=Tn.current)==null||Ar.style.setProperty("--swipe-amount-y","0px")}me(!1),ge(!1),le(null)},onPointerMove:Ye=>{var St,Xt,vn;if(!Gs.current||!qr||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;const At=Ye.clientY-Gs.current.y,Nn=Ye.clientX-Gs.current.x;var ro;const Un=(ro=t.swipeDirections)!=null?ro:dq(Z);!G&&(Math.abs(Nn)>1||Math.abs(At)>1)&&le(Math.abs(Nn)>Math.abs(At)?"x":"y");let Ar={x:0,y:0};const so=Wr=>1/(1.5+Math.abs(Wr)/20);if(G==="y"){if(Un.includes("top")||Un.includes("bottom"))if(Un.includes("top")&&At<0||Un.includes("bottom")&&At>0)Ar.y=At;else{const Wr=At*so(At);Ar.y=Math.abs(Wr)<Math.abs(At)?Wr:At}}else if(G==="x"&&(Un.includes("left")||Un.includes("right")))if(Un.includes("left")&&Nn<0||Un.includes("right")&&Nn>0)Ar.x=Nn;else{const Wr=Nn*so(Nn);Ar.x=Math.abs(Wr)<Math.abs(Nn)?Wr:Nn}(Math.abs(Ar.x)>0||Math.abs(Ar.y)>0)&&me(!0),(Xt=Tn.current)==null||Xt.style.setProperty("--swipe-amount-x",`${Ar.x}px`),(vn=Tn.current)==null||vn.style.setProperty("--swipe-amount-y",`${Ar.y}px`)}},sa&&!f.jsx&&gn!=="loading"?we.createElement("button",{"aria-label":U,"data-disabled":Fe,"data-close-button":!0,onClick:Fe||!qr?()=>{}:()=>{Me(),f.onDismiss==null||f.onDismiss.call(f,f)},className:ei(ae?.closeButton,f==null||(r=f.classNames)==null?void 0:r.closeButton)},(Ks=de?.close)!=null?Ks:J7):null,(gn||f.icon||f.promise)&&f.icon!==null&&(de?.[gn]!==null||f.icon)?we.createElement("div",{"data-icon":"",className:ei(ae?.icon,f==null||(s=f.classNames)==null?void 0:s.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ke():null,f.type!=="loading"?Dt:null):null,we.createElement("div",{"data-content":"",className:ei(ae?.content,f==null||(o=f.classNames)==null?void 0:o.content)},we.createElement("div",{"data-title":"",className:ei(ae?.title,f==null||(a=f.classNames)==null?void 0:a.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?we.createElement("div",{"data-description":"",className:ei(D,ol,ae?.description,f==null||(l=f.classNames)==null?void 0:l.description)},typeof f.description=="function"?f.description():f.description):null),we.isValidElement(f.cancel)?f.cancel:f.cancel&&_m(f.cancel)?we.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||M,onClick:Ye=>{_m(f.cancel)&&qr&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,Ye),Me())},className:ei(ae?.cancelButton,f==null||(d=f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,we.isValidElement(f.action)?f.action:f.action&&_m(f.action)?we.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||O,onClick:Ye=>{_m(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,Ye),!Ye.defaultPrevented&&Me())},className:ei(ae?.actionButton,f==null||(h=f.classNames)==null?void 0:h.actionButton)},f.action.label):null)};function uT(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function hq(t,e){const n={};return[t,e].forEach((r,s)=>{const o=s===1,a=o?"--mobile-offset":"--offset",l=o?iq:sq;function d(h){["top","right","bottom","left"].forEach(m=>{n[`${a}-${m}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${a}-${h}`]=l:n[`${a}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(l)}),n}const mq=we.forwardRef(function(e,n){const{id:r,invert:s,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:d,className:h,offset:m,mobileOffset:f,theme:v="light",richColors:y,duration:w,style:b,visibleToasts:k=rq,toastOptions:j,dir:T=uT(),gap:E=aq,icons:P,containerAriaLabel:N="Notifications"}=e,[_,I]=we.useState([]),M=we.useMemo(()=>r?_.filter(he=>he.toasterId===r):_.filter(he=>!he.toasterId),[_,r]),O=we.useMemo(()=>Array.from(new Set([o].concat(M.filter(he=>he.position).map(he=>he.position)))),[M,o]),[L,D]=we.useState([]),[A,Z]=we.useState(!1),[se,fe]=we.useState(!1),[ae,de]=we.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=we.useRef(null),G=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),le=we.useRef(null),$=we.useRef(!1),ee=we.useCallback(he=>{I(B=>{var te;return(te=B.find(Te=>Te.id===he.id))!=null&&te.delete||wr.dismiss(he.id),B.filter(({id:Te})=>Te!==he.id)})},[]);return we.useEffect(()=>wr.subscribe(he=>{if(he.dismiss){requestAnimationFrame(()=>{I(B=>B.map(te=>te.id===he.id?{...te,delete:!0}:te))});return}setTimeout(()=>{eP.flushSync(()=>{I(B=>{const te=B.findIndex(Te=>Te.id===he.id);return te!==-1?[...B.slice(0,te),{...B[te],...he},...B.slice(te+1)]:[he,...B]})})})}),[_]),we.useEffect(()=>{if(v!=="system"){de(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?de("dark"):de("light")),typeof window>"u")return;const he=window.matchMedia("(prefers-color-scheme: dark)");try{he.addEventListener("change",({matches:B})=>{de(B?"dark":"light")})}catch{he.addListener(({matches:te})=>{try{de(te?"dark":"light")}catch(Te){console.error(Te)}})}},[v]),we.useEffect(()=>{_.length<=1&&Z(!1)},[_]),we.useEffect(()=>{const he=B=>{var te;if(a.every(ge=>B[ge]||B.code===ge)){var re;Z(!0),(re=U.current)==null||re.focus()}B.code==="Escape"&&(document.activeElement===U.current||(te=U.current)!=null&&te.contains(document.activeElement))&&Z(!1)};return document.addEventListener("keydown",he),()=>document.removeEventListener("keydown",he)},[a]),we.useEffect(()=>{if(U.current)return()=>{le.current&&(le.current.focus({preventScroll:!0}),le.current=null,$.current=!1)}},[U.current]),we.createElement("section",{ref:n,"aria-label":`${N} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((he,B)=>{var te;const[Te,re]=he.split("-");return M.length?we.createElement("ol",{key:he,dir:T==="auto"?uT():T,tabIndex:-1,ref:U,className:h,"data-sonner-toaster":!0,"data-sonner-theme":ae,"data-y-position":Te,"data-x-position":re,style:{"--front-toast-height":`${((te=L[0])==null?void 0:te.height)||0}px`,"--width":`${oq}px`,"--gap":`${E}px`,...b,...hq(m,f)},onBlur:ge=>{$.current&&!ge.currentTarget.contains(ge.relatedTarget)&&($.current=!1,le.current&&(le.current.focus({preventScroll:!0}),le.current=null))},onFocus:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||$.current||($.current=!0,le.current=ge.relatedTarget)},onMouseEnter:()=>Z(!0),onMouseMove:()=>Z(!0),onMouseLeave:()=>{se||Z(!1)},onDragEnd:()=>Z(!1),onPointerDown:ge=>{ge.target instanceof HTMLElement&&ge.target.dataset.dismissible==="false"||fe(!0)},onPointerUp:()=>fe(!1)},M.filter(ge=>!ge.position&&B===0||ge.position===he).map((ge,_e)=>{var ve,Ee;return we.createElement(uq,{key:ge.id,icons:P,index:_e,toast:ge,defaultRichColors:y,duration:(ve=j?.duration)!=null?ve:w,className:j?.className,descriptionClassName:j?.descriptionClassName,invert:s,visibleToasts:k,closeButton:(Ee=j?.closeButton)!=null?Ee:d,interacting:se,position:he,style:j?.style,unstyled:j?.unstyled,classNames:j?.classNames,cancelButtonStyle:j?.cancelButtonStyle,actionButtonStyle:j?.actionButtonStyle,closeButtonAriaLabel:j?.closeButtonAriaLabel,removeToast:ee,toasts:M.filter(me=>me.position==ge.position),heights:L.filter(me=>me.position==ge.position),setHeights:D,expandByDefault:l,gap:E,expanded:A,swipeDirections:e.swipeDirections})})):null}))});function fq({open:t,onClose:e,onUseTemplate:n}){const[r,s]=g.useState("all"),[o,a]=g.useState(null),[l,d]=g.useState(null),h=r==="all"?Pm:Pm.filter(y=>y.category===r),m=async(y,w)=>{try{await navigator.clipboard.writeText(y),a(w),K.success("Template copiado! 📋",{description:"Cole no campo de criação de post"}),setTimeout(()=>a(null),2e3)}catch{K.error("Erro ao copiar template")}},f=y=>{n(y),e(),K.success("Template aplicado! ✨",{description:"Personalize e publique seu conteúdo"})},v={jogo:"bg-green-500",treino:"bg-orange-500",motivacao:"bg-red-500",conquista:"bg-purple-500",estatistica:"bg-blue-500",dica:"bg-yellow-500",bastidores:"bg-pink-500",convocacao:"bg-emerald-500"};return i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"max-w-5xl max-h-[90vh] p-0",children:[i.jsx(fn,{className:"px-6 pt-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:i.jsx(Rs,{className:"h-5 w-5 text-white"})}),i.jsxs("div",{children:[i.jsx(on,{className:"text-2xl",children:"Ferramentas de Inspiração"}),i.jsx(Ln,{children:"Templates, ideias e dicas para criar conteúdo incrível! 🏐✨"})]})]})}),i.jsxs(Ji,{defaultValue:"templates",className:"w-full",children:[i.jsx("div",{className:"px-6 border-b",children:i.jsxs(Yi,{className:"w-full grid grid-cols-4 bg-muted/50",children:[i.jsxs(mt,{value:"templates",className:"gap-2",children:[i.jsx(R4,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Templates"})]}),i.jsxs(mt,{value:"ideas",className:"gap-2",children:[i.jsx(qv,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Ideias"})]}),i.jsxs(mt,{value:"hashtags",className:"gap-2",children:[i.jsx(h1,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Hashtags"})]}),i.jsxs(mt,{value:"tips",className:"gap-2",children:[i.jsx(_c,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Dicas"})]})]})}),i.jsxs(ft,{value:"templates",className:"m-0 p-0",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Categorias:"}),i.jsx(q,{size:"sm",variant:r==="all"?"default":"outline",onClick:()=>s("all"),className:"h-7",children:"Todas"}),Array.from(new Set(Pm.map(y=>y.category))).map(y=>i.jsxs(q,{size:"sm",variant:r===y?"default":"outline",onClick:()=>s(y),className:"h-7 capitalize",children:[Pm.find(w=>w.category===y)?.icon," ",y]},y))]})}),i.jsx(lc,{className:"h-[500px] px-6",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:h.map(y=>{const w={jogo:"gradient-green",treino:"gradient-orange",motivacao:"gradient-pink",conquista:"gradient-purple",estatistica:"gradient-blue",dica:"gradient-yellow",bastidores:"gradient-cyan",convocacao:"gradient-green"};return i.jsxs(ie,{className:`hover:shadow-xl transition-all cursor-pointer border-2 ${w[y.category]||""}`,style:{borderColor:y.color+"40"},onClick:()=>d(y),children:[i.jsx(et,{className:"pb-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-2xl shadow-md",style:{backgroundColor:y.color+"20",border:`2px solid ${y.color}40`},children:y.icon}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold",children:y.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:y.description})]})]}),i.jsx(Se,{className:`${v[y.category]} text-white text-xs shadow-sm`,children:y.category})]})}),i.jsxs(ce,{className:"space-y-3",children:[i.jsxs("div",{className:"rounded-lg p-3 text-sm font-mono border-2",style:{backgroundColor:y.color+"10",borderColor:y.color+"20"},children:[y.template.substring(0,80),"..."]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(q,{size:"sm",variant:"outline",onClick:b=>{b.stopPropagation(),m(y.template,y.id)},className:"flex-1 gap-2",children:o===y.id?i.jsxs(i.Fragment,{children:[i.jsx(ns,{className:"h-3 w-3"}),"Copiado!"]}):i.jsxs(i.Fragment,{children:[i.jsx(tc,{className:"h-3 w-3"}),"Copiar"]})}),i.jsxs(q,{size:"sm",onClick:b=>{b.stopPropagation(),f(y.template)},className:"flex-1 gap-2 bg-gradient-to-r from-primary to-secondary",children:[i.jsx(fu,{className:"h-3 w-3"}),"Usar"]})]})]})]},y.id)})})})]}),i.jsx(ft,{value:"ideas",className:"m-0 p-0",children:i.jsx(lc,{className:"h-[600px] px-6 py-4",children:i.jsx("div",{className:"space-y-6",children:cT.map((y,w)=>i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg mb-3 flex items-center gap-2",children:[i.jsx(qv,{className:"h-5 w-5 text-primary"}),y.category]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:y.ideas.map((b,k)=>{const j=[{bg:"gradient-blue",dot:"#0066ff"},{bg:"gradient-orange",dot:"#ff6b35"},{bg:"gradient-green",dot:"#10b981"},{bg:"gradient-purple",dot:"#8b5cf6"},{bg:"gradient-yellow",dot:"#f59e0b"},{bg:"gradient-pink",dot:"#ec4899"}],T=(w+k)%j.length,E=j[T];return i.jsx(ie,{className:`hover:shadow-lg transition-all cursor-pointer border-2 ${E.bg}`,onClick:()=>{navigator.clipboard.writeText(b),K.success("Ideia copiada! 💡")},children:i.jsxs(ce,{className:"p-4 flex items-start gap-3",children:[i.jsx("div",{className:"w-2 h-2 rounded-full mt-2",style:{backgroundColor:E.dot}}),i.jsx("p",{className:"text-sm flex-1",children:b}),i.jsx(tc,{className:"h-3 w-3 text-muted-foreground shrink-0 mt-1"})]})},k)})}),w<cT.length-1&&i.jsx(Jn,{className:"my-6"})]},w))})})}),i.jsx(ft,{value:"hashtags",className:"m-0 p-0",children:i.jsx(lc,{className:"h-[600px] px-6 py-4",children:i.jsxs("div",{className:"space-y-6",children:[Object.entries(F7).map(([y,w])=>i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg capitalize mb-3 flex items-center gap-2",children:[i.jsx(h1,{className:"h-5 w-5 text-primary"}),y]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:w.map((b,k)=>{const j=["hover:bg-volleyball-blue hover:border-volleyball-blue","hover:bg-volleyball-orange hover:border-volleyball-orange","hover:bg-volleyball-green hover:border-volleyball-green","hover:bg-volleyball-purple hover:border-volleyball-purple","hover:bg-volleyball-yellow hover:border-volleyball-yellow","hover:bg-volleyball-pink hover:border-volleyball-pink"],T=j[k%j.length];return i.jsxs(Se,{variant:"outline",className:`cursor-pointer hover:text-white transition-all text-sm px-3 py-1 border-2 ${T}`,onClick:()=>{navigator.clipboard.writeText(b),K.success(`${b} copiado! 📋`)},children:[b,i.jsx(tc,{className:"h-3 w-3 ml-2"})]},b)})}),i.jsx(Jn,{className:"my-6"})]},y)),i.jsx(ie,{className:"bg-gradient-to-br from-primary/10 to-secondary/10 border-primary/20",children:i.jsxs(ce,{className:"p-6",children:[i.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[i.jsx(qv,{className:"h-4 w-4 text-primary"}),"Dica de Hashtags"]}),i.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsx("li",{children:"• Use 3-5 hashtags por post"}),i.jsx("li",{children:"• Misture hashtags populares e específicas"}),i.jsx("li",{children:"• Sempre use #VolleyPro para aparecer na rede"}),i.jsx("li",{children:"• Adicione hashtag do seu time/competição"}),i.jsx("li",{children:"• Crie sua hashtag pessoal (ex: #EquipeNome)"})]})]})})]})})}),i.jsx(ft,{value:"tips",className:"m-0 p-0",children:i.jsxs(lc,{className:"h-[600px] px-6 py-4",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:V7.map((y,w)=>i.jsx(ie,{className:"hover:shadow-lg transition-all border-l-4 border-l-primary/50 hover:border-l-primary",children:i.jsxs(ce,{className:"p-4 flex items-start gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:i.jsx(_c,{className:"h-4 w-4 text-primary"})}),i.jsx("p",{className:"text-sm flex-1",children:y})]})},w))}),i.jsx(Jn,{className:"my-6"}),i.jsx(ie,{className:"bg-gradient-to-br from-primary via-[#0052cc] to-secondary text-white",children:i.jsxs(ce,{className:"p-6",children:[i.jsxs("h3",{className:"text-xl mb-4 flex items-center gap-2",children:[i.jsx(Rs,{className:"h-5 w-5"}),"Fórmula do Post Perfeito"]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold w-6",children:"1."}),i.jsxs("span",{className:"flex-1",children:[i.jsx("strong",{children:"Gancho:"})," Comece com emoji ou frase impactante"]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold w-6",children:"2."}),i.jsxs("span",{className:"flex-1",children:[i.jsx("strong",{children:"Contexto:"})," Explique o que aconteceu"]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold w-6",children:"3."}),i.jsxs("span",{className:"flex-1",children:[i.jsx("strong",{children:"Emoção:"})," Compartilhe o que você sentiu"]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold w-6",children:"4."}),i.jsxs("span",{className:"flex-1",children:[i.jsx("strong",{children:"Call to Action:"})," Pergunte algo ou motive"]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold w-6",children:"5."}),i.jsxs("span",{className:"flex-1",children:[i.jsx("strong",{children:"Hashtags:"})," 3-5 hashtags relevantes"]})]})]})]})})]})})]}),l&&i.jsx(sn,{open:!!l,onOpenChange:()=>d(null),children:i.jsxs(Yt,{className:"max-w-2xl",children:[i.jsxs(fn,{children:[i.jsxs(on,{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:l.icon}),l.title]}),i.jsx(Ln,{children:l.description})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold mb-2",children:"📝 Template:"}),i.jsx("div",{className:"bg-muted rounded-lg p-4 font-mono text-sm whitespace-pre-wrap",children:l.template})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold mb-2",children:"💡 Placeholder de Exemplo:"}),i.jsx("div",{className:"bg-muted/50 rounded-lg p-4 text-sm text-muted-foreground italic",children:l.placeholder})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold mb-2",children:"✨ Exemplos Reais:"}),i.jsx("div",{className:"space-y-3",children:l.examples.map((y,w)=>i.jsx(ie,{className:"bg-card/50",children:i.jsx(ce,{className:"p-4 text-sm whitespace-pre-wrap",children:y})},w))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold mb-2",children:"#️⃣ Hashtags Sugeridas:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:l.hashtags.map(y=>i.jsx(Se,{variant:"secondary",children:y},y))})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsxs(q,{variant:"outline",className:"flex-1 gap-2",onClick:()=>{m(l.template,l.id),d(null)},children:[i.jsx(tc,{className:"h-4 w-4"}),"Copiar Template"]}),i.jsxs(q,{className:"flex-1 gap-2 bg-gradient-to-r from-primary to-secondary",onClick:()=>{f(l.template),d(null)},children:[i.jsx(fu,{className:"h-4 w-4"}),"Usar Agora"]})]})]})]})})]})})}function pq({onUpgrade:t,dismissible:e=!0}){const[n,r]=g.useState(()=>localStorage.getItem("upgrade_banner_dismissed")==="true"),s=()=>{r(!0),localStorage.setItem("upgrade_banner_dismissed","true"),setTimeout(()=>{localStorage.removeItem("upgrade_banner_dismissed")},10080*60*1e3)};return n?null:i.jsxs("div",{className:"relative overflow-hidden rounded-xl border-2 border-primary/30 shadow-lg mb-6",children:[i.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:"linear-gradient(90deg, #0066ff 0%, #8b5cf6 50%, #f59e0b 100%)",backgroundSize:"200% 100%",animation:"gradient-shift 8s ease infinite"}}),i.jsxs("div",{className:"relative p-6",children:[e&&i.jsx(q,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-8 w-8",onClick:s,children:i.jsx(cr,{className:"h-4 w-4"})}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-6 pr-8",children:[i.jsx("div",{className:"shrink-0",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),i.jsx("div",{className:"relative p-4 rounded-2xl bg-gradient-to-br from-primary to-purple-600 shadow-lg",children:i.jsx(Rs,{className:"h-8 w-8 text-white"})})]})}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Desbloqueie Todo o Potencial do VolleyPro! 🚀"}),i.jsxs("p",{className:"text-muted-foreground",children:["Faça upgrade para ",i.jsx("strong",{children:"Premium"})," e comece a monetizar seu conteúdo. Ganhe até ",i.jsx("strong",{className:"text-primary",children:"70-80%"})," de comissão em lives, patrocínios e muito mais!"]}),i.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-green-100",children:i.jsx(FE,{className:"h-4 w-4 text-green-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"R$ 2K-10K/mês"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Potencial de ganhos"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-blue-100",children:i.jsx(_c,{className:"h-4 w-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"70-80%"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Comissão"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-purple-100",children:i.jsx(Rs,{className:"h-4 w-4 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"6 formas"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"De monetizar"})]})]})]})]}),i.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[i.jsxs(q,{size:"lg",onClick:t,className:"gap-2 bg-gradient-to-r from-primary to-purple-600 hover:shadow-lg transition-all",children:[i.jsx(Rs,{className:"h-4 w-4"}),"Ver Planos"]}),i.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"A partir de R$ 19,90/mês"})]})]})]}),i.jsx("div",{className:"h-1 bg-gradient-to-r from-primary via-purple-600 to-amber-500",style:{backgroundSize:"200% 100%",animation:"gradient-shift 3s ease infinite"}})]})}const _R=document.createElement("style");_R.textContent=`
  @keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
`;document.head.appendChild(_R);const Dl={free:{plan:"free",canMonetize:!1,canGoLive:!1,maxPosts:10,maxVideos:1,hasAnalytics:!1,hasVerification:!1,storage:"500MB",commission:0},pro:{plan:"pro",canMonetize:!1,canGoLive:!0,maxPosts:"unlimited",maxVideos:10,hasAnalytics:!0,hasVerification:!1,storage:"5GB",commission:0},premium:{plan:"premium",canMonetize:!0,canGoLive:!0,maxPosts:"unlimited",maxVideos:"unlimited",hasAnalytics:!0,hasVerification:!0,storage:"20GB",commission:70},elite:{plan:"elite",canMonetize:!0,canGoLive:!0,maxPosts:"unlimited",maxVideos:"unlimited",hasAnalytics:!0,hasVerification:!0,storage:"unlimited",commission:80}};function gq(){const[t,e]=g.useState(!0),[n,r]=g.useState(Dl.free);return g.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("volleypro_user_plan");d&&Dl[d]?r(Dl[d]):r(Dl.free)}catch(d){console.error("Erro ao carregar plano:",d),r(Dl.free)}finally{e(!1)}})()},[]),{...n,isLoading:t,upgradePlan:l=>{localStorage.setItem("volleypro_user_plan",l),r(Dl[l])},hasFeature:l=>!!n[l],canUseFeature:l=>{const d=["free","pro","premium","elite"],h=d.indexOf(n.plan),m=d.indexOf(l);return h>=m},isPro:n.plan!=="free",isPremium:n.plan==="premium"||n.plan==="elite",isElite:n.plan==="elite"}}var Uy=["Enter"," "],vq=["ArrowDown","PageUp","Home"],RR=["ArrowUp","PageDown","End"],xq=[...vq,...RR],yq={ltr:[...Uy,"ArrowRight"],rtl:[...Uy,"ArrowLeft"]},bq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rh="Menu",[ju,wq,Sq]=sw(rh),[tl,AR]=zr(rh,[Sq,Hc,Np]),Rp=Hc(),IR=Np(),[kq,nl]=tl(rh),[jq,sh]=tl(rh),OR=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=t,l=Rp(e),[d,h]=g.useState(null),m=g.useRef(!1),f=Mn(o),v=th(s);return g.useEffect(()=>{const y=()=>{m.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>m.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),i.jsx(gb,{...l,children:i.jsx(kq,{scope:e,open:n,onOpenChange:f,content:d,onContentChange:h,children:i.jsx(jq,{scope:e,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:m,dir:v,modal:a,children:r})})})};OR.displayName=rh;var Cq="MenuAnchor",cw=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Rp(n);return i.jsx(vb,{...s,...r,ref:e})});cw.displayName=Cq;var dw="MenuPortal",[Tq,MR]=tl(dw,{forceMount:void 0}),DR=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=nl(dw,e);return i.jsx(Tq,{scope:e,forceMount:n,children:i.jsx(dr,{present:n||o.open,children:i.jsx(Ku,{asChild:!0,container:s,children:r})})})};DR.displayName=dw;var ls="MenuContent",[Nq,uw]=tl(ls),LR=g.forwardRef((t,e)=>{const n=MR(ls,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=nl(ls,t.__scopeMenu),a=sh(ls,t.__scopeMenu);return i.jsx(ju.Provider,{scope:t.__scopeMenu,children:i.jsx(dr,{present:r||o.open,children:i.jsx(ju.Slot,{scope:t.__scopeMenu,children:a.modal?i.jsx(Eq,{...s,ref:e}):i.jsx(Pq,{...s,ref:e})})})})}),Eq=g.forwardRef((t,e)=>{const n=nl(ls,t.__scopeMenu),r=g.useRef(null),s=ct(e,r);return g.useEffect(()=>{const o=r.current;if(o)return Q0(o)},[]),i.jsx(hw,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Re(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Pq=g.forwardRef((t,e)=>{const n=nl(ls,t.__scopeMenu);return i.jsx(hw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),_q=Ua("MenuContent.ScrollLock"),hw=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:v,onDismiss:y,disableOutsideScroll:w,...b}=t,k=nl(ls,n),j=sh(ls,n),T=Rp(n),E=IR(n),P=wq(n),[N,_]=g.useState(null),I=g.useRef(null),M=ct(e,I,k.onContentChange),O=g.useRef(0),L=g.useRef(""),D=g.useRef(0),A=g.useRef(null),Z=g.useRef("right"),se=g.useRef(0),fe=w?mp:g.Fragment,ae=w?{as:_q,allowPinchZoom:!0}:void 0,de=G=>{const le=L.current+G,$=P().filter(re=>!re.disabled),ee=document.activeElement,he=$.find(re=>re.ref.current===ee)?.textValue,B=$.map(re=>re.textValue),te=$q(B,le,he),Te=$.find(re=>re.textValue===te)?.ref.current;(function re(ge){L.current=ge,window.clearTimeout(O.current),ge!==""&&(O.current=window.setTimeout(()=>re(""),1e3))})(le),Te&&setTimeout(()=>Te.focus())};g.useEffect(()=>()=>window.clearTimeout(O.current),[]),X0();const U=g.useCallback(G=>Z.current===A.current?.side&&qq(G,A.current?.area),[]);return i.jsx(Nq,{scope:n,searchRef:L,onItemEnter:g.useCallback(G=>{U(G)&&G.preventDefault()},[U]),onItemLeave:g.useCallback(G=>{U(G)||(I.current?.focus(),_(null))},[U]),onTriggerLeave:g.useCallback(G=>{U(G)&&G.preventDefault()},[U]),pointerGraceTimerRef:D,onPointerGraceIntentChange:g.useCallback(G=>{A.current=G},[]),children:i.jsx(fe,{...ae,children:i.jsx(up,{asChild:!0,trapped:s,onMountAutoFocus:Re(o,G=>{G.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Gu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:v,onDismiss:y,children:i.jsx(iR,{asChild:!0,...E,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:Re(d,G=>{j.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(xb,{role:"menu","aria-orientation":"vertical","data-state":ZR(k.open),"data-radix-menu-content":"",dir:j.dir,...T,...b,ref:M,style:{outline:"none",...b.style},onKeyDown:Re(b.onKeyDown,G=>{const $=G.target.closest("[data-radix-menu-content]")===G.currentTarget,ee=G.ctrlKey||G.altKey||G.metaKey,he=G.key.length===1;$&&(G.key==="Tab"&&G.preventDefault(),!ee&&he&&de(G.key));const B=I.current;if(G.target!==B||!xq.includes(G.key))return;G.preventDefault();const Te=P().filter(re=>!re.disabled).map(re=>re.ref.current);RR.includes(G.key)&&Te.reverse(),Vq(Te)}),onBlur:Re(t.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(O.current),L.current="")}),onPointerMove:Re(t.onPointerMove,Cu(G=>{const le=G.target,$=se.current!==G.clientX;if(G.currentTarget.contains(le)&&$){const ee=G.clientX>se.current?"right":"left";Z.current=ee,se.current=G.clientX}}))})})})})})})});LR.displayName=ls;var Rq="MenuGroup",mw=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{role:"group",...r,ref:e})});mw.displayName=Rq;var Aq="MenuLabel",UR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{...r,ref:e})});UR.displayName=Aq;var Rf="MenuItem",hT="menu.itemSelect",Ap=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=g.useRef(null),a=sh(Rf,t.__scopeMenu),l=uw(Rf,t.__scopeMenu),d=ct(e,o),h=g.useRef(!1),m=()=>{const f=o.current;if(!n&&f){const v=new CustomEvent(hT,{bubbles:!0,cancelable:!0});f.addEventListener(hT,y=>r?.(y),{once:!0}),tP(f,v),v.defaultPrevented?h.current=!1:a.onClose()}};return i.jsx(FR,{...s,ref:d,disabled:n,onClick:Re(t.onClick,m),onPointerDown:f=>{t.onPointerDown?.(f),h.current=!0},onPointerUp:Re(t.onPointerUp,f=>{h.current||f.currentTarget?.click()}),onKeyDown:Re(t.onKeyDown,f=>{const v=l.searchRef.current!=="";n||v&&f.key===" "||Uy.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Ap.displayName=Rf;var FR=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,a=uw(Rf,n),l=IR(n),d=g.useRef(null),h=ct(e,d),[m,f]=g.useState(!1),[v,y]=g.useState("");return g.useEffect(()=>{const w=d.current;w&&y((w.textContent??"").trim())},[o.children]),i.jsx(ju.ItemSlot,{scope:n,disabled:r,textValue:s??v,children:i.jsx(oR,{asChild:!0,...l,focusable:!r,children:i.jsx(Je.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:h,onPointerMove:Re(t.onPointerMove,Cu(w=>{r?a.onItemLeave(w):(a.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Re(t.onPointerLeave,Cu(w=>a.onItemLeave(w))),onFocus:Re(t.onFocus,()=>f(!0)),onBlur:Re(t.onBlur,()=>f(!1))})})})}),Iq="MenuCheckboxItem",VR=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(WR,{scope:t.__scopeMenu,checked:n,children:i.jsx(Ap,{role:"menuitemcheckbox","aria-checked":Af(n)?"mixed":n,...s,ref:e,"data-state":pw(n),onSelect:Re(s.onSelect,()=>r?.(Af(n)?!0:!n),{checkForDefaultPrevented:!1})})})});VR.displayName=Iq;var BR="MenuRadioGroup",[Oq,Mq]=tl(BR,{value:void 0,onValueChange:()=>{}}),$R=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=Mn(r);return i.jsx(Oq,{scope:t.__scopeMenu,value:n,onValueChange:o,children:i.jsx(mw,{...s,ref:e})})});$R.displayName=BR;var zR="MenuRadioItem",qR=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=Mq(zR,t.__scopeMenu),o=n===s.value;return i.jsx(WR,{scope:t.__scopeMenu,checked:o,children:i.jsx(Ap,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":pw(o),onSelect:Re(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});qR.displayName=zR;var fw="MenuItemIndicator",[WR,Dq]=tl(fw,{checked:!1}),HR=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=Dq(fw,n);return i.jsx(dr,{present:r||Af(o.checked)||o.checked===!0,children:i.jsx(Je.span,{...s,ref:e,"data-state":pw(o.checked)})})});HR.displayName=fw;var Lq="MenuSeparator",GR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});GR.displayName=Lq;var Uq="MenuArrow",KR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Rp(n);return i.jsx(yb,{...s,...r,ref:e})});KR.displayName=Uq;var Fq="MenuSub",[Cie,JR]=tl(Fq),Gd="MenuSubTrigger",YR=g.forwardRef((t,e)=>{const n=nl(Gd,t.__scopeMenu),r=sh(Gd,t.__scopeMenu),s=JR(Gd,t.__scopeMenu),o=uw(Gd,t.__scopeMenu),a=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=o,h={__scopeMenu:t.__scopeMenu},m=g.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return g.useEffect(()=>m,[m]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),d(null)}},[l,d]),i.jsx(cw,{asChild:!0,...h,children:i.jsx(FR,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":ZR(n.open),...t,ref:op(e,s.onTriggerChange),onClick:f=>{t.onClick?.(f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Re(t.onPointerMove,Cu(f=>{o.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Re(t.onPointerLeave,Cu(f=>{m();const v=n.content?.getBoundingClientRect();if(v){const y=n.content?.dataset.side,w=y==="right",b=w?-5:5,k=v[w?"left":"right"],j=v[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:k,y:v.top},{x:j,y:v.top},{x:j,y:v.bottom},{x:k,y:v.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Re(t.onKeyDown,f=>{const v=o.searchRef.current!=="";t.disabled||v&&f.key===" "||yq[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});YR.displayName=Gd;var XR="MenuSubContent",QR=g.forwardRef((t,e)=>{const n=MR(ls,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=nl(ls,t.__scopeMenu),a=sh(ls,t.__scopeMenu),l=JR(XR,t.__scopeMenu),d=g.useRef(null),h=ct(e,d);return i.jsx(ju.Provider,{scope:t.__scopeMenu,children:i.jsx(dr,{present:r||o.open,children:i.jsx(ju.Slot,{scope:t.__scopeMenu,children:i.jsx(hw,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:h,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{a.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Re(t.onFocusOutside,m=>{m.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Re(t.onEscapeKeyDown,m=>{a.onClose(),m.preventDefault()}),onKeyDown:Re(t.onKeyDown,m=>{const f=m.currentTarget.contains(m.target),v=bq[a.dir].includes(m.key);f&&v&&(o.onOpenChange(!1),l.trigger?.focus(),m.preventDefault())})})})})})});QR.displayName=XR;function ZR(t){return t?"open":"closed"}function Af(t){return t==="indeterminate"}function pw(t){return Af(t)?"indeterminate":t?"checked":"unchecked"}function Vq(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Bq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function $q(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=Bq(t,Math.max(o,0));s.length===1&&(a=a.filter(h=>h!==n));const d=a.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function zq(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o],d=e[a],h=l.x,m=l.y,f=d.x,v=d.y;m>r!=v>r&&n<(f-h)*(r-m)/(v-m)+h&&(s=!s)}return s}function qq(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return zq(n,e)}function Cu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Wq=OR,Hq=cw,Gq=DR,Kq=LR,Jq=mw,Yq=UR,Xq=Ap,Qq=VR,Zq=$R,eW=qR,tW=HR,nW=GR,rW=KR,sW=YR,iW=QR,Ip="DropdownMenu",[oW]=zr(Ip,[AR]),ur=AR(),[aW,eA]=oW(Ip),tA=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=t,d=ur(e),h=g.useRef(null),[m,f]=Fa({prop:s,defaultProp:o??!1,onChange:a,caller:Ip});return i.jsx(aW,{scope:e,triggerId:As(),triggerRef:h,contentId:As(),open:m,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(v=>!v),[f]),modal:l,children:i.jsx(Wq,{...d,open:m,onOpenChange:f,dir:r,modal:l,children:n})})};tA.displayName=Ip;var nA="DropdownMenuTrigger",rA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=eA(nA,n),a=ur(n);return i.jsx(Hq,{asChild:!0,...a,children:i.jsx(Je.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:op(e,o.triggerRef),onPointerDown:Re(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:Re(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});rA.displayName=nA;var lW="DropdownMenuPortal",sA=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ur(e);return i.jsx(Gq,{...r,...n})};sA.displayName=lW;var iA="DropdownMenuContent",oA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eA(iA,n),o=ur(n),a=g.useRef(!1);return i.jsx(Kq,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:Re(t.onCloseAutoFocus,l=>{a.current||s.triggerRef.current?.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Re(t.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,m=d.button===2||h;(!s.modal||m)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oA.displayName=iA;var cW="DropdownMenuGroup",dW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(Jq,{...s,...r,ref:e})});dW.displayName=cW;var uW="DropdownMenuLabel",hW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(Yq,{...s,...r,ref:e})});hW.displayName=uW;var mW="DropdownMenuItem",aA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(Xq,{...s,...r,ref:e})});aA.displayName=mW;var fW="DropdownMenuCheckboxItem",pW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(Qq,{...s,...r,ref:e})});pW.displayName=fW;var gW="DropdownMenuRadioGroup",vW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(Zq,{...s,...r,ref:e})});vW.displayName=gW;var xW="DropdownMenuRadioItem",yW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(eW,{...s,...r,ref:e})});yW.displayName=xW;var bW="DropdownMenuItemIndicator",wW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(tW,{...s,...r,ref:e})});wW.displayName=bW;var SW="DropdownMenuSeparator",kW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(nW,{...s,...r,ref:e})});kW.displayName=SW;var jW="DropdownMenuArrow",CW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(rW,{...s,...r,ref:e})});CW.displayName=jW;var TW="DropdownMenuSubTrigger",NW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(sW,{...s,...r,ref:e})});NW.displayName=TW;var EW="DropdownMenuSubContent",PW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ur(n);return i.jsx(iW,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PW.displayName=EW;var _W=tA,RW=rA,AW=sA,IW=oA,OW=aA;function gw({...t}){return i.jsx(_W,{"data-slot":"dropdown-menu",...t})}function vw({...t}){return i.jsx(RW,{"data-slot":"dropdown-menu-trigger",...t})}function xw({className:t,sideOffset:e=4,...n}){return i.jsx(AW,{children:i.jsx(IW,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function bc({className:t,inset:e,variant:n="default",...r}){return i.jsx(OW,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:Pe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}var lA="AlertDialog",[MW]=zr(lA,[pP]),Xi=pP(),cA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Xi(e);return i.jsx(nb,{...r,...n,modal:!0})};cA.displayName=lA;var DW="AlertDialogTrigger",LW=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return i.jsx(RP,{...s,...r,ref:e})});LW.displayName=DW;var UW="AlertDialogPortal",dA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Xi(e);return i.jsx(rb,{...r,...n})};dA.displayName=UW;var FW="AlertDialogOverlay",uA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return i.jsx(sb,{...s,...r,ref:e})});uA.displayName=FW;var wc="AlertDialogContent",[VW,BW]=MW(wc),$W=IE("AlertDialogContent"),hA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,o=Xi(n),a=g.useRef(null),l=ct(e,a),d=g.useRef(null);return i.jsx(z6,{contentName:wc,titleName:mA,docsSlug:"alert-dialog",children:i.jsx(VW,{scope:n,cancelRef:d,children:i.jsxs(ib,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:Re(s.onOpenAutoFocus,h=>{h.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[i.jsx($W,{children:r}),i.jsx(qW,{contentRef:a})]})})})});hA.displayName=wc;var mA="AlertDialogTitle",fA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return i.jsx(ob,{...s,...r,ref:e})});fA.displayName=mA;var pA="AlertDialogDescription",gA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return i.jsx(ab,{...s,...r,ref:e})});gA.displayName=pA;var zW="AlertDialogAction",vA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xi(n);return i.jsx(pp,{...s,...r,ref:e})});vA.displayName=zW;var xA="AlertDialogCancel",yA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=BW(xA,n),o=Xi(n),a=ct(e,s);return i.jsx(pp,{...o,...r,ref:a})});yA.displayName=xA;var qW=({contentRef:t})=>{const e=`\`${wc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wc}\` by passing a \`${pA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},WW=cA,HW=dA,GW=uA,KW=hA,JW=vA,YW=yA,XW=fA,QW=gA;function Tu({...t}){return i.jsx(WW,{"data-slot":"alert-dialog",...t})}function ZW({...t}){return i.jsx(HW,{"data-slot":"alert-dialog-portal",...t})}function eH({className:t,...e}){return i.jsx(GW,{"data-slot":"alert-dialog-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Nu({className:t,...e}){return i.jsxs(ZW,{children:[i.jsx(eH,{}),i.jsx(KW,{"data-slot":"alert-dialog-content",className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function Eu({className:t,...e}){return i.jsx("div",{"data-slot":"alert-dialog-header",className:Pe("flex flex-col gap-2 text-center sm:text-left",t),...e})}function Pu({className:t,...e}){return i.jsx("div",{"data-slot":"alert-dialog-footer",className:Pe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function _u({className:t,...e}){return i.jsx(XW,{"data-slot":"alert-dialog-title",className:Pe("text-lg font-semibold",t),...e})}function Ru({className:t,...e}){return i.jsx(QW,{"data-slot":"alert-dialog-description",className:Pe("text-muted-foreground text-sm",t),...e})}function Au({className:t,...e}){return i.jsx(JW,{className:Pe(Y0(),t),...e})}function Iu({className:t,...e}){return i.jsx(YW,{className:Pe(Y0({variant:"outline"}),t),...e})}function mT({isAuthenticated:t=!1,onLoginPrompt:e}){const[n,r]=g.useState(""),[s,o]=g.useState([]),[a,l]=g.useState(!1),[d,h]=g.useState(!0),[m,f]=g.useState(null),[v,y]=g.useState(null),[w,b]=g.useState(!1),[k,j]=g.useState(null),[T,E]=g.useState(!1),P=g.useRef(null),[N,_]=g.useState(new Set),[I,M]=g.useState({}),[O,L]=g.useState({}),[D,A]=g.useState(new Set),[Z,se]=g.useState(!1),[fe,ae]=g.useState(null),[de,U]=g.useState(!1),[G,le]=g.useState(null),[$,ee]=g.useState({}),[he,B]=g.useState({}),[te,Te]=g.useState(null),[re,ge]=g.useState(!1),{plan:_e,isLoading:ve}=gq();console.log("📊 Feed - isAuthenticated:",t),g.useEffect(()=>{Ee(),t&&(me(),it())},[t]),g.useEffect(()=>{const H=Ie=>{console.log("🔄 Perfil atualizado - atualizando Feed..."),j(Ie.detail)};return window.addEventListener("profileUpdated",H),()=>window.removeEventListener("profileUpdated",H)},[]),g.useEffect(()=>()=>{v&&URL.revokeObjectURL(v)},[v]);async function Ee(){h(!0);try{const{posts:H}=await Sa.getPosts();console.log("📝 Posts carregados:",H?.length||0);const{getRandomNews:Ie,formatNewsAsPost:Fe}=await Xn(async()=>{const{getRandomNews:Ye,formatNewsAsPost:St}=await import("./volleyNews-PDYedsxh.js");return{getRandomNews:Ye,formatNewsAsPost:St}},[]),Ke=Ie(8).map(Fe),Dt=Array.isArray(H)?H:[],jt=[...Ke,...Dt];jt.sort((Ye,St)=>new Date(St.createdAt).getTime()-new Date(Ye.createdAt).getTime()),o(jt),console.log("📰 Posts totais (usuários + notícias):",jt.length);const Ks={};jt?.forEach(Ye=>{const St={},Xt=Math.floor(Math.random()*3),vn=new Set;for(let ds=0;ds<Xt;ds++){const At=ac[Math.floor(Math.random()*ac.length)];vn.has(At.emoji)||(St[At.emoji]=Math.floor(Math.random()*5)+1,vn.add(At.emoji))}Ks[Ye.id]=St}),ee(Ks)}catch(H){console.error("❌ Erro ao carregar posts:",H),o([])}finally{h(!1)}}async function me(){try{const{profile:H}=await ar.getCurrentUser();if(j(H),H)try{localStorage.setItem("volleypro_cached_profile",JSON.stringify(H))}catch{}}catch(H){H.message?.includes("conexão")||H.message?.includes("Tempo limite")||H.message?.includes("Failed to fetch")||H.name==="TypeError"||console.error("❌ Erro ao carregar usuário:",H);try{const Fe=localStorage.getItem("volleypro_cached_profile");Fe&&j(JSON.parse(Fe))}catch{}}}async function it(){try{const{isMaster:H}=await Wo.checkMasterStatus();E(H),H&&console.log("👑 MASTER USER detected!")}catch{E(!1)}}async function yt(H){if(!T){K.error("Acesso negado");return}if(confirm("Tem certeza que deseja deletar esta postagem? Esta ação não pode ser desfeita."))try{await Wo.deletePost(H),K.success("🗑️ Postagem removida com sucesso!"),await Ee()}catch(Ie){console.error("❌ Erro ao deletar post:",Ie),K.error(Ie.message||"Erro ao remover postagem")}}function vt(H){const Ie=H.target.files?.[0];if(!Ie)return;if(!["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm"].includes(Ie.type)){K.error("Tipo de arquivo não suportado. Use JPEG, PNG, GIF, WEBP, MP4 ou WEBM.");return}const Me=50*1024*1024;if(Ie.size>Me){K.error("Arquivo muito grande. Tamanho máximo: 50MB");return}f(Ie);const Ke=URL.createObjectURL(Ie);y(Ke)}function an(){v&&URL.revokeObjectURL(v),f(null),y(null),P.current&&(P.current.value="")}async function er(){if(console.log("🚀 handleCreatePost chamado - Auth:",t,"Content:",n.trim()),!t){K.error("Você precisa estar logado para publicar"),e&&e();return}if(!n.trim()&&!m){K.error("Digite algo ou adicione uma mídia para publicar");return}l(!0),b(!0);try{let H=null,Ie=null;if(m){const Me=m.type.startsWith("video/"),Ke=(m.size/1024/1024).toFixed(2);console.log(`📤 Iniciando upload de ${Me?"vídeo":"imagem"} (${Ke} MB)...`),Me&&K.info(`Enviando vídeo... Aguarde (${Ke} MB)`,{duration:5e3});const Dt=await Sa.uploadMedia(m);H=Dt.url,Ie=Dt.mediaType,console.log("✅ Upload concluído:",Ie,H.substring(0,50)+"..."),K.success(`${Me?"Vídeo":"Imagem"} enviado com sucesso!`)}console.log("📝 Criando postagem...");const{post:Fe}=await Sa.createPost(n,Ie,H);console.log("✅ Post criado com ID:",Fe.id),o([Fe,...s]),r(""),an(),K.success("Publicação criada com sucesso! 🎉")}catch(H){console.error("❌ Erro ao criar post:",H),H.message?.includes("Upload muito demorado")?K.error("Upload muito demorado. Tente um arquivo menor.",{description:"Vídeos muito grandes podem demorar. Recomendamos até 20MB.",duration:6e3}):H.message?.includes("conexão")?K.error("Erro de conexão",{description:"Verifique sua internet e tente novamente.",duration:5e3}):H.message?.includes("autenticado")?(K.error("Sessão expirada",{description:"Faça login novamente para continuar.",duration:5e3}),e&&e()):K.error("Erro ao criar publicação",{description:H.message||"Tente novamente em alguns instantes.",duration:5e3})}finally{l(!1),b(!1)}}async function ra(H){if(console.log("❤️ handleLike chamado - Auth:",t,"PostID:",H),!t){K.error("Faça login para curtir publicações",{action:e?{label:"Entrar",onClick:e}:void 0});return}le(H)}async function Tn(H,Ie,Fe=!1){if(console.log("😊 handleReaction chamado:",{postId:H,emoji:Ie,isAuthenticated:t}),!t){K.error("Faça login para reagir",{action:e?{label:"Entrar",onClick:e}:void 0});return}try{$[H]||(console.log("⚠️ Post não tem reações inicializadas, criando..."),ee(Dt=>({...Dt,[H]:{}})));const Me=he[H],Ke=$[H]||{};if(Me===Ie){if(!Fe){Te({postId:H,emoji:Ie});return}B(Dt=>{const jt={...Dt};return delete jt[H],jt}),ee(Dt=>({...Dt,[H]:{...Ke,[Ie]:Math.max(0,(Ke[Ie]||0)-1)}})),K.success("Reação removida")}else{if(Me){const jt={...Ke,[Me]:Math.max(0,(Ke[Me]||0)-1),[Ie]:(Ke[Ie]||0)+1};ee(Ks=>({...Ks,[H]:jt}))}else ee(jt=>({...jt,[H]:{...jt[H]||{},[Ie]:((jt[H]||{})[Ie]||0)+1}}));B(jt=>({...jt,[H]:Ie}));const Dt=ac.find(jt=>jt.emoji===Ie);K.success(`${Ie} ${Dt?.label||"Reação"} adicionada!`)}le(null)}catch(Me){console.error("❌ Erro ao reagir:",Me),K.error(Me.message||"Erro ao adicionar reação")}}function wi(H,Ie){he[H],Tn(H,Ie)}async function qs(H){if(N.has(H)){const Fe=new Set(N);Fe.delete(H),_(Fe)}else{const Fe=new Set(N);Fe.add(H),_(Fe),I[H]||await gn(H)}}async function gn(H){A(Ie=>new Set(Ie).add(H));try{const{comments:Ie}=await Sa.getComments(H);M(Fe=>({...Fe,[H]:Ie||[]}))}catch(Ie){console.error("❌ Erro ao carregar comentários:",Ie),K.error("Erro ao carregar comentários")}finally{A(Ie=>{const Fe=new Set(Ie);return Fe.delete(H),Fe})}}async function qr(H){if(!t){K.error("Faça login para comentar"),e&&e();return}const Ie=O[H]?.trim();if(!Ie){K.error("Digite algo para comentar");return}try{const{comment:Fe}=await Sa.createComment(H,Ie);M(Me=>({...Me,[H]:[Fe,...Me[H]||[]]})),o(s.map(Me=>Me.id===H?{...Me,comments:Me.comments+1}:Me)),L(Me=>({...Me,[H]:""})),K.success("Comentário adicionado! 💬")}catch(Fe){console.error("❌ Erro ao criar comentário:",Fe),K.error(Fe.message||"Erro ao comentar")}}async function il(H,Ie){if(confirm("Tem certeza que deseja deletar este comentário?"))try{await Sa.deleteComment(H,Ie),M(Fe=>({...Fe,[H]:(Fe[H]||[]).filter(Me=>Me.id!==Ie)})),o(s.map(Fe=>Fe.id===H?{...Fe,comments:Math.max(0,Fe.comments-1)}:Fe)),K.success("Comentário removido")}catch(Fe){console.error("❌ Erro ao deletar comentário:",Fe),K.error("Erro ao deletar comentário")}}function ol(H){console.log("📤 handleShare chamado para post:",H.id),ae(H),se(!0),U(!1)}async function Ws(H){const Ie=`${window.location.origin}?post=${H}`;try{await navigator.clipboard.writeText(Ie),U(!0),K.success("Link copiado! 🔗",{description:"Cole onde quiser compartilhar"}),setTimeout(()=>U(!1),3e3),o(s.map(Fe=>Fe.id===H?{...Fe,shares:Fe.shares+1}:Fe))}catch(Fe){console.error("❌ Erro ao copiar link:",Fe),K.error("Erro ao copiar link")}}async function sa(H){const Ie=`${window.location.origin}?post=${H.id}`,Fe=H.content?`${H.authorName}: ${H.content.substring(0,100)}${H.content.length>100?"...":""}`:`Confira esta publicação de ${H.authorName} no VolleyPro!`;if(navigator.share)try{await navigator.share({title:`VolleyPro - ${H.authorName}`,text:Fe,url:Ie}),console.log("✅ Compartilhado com sucesso via Web Share API"),K.success("Compartilhado! 🎉"),o(s.map(Me=>Me.id===H.id?{...Me,shares:Me.shares+1}:Me)),se(!1)}catch(Me){Me.name!=="AbortError"&&console.error("❌ Erro ao compartilhar:",Me)}else K.info("Seu navegador não suporta compartilhamento direto. Use o link copiado!"),Ws(H.id)}function Si(H){const Ie=`${window.location.origin}?post=${H.id}`,Fe=H.content?`${H.content}

`:`Confira esta publicação no VolleyPro!

`,Me=`https://wa.me/?text=${encodeURIComponent(Fe+Ie)}`;window.open(Me,"_blank"),K.success("Abrindo WhatsApp! 💚"),o(s.map(Ke=>Ke.id===H.id?{...Ke,shares:Ke.shares+1}:Ke)),se(!1)}function no(H){const Ie=`${window.location.origin}?post=${H.id}`,Fe=H.content?H.content.substring(0,240):"Confira esta publicação no VolleyPro! 🏐",Me=`https://twitter.com/intent/tweet?text=${encodeURIComponent(Fe)}&url=${encodeURIComponent(Ie)}`;window.open(Me,"_blank"),K.success("Abrindo Twitter/X! 🐦"),o(s.map(Ke=>Ke.id===H.id?{...Ke,shares:Ke.shares+1}:Ke)),se(!1)}function mr(H){const Ie=`${window.location.origin}?post=${H.id}`,Fe=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Ie)}`;window.open(Fe,"_blank"),K.success("Abrindo Facebook! 📘"),o(s.map(Me=>Me.id===H.id?{...Me,shares:Me.shares+1}:Me)),se(!1)}const Hs=H=>H?.startsWith("image/"),Gs=H=>H?.startsWith("video/"),al=k&&new Date(k.createdAt).getTime()>Date.now()-10080*60*1e3,ll=typeof window<"u"&&localStorage.getItem("volleypro_welcome_tips_seen")==="true",cl=t&&al&&!ll;return i.jsxs("div",{className:"container mx-auto max-w-2xl py-6 space-y-6",children:[cl&&k&&i.jsxs(ie,{className:"border-2 border-primary/20 bg-gradient-to-r from-primary/5 via-secondary/5 to-primary/5",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center",children:i.jsx(Rs,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"Bem-vindo ao VolleyPro! 👋"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Comece sua jornada na comunidade do vôlei"})]})]}),i.jsx(q,{variant:"ghost",size:"icon",onClick:()=>{localStorage.setItem("volleypro_welcome_tips_seen","true"),K.success("Explore à vontade! 🎉")},children:i.jsx(cr,{className:"h-4 w-4"})})]})}),i.jsxs(ce,{className:"space-y-3",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(ns,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{children:"✅ Conta criada com sucesso!"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground/50"}),i.jsx("span",{children:'Clique em "Perfil" para adicionar sua foto'})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground/50"}),i.jsx("span",{children:'Explore "Atletas" e "Times" para seguir pessoas'})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground/50"}),i.jsx("span",{children:"Crie seu primeiro post aqui no Feed!"})]})]}),i.jsx(q,{className:"w-full bg-gradient-to-r from-primary to-secondary",onClick:()=>{localStorage.setItem("volleypro_welcome_tips_seen","true"),K.success("Explore à vontade! 🎉")},children:"Entendi, vamos lá! 🚀"})]})]}),t&&_e==="free"&&!ve&&i.jsx(pq,{onUpgrade:()=>{window.location.hash="#monetization",window.dispatchEvent(new HashChangeEvent("hashchange"))}}),t&&i.jsxs(ie,{className:"border-t-4 border-t-primary shadow-lg",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs(Gt,{className:"ring-2 ring-primary/20",children:[k?.photoUrl?i.jsx(rn,{src:k.photoUrl,alt:k.nickname||k.name,className:"object-cover"}):null,i.jsx(Kt,{className:"bg-gradient-to-br from-primary to-secondary text-white",children:k?.name?.[0]?.toUpperCase()||"VP"})]}),i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsx(os,{placeholder:"Compartilhe suas conquistas, treinos e momentos do vôlei...",value:n,onChange:H=>r(H.target.value),className:"min-h-[100px] resize-none"}),v&&m&&i.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-primary/20",children:[i.jsx(q,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 z-10",onClick:an,children:i.jsx(cr,{className:"h-4 w-4"})}),Hs(m.type)?i.jsx("img",{src:v,alt:"Preview",className:"w-full max-h-96 object-contain bg-muted"}):Gs(m.type)?i.jsx("video",{src:v,controls:!0,className:"w-full max-h-96 bg-muted"}):null]}),w&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary/5 rounded-lg border border-primary/20",children:[i.jsx(dp,{className:"h-5 w-5 animate-pulse text-primary"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-primary",children:m?.type.startsWith("video/")?"Enviando vídeo... Isso pode levar alguns instantes.":"Enviando imagem..."}),i.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Por favor, não feche esta janela."})]})]})]})]})}),i.jsxs(q1,{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx("input",{ref:P,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm",onChange:vt,className:"hidden",id:"media-upload"}),i.jsxs(q,{variant:"outline",size:"sm",onClick:()=>P.current?.click(),disabled:!!m||a,children:[i.jsx(BE,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Foto"})]}),i.jsxs(q,{variant:"outline",size:"sm",onClick:()=>P.current?.click(),disabled:!!m||a,children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Vídeo"})]}),i.jsxs(q,{variant:"outline",size:"sm",onClick:()=>ge(!0),className:"gap-2 text-secondary border-secondary hover:bg-secondary hover:text-white",disabled:a,children:[i.jsx(Rs,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Inspiração"})]})]}),i.jsx(q,{disabled:!n.trim()&&!m||a,onClick:er,className:"bg-gradient-to-r from-primary to-secondary shrink-0",children:a?"Publicando...":"Publicar"})]})]}),d?i.jsx("div",{className:"space-y-4",children:[1,2,3].map(H=>i.jsx(ie,{className:"p-6",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-muted rounded-full"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/6"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-4 bg-muted rounded"}),i.jsx("div",{className:"h-4 bg-muted rounded w-5/6"})]})]})},H))}):s.length===0?i.jsxs(ie,{className:"p-12 text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mb-4",children:i.jsx(Mo,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"text-xl mb-2",children:"Nenhuma publicação ainda"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:t?"Seja o primeiro a compartilhar algo!":"Faça login para ver e criar publicações"}),!t&&e&&i.jsx(q,{onClick:e,className:"mt-2 bg-gradient-to-r from-primary to-secondary",children:"Criar Conta Grátis"})]}):s.map(H=>{if(!H||!H.id)return null;const Ie=H.authorName?.[0]||"U",Fe=H.authorName||"Usuário",Me=H.isOfficial===!0;return i.jsxs(ie,{className:`hover:shadow-xl transition-all duration-300 border-l-4 ${Me?"border-l-secondary bg-gradient-to-r from-secondary/5 to-transparent":"border-l-primary/30"}`,children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx(Gt,{className:Me?"ring-2 ring-secondary ring-offset-2":"",children:H.authorPhotoUrl?i.jsx(rn,{src:H.authorPhotoUrl,alt:Fe}):i.jsx(Kt,{className:Me?"bg-gradient-to-br from-secondary to-primary text-white":"",children:Me?"📰":Ie})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:Me?"font-semibold":"",children:Fe}),H.verified&&i.jsx(Se,{variant:"secondary",className:"h-5 px-1.5",children:"✓"}),Me&&H.category&&i.jsx(Se,{className:`h-5 px-2 text-xs ${H.category==="noticia"?"bg-blue-500":H.category==="curiosidade"?"bg-yellow-500":H.category==="estatistica"?"bg-green-500":H.category==="historia"?"bg-purple-500":"bg-orange-500"} text-white`,children:H.category==="noticia"?"📰 Notícia":H.category==="curiosidade"?"💡 Curiosidade":H.category==="estatistica"?"📊 Stats":H.category==="historia"?"📚 História":"⭐ Destaque"})]}),i.jsx("p",{className:"text-muted-foreground text-sm",children:H.createdAt?new Date(H.createdAt).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"Agora"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[T&&!Me&&i.jsx(q,{variant:"ghost",size:"icon",onClick:()=>yt(H.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",title:"Deletar postagem (Master)",children:i.jsx(Bi,{className:"h-4 w-4"})}),i.jsxs(gw,{children:[i.jsx(vw,{asChild:!0,children:i.jsx(q,{variant:"ghost",size:"icon",children:i.jsx(Z4,{className:"h-4 w-4"})})}),i.jsxs(xw,{align:"end",children:[i.jsx(bc,{onClick:()=>K.info("Em breve!"),children:"Salvar publicação"}),i.jsx(bc,{onClick:()=>K.info("Em breve!"),children:"Denunciar"}),i.jsx(bc,{onClick:()=>K.info("Em breve!"),children:"Deixar de seguir"})]})]})]})]})}),i.jsxs(ce,{className:"space-y-4",children:[H.content&&i.jsx("p",{className:"whitespace-pre-wrap",children:H.content}),H.mediaUrl&&H.mediaType==="image"&&i.jsx("div",{className:"rounded-lg overflow-hidden border",children:i.jsx("img",{src:H.mediaUrl,alt:"Post media",className:"w-full h-auto max-h-[500px] object-contain bg-muted",loading:"lazy"})}),H.mediaUrl&&H.mediaType==="video"&&i.jsx("div",{className:"rounded-lg overflow-hidden border",children:i.jsx("video",{src:H.mediaUrl,controls:!0,className:"w-full h-auto max-h-[500px] bg-muted",preload:"metadata"})})]}),i.jsxs(q1,{className:"flex flex-col gap-4",children:[$[H.id]&&Object.keys($[H.id]||{}).length>0&&i.jsx("div",{className:"w-full",children:i.jsx(s7,{reactions:$[H.id]||{},userReaction:he[H.id],onReactionClick:Ke=>wi(H.id,Ke)})}),i.jsxs("div",{className:"flex items-center justify-between w-full text-muted-foreground text-sm",children:[i.jsxs("span",{children:[H.comments," comentários"]}),i.jsxs("span",{children:[H.shares," compartilhamentos"]})]}),i.jsxs("div",{className:"flex items-center gap-2 w-full border-t pt-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(q,{variant:"ghost",className:`w-full hover:bg-primary/10 hover:text-primary transition-colors ${he[H.id]?"text-primary":""}`,onClick:()=>ra(H.id),children:he[H.id]?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-lg mr-2",children:he[H.id]}),i.jsx("span",{className:"hidden sm:inline",children:ac.find(Ke=>Ke.emoji===he[H.id])?.label||"Reagir"})]}):i.jsxs(i.Fragment,{children:[i.jsx(d3,{className:"h-4 w-4 mr-2"}),"Reagir"]})}),i.jsx(r7,{isOpen:G===H.id,onSelect:Ke=>Tn(H.id,Ke),onClose:()=>le(null)})]}),i.jsxs(q,{variant:"ghost",className:`flex-1 hover:bg-primary/10 hover:text-primary transition-colors ${N.has(H.id)?"bg-primary/10 text-primary":""}`,onClick:()=>qs(H.id),children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),"Comentar"]}),i.jsxs(q,{variant:"ghost",className:"flex-1 hover:bg-primary/10 hover:text-primary transition-colors",onClick:()=>ol(H),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})]}),N.has(H.id)&&i.jsxs("div",{className:"w-full border-t pt-4 space-y-4",children:[t&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs(Gt,{className:"h-8 w-8",children:[k?.photoUrl?i.jsx(rn,{src:k.photoUrl,alt:k.name}):null,i.jsx(Kt,{className:"bg-gradient-to-br from-primary to-secondary text-white text-xs",children:k?.name?.[0]?.toUpperCase()||"U"})]}),i.jsxs("div",{className:"flex-1 flex gap-2",children:[i.jsx(os,{placeholder:"Escreva um comentário...",value:O[H.id]||"",onChange:Ke=>L(Dt=>({...Dt,[H.id]:Ke.target.value})),className:"min-h-[60px] resize-none",onKeyDown:Ke=>{Ke.key==="Enter"&&!Ke.shiftKey&&(Ke.preventDefault(),qr(H.id))}}),i.jsx(q,{size:"sm",onClick:()=>qr(H.id),disabled:!O[H.id]?.trim(),className:"bg-gradient-to-r from-primary to-secondary",children:"Enviar"})]})]}),D.has(H.id)?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):i.jsx("div",{className:"space-y-3",children:(I[H.id]||[]).length===0?i.jsx("p",{className:"text-center text-muted-foreground text-sm py-4",children:"Nenhum comentário ainda. Seja o primeiro!"}):(I[H.id]||[]).map(Ke=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[i.jsxs(Gt,{className:"h-8 w-8",children:[Ke.authorPhotoUrl?i.jsx(rn,{src:Ke.authorPhotoUrl,alt:Ke.authorName}):null,i.jsx(Kt,{className:"text-xs",children:Ke.authorName?.[0]?.toUpperCase()||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"text-sm",children:Ke.authorName}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(Ke.createdAt).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),(Ke.userId===Rt.getCurrentUserId()||T)&&i.jsx(q,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>il(H.id,Ke.id),children:i.jsx(Bi,{className:"h-3 w-3"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap break-words",children:Ke.content})]})]},Ke.id))})]})]})]},H.id)}).filter(Boolean),i.jsx(sn,{open:Z,onOpenChange:se,children:i.jsxs(Yt,{className:"sm:max-w-md",children:[i.jsxs(fn,{children:[i.jsxs(on,{className:"flex items-center gap-2",children:[i.jsx(Uo,{className:"h-5 w-5 text-primary"}),"Compartilhar Publicação"]}),i.jsx(Ln,{children:"Escolha como você quer compartilhar esta publicação"})]}),fe&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg border",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs(Gt,{className:"h-8 w-8",children:[fe.authorPhotoUrl?i.jsx(rn,{src:fe.authorPhotoUrl,alt:fe.authorName}):null,i.jsx(Kt,{className:"text-xs",children:fe.authorName?.[0]?.toUpperCase()||"U"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm",children:fe.authorName}),i.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(fe.createdAt).toLocaleDateString("pt-BR")})]})]}),fe.content&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:fe.content})]}),i.jsx(q,{variant:"outline",className:"w-full justify-start gap-3 h-auto py-3",onClick:()=>Ws(fe.id),children:de?i.jsxs(i.Fragment,{children:[i.jsx(ns,{className:"h-5 w-5 text-green-600"}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-green-600",children:"Link copiado!"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Cole onde quiser compartilhar"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(tc,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{children:"Copiar link"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Compartilhe em qualquer lugar"})]})]})}),navigator.share&&i.jsxs(q,{variant:"outline",className:"w-full justify-start gap-3 h-auto py-3",onClick:()=>sa(fe),children:[i.jsx(Uo,{className:"h-5 w-5 text-primary"}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{children:"Compartilhar..."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Use o menu do sistema"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou compartilhe em"})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs(q,{variant:"outline",className:"flex-col gap-2 h-auto py-4 hover:bg-green-50 hover:border-green-500 hover:text-green-600",onClick:()=>Si(fe),children:[i.jsx(du,{className:"h-6 w-6"}),i.jsx("span",{className:"text-xs",children:"WhatsApp"})]}),i.jsxs(q,{variant:"outline",className:"flex-col gap-2 h-auto py-4 hover:bg-blue-50 hover:border-blue-500 hover:text-blue-600",onClick:()=>no(fe),children:[i.jsx(k3,{className:"h-6 w-6"}),i.jsx("span",{className:"text-xs",children:"Twitter/X"})]}),i.jsxs(q,{variant:"outline",className:"flex-col gap-2 h-auto py-4 hover:bg-blue-50 hover:border-blue-600 hover:text-blue-600",onClick:()=>mr(fe),children:[i.jsx(nL,{className:"h-6 w-6"}),i.jsx("span",{className:"text-xs",children:"Facebook"})]})]})]})]})}),i.jsx(fq,{open:re,onClose:()=>ge(!1),onUseTemplate:H=>{r(H)}}),i.jsx(Tu,{open:!!te,onOpenChange:H=>{H||Te(null)},children:i.jsxs(Nu,{children:[i.jsxs(Eu,{children:[i.jsx(_u,{children:"Remover reação?"}),i.jsxs(Ru,{children:["Tem certeza que deseja remover sua reação ",te?.emoji," deste post?"]})]}),i.jsxs(Pu,{children:[i.jsx(Iu,{children:"Cancelar"}),i.jsx(Au,{onClick:()=>{te&&(Tn(te.postId,te.emoji,!0),Te(null))},children:"Sim, remover"})]})]})})]})}function tH(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var nH=[" ","Enter","ArrowUp","ArrowDown"],rH=[" ","Enter"],$a="Select",[Op,Mp,sH]=sw($a),[Xc]=zr($a,[sH,Hc]),Dp=Hc(),[iH,Qo]=Xc($a),[oH,aH]=Xc($a),bA=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:d,dir:h,name:m,autoComplete:f,disabled:v,required:y,form:w}=t,b=Dp(e),[k,j]=g.useState(null),[T,E]=g.useState(null),[P,N]=g.useState(!1),_=th(h),[I,M]=Fa({prop:r,defaultProp:s??!1,onChange:o,caller:$a}),[O,L]=Fa({prop:a,defaultProp:l,onChange:d,caller:$a}),D=g.useRef(null),A=k?w||!!k.closest("form"):!0,[Z,se]=g.useState(new Set),fe=Array.from(Z).map(ae=>ae.props.value).join(";");return i.jsx(gb,{...b,children:i.jsxs(iH,{required:y,scope:e,trigger:k,onTriggerChange:j,valueNode:T,onValueNodeChange:E,valueNodeHasChildren:P,onValueNodeHasChildrenChange:N,contentId:As(),value:O,onValueChange:L,open:I,onOpenChange:M,dir:_,triggerPointerDownPosRef:D,disabled:v,children:[i.jsx(Op.Provider,{scope:e,children:i.jsx(oH,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(ae=>{se(de=>new Set(de).add(ae))},[]),onNativeOptionRemove:g.useCallback(ae=>{se(de=>{const U=new Set(de);return U.delete(ae),U})},[]),children:n})}),A?i.jsxs($A,{"aria-hidden":!0,required:y,tabIndex:-1,name:m,autoComplete:f,value:O,onChange:ae=>L(ae.target.value),disabled:v,form:w,children:[O===void 0?i.jsx("option",{value:""}):null,Array.from(Z)]},fe):null]})})};bA.displayName=$a;var wA="SelectTrigger",SA=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,o=Dp(n),a=Qo(wA,n),l=a.disabled||r,d=ct(e,a.onTriggerChange),h=Mp(n),m=g.useRef("touch"),[f,v,y]=qA(b=>{const k=h().filter(E=>!E.disabled),j=k.find(E=>E.value===a.value),T=WA(k,b,j);T!==void 0&&a.onValueChange(T.value)}),w=b=>{l||(a.onOpenChange(!0),y()),b&&(a.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return i.jsx(vb,{asChild:!0,...o,children:i.jsx(Je.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":zA(a.value)?"":void 0,...s,ref:d,onClick:Re(s.onClick,b=>{b.currentTarget.focus(),m.current!=="mouse"&&w(b)}),onPointerDown:Re(s.onPointerDown,b=>{m.current=b.pointerType;const k=b.target;k.hasPointerCapture(b.pointerId)&&k.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(w(b),b.preventDefault())}),onKeyDown:Re(s.onKeyDown,b=>{const k=f.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&v(b.key),!(k&&b.key===" ")&&nH.includes(b.key)&&(w(),b.preventDefault())})})})});SA.displayName=wA;var kA="SelectValue",jA=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=t,d=Qo(kA,n),{onValueNodeHasChildrenChange:h}=d,m=o!==void 0,f=ct(e,d.onValueNodeChange);return mn(()=>{h(m)},[h,m]),i.jsx(Je.span,{...l,ref:f,style:{pointerEvents:"none"},children:zA(d.value)?i.jsx(i.Fragment,{children:a}):o})});jA.displayName=kA;var lH="SelectIcon",CA=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});CA.displayName=lH;var cH="SelectPortal",TA=t=>i.jsx(Ku,{asChild:!0,...t});TA.displayName=cH;var za="SelectContent",NA=g.forwardRef((t,e)=>{const n=Qo(za,t.__scopeSelect),[r,s]=g.useState();if(mn(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Hu.createPortal(i.jsx(EA,{scope:t.__scopeSelect,children:i.jsx(Op.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),o):null}return i.jsx(PA,{...t,ref:e})});NA.displayName=za;var ws=10,[EA,Zo]=Xc(za),dH="SelectContentImpl",uH=Ua("SelectContent.RemoveScroll"),PA=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:d,align:h,alignOffset:m,arrowPadding:f,collisionBoundary:v,collisionPadding:y,sticky:w,hideWhenDetached:b,avoidCollisions:k,...j}=t,T=Qo(za,n),[E,P]=g.useState(null),[N,_]=g.useState(null),I=ct(e,re=>P(re)),[M,O]=g.useState(null),[L,D]=g.useState(null),A=Mp(n),[Z,se]=g.useState(!1),fe=g.useRef(!1);g.useEffect(()=>{if(E)return Q0(E)},[E]),X0();const ae=g.useCallback(re=>{const[ge,..._e]=A().map(me=>me.ref.current),[ve]=_e.slice(-1),Ee=document.activeElement;for(const me of re)if(me===Ee||(me?.scrollIntoView({block:"nearest"}),me===ge&&N&&(N.scrollTop=0),me===ve&&N&&(N.scrollTop=N.scrollHeight),me?.focus(),document.activeElement!==Ee))return},[A,N]),de=g.useCallback(()=>ae([M,E]),[ae,M,E]);g.useEffect(()=>{Z&&de()},[Z,de]);const{onOpenChange:U,triggerPointerDownPosRef:G}=T;g.useEffect(()=>{if(E){let re={x:0,y:0};const ge=ve=>{re={x:Math.abs(Math.round(ve.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(ve.pageY)-(G.current?.y??0))}},_e=ve=>{re.x<=10&&re.y<=10?ve.preventDefault():E.contains(ve.target)||U(!1),document.removeEventListener("pointermove",ge),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",_e,{capture:!0})}}},[E,U,G]),g.useEffect(()=>{const re=()=>U(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[U]);const[le,$]=qA(re=>{const ge=A().filter(Ee=>!Ee.disabled),_e=ge.find(Ee=>Ee.ref.current===document.activeElement),ve=WA(ge,re,_e);ve&&setTimeout(()=>ve.ref.current.focus())}),ee=g.useCallback((re,ge,_e)=>{const ve=!fe.current&&!_e;(T.value!==void 0&&T.value===ge||ve)&&(O(re),ve&&(fe.current=!0))},[T.value]),he=g.useCallback(()=>E?.focus(),[E]),B=g.useCallback((re,ge,_e)=>{const ve=!fe.current&&!_e;(T.value!==void 0&&T.value===ge||ve)&&D(re)},[T.value]),te=r==="popper"?Fy:_A,Te=te===Fy?{side:l,sideOffset:d,align:h,alignOffset:m,arrowPadding:f,collisionBoundary:v,collisionPadding:y,sticky:w,hideWhenDetached:b,avoidCollisions:k}:{};return i.jsx(EA,{scope:n,content:E,viewport:N,onViewportChange:_,itemRefCallback:ee,selectedItem:M,onItemLeave:he,itemTextRefCallback:B,focusSelectedItem:de,selectedItemText:L,position:r,isPositioned:Z,searchRef:le,children:i.jsx(mp,{as:uH,allowPinchZoom:!0,children:i.jsx(up,{asChild:!0,trapped:T.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:Re(s,re=>{T.trigger?.focus({preventScroll:!0}),re.preventDefault()}),children:i.jsx(Gu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:i.jsx(te,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:re=>re.preventDefault(),...j,...Te,onPlaced:()=>se(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Re(j.onKeyDown,re=>{const ge=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!ge&&re.key.length===1&&$(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let ve=A().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(re.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const Ee=re.target,me=ve.indexOf(Ee);ve=ve.slice(me+1)}setTimeout(()=>ae(ve)),re.preventDefault()}})})})})})})});PA.displayName=dH;var hH="SelectItemAlignedPosition",_A=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,o=Qo(za,n),a=Zo(za,n),[l,d]=g.useState(null),[h,m]=g.useState(null),f=ct(e,I=>m(I)),v=Mp(n),y=g.useRef(!1),w=g.useRef(!0),{viewport:b,selectedItem:k,selectedItemText:j,focusSelectedItem:T}=a,E=g.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&h&&b&&k&&j){const I=o.trigger.getBoundingClientRect(),M=h.getBoundingClientRect(),O=o.valueNode.getBoundingClientRect(),L=j.getBoundingClientRect();if(o.dir!=="rtl"){const Ee=L.left-M.left,me=O.left-Ee,it=I.left-me,yt=I.width+it,vt=Math.max(yt,M.width),an=window.innerWidth-ws,er=Dy(me,[ws,Math.max(ws,an-vt)]);l.style.minWidth=yt+"px",l.style.left=er+"px"}else{const Ee=M.right-L.right,me=window.innerWidth-O.right-Ee,it=window.innerWidth-I.right-me,yt=I.width+it,vt=Math.max(yt,M.width),an=window.innerWidth-ws,er=Dy(me,[ws,Math.max(ws,an-vt)]);l.style.minWidth=yt+"px",l.style.right=er+"px"}const D=v(),A=window.innerHeight-ws*2,Z=b.scrollHeight,se=window.getComputedStyle(h),fe=parseInt(se.borderTopWidth,10),ae=parseInt(se.paddingTop,10),de=parseInt(se.borderBottomWidth,10),U=parseInt(se.paddingBottom,10),G=fe+ae+Z+U+de,le=Math.min(k.offsetHeight*5,G),$=window.getComputedStyle(b),ee=parseInt($.paddingTop,10),he=parseInt($.paddingBottom,10),B=I.top+I.height/2-ws,te=A-B,Te=k.offsetHeight/2,re=k.offsetTop+Te,ge=fe+ae+re,_e=G-ge;if(ge<=B){const Ee=D.length>0&&k===D[D.length-1].ref.current;l.style.bottom="0px";const me=h.clientHeight-b.offsetTop-b.offsetHeight,it=Math.max(te,Te+(Ee?he:0)+me+de),yt=ge+it;l.style.height=yt+"px"}else{const Ee=D.length>0&&k===D[0].ref.current;l.style.top="0px";const it=Math.max(B,fe+b.offsetTop+(Ee?ee:0)+Te)+_e;l.style.height=it+"px",b.scrollTop=ge-B+b.offsetTop}l.style.margin=`${ws}px 0`,l.style.minHeight=le+"px",l.style.maxHeight=A+"px",r?.(),requestAnimationFrame(()=>y.current=!0)}},[v,o.trigger,o.valueNode,l,h,b,k,j,o.dir,r]);mn(()=>E(),[E]);const[P,N]=g.useState();mn(()=>{h&&N(window.getComputedStyle(h).zIndex)},[h]);const _=g.useCallback(I=>{I&&w.current===!0&&(E(),T?.(),w.current=!1)},[E,T]);return i.jsx(fH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:_,children:i.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:i.jsx(Je.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});_A.displayName=hH;var mH="SelectPopperPosition",Fy=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ws,...o}=t,a=Dp(n);return i.jsx(xb,{...a,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Fy.displayName=mH;var[fH,yw]=Xc(za,{}),Vy="SelectViewport",RA=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,o=Zo(Vy,n),a=yw(Vy,n),l=ct(e,o.onViewportChange),d=g.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Op.Slot,{scope:n,children:i.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Re(s.onScroll,h=>{const m=h.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:v}=a;if(v?.current&&f){const y=Math.abs(d.current-m.scrollTop);if(y>0){const w=window.innerHeight-ws*2,b=parseFloat(f.style.minHeight),k=parseFloat(f.style.height),j=Math.max(b,k);if(j<w){const T=j+y,E=Math.min(w,T),P=T-E;f.style.height=E+"px",f.style.bottom==="0px"&&(m.scrollTop=P>0?P:0,f.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});RA.displayName=Vy;var AA="SelectGroup",[pH,gH]=Xc(AA),vH=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=As();return i.jsx(pH,{scope:n,id:s,children:i.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});vH.displayName=AA;var IA="SelectLabel",xH=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=gH(IA,n);return i.jsx(Je.div,{id:s.id,...r,ref:e})});xH.displayName=IA;var If="SelectItem",[yH,OA]=Xc(If),MA=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=t,l=Qo(If,n),d=Zo(If,n),h=l.value===r,[m,f]=g.useState(o??""),[v,y]=g.useState(!1),w=ct(e,T=>d.itemRefCallback?.(T,r,s)),b=As(),k=g.useRef("touch"),j=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(yH,{scope:n,value:r,disabled:s,textId:b,isSelected:h,onItemTextChange:g.useCallback(T=>{f(E=>E||(T?.textContent??"").trim())},[]),children:i.jsx(Op.ItemSlot,{scope:n,value:r,disabled:s,textValue:m,children:i.jsx(Je.div,{role:"option","aria-labelledby":b,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:Re(a.onFocus,()=>y(!0)),onBlur:Re(a.onBlur,()=>y(!1)),onClick:Re(a.onClick,()=>{k.current!=="mouse"&&j()}),onPointerUp:Re(a.onPointerUp,()=>{k.current==="mouse"&&j()}),onPointerDown:Re(a.onPointerDown,T=>{k.current=T.pointerType}),onPointerMove:Re(a.onPointerMove,T=>{k.current=T.pointerType,s?d.onItemLeave?.():k.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(a.onPointerLeave,T=>{T.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Re(a.onKeyDown,T=>{d.searchRef?.current!==""&&T.key===" "||(rH.includes(T.key)&&j(),T.key===" "&&T.preventDefault())})})})})});MA.displayName=If;var Kd="SelectItemText",DA=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...o}=t,a=Qo(Kd,n),l=Zo(Kd,n),d=OA(Kd,n),h=aH(Kd,n),[m,f]=g.useState(null),v=ct(e,j=>f(j),d.onItemTextChange,j=>l.itemTextRefCallback?.(j,d.value,d.disabled)),y=m?.textContent,w=g.useMemo(()=>i.jsx("option",{value:d.value,disabled:d.disabled,children:y},d.value),[d.disabled,d.value,y]),{onNativeOptionAdd:b,onNativeOptionRemove:k}=h;return mn(()=>(b(w),()=>k(w)),[b,k,w]),i.jsxs(i.Fragment,{children:[i.jsx(Je.span,{id:d.textId,...o,ref:v}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Hu.createPortal(o.children,a.valueNode):null]})});DA.displayName=Kd;var LA="SelectItemIndicator",UA=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return OA(LA,n).isSelected?i.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});UA.displayName=LA;var By="SelectScrollUpButton",FA=g.forwardRef((t,e)=>{const n=Zo(By,t.__scopeSelect),r=yw(By,t.__scopeSelect),[s,o]=g.useState(!1),a=ct(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollTop>0;o(h)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(BA,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});FA.displayName=By;var $y="SelectScrollDownButton",VA=g.forwardRef((t,e)=>{const n=Zo($y,t.__scopeSelect),r=yw($y,t.__scopeSelect),[s,o]=g.useState(!1),a=ct(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<h;o(m)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(BA,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});VA.displayName=$y;var BA=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,o=Zo("SelectScrollButton",n),a=g.useRef(null),l=Mp(n),d=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>d(),[d]),mn(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),i.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Re(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Re(s.onPointerMove,()=>{o.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Re(s.onPointerLeave,()=>{d()})})}),bH="SelectSeparator",wH=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});wH.displayName=bH;var zy="SelectArrow",SH=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Dp(n),o=Qo(zy,n),a=Zo(zy,n);return o.open&&a.position==="popper"?i.jsx(yb,{...s,...r,ref:e}):null});SH.displayName=zy;var kH="SelectBubbleInput",$A=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),o=ct(r,s),a=tH(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&m){const f=new Event("change",{bubbles:!0});m.call(l,e),l.dispatchEvent(f)}},[a,e]),i.jsx(Je.select,{...n,style:{...ZP,...n.style},ref:o,defaultValue:e})});$A.displayName=kH;function zA(t){return t===""||t===void 0}function qA(t){const e=Mn(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),(function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(l)},[e]),o=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function WA(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=jH(t,Math.max(o,0));s.length===1&&(a=a.filter(h=>h!==n));const d=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==n?d:void 0}function jH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var CH=bA,TH=SA,NH=jA,EH=CA,PH=TA,_H=NA,RH=RA,AH=MA,IH=DA,OH=UA,MH=FA,DH=VA;function qa({...t}){return i.jsx(CH,{"data-slot":"select",...t})}function Wa({...t}){return i.jsx(NH,{"data-slot":"select-value",...t})}function Ha({className:t,size:e="default",children:n,...r}){return i.jsxs(TH,{"data-slot":"select-trigger","data-size":e,className:Pe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,i.jsx(EH,{asChild:!0,children:i.jsx(cp,{className:"size-4 opacity-50"})})]})}function Ga({className:t,children:e,position:n="popper",...r}){return i.jsx(PH,{children:i.jsxs(_H,{"data-slot":"select-content",className:Pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(LH,{}),i.jsx(RH,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),i.jsx(UH,{})]})})}function tn({className:t,children:e,...n}){return i.jsxs(AH,{"data-slot":"select-item",className:Pe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[i.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:i.jsx(OH,{children:i.jsx(ns,{className:"size-4"})})}),i.jsx(IH,{children:e})]})}function LH({className:t,...e}){return i.jsx(MH,{"data-slot":"select-scroll-up-button",className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(LE,{className:"size-4"})})}function UH({className:t,...e}){return i.jsx(DH,{"data-slot":"select-scroll-down-button",className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(cp,{className:"size-4"})})}function Ou(t){if(!t)return"-";const e=typeof t=="string"?parseInt(t,10):t;return isNaN(e)||e<=0?"-":`${(e/100).toFixed(2).replace(".",",")}cm`}function FH(t){if(!t)return"-";const e=typeof t=="string"?parseFloat(t):t;return isNaN(e)||e<=0?"-":`${e.toFixed(1).replace(".",",")}kg`}function VH({onSelectAthlete:t}){const[e,n]=g.useState(""),[r,s]=g.useState("all"),[o,a]=g.useState([]),[l,d]=g.useState(!1),[h,m]=g.useState(!0);g.useEffect(()=>{v(),f()},[r]);async function f(){try{const k=await Rt.getSession();d(!!k)}catch{d(!1)}}async function v(){m(!0);try{const k={type:"athlete"};r!=="all"&&(k.position=r);const{users:j}=await ar.getUsers(k);console.log("📊 Atletas carregados:",j),j&&j.length>0&&(console.log("📸 Exemplo de atleta:",j[0]),console.log("📸 Campos de foto disponíveis:",{photo_url:j[0].photo_url,photoUrl:j[0].photoUrl,avatar_url:j[0].avatar_url,avatarUrl:j[0].avatarUrl,profile_picture:j[0].profile_picture,picture:j[0].picture})),a(j||[])}catch(k){console.error("Error loading athletes:",k),a([]),K.error("Erro ao carregar atletas")}finally{m(!1)}}async function y(k){if(!l){K.error("Faça login para seguir atletas");return}try{await Sp.toggleFollow(k),K.success("Seguindo atleta!"),v()}catch(j){console.error("Error following athlete:",j),K.error(j.message||"Erro ao seguir atleta")}}const w=o.filter(k=>!k||!k.name?!1:k.name.toLowerCase().includes(e.toLowerCase())),b=Array.from(new Set(o.map(k=>k.position).filter(Boolean)));return i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Atletas"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Conecte-se com os melhores do vôlei"})]}),i.jsxs(Se,{className:"bg-gradient-to-r from-primary to-secondary text-white",children:[o.length," atletas"]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(K0,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ht,{placeholder:"Buscar atletas...",value:e,onChange:k=>n(k.target.value),className:"pl-9"})]}),i.jsxs(qa,{value:r,onValueChange:s,children:[i.jsx(Ha,{className:"w-[200px]",children:i.jsx(Wa,{placeholder:"Filtrar por posição"})}),i.jsxs(Ga,{children:[i.jsx(tn,{value:"all",children:"Todas as posições"}),b.map(k=>i.jsx(tn,{value:k,children:k},k))]})]})]}),h?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center space-y-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando atletas..."})]})}):w.length===0?i.jsx(ie,{className:"col-span-full",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[i.jsx("div",{className:"text-6xl",children:"🏐"}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Nenhum atleta encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:e||r!=="all"?"Tente ajustar os filtros de busca":"Seja o primeiro atleta a se cadastrar no VolleyPro!"})]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:w.map(k=>i.jsx(ie,{className:"overflow-hidden hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer border-2 hover:border-primary/50",onClick:()=>t(k.id),children:i.jsxs(ce,{className:"p-0",children:[i.jsxs("div",{className:"relative aspect-[3/4] bg-gradient-to-br from-primary/10 to-secondary/10",children:[i.jsxs(Gt,{className:"w-full h-full rounded-none",children:[(k.photo_url||k.photoUrl||k.avatar_url||k.avatarUrl||k.profile_picture||k.picture)&&i.jsx(rn,{src:k.photo_url||k.photoUrl||k.avatar_url||k.avatarUrl||k.profile_picture||k.picture,alt:k.name,className:"object-cover",onError:j=>{console.error("❌ Erro ao carregar imagem do atleta:",k.name,{photo_url:k.photo_url,photoUrl:k.photoUrl,avatar_url:k.avatar_url,avatarUrl:k.avatarUrl}),j.currentTarget.style.display="none"},onLoad:()=>{console.log("✅ Imagem carregada com sucesso:",k.name)}}),i.jsx(Kt,{className:"rounded-none text-6xl bg-gradient-to-br from-primary/20 to-secondary/20",children:k.name?.[0]||"A"})]}),k.verified&&i.jsx("div",{className:"absolute top-3 right-3",children:i.jsxs(Se,{className:"bg-green-500 text-white gap-1 shadow-lg",children:[i.jsx($e,{className:"h-3 w-3"}),"Verificado"]})}),k.freeAgent&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsx(Se,{className:"bg-orange-500 text-white gap-1 shadow-lg",children:"Disponível"})}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/60 to-transparent p-4",children:[i.jsx("h3",{className:"text-white mb-1",children:k.name}),i.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[i.jsx(wt,{className:"h-4 w-4"}),i.jsxs("span",{children:[(k.followers||0).toLocaleString("pt-BR")," seguidores"]})]})]})]}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.position&&i.jsx(Se,{variant:"secondary",className:"text-xs",children:k.position}),k.age&&i.jsxs(Se,{variant:"secondary",className:"text-xs",children:[k.age," anos"]}),k.city&&i.jsx(Se,{variant:"secondary",className:"text-xs",children:k.city})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[k.height&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Altura:"}),i.jsx("span",{children:Ou(k.height)})]}),k.team&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Time:"}),i.jsx("span",{className:"truncate ml-2",children:k.team})]}),!k.team&&i.jsxs("div",{className:"flex items-center justify-center gap-1 text-orange-500 py-1",children:[i.jsx(_s,{className:"h-3 w-3"}),i.jsx("span",{className:"text-xs",children:"Livre no mercado"})]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(q,{variant:"outline",size:"sm",className:"flex-1",onClick:j=>{j.stopPropagation(),y(k.id.toString())},disabled:!l,children:"Seguir"}),i.jsx(q,{size:"sm",className:"flex-1 bg-primary hover:bg-primary/90",children:"Ver Perfil"})]})]})]})},k.id))})]})}function BH({onSelectTeam:t}){const[e,n]=g.useState(""),[r,s]=g.useState([]),[o,a]=g.useState(!0),[l,d]=g.useState(!1);g.useEffect(()=>{m(),h()},[]);async function h(){try{const y=await Rt.getSession();d(!!y)}catch{d(!1)}}async function m(){a(!0);try{console.log("🔍 Carregando times...");const{users:y}=await ar.getUsers({type:"team"});console.log("✅ Times carregados:",y?.length||0,y),s(y||[])}catch(y){console.error("❌ Error loading teams:",y),s([]),K.error("Erro ao carregar times")}finally{a(!1)}}async function f(y){if(!l){K.error("Faça login para seguir times");return}try{await Sp.toggleFollow(y),K.success("Seguindo time!"),m()}catch(w){console.error("Error following team:",w),K.error(w.message||"Erro ao seguir time")}}const v=r.filter(y=>y?y.name?.toLowerCase().includes(e.toLowerCase())||y.city?.toLowerCase().includes(e.toLowerCase()):!1);return i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Times"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Descubra equipes de todo o Brasil"})]}),i.jsxs(Se,{className:"bg-gradient-to-r from-secondary to-primary text-white",children:[r.length," times"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(K0,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ht,{placeholder:"Buscar times por nome ou cidade...",value:e,onChange:y=>n(y.target.value),className:"pl-9"})]}),o?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center space-y-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando times..."})]})}):v.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[i.jsx("div",{className:"text-6xl",children:"🏐"}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Nenhum time encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:e?"Tente ajustar os filtros de busca":"Seja o primeiro time a se cadastrar no VolleyPro!"})]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(y=>i.jsxs(ie,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{console.log("🏐 Time clicado:",y.id,y.name),t(y.id)},children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Gt,{className:"h-14 w-14",children:i.jsx(Kt,{className:"bg-primary text-primary-foreground",children:y?.name?y.name.split(" ").map(w=>w[0]).join("").slice(0,2).toUpperCase():"TM"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{children:y?.name||"Time"}),y?.verified&&i.jsx($e,{className:"h-4 w-4 text-blue-500"})]}),i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground text-sm",children:[i.jsx(_s,{className:"h-3 w-3"}),y?.city||"Não informado"]})]})]})}),i.jsxs(ce,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Fundado em:"}),i.jsx("span",{children:y?.founded||"-"})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(Nt,{className:"h-4 w-4"}),i.jsx("span",{children:"Títulos:"})]}),i.jsx("span",{children:y?.championships||0})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx(wt,{className:"h-4 w-4"}),i.jsx("span",{children:"Jogadores:"})]}),i.jsx("span",{children:Array.isArray(y.players)?y.players.length:0})]}),i.jsxs("div",{className:"text-muted-foreground text-sm",children:[(y.followers||0).toLocaleString()," seguidores"]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(q,{variant:"outline",size:"sm",className:"flex-1",onClick:w=>{w.stopPropagation(),f(y.id.toString())},disabled:!l,children:"Seguir"}),i.jsx(q,{size:"sm",className:"flex-1",children:"Ver perfil"})]})]})]},y.id))})]})}function qy({className:t,...e}){return i.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:i.jsx("table",{"data-slot":"table",className:Pe("w-full caption-bottom text-sm",t),...e})})}function Wy({className:t,...e}){return i.jsx("thead",{"data-slot":"table-header",className:Pe("[&_tr]:border-b",t),...e})}function Hy({className:t,...e}){return i.jsx("tbody",{"data-slot":"table-body",className:Pe("[&_tr:last-child]:border-0",t),...e})}function cc({className:t,...e}){return i.jsx("tr",{"data-slot":"table-row",className:Pe("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...e})}function Bn({className:t,...e}){return i.jsx("th",{"data-slot":"table-head",className:Pe("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}function $n({className:t,...e}){return i.jsx("td",{"data-slot":"table-cell",className:Pe("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}var $H="Label",HA=g.forwardRef((t,e)=>i.jsx(Je.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));HA.displayName=$H;var zH=HA;function ze({className:t,...e}){return i.jsx(zH,{"data-slot":"label",className:Pe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function qH({open:t,onClose:e,onSuccess:n}){const[r,s]=g.useState(!1),[o,a]=g.useState(""),[l,d]=g.useState(""),[h,m]=g.useState(""),[f,v]=g.useState(""),[y,w]=g.useState("16"),[b,k]=g.useState("single_elimination"),j=async()=>{if(!o||!l||!h||!f){K.error("Preencha todos os campos");return}s(!0);try{await Yn.createTournament({name:o,location:l,startDate:h,endDate:f,maxTeams:parseInt(y),format:b}),K.success("🏆 Torneio criado com sucesso!"),n(),e(),a(""),d(""),m(""),v(""),w("16")}catch(T){console.error("Error creating tournament:",T),K.error(T.message||"Erro ao criar torneio")}finally{s(!1)}};return i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"sm:max-w-md",children:[i.jsxs(fn,{children:[i.jsx(on,{children:"Criar Novo Torneio"}),i.jsx(Ln,{children:"Organize um torneio e convide times para participar"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"tournament-name",children:"Nome do Torneio"}),i.jsx(ht,{id:"tournament-name",placeholder:"Ex: Copa VolleyPro 2025",value:o,onChange:T=>a(T.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"tournament-location",children:"Local"}),i.jsx(ht,{id:"tournament-location",placeholder:"Ex: São Paulo, SP",value:l,onChange:T=>d(T.target.value)})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"start-date",children:"Data de Início"}),i.jsx(ht,{id:"start-date",type:"date",value:h,onChange:T=>m(T.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"end-date",children:"Data de Término"}),i.jsx(ht,{id:"end-date",type:"date",value:f,onChange:T=>v(T.target.value)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"max-teams",children:"Número Máximo de Times"}),i.jsx(ht,{id:"max-teams",type:"number",min:"4",max:"64",value:y,onChange:T=>w(T.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"format",children:"Formato do Torneio"}),i.jsxs(qa,{value:b,onValueChange:T=>k(T),children:[i.jsx(Ha,{id:"format",children:i.jsx(Wa,{})}),i.jsxs(Ga,{children:[i.jsx(tn,{value:"single_elimination",children:"🏆 Eliminação Simples"}),i.jsx(tn,{value:"round_robin",children:"🔄 Todos contra Todos"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:b==="single_elimination"?"⚡ Bracket estilo playoff - quem perde está eliminado":"🔄 Cada time joga contra todos os outros"})]})]}),i.jsxs(Hi,{children:[i.jsx(q,{variant:"outline",onClick:e,children:"Cancelar"}),i.jsx(q,{onClick:j,disabled:r,children:r?"Criando...":"Criar Torneio"})]})]})})}const Ll={levantador:4,ponteiro:6,oposto:3,central:4,libero:2,tecnico:1,auxiliar:4},Rm={levantador:"Levantador",ponteiro:"Ponteiro",oposto:"Oposto",central:"Central",libero:"Líbero",tecnico:"Técnico",auxiliar:"Auxiliar Técnico"},fT={levantador:"🏐",ponteiro:"⚡",oposto:"💪",central:"🛡️",libero:"🦸",tecnico:"👨‍🏫",auxiliar:"👨‍💼"};function WH({open:t,onClose:e,tournamentId:n,tournamentName:r,teamId:s,teamName:o}){const[a,l]=g.useState({levantador:[],ponteiro:[],oposto:[],central:[],libero:[],tecnico:[],auxiliar:[]}),[d,h]=g.useState(""),[m,f]=g.useState(null),[v,y]=g.useState(!1),[w,b]=g.useState(!1),[k,j]=g.useState(!0),[T,E]=g.useState(!1);g.useEffect(()=>{t&&P()},[t,n,s]);async function P(){try{const{roster:D}=await Yn.getRoster(n,s);D&&Object.keys(D).length>0&&(l(D),E(!0),j(!1))}catch{console.log("Nenhuma convocação existente")}}async function N(D,A){if(!D||D.length<11){K.error("CPF inválido",{description:"Digite um CPF válido com 11 dígitos"});return}const Z=D.replace(/\D/g,"");y(!0);try{const{player:se}=await Yn.searchPlayerByCPF(Z,s);if(!se){K.error("Jogador não encontrado",{description:"Nenhum atleta com este CPF está cadastrado no seu time"});return}if(Object.values(a).some(de=>de.some(U=>U.cpf===Z))){K.error("Jogador já convocado",{description:"Este atleta já foi adicionado à convocação"});return}if(a[A].length>=Ll[A]){K.error("Limite atingido",{description:`Você já atingiu o limite de ${Ll[A]} ${Rm[A]}(s)`});return}const ae={id:se.id,name:se.name,cpf:Z,photoUrl:se.photoUrl,position:A,status:"pending"};l(de=>({...de,[A]:[...de[A],ae]})),h(""),f(null),K.success(`${se.name} adicionado!`,{description:"Aguardando confirmação do atleta"})}catch(se){console.error("Erro ao buscar jogador:",se),K.error(se.message||"Erro ao buscar jogador")}finally{y(!1)}}function _(D,A){l(Z=>({...Z,[D]:Z[D].filter(se=>se.cpf!==A)})),K.info("Jogador removido da convocação")}async function I(){if(Object.values(a).reduce((A,Z)=>A+Z.length,0)<6){K.error("Convocação incompleta",{description:"Você precisa convocar pelo menos 6 jogadores"});return}if(a.tecnico.length===0){K.error("Técnico obrigatório",{description:"Você precisa convocar um técnico"});return}b(!0);try{await Yn.saveRoster(n,s,a),K.success("Convocação salva!",{description:"Os jogadores convocados foram notificados e precisam confirmar"}),j(!1),E(!0)}catch(A){console.error("Erro ao salvar convocação:",A),K.error(A.message||"Erro ao salvar convocação")}finally{b(!1)}}function M(){return Object.values(a).reduce((D,A)=>D+A.length,0)}function O(D){switch(D){case"confirmed":return i.jsx($e,{className:"h-4 w-4 text-green-500"});case"pending":return i.jsx(Vr,{className:"h-4 w-4 text-yellow-500"});case"declined":return i.jsx(cr,{className:"h-4 w-4 text-red-500"})}}function L(D){return D.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}return i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[i.jsx(fn,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-secondary",children:i.jsx(wt,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsxs(on,{children:["Convocação - ",r]}),i.jsxs(Ln,{children:[o," • Monte sua equipe para o torneio"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[i.jsx(ie,{children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Nt,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),i.jsx("p",{className:"text-2xl font-bold",children:M()}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Convocados"})]})})}),i.jsx(ie,{children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx($e,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),i.jsx("p",{className:"text-2xl font-bold",children:Object.values(a).flat().filter(D=>D.status==="confirmed").length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Confirmados"})]})})}),i.jsx(ie,{children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Vr,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),i.jsx("p",{className:"text-2xl font-bold",children:Object.values(a).flat().filter(D=>D.status==="pending").length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pendentes"})]})})})]}),k?i.jsxs(i.Fragment,{children:[i.jsxs(ie,{className:"border-primary/20 bg-primary/5",children:[i.jsx(et,{children:i.jsxs(Vt,{className:"text-base flex items-center gap-2",children:[i.jsx(K0,{className:"h-5 w-5"}),"Adicionar Jogador"]})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{children:"1. Selecione a posição"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Object.keys(Ll).map(D=>i.jsxs(q,{variant:m===D?"default":"outline",size:"sm",onClick:()=>f(D),disabled:a[D].length>=Ll[D],className:"flex items-center justify-between w-full gap-2 px-3",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[i.jsx("span",{className:"shrink-0",children:fT[D]}),i.jsx("span",{className:"text-sm truncate",children:Rm[D]})]}),i.jsxs(Se,{variant:"secondary",className:"shrink-0",children:[a[D].length,"/",Ll[D]]})]},D))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"search-cpf",className:"text-base",children:"2. Digite o CPF do Jogador"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ht,{id:"search-cpf",placeholder:"000.000.000-00",value:d,onChange:D=>{let A=D.target.value.replace(/\D/g,"");A.length>11&&(A=A.slice(0,11)),A.length>9?A=A.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):A.length>6?A=A.replace(/(\d{3})(\d{3})(\d{3})/,"$1.$2.$3"):A.length>3&&(A=A.replace(/(\d{3})(\d{3})/,"$1.$2")),h(A)},disabled:!m||v,maxLength:14,className:"flex-1 h-11"}),i.jsx(q,{onClick:()=>{m&&N(d,m)},disabled:!m||!d||v,className:"shrink-0 h-11",children:v?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Buscando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),"Adicionar"]})})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:m?`💡 Digite o CPF do ${Rm[m].toLowerCase()} que deseja convocar`:"⚠️ Selecione uma posição primeiro"})]})]})]}),i.jsx(Jn,{})]}):i.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-green-600"}),i.jsx("p",{className:"text-sm text-green-800",children:"Convocação salva! Os jogadores foram notificados."})]}),i.jsxs(q,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[i.jsx(BL,{className:"h-4 w-4 mr-2"}),"Editar"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[i.jsx(wt,{className:"h-5 w-5"}),"Escalação"]}),Object.keys(a).map(D=>i.jsx("div",{children:a[D].length>0&&i.jsxs(ie,{children:[i.jsx(et,{className:"pb-3",children:i.jsxs(Vt,{className:"text-sm flex items-center gap-2",children:[i.jsx("span",{children:fT[D]}),Rm[D],i.jsxs(Se,{variant:"secondary",className:"ml-auto",children:[a[D].length,"/",Ll[D]]})]})}),i.jsx(ce,{children:i.jsx("div",{className:"space-y-2",children:a[D].map(A=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:A.photoUrl?i.jsx("img",{src:A.photoUrl,alt:A.name,className:"h-full w-full rounded-full object-cover"}):i.jsx(wt,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:A.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["CPF: ",L(A.cpf)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[O(A.status),i.jsxs(Se,{variant:A.status==="confirmed"?"default":A.status==="pending"?"secondary":"destructive",children:[A.status==="confirmed"&&"Confirmado",A.status==="pending"&&"Aguardando",A.status==="declined"&&"Recusou"]}),k&&i.jsx(q,{variant:"ghost",size:"icon",onClick:()=>_(D,A.cpf),className:"text-destructive hover:text-destructive",children:i.jsx(N3,{className:"h-4 w-4"})})]})]},A.cpf))})})]})},D)),M()===0&&i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(wt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Nenhum jogador convocado ainda"}),i.jsx("p",{className:"text-sm mt-1",children:"Comece adicionando jogadores pela busca de CPF"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(q,{variant:"outline",onClick:e,className:"flex-1",children:T?"Fechar":"Cancelar"}),k&&i.jsx(q,{onClick:I,disabled:w||M()===0,className:"flex-1 bg-gradient-to-r from-primary to-secondary",children:w?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Salvando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),T?"Atualizar Convocação":"Finalizar Convocação"]})})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:[i.jsx("p",{className:"font-semibold mb-1",children:"📋 Informações importantes:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[i.jsx("li",{children:"Mínimo de 6 jogadores e 1 técnico obrigatório"}),i.jsx("li",{children:"Apenas jogadores do seu time podem ser convocados"}),i.jsx("li",{children:"Os jogadores receberão notificação e precisam confirmar"}),i.jsx("li",{children:"Você pode editar a convocação até o início do torneio"})]})]})]})})}function HH({open:t,onClose:e,tournamentId:n,currentUserId:r,userType:s,onRegistrationSuccess:o}){const[a,l]=g.useState(!1),[d,h]=g.useState(null),[m,f]=g.useState([]),[v,y]=g.useState([]),[w,b]=g.useState([]),[k,j]=g.useState([]),[T,E]=g.useState(null),[P,N]=g.useState(""),[_,I]=g.useState(""),[M,O]=g.useState(""),[L,D]=g.useState(""),[A,Z]=g.useState(!1),[se,fe]=g.useState(""),[ae,de]=g.useState(!1),[U,G]=g.useState(!1),[le,$]=g.useState("");g.useEffect(()=>{t&&n&&n!==""&&ee()},[t,n]);async function ee(){if(!n||n===""||n==="undefined"){console.warn("⚠️ TournamentDetailsModal: ID inválido"),e();return}l(!0);try{const{tournament:me,matches:it,teams:yt}=await Yn.getTournamentDetails(n);if(!me){console.error("❌ Torneio não encontrado:",n),K.error("Torneio não encontrado"),e();return}if(h(me),f(it||[]),y(yt||[]),r&&me.registeredTeams?.includes(r))try{const vt=await ar.getCurrentUser();vt.profile&&vt.profile.userType==="team"&&$(vt.profile.name)}catch(vt){console.warn("⚠️ Erro ao carregar dados do usuário:",vt)}if(me.status==="ongoing"||me.status==="finished")try{const{standings:vt}=await Yn.getStandings(n);b(vt||[])}catch(vt){console.warn("⚠️ Erro ao carregar classificação:",vt),b([])}try{const{rankings:vt}=await Yn.getMVPRankings(n);j(vt||[])}catch(vt){console.warn("⚠️ Erro ao carregar MVP rankings:",vt),j([])}}catch(me){console.error("❌ Error loading tournament:",me),K.error(me.message||"Erro ao carregar torneio"),e()}finally{l(!1)}}async function he(){try{l(!0),await Yn.drawBrackets(n),K.success("🎲 Sorteio realizado! O torneio começou!"),await ee()}catch(me){console.error("Error drawing brackets:",me),K.error(me.message||"Erro ao sortear")}finally{l(!1)}}async function B(){if(T)try{l(!0),await Yn.updateMatchResult(n,T.id,{homeScore:parseInt(P),awayScore:parseInt(_),homeSets:parseInt(M),awaySets:parseInt(L)}),K.success("✅ Resultado registrado!"),E(null),N(""),I(""),O(""),D(""),await ee()}catch(me){console.error("Error updating match:",me),K.error(me.message||"Erro ao atualizar resultado")}finally{l(!1)}}async function te(){try{l(!0),console.log("📝 Registering team in tournament:",{tournamentId:n,currentUserId:r,userType:s}),await Yn.registerTeam(n),K.success("🏐 Time inscrito com sucesso!",{description:"Agora você pode convocar seus atletas"}),await ee(),o&&o()}catch(me){console.error("❌ Error registering:",me),K.error(me.message||"Erro ao inscrever")}finally{l(!1)}}async function Te(){try{l(!0),await Yn.unregisterTeam(n),K.success("Inscrição cancelada"),await ee()}catch(me){console.error("Error unregistering:",me),K.error(me.message||"Erro ao cancelar inscrição")}finally{l(!1)}}async function re(){if(!se.trim()){K.error("Por favor, informe o motivo do cancelamento");return}try{de(!0),await Yn.cancelTournament(n,se.trim()),K.success("🚫 Torneio cancelado",{description:"Todos os times inscritos foram notificados"}),Z(!1),fe(""),await ee(),e()}catch(me){console.error("Error cancelling tournament:",me),K.error(me.message||"Erro ao cancelar torneio")}finally{de(!1)}}if(!t||!n)return null;if(a&&!d)return i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"max-w-4xl",children:[i.jsxs(fn,{className:"sr-only",children:[i.jsx(on,{children:"Carregando Torneio"}),i.jsx(Ln,{children:"Aguarde enquanto carregamos os detalhes do torneio"})]}),i.jsx("div",{className:"flex items-center justify-center p-12",children:i.jsxs("div",{className:"text-center space-y-3",children:[i.jsx("div",{className:"h-12 w-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando torneio..."})]})})]})});if(!d)return null;const ge=r===d.organizerId,_e=d.registeredTeams?.includes(r),ve=s==="team"&&d.status==="upcoming"&&!_e,Ee=s==="team"&&d.status==="upcoming"&&_e;return console.log("🔍 TournamentDetailsModal debug:",{tournamentId:n,tournamentName:d.name,tournamentStatus:d.status,organizerId:d.organizerId,currentUserId:r,userType:s,isOrganizer:ge,isRegistered:_e,canRegister:ve,canUnregister:Ee,registeredTeams:d.registeredTeams,registeredTeamsLength:d.registeredTeams?.length||0,isRegisteredCheck:{registeredTeamsArray:d.registeredTeams,includes:d.registeredTeams?.includes(r),comparison:`currentUserId (${r}) in [${d.registeredTeams?.join(", ")}]`}}),i.jsxs(sn,{open:t,onOpenChange:e,children:[i.jsxs(Yt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx(fn,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-secondary",children:i.jsx(Nt,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx(on,{children:d.name}),i.jsxs(Ln,{children:["Organizado por ",d.organizerName]})]})]}),i.jsxs(Se,{variant:d.status==="ongoing"?"default":d.status==="cancelled"?"destructive":"secondary",children:[d.status==="upcoming"&&"📅 Em breve",d.status==="ongoing"&&"🏐 Em andamento",d.status==="finished"&&"🏆 Finalizado",d.status==="cancelled"&&"🚫 Cancelado"]})]})}),d.status==="cancelled"&&d.cancellationReason&&i.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(fc,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-destructive mb-1",children:"Torneio Cancelado"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.jsx("strong",{children:"Motivo:"})," ",d.cancellationReason]}),d.cancelledAt&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Cancelado em ",new Date(d.cancelledAt).toLocaleDateString("pt-BR")," às ",new Date(d.cancelledAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Início"}),i.jsx("p",{children:new Date(d.startDate).toLocaleDateString()})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_s,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Local"}),i.jsx("p",{children:d.location})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wt,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Times"}),i.jsxs("p",{children:[d.registeredTeams?.length||0,"/",d.maxTeams]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Formato"}),i.jsx("p",{children:d.format==="single_elimination"?"Eliminatória":"Todos vs Todos"})]})]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap justify-between",children:[i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[ge&&d.status==="upcoming"&&d.registeredTeams?.length>=2&&i.jsxs(q,{onClick:he,disabled:a,children:[i.jsx(ff,{className:"h-4 w-4 mr-2"}),"Sortear e Iniciar Torneio"]}),ve&&i.jsxs(q,{onClick:()=>{console.log("🎯 Inscrever button clicked:",{tournamentId:n,currentUserId:r,userType:s,isRegistered:_e}),te()},disabled:a,className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90",children:[i.jsx($e,{className:"h-4 w-4 mr-2"}),"Inscrever Meu Time"]}),Ee&&i.jsxs(q,{variant:"outline",onClick:()=>{console.log("🎯 Cancelar inscrição button clicked:",{tournamentId:n,currentUserId:r}),Te()},disabled:a,children:[i.jsx(cr,{className:"h-4 w-4 mr-2"}),"Cancelar Inscrição"]}),_e&&s==="team"&&i.jsxs(q,{onClick:()=>G(!0),disabled:a,className:"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600",children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),"Convocação"]}),!s&&d.status==="upcoming"&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-900 rounded-lg px-4 py-2 text-sm text-blue-800 dark:text-blue-200",children:"ℹ️ Faça login como time para se inscrever neste torneio"}),s&&s!=="team"&&d.status==="upcoming"&&i.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-900 rounded-lg px-4 py-2 text-sm text-amber-800 dark:text-amber-200",children:"ℹ️ Apenas times podem se inscrever em torneios. Atletas participam através de convocação."}),_e&&d.status==="upcoming"&&i.jsx("div",{className:"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-900 rounded-lg px-4 py-2 text-sm text-green-800 dark:text-green-200",children:'✅ Seu time está inscrito! Use o botão "Convocação" para adicionar seus atletas.'}),d.status==="ongoing"&&!_e&&i.jsx("div",{className:"bg-gray-50 dark:bg-gray-950/30 border border-gray-200 dark:border-gray-900 rounded-lg px-4 py-2 text-sm text-gray-800 dark:text-gray-200",children:"⚠️ Torneio em andamento - inscrições encerradas"}),d.status==="cancelled"&&i.jsx("div",{className:"bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-900 rounded-lg px-4 py-2 text-sm text-red-800 dark:text-red-200",children:"🚫 Torneio cancelado"})]}),ge&&d.status!=="finished"&&d.status!=="cancelled"&&i.jsxs(q,{variant:"destructive",onClick:()=>Z(!0),disabled:a,children:[i.jsx(fc,{className:"h-4 w-4 mr-2"}),"Cancelar Torneio"]})]}),i.jsxs(Ji,{defaultValue:"teams",className:"mt-4",children:[i.jsxs(Yi,{className:"grid w-full grid-cols-4",children:[i.jsxs(mt,{value:"teams",children:["Times (",v.length,")"]}),i.jsxs(mt,{value:"matches",children:["Jogos (",m.length,")"]}),i.jsx(mt,{value:"standings",children:"Classificação"}),i.jsx(mt,{value:"mvp",children:"MVP"})]}),i.jsx(ft,{value:"teams",className:"space-y-2",children:v.length===0?i.jsx(ie,{children:i.jsx(ce,{className:"p-6 text-center text-muted-foreground",children:"Nenhum time inscrito ainda"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:v.map((me,it)=>i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 flex items-center gap-3",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-primary to-secondary text-white",children:it+1}),i.jsxs("div",{children:[i.jsx("p",{children:me.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:me.city})]})]})},me.id))})}),i.jsxs(ft,{value:"matches",className:"space-y-3",children:[m.length===0?i.jsx(ie,{children:i.jsx(ce,{className:"p-6 text-center text-muted-foreground",children:d.status==="upcoming"?"Aguardando sorteio...":"Nenhum jogo agendado"})}):m.map(me=>{const it=v.find(vt=>vt.id===me.homeTeamId),yt=v.find(vt=>vt.id===me.awayTeamId);return i.jsx(ie,{children:i.jsxs(ce,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{children:it?.name||"Time A"}),me.status==="completed"&&i.jsx("span",{className:"text-lg",children:me.homeSets})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:yt?.name||yt?"Time B":"(BYE)"}),me.status==="completed"&&yt&&i.jsx("span",{className:"text-lg",children:me.awaySets})]})]}),i.jsx("div",{className:"ml-4",children:me.status==="pending"?i.jsxs(i.Fragment,{children:[ge&&yt&&i.jsx(q,{size:"sm",onClick:()=>E(me),children:"Registrar Resultado"}),!ge&&i.jsx(Se,{variant:"outline",children:"Pendente"})]}):i.jsx(Se,{children:"Concluído"})})]}),me.status==="completed"&&i.jsxs("div",{className:"mt-2 pt-2 border-t text-sm text-muted-foreground",children:["Placar: ",me.homeScore," x ",me.awayScore," pontos"]})]})},me.id)}),T&&i.jsxs(ie,{className:"border-primary",children:[i.jsx(et,{children:i.jsx("h4",{children:"Registrar Resultado"})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ze,{children:v.find(me=>me.id===T.homeTeamId)?.name}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"home-sets",className:"text-xs",children:"Sets"}),i.jsx(ht,{id:"home-sets",type:"number",min:"0",max:"5",value:M,onChange:me=>O(me.target.value)})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"home-score",className:"text-xs",children:"Pontos"}),i.jsx(ht,{id:"home-score",type:"number",min:"0",value:P,onChange:me=>N(me.target.value)})]})]})]}),i.jsxs("div",{children:[i.jsx(ze,{children:v.find(me=>me.id===T.awayTeamId)?.name}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"away-sets",className:"text-xs",children:"Sets"}),i.jsx(ht,{id:"away-sets",type:"number",min:"0",max:"5",value:L,onChange:me=>D(me.target.value)})]}),i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"away-score",className:"text-xs",children:"Pontos"}),i.jsx(ht,{id:"away-score",type:"number",min:"0",value:_,onChange:me=>I(me.target.value)})]})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(q,{onClick:B,disabled:a,children:"Salvar Resultado"}),i.jsx(q,{variant:"outline",onClick:()=>E(null),children:"Cancelar"})]})]})]})]}),i.jsx(ft,{value:"standings",children:w.length===0?i.jsx(ie,{children:i.jsx(ce,{className:"p-6 text-center text-muted-foreground",children:"Classificação será exibida após os primeiros jogos"})}):i.jsx(ie,{children:i.jsx(ce,{className:"p-0",children:i.jsxs(qy,{children:[i.jsx(Wy,{children:i.jsxs(cc,{children:[i.jsx(Bn,{className:"w-12",children:"Pos"}),i.jsx(Bn,{children:"Time"}),i.jsx(Bn,{className:"text-center",children:"J"}),i.jsx(Bn,{className:"text-center",children:"V"}),i.jsx(Bn,{className:"text-center",children:"D"}),i.jsx(Bn,{className:"text-center",children:"Sets"}),i.jsx(Bn,{className:"text-center",children:"Pts"})]})}),i.jsx(Hy,{children:w.map((me,it)=>i.jsxs(cc,{children:[i.jsxs($n,{children:[it===0&&i.jsx("span",{children:"🥇"}),it===1&&i.jsx("span",{children:"🥈"}),it===2&&i.jsx("span",{children:"🥉"}),it>2&&i.jsx("span",{children:it+1})]}),i.jsx($n,{children:me.teamName}),i.jsx($n,{className:"text-center",children:me.played}),i.jsx($n,{className:"text-center",children:me.wins}),i.jsx($n,{className:"text-center",children:me.losses}),i.jsxs($n,{className:"text-center",children:[me.setsWon,"-",me.setsLost]}),i.jsx($n,{className:"text-center",children:i.jsx(Se,{children:me.points})})]},me.teamId))})]})})})}),i.jsx(ft,{value:"mvp",children:k.length===0?i.jsx(ie,{children:i.jsx(ce,{className:"p-6 text-center text-muted-foreground",children:"Nenhum voto para MVP ainda"})}):i.jsx(ie,{children:i.jsx(ce,{className:"p-0",children:i.jsxs(qy,{children:[i.jsx(Wy,{children:i.jsxs(cc,{children:[i.jsx(Bn,{className:"w-12",children:"Pos"}),i.jsx(Bn,{children:"Atleta"}),i.jsx(Bn,{children:"Posição"}),i.jsx(Bn,{className:"text-center",children:"Votos"}),i.jsx(Bn,{className:"text-center",children:"Pontos"})]})}),i.jsx(Hy,{children:k.map(me=>i.jsxs(cc,{children:[i.jsxs($n,{children:[me.position===1&&i.jsx(Ia,{className:"h-5 w-5 text-amber-500"}),me.position===2&&i.jsx(Ia,{className:"h-5 w-5 text-gray-400"}),me.position===3&&i.jsx(Ia,{className:"h-5 w-5 text-orange-600"}),me.position>3&&i.jsx("span",{children:me.position})]}),i.jsx($n,{children:me.athleteName}),i.jsx($n,{children:me.athletePosition}),i.jsx($n,{className:"text-center",children:me.totalVotes}),i.jsx($n,{className:"text-center",children:i.jsx(Se,{variant:"secondary",children:me.totalPoints})})]},me.athleteId))})]})})})})]})]}),U&&r&&i.jsx(WH,{open:U,onClose:()=>{G(!1),ee()},tournamentId:n,tournamentName:d.name,teamId:r,teamName:le}),i.jsx(Tu,{open:A,onOpenChange:Z,children:i.jsxs(Nu,{children:[i.jsxs(Eu,{children:[i.jsxs(_u,{className:"flex items-center gap-2",children:[i.jsx(fc,{className:"h-5 w-5 text-destructive"}),"Cancelar Torneio"]}),i.jsx(Ru,{children:"Esta ação é irreversível. Todos os times inscritos serão notificados sobre o cancelamento."})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"cancel-reason",children:["Motivo do Cancelamento",i.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),i.jsx(os,{id:"cancel-reason",placeholder:"Ex: Quadra indisponível, falta de times, problemas climáticos...",value:se,onChange:me=>fe(me.target.value),rows:4,className:"resize-none"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"⚠️ Este motivo será exibido para todos os times inscritos"})]}),i.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:[i.jsxs("p",{className:"text-sm text-destructive",children:[i.jsx("strong",{children:"Atenção:"})," Ao cancelar este torneio:"]}),i.jsxs("ul",{className:"text-sm text-destructive mt-2 ml-4 space-y-1 list-disc",children:[i.jsx("li",{children:"Todas as inscrições serão canceladas"}),i.jsx("li",{children:"Os jogos agendados serão removidos"}),i.jsx("li",{children:'O torneio ficará marcado como "Cancelado"'}),i.jsx("li",{children:"Não será possível reverter esta ação"})]})]})]}),i.jsxs(Pu,{children:[i.jsx(Iu,{disabled:ae,children:"Voltar"}),i.jsx(Au,{onClick:re,disabled:ae||!se.trim(),className:"bg-destructive hover:bg-destructive/90",children:ae?"Cancelando...":"Confirmar Cancelamento"})]})]})})]})}const GH={levantador:"Levantador",ponteiro:"Ponteiro",oposto:"Oposto",central:"Central",libero:"Líbero",tecnico:"Técnico",auxiliar:"Auxiliar Técnico"},KH={levantador:"🏐",ponteiro:"⚡",oposto:"💪",central:"🛡️",libero:"🦸",tecnico:"👨‍🏫",auxiliar:"👨‍💼"};function JH({open:t,onClose:e,tournamentId:n,currentUserId:r}){const[s,o]=g.useState(null),[a,l]=g.useState([]),[d,h]=g.useState({}),[m,f]=g.useState(new Set),[v,y]=g.useState(!0);g.useEffect(()=>{t&&n&&w()},[t,n]);async function w(){y(!0);try{const{tournament:N,teams:_}=await Yn.getTournamentDetails(n);if(console.log("🏆 Tournament data loaded:",{tournamentData:N,teamsData:_}),o(N),l(_||[]),_&&_.length>0){const I=_.map(async L=>{try{const{roster:D}=await Yn.getRoster(n,L.id);return{teamId:L.id,roster:D}}catch{return console.log(`No roster found for team ${L.id}`),{teamId:L.id,roster:null}}}),M=await Promise.all(I),O={};M.forEach(({teamId:L,roster:D})=>{D&&(O[L]=D)}),h(O)}}catch(N){console.error("Error loading tournament data:",N)}finally{y(!1)}}function b(N){f(_=>{const I=new Set(_);return I.has(N)?I.delete(N):I.add(N),I})}function k(N){const _={upcoming:{variant:"secondary",label:"Inscrições Abertas",icon:Vr},ongoing:{variant:"default",label:"Em Andamento",icon:Nt},finished:{variant:"outline",label:"Finalizado",icon:$e},cancelled:{variant:"destructive",label:"Cancelado",icon:cr}},I=_[N]||_.upcoming,M=I.icon;return i.jsxs(Se,{variant:I.variant,className:"gap-1",children:[i.jsx(M,{className:"h-3 w-3"}),I.label]})}function j(N){switch(N){case"confirmed":return i.jsx($e,{className:"h-4 w-4 text-green-500"});case"pending":return i.jsx(Vr,{className:"h-4 w-4 text-yellow-500"});case"declined":return i.jsx(cr,{className:"h-4 w-4 text-red-500"})}}function T(N){return N.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function E(N){const _=Object.values(N).reduce((O,L)=>O+(L?.length||0),0),I=Object.values(N).flat().filter(O=>O?.status==="confirmed").length,M=Object.values(N).flat().filter(O=>O?.status==="pending").length;return{total:_,confirmed:I,pending:M}}function P(N){return r?Object.values(N).flat().some(_=>_?.id===r):!1}return v?i.jsx(sn,{open:t,onOpenChange:e,children:i.jsx(Yt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})})})}):s?i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[i.jsx(fn,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-secondary",children:i.jsx(Nt,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(on,{children:s.name}),i.jsxs(Ln,{className:"flex items-center gap-3 mt-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(jr,{className:"h-3 w-3"}),new Date(s.startDate).toLocaleDateString("pt-BR")," - ",new Date(s.endDate).toLocaleDateString("pt-BR")]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(_s,{className:"h-3 w-3"}),s.location]})]})]}),i.jsx("div",{children:k(s.status)})]})}),i.jsx(Jn,{}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx(ie,{children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Qn,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),i.jsx("p",{className:"text-2xl font-bold",children:a.length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Times Inscritos"})]})})}),i.jsx(ie,{children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(wt,{className:"h-8 w-8 mx-auto mb-2 text-secondary"}),i.jsx("p",{className:"text-2xl font-bold",children:Object.values(d).reduce((N,_)=>N+E(_).total,0)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Jogadores Convocados"})]})})}),i.jsx(ie,{children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Nt,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),i.jsx("p",{className:"text-2xl font-bold",children:s.maxTeams}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Vagas Totais"})]})})})]}),i.jsx(Jn,{}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Organizador"}),i.jsx("p",{className:"font-semibold",children:s.organizerName})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[i.jsx(Qn,{className:"h-5 w-5"}),"Times Inscritos (",a.length,"/",s.maxTeams,")"]}),a.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"py-12 text-center text-muted-foreground",children:[i.jsx(Qn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Nenhum time inscrito ainda"})]})}):i.jsx("div",{className:"space-y-3",children:a.map(N=>{const _=d[N.id],I=m.has(N.id),M=_?E(_):null,O=_?P(_):!1;return i.jsxs(ie,{className:O?"border-2 border-primary":"",children:[i.jsx(et,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center",children:N.photoUrl?i.jsx("img",{src:N.photoUrl,alt:N.name,className:"h-full w-full rounded-lg object-cover"}):i.jsx(Qn,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{children:[i.jsxs(Vt,{className:"text-base flex items-center gap-2",children:[N.name,O&&i.jsxs(Se,{variant:"default",className:"gap-1",children:[i.jsx(mu,{className:"h-3 w-3"}),"Você está aqui"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:N.city&&N.state?`${N.city}, ${N.state}`:"Localização não informada"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[M&&i.jsxs("div",{className:"text-right mr-3",children:[i.jsxs("p",{className:"text-sm font-semibold",children:[M.total," convocados"]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx($e,{className:"h-3 w-3 text-green-500"}),M.confirmed]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Vr,{className:"h-3 w-3 text-yellow-500"}),M.pending]})]})]}),i.jsx(q,{variant:"ghost",size:"sm",onClick:()=>b(N.id),children:I?i.jsx(LE,{className:"h-4 w-4"}):i.jsx(cp,{className:"h-4 w-4"})})]})]})}),I&&_&&i.jsxs(ce,{children:[i.jsx(Jn,{className:"mb-4"}),i.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[i.jsx(wt,{className:"h-4 w-4"}),"Lista de Convocados"]}),i.jsx("div",{className:"space-y-4",children:Object.keys(_).map(L=>{const D=_[L]||[];return D.length===0?null:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{children:KH[L]}),i.jsx("p",{className:"font-medium text-sm",children:GH[L]}),i.jsx(Se,{variant:"secondary",className:"text-xs",children:D.length})]}),i.jsx("div",{className:"space-y-2 ml-6",children:D.map(A=>i.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${A.id===r?"bg-primary/10 border border-primary/20":"bg-muted/30"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:A.photoUrl?i.jsx("img",{src:A.photoUrl,alt:A.name,className:"h-full w-full rounded-full object-cover"}):i.jsx(mu,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium",children:[A.name,A.id===r&&i.jsx("span",{className:"ml-2 text-xs text-primary",children:"(Você)"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["CPF: ",T(A.cpf)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[j(A.status),i.jsxs(Se,{variant:A.status==="confirmed"?"default":A.status==="pending"?"secondary":"destructive",className:"text-xs",children:[A.status==="confirmed"&&"Confirmado",A.status==="pending"&&"Pendente",A.status==="declined"&&"Recusou"]})]})]},A.cpf))})]},L)})}),Object.values(_).every(L=>L.length===0)&&i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(wt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Nenhum jogador convocado ainda"})]})]})]},N.id)})})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(q,{onClick:e,children:"Fechar"})})]})}):null}const YH=lp("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Fi({className:t,variant:e,...n}){return i.jsx("div",{"data-slot":"alert",role:"alert",className:Pe(YH({variant:e}),t),...n})}function XH({className:t,...e}){return i.jsx("div",{"data-slot":"alert-title",className:Pe("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...e})}function Vi({className:t,...e}){return i.jsx("div",{"data-slot":"alert-description",className:Pe("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}function GA({onLoginClick:t,title:e="Faça login para continuar",description:n="Você precisa estar logado para usar esta funcionalidade"}){return i.jsxs(Fi,{className:"border-primary/50 bg-gradient-to-r from-primary/10 to-secondary/10",children:[i.jsx(m1,{className:"h-5 w-5 text-primary"}),i.jsx(XH,{className:"text-primary",children:e}),i.jsxs(Vi,{className:"mt-2 space-y-3",children:[i.jsx("p",{className:"text-muted-foreground",children:n}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{onClick:t,size:"sm",className:"bg-gradient-to-r from-primary to-secondary",children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),"Criar Conta Grátis"]}),i.jsxs(q,{onClick:t,variant:"outline",size:"sm",children:[i.jsx(m1,{className:"h-4 w-4 mr-2"}),"Já tenho conta"]})]})]})]})}function QH({isAuthenticated:t,onLoginPrompt:e}={}){const[n,r]=g.useState([]),[s,o]=g.useState(!1),[a,l]=g.useState(!1),[d,h]=g.useState(null),[m,f]=g.useState(null),[v,y]=g.useState(null),[w,b]=g.useState(!1);g.useEffect(()=>{T(),k(),j()},[]);async function k(){try{const O=await Rt.getSession();o(!!O)}catch{o(!1)}}async function j(){try{if(await Rt.getSession()){const L=await ar.getCurrentUser();console.log("📊 Tournaments - Current user loaded:",{id:L.profile?.id,name:L.profile?.name,userType:L.profile?.userType,fullData:L.profile}),y(L.profile);try{const{isMaster:D}=await Wo.checkMasterStatus();b(D)}catch{b(!1)}}}catch(O){console.error("Error loading current user:",O)}}async function T(){try{const{tournaments:O}=await Yn.getTournaments();console.log("📋 Loaded tournaments:",O),r(O||[])}catch(O){console.error("Error loading tournaments:",O),r([])}}async function E(){if(confirm('⚠️ ATENÇÃO: Isso vai deletar TODOS os torneios e criar apenas o "Campeonato Municipal 2025". Continuar?'))try{const{projectId:O}=await Xn(async()=>{const{projectId:A}=await Promise.resolve().then(()=>m_);return{projectId:A}},void 0),L=await fetch(`https://${O}.supabase.co/functions/v1/make-server-0ea22bba/admin/reset-tournaments`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!L.ok)throw new Error("Erro ao resetar torneios");const D=await L.json();console.log("✅ Torneios resetados:",D),K.success('🏆 Torneios resetados! Apenas "Campeonato Municipal 2025" foi criado.'),await T()}catch(O){console.error("Error resetting tournaments:",O),K.error(O.message||"Erro ao resetar torneios")}}async function P(O,L){if(!w){K.error("Acesso negado");return}if(confirm(`⚠️ Tem certeza que deseja DELETAR o torneio "${L}"?

Esta ação não pode ser desfeita.`))try{await Wo.deleteTournament(O),K.success(`🗑️ Torneio "${L}" deletado com sucesso!`),await T()}catch(D){console.error("❌ Erro ao deletar torneio:",D),K.error(D.message||"Erro ao deletar torneio")}}const N=n.filter(O=>O.status==="ongoing"),_=n.filter(O=>O.status==="upcoming"),I=n.filter(O=>O.status==="cancelled"),M=[{name:"Gabi Guimarães",position:"Ponteiro",rating:9.8,votes:1250},{name:"Bruno Rezende",position:"Levantador",rating:9.5,votes:1120},{name:"Rosamaria",position:"Oposto",rating:9,votes:980},{name:"Lucas Saatkamp",position:"Central",rating:9.2,votes:875}];return i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[!s&&e&&i.jsx(GA,{onLoginClick:e,title:"Participe de Torneios! 🏆",description:"Crie sua conta para organizar torneios ou inscrever seu time em competições!"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Torneios"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Competições e campeonatos ao vivo"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(q,{onClick:E,variant:"outline",size:"sm",className:"text-xs",children:"🔄 Reset (Admin)"}),i.jsxs(q,{onClick:()=>{if(v?.userType!=="team"){K.error("Apenas times podem criar torneios",{description:v?.userType==="athlete"?"Você pode participar através de convocação do seu time":"Crie uma conta como time para organizar torneios"});return}l(!0)},disabled:!s||v?.userType!=="team",className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90",title:v?.userType!=="team"?"Apenas times podem criar torneios":"",children:[i.jsx(pf,{className:"h-4 w-4 mr-2"}),"Criar Torneio"]})]})]}),i.jsx(qH,{open:a,onClose:()=>l(!1),onSuccess:T}),d&&i.jsx(HH,{open:!!d,onClose:()=>{console.log("🚪 Closing tournament modal"),h(null)},tournamentId:d,currentUserId:v?.id,userType:v?.userType,onRegistrationSuccess:()=>{console.log("✅ Registration successful, reloading tournaments"),T()}}),m&&i.jsx(JH,{open:!!m,onClose:()=>f(null),tournamentId:m,currentUserId:v?.id}),i.jsxs(Ji,{defaultValue:"ongoing",className:"space-y-6",children:[i.jsxs(Yi,{children:[i.jsxs(mt,{value:"ongoing",children:["Em Andamento (",N.length,")"]}),i.jsxs(mt,{value:"upcoming",children:["Próximos (",_.length,")"]}),i.jsxs(mt,{value:"cancelled",children:["Cancelados (",I.length,")"]}),i.jsx(mt,{value:"mvp",children:"MVP Rankings"})]}),i.jsx(ft,{value:"ongoing",className:"space-y-4",children:N.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"p-8 text-center text-muted-foreground",children:[i.jsx(Nt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Nenhum torneio em andamento no momento"})]})}):N.map(O=>i.jsxs(ie,{className:"border-l-4 border-l-primary hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>{console.log("🎯 Abrindo torneio:",O.id,O.name),h(O.id)},children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-secondary",children:i.jsx(Nt,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{children:O.name}),i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Organizado por ",O.organizerName]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Se,{children:"🏐 Em andamento"}),w&&i.jsx(q,{variant:"ghost",size:"icon",onClick:L=>{L.stopPropagation(),P(O.id,O.name)},className:"text-destructive hover:text-destructive hover:bg-destructive/10",title:"Deletar torneio (Master)",children:i.jsx(Bi,{className:"h-4 w-4"})})]})]})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Período"}),i.jsxs("p",{children:[new Date(O.startDate).toLocaleDateString()," - ",new Date(O.endDate).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_s,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Local"}),i.jsx("p",{children:O.location})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wt,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Times"}),i.jsxs("p",{children:[O.registeredTeams?.length||0," participantes"]})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(q,{variant:"outline",onClick:L=>{L.stopPropagation(),h(O.id)},children:"Ver Detalhes Completos"}),i.jsxs(q,{variant:"outline",className:"gap-2",onClick:L=>{L.stopPropagation(),f(O.id)},children:[i.jsx(is,{className:"h-4 w-4"}),"Ver Times e Convocações"]})]})]})]},O.id))}),i.jsx(ft,{value:"upcoming",className:"space-y-4",children:_.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"p-8 text-center text-muted-foreground",children:[i.jsx(jr,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Nenhum torneio agendado"}),i.jsx("p",{className:"text-sm mt-2",children:"Seja o primeiro a criar um torneio!"})]})}):_.map(O=>i.jsxs(ie,{className:"hover:shadow-lg transition-all cursor-pointer",onClick:()=>{console.log("🎯 Upcoming tournament clicked:",{id:O.id,name:O.name,status:O.status,currentUserId:v?.id,currentUserType:v?.userType}),h(O.id)},children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-muted to-muted/50",children:i.jsx(Nt,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{children:O.name}),i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Organizado por ",O.organizerName]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Se,{variant:"secondary",children:"📅 Em breve"}),w&&i.jsx(q,{variant:"ghost",size:"icon",onClick:L=>{L.stopPropagation(),P(O.id,O.name)},className:"text-destructive hover:text-destructive hover:bg-destructive/10",title:"Deletar torneio (Master)",children:i.jsx(Bi,{className:"h-4 w-4"})})]})]})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Início"}),i.jsx("p",{children:new Date(O.startDate).toLocaleDateString()})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_s,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Local"}),i.jsx("p",{children:O.location})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wt,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Vagas"}),i.jsxs("p",{children:[O.registeredTeams?.length||0,"/",O.maxTeams]})]})]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx(q,{onClick:L=>{L.stopPropagation(),console.log("🎯 Button clicked - Opening tournament for registration:",{tournamentId:O.id,tournamentName:O.name,currentUserId:v?.id,currentUserType:v?.userType,isAuthenticated:s}),h(O.id)},disabled:!s,className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90",children:v?.userType==="team"?"🏐 Inscrever Time":"Ver Detalhes"}),i.jsxs(q,{variant:"outline",className:"gap-2",onClick:L=>{L.stopPropagation(),f(O.id)},children:[i.jsx(is,{className:"h-4 w-4"}),"Ver Times e Convocações"]}),!s&&i.jsx("p",{className:"text-xs text-muted-foreground w-full mt-1",children:"Faça login para se inscrever"})]})]})]},O.id))}),i.jsx(ft,{value:"cancelled",className:"space-y-4",children:I.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"p-8 text-center text-muted-foreground",children:[i.jsx(Nt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Nenhum torneio cancelado"})]})}):I.map(O=>i.jsxs(ie,{className:"border-l-4 border-l-destructive hover:shadow-lg transition-all cursor-pointer opacity-75",onClick:()=>{console.log("🎯 Cancelled tournament clicked:",{id:O.id,name:O.name,status:O.status}),h(O.id)},children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-destructive/10",children:i.jsx(Nt,{className:"h-6 w-6 text-destructive"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"line-through text-muted-foreground",children:O.name}),i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Organizado por ",O.organizerName]})]})]}),i.jsx(Se,{variant:"destructive",children:"🚫 Cancelado"})]})}),i.jsxs(ce,{className:"space-y-4",children:[O.cancellationReason&&i.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-destructive",children:[i.jsx("strong",{children:"Motivo:"})," ",O.cancellationReason]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Estava previsto para"}),i.jsx("p",{children:new Date(O.startDate).toLocaleDateString()})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_s,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Local"}),i.jsx("p",{children:O.location})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wt,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-muted-foreground",children:"Times inscritos"}),i.jsx("p",{children:O.registeredTeams?.length||0})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(q,{variant:"outline",onClick:L=>{L.stopPropagation(),h(O.id)},children:"Ver Detalhes"}),i.jsxs(q,{variant:"outline",className:"gap-2",onClick:L=>{L.stopPropagation(),f(O.id)},children:[i.jsx(is,{className:"h-4 w-4"}),"Ver Times e Convocações"]})]})]})]},O.id))}),i.jsxs(ft,{value:"mvp",className:"space-y-4",children:[i.jsxs(ie,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ia,{className:"h-6 w-6 text-amber-500"}),i.jsxs("div",{children:[i.jsx("h2",{children:"Ranking MVP - Superliga 2024/25"}),i.jsx("p",{className:"text-muted-foreground",children:"Atletas mais bem avaliados do campeonato"})]})]})}),i.jsx(ce,{children:i.jsxs(qy,{children:[i.jsx(Wy,{children:i.jsxs(cc,{children:[i.jsx(Bn,{className:"w-12",children:"Pos"}),i.jsx(Bn,{children:"Atleta"}),i.jsx(Bn,{children:"Posição"}),i.jsx(Bn,{className:"text-center",children:"Rating"}),i.jsx(Bn,{className:"text-center",children:"Votos"})]})}),i.jsx(Hy,{children:M.map((O,L)=>i.jsxs(cc,{children:[i.jsxs($n,{children:[L===0&&i.jsx("span",{className:"text-amber-500",children:"🥇"}),L===1&&i.jsx("span",{className:"text-gray-400",children:"🥈"}),L===2&&i.jsx("span",{className:"text-orange-600",children:"🥉"}),L>2&&i.jsx("span",{children:L+1})]}),i.jsx($n,{children:O.name}),i.jsx($n,{children:O.position}),i.jsx($n,{className:"text-center",children:i.jsx(Se,{variant:"secondary",children:O.rating})}),i.jsx($n,{className:"text-center",children:O.votes.toLocaleString()})]},O.name))})]})})]}),i.jsxs(ie,{children:[i.jsxs(et,{children:[i.jsx("h3",{children:"Seleção do Campeonato"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Os melhores de cada posição"})]}),i.jsx(ce,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Levantador"}),i.jsx("p",{children:"Bruno Rezende"}),i.jsx(Se,{variant:"secondary",className:"mt-1",children:"9.5"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Ponteiro 1"}),i.jsx("p",{children:"Gabi Guimarães"}),i.jsx(Se,{variant:"secondary",className:"mt-1",children:"9.8"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Ponteiro 2"}),i.jsx("p",{children:"Wallace de Souza"}),i.jsx(Se,{variant:"secondary",className:"mt-1",children:"8.9"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Central 1"}),i.jsx("p",{children:"Lucas Saatkamp"}),i.jsx(Se,{variant:"secondary",className:"mt-1",children:"9.2"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Central 2"}),i.jsx("p",{children:"-"}),i.jsx(Se,{variant:"secondary",className:"mt-1",children:"-"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Oposto"}),i.jsx("p",{children:"Rosamaria"}),i.jsx(Se,{variant:"secondary",className:"mt-1",children:"9.0"})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Líbero"}),i.jsx("p",{children:"Natália Pereira"}),i.jsx(Se,{variant:"secondary",className:"mt-1",children:"8.5"})]})]})})]})]})]})]})}const ZH={Todos:"🏐",Levantador:"🙌",Ponteiro:"⚡",Central:"🏔️",Oposto:"💪",Líbero:"🛡️"},eG=["Todos","Levantador","Ponteiro","Central","Oposto","Líbero"];function tG({onSelectAthlete:t}){const[e,n]=g.useState("Todos"),[r,s]=g.useState([]),[o,a]=g.useState(!1),[l,d]=g.useState(!1),[h,m]=g.useState(null),[f,v]=g.useState(""),[y,w]=g.useState(!1),[b,k]=g.useState(!0),[j,T]=g.useState(null),[E,P]=g.useState(new Set);g.useEffect(()=>{M(),N(),_(),I()},[e]);async function N(){try{const A=await Rt.getSession();a(!!A)}catch{a(!1)}}async function _(){try{if(await Rt.getSession()){const Z=await ar.getCurrentUser();T(Z.profile)}}catch(A){console.error("❌ Error loading current user:",A)}}async function I(){try{if(await Rt.getSession()){const{followingIds:Z}=await Sp.getFollowingIds();P(new Set(Z||[]))}}catch(A){console.error("❌ Error loading following IDs:",A)}}async function M(){k(!0);try{console.log("🏐 Carregando atletas livres...");const A={type:"athlete"};e!=="Todos"&&(A.position=e);const{users:Z}=await ar.getUsers(A),se=(Z||[]).filter(fe=>fe.freeAgent||!fe.team);console.log("✅ Atletas livres:",se.length),s(se)}catch(A){console.error("❌ Error loading athletes:",A),s([]),K.error("Erro ao carregar atletas livres")}finally{k(!1)}}async function O(){if(h){w(!0);try{await kf.sendInvitation(h,f),K.success("Convite enviado com sucesso! 🏐"),d(!1),v(""),m(null)}catch(A){console.error("❌ Error sending invitation:",A),K.error(A.message||"Erro ao enviar convite")}finally{w(!1)}}}function L(A){if(!o){K.error("Faça login para convocar atletas");return}if(j?.userType!=="team"){K.error("Apenas times podem convocar atletas");return}m(A),d(!0)}async function D(){if(!o){K.error("Faça login para se disponibilizar no mercado");return}if(j?.userType!=="athlete"){K.error("Apenas atletas podem se disponibilizar no mercado");return}try{const A=!j?.freeAgent;await ar.toggleFreeAgent(A),K.success(A?"✅ Você está agora disponível no mercado!":"❌ Você foi removido do mercado"),await _(),await M()}catch(A){console.error("Error toggling free agent status:",A),K.error(A.message||"Erro ao atualizar status")}}return i.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-primary",children:"Vitrine de Jogadores Livres"}),i.jsx("p",{className:"text-muted-foreground",children:"Encontre os melhores atletas disponíveis no mercado"})]}),o&&j?.userType==="athlete"&&i.jsx(q,{onClick:D,variant:j?.freeAgent?"destructive":"default",className:"gap-2",children:j?.freeAgent?i.jsxs(i.Fragment,{children:[i.jsx($e,{className:"h-4 w-4"}),"Remover do Mercado"]}):i.jsxs(i.Fragment,{children:[i.jsx(hu,{className:"h-4 w-4"}),"Disponibilizar no Mercado"]})})]}),i.jsxs("div",{className:"bg-card rounded-lg border p-4",children:[i.jsx("p",{className:"mb-3",children:"Filtrar por Posição"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:eG.map(A=>i.jsxs(q,{variant:e===A?"default":"outline",size:"sm",onClick:()=>n(A),className:`gap-2 ${e===A?"bg-primary text-primary-foreground shadow-lg":"hover:bg-muted"}`,children:[i.jsx("span",{className:"text-lg",children:ZH[A]}),A]},A))})]}),b&&i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),!b&&r.length===0&&i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:i.jsx(wt,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h3",{className:"mb-2",children:"Nenhum atleta disponível"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:e==="Todos"?"Não há atletas livres no momento":`Não há ${e.toLowerCase()}s disponíveis no momento`})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(A=>i.jsx(ie,{className:"overflow-hidden hover:shadow-xl transition-all duration-300 border-2 hover:border-primary/50",children:i.jsxs(ce,{className:"p-0",children:[i.jsxs("div",{className:"relative aspect-[4/3] bg-gradient-to-br from-primary/10 to-secondary/10",children:[i.jsxs(Gt,{className:"w-full h-full rounded-none",children:[i.jsx(rn,{src:A.photoUrl||A.photo_url,alt:A.name,className:"object-cover"}),i.jsx(Kt,{className:"rounded-none text-6xl bg-gradient-to-br from-primary/20 to-secondary/20",children:A.name?.[0]||"A"})]}),A.verified&&i.jsx("div",{className:"absolute top-3 right-3",children:i.jsxs(Se,{className:"bg-green-500 text-white gap-1 shadow-lg",children:[i.jsx($e,{className:"h-3 w-3"}),"Verificado"]})}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/60 to-transparent p-4",children:[i.jsx("h3",{className:"text-white mb-1",children:A.name}),i.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[i.jsx(wt,{className:"h-4 w-4"}),i.jsxs("span",{children:[(A.followers||0).toLocaleString("pt-BR")," seguidores"]})]})]})]}),i.jsxs("div",{className:"p-5 space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.age&&i.jsxs(Se,{variant:"secondary",className:"text-xs",children:[A.age," anos"]}),A.position&&i.jsx(Se,{variant:"secondary",className:"text-xs",children:A.position}),A.city&&i.jsx(Se,{variant:"secondary",className:"text-xs",children:A.city})]}),A.city&&i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground text-sm",children:[i.jsx(_s,{className:"h-4 w-4"}),i.jsx("span",{children:A.city})]}),A.bio&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:A.bio}),A.teamHistory&&Array.isArray(A.teamHistory)&&A.teamHistory.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm",children:"Times Anteriores:"}),i.jsx("div",{className:"space-y-1",children:A.teamHistory.slice(0,2).map((Z,se)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Nt,{className:"h-3 w-3 text-primary"}),i.jsxs("span",{className:"text-muted-foreground",children:[Z.name||Z," ",Z.year&&`- ${Z.year}`]})]},se))})]}),A.achievements&&Array.isArray(A.achievements)&&A.achievements.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm",children:"Conquistas:"}),i.jsx("div",{className:"space-y-1",children:A.achievements.slice(0,2).map((Z,se)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Nt,{className:"h-3 w-3 text-yellow-500"}),i.jsx("span",{className:"text-muted-foreground line-clamp-1",children:Z})]},se))})]}),A.height&&i.jsxs("div",{className:"flex items-center justify-between text-sm pt-2 border-t",children:[i.jsx("span",{className:"text-muted-foreground",children:"Altura:"}),i.jsx("span",{children:Ou(A.height)})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[i.jsx(q,{variant:"outline",onClick:()=>t(A.id),className:"w-full",children:"Ver Perfil Completo"}),i.jsxs(q,{onClick:()=>L(A.id),disabled:!o||j?.userType!=="team",className:"w-full bg-primary hover:bg-primary/90",children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),"Convocar"]})]})]})]})},A.id))}),i.jsx(sn,{open:l,onOpenChange:d,children:i.jsxs(Yt,{children:[i.jsxs(fn,{children:[i.jsx(on,{children:"Convocar Atleta"}),i.jsx(Ln,{children:"Envie uma mensagem para este atleta convidando-o para seu time."})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsx(os,{placeholder:"Digite sua mensagem de convite...",value:f,onChange:A=>v(A.target.value),rows:4,className:"resize-none"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"O atleta receberá sua proposta e poderá aceitá-la ou recusá-la."})]}),i.jsxs(Hi,{children:[i.jsx(q,{variant:"outline",onClick:()=>d(!1),disabled:y,children:"Cancelar"}),i.jsx(q,{onClick:O,disabled:y||!f.trim(),children:y?"Enviando...":"Enviar Convite"})]})]})})]})}function bw({error:t,onRetry:e}){const n=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),r=/Firefox/.test(navigator.userAgent),s=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),o=n?"Chrome":r?"Firefox":s?"Safari":"seu navegador",a=n?UE:VE;return i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black flex items-center justify-center p-6",children:i.jsx(ie,{className:"max-w-2xl w-full bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:i.jsxs(ce,{className:"p-8",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsxs("div",{className:"relative inline-block mb-4",children:[i.jsx("div",{className:"w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mx-auto",children:i.jsx(Nr,{className:"h-10 w-10 text-red-400"})}),i.jsx("div",{className:"absolute -top-1 -right-1 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:i.jsx(Jt,{className:"h-5 w-5 text-white"})})]}),i.jsx("h2",{className:"text-2xl text-white mb-2",children:"Permissão da Câmera Necessária"}),i.jsx("p",{className:"text-white/70",children:"Para transmitir ao vivo, você precisa permitir o acesso à sua câmera"}),t&&i.jsx(Se,{variant:"destructive",className:"mt-3",children:t})]}),i.jsxs("div",{className:"bg-black/30 rounded-lg p-6 mb-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-primary font-bold",children:"1"})}),i.jsxs("p",{className:"text-sm",children:["Clique no botão ",i.jsx("strong",{className:"text-primary",children:'"Permitir Câmera"'})," abaixo"]})]}),i.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-primary font-bold",children:"2"})}),i.jsxs("p",{className:"text-sm",children:["O ",o," vai mostrar uma mensagem no topo da página"]})]}),i.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-primary font-bold",children:"3"})}),i.jsxs("p",{className:"text-sm",children:["Clique em ",i.jsx("strong",{className:"text-green-400",children:'"Permitir"'})," ou ",i.jsx("strong",{className:"text-green-400",children:'"Allow"'})]})]})]}),i.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-4 mb-6",children:[i.jsxs("h3",{className:"text-white flex items-center gap-2 mb-2",children:[i.jsx(Jt,{className:"h-5 w-5 text-orange-400"}),i.jsx("span",{children:"Já bloqueou a câmera antes?"})]}),i.jsxs("div",{className:"text-sm text-white/80 space-y-2",children:[i.jsx("p",{children:"Se você bloqueou acidentalmente, siga estes passos:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[i.jsxs("li",{children:["Clique no ",i.jsx("strong",{className:"text-white",children:"ícone de cadeado"})," "," ",i.jsx("span",{className:"inline-flex items-center gap-1",children:"🔒"})," "," na barra de endereço (canto superior esquerdo)"]}),i.jsxs("li",{children:["Procure por ",i.jsx("strong",{className:"text-white",children:'"Câmera"'})," ou ",i.jsx("strong",{className:"text-white",children:'"Camera"'})]}),i.jsxs("li",{children:["Altere de ",i.jsx("span",{className:"text-red-400",children:'"Bloquear"'})," para ",i.jsx("span",{className:"text-green-400",children:'"Permitir"'})]}),i.jsx("li",{children:"Recarregue a página ou clique no botão abaixo"})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs(q,{onClick:e,size:"lg",className:"flex-1 bg-gradient-to-r from-primary to-blue-600 hover:opacity-90 text-white",children:[i.jsx(Nr,{className:"h-5 w-5 mr-2"}),"Permitir Câmera"]}),i.jsxs(q,{variant:"outline",size:"lg",onClick:()=>window.location.reload(),className:"sm:w-auto bg-white/5 border-white/20 text-white hover:bg-white/10",children:[i.jsx(G0,{className:"h-5 w-5 mr-2"}),"Recarregar Página"]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:i.jsxs("div",{className:"flex items-start gap-3 text-xs text-white/60",children:[i.jsx(a,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),i.jsxs("p",{children:[i.jsx("strong",{className:"text-white/80",children:"Dica:"})," Esta permissão é necessária apenas uma vez. O ",o," vai lembrar sua escolha para futuras transmissões."]})]})})]})})})}async function ww(){try{console.log("🎥 [CameraPermission] Solicitando acesso à câmera e microfone...");const t=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});return console.log("✅ [CameraPermission] Acesso concedido com sucesso!"),{success:!0,stream:t}}catch(t){console.error("❌ [CameraPermission] Erro ao acessar mídia:",t);let e="Erro ao acessar câmera",n="unknown";return t.name==="NotAllowedError"||t.name==="PermissionDeniedError"?(e="Permissão negada. Clique no ícone de cadeado na barra de endereço e permita o acesso à câmera.",n="permission_denied"):t.name==="NotFoundError"||t.name==="DevicesNotFoundError"?(e="Nenhuma câmera ou microfone encontrado neste dispositivo.",n="not_found"):t.name==="NotReadableError"||t.name==="TrackStartError"?(e="Câmera ou microfone está sendo usado por outro aplicativo. Feche outros programas e tente novamente.",n="in_use"):t.name==="OverconstrainedError"||t.name==="ConstraintNotSatisfiedError"?(e="Sua câmera não suporta as configurações solicitadas.",n="overconstrained"):t.name==="TypeError"?(e="Seu navegador não suporta acesso a câmera. Use Chrome, Firefox, Safari ou Edge.",n="unknown"):t.name==="SecurityError"&&(e="Acesso bloqueado por segurança. Certifique-se de estar usando HTTPS.",n="permission_denied"),{success:!1,error:e,errorType:n}}}function Sw(t){t&&(console.log("🛑 [CameraPermission] Parando stream de mídia..."),t.getTracks().forEach(e=>{e.stop(),console.log(`  └─ Track parado: ${e.kind} (${e.label})`)}))}function nG({onSuccess:t,onSkip:e}){const[n,r]=g.useState("idle"),[s,o]=g.useState(null),[a,l]=g.useState(null),d=g.useRef(null);g.useEffect(()=>{a&&d.current&&(d.current.srcObject=a)},[a]),g.useEffect(()=>()=>{Sw(a)},[a]);async function h(){r("testing"),o(null);const m=await ww();m.success&&m.stream?(l(m.stream),r("success"),setTimeout(()=>{t()},2e3)):(o(m.error||"Erro desconhecido"),r("error"))}return n==="error"&&s?i.jsx(bw,{error:s,onRetry:()=>{r("idle"),o(null),h()}}):i.jsx(ie,{className:"w-full",children:i.jsxs(ce,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:[n==="idle"&&i.jsx(Nr,{className:"h-8 w-8 text-primary"}),n==="testing"&&i.jsx(or,{className:"h-8 w-8 text-primary animate-spin"}),n==="success"&&i.jsx($e,{className:"h-8 w-8 text-green-500"}),n==="error"&&i.jsx(fc,{className:"h-8 w-8 text-destructive"})]}),i.jsx("h3",{className:"mb-2",children:"Teste de Câmera e Microfone"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Antes de iniciar a live, vamos verificar se sua câmera e microfone estão funcionando"})]}),a&&i.jsxs("div",{className:"relative aspect-video bg-black rounded-lg overflow-hidden",children:[i.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),i.jsxs(Se,{className:"absolute top-4 left-4 bg-green-500",children:[i.jsx($e,{className:"h-3 w-3 mr-1"}),"Funcionando!"]})]}),n==="testing"&&i.jsxs(Fi,{children:[i.jsx(or,{className:"h-4 w-4 animate-spin"}),i.jsx(Vi,{children:'Aguardando permissão... Clique em "Permitir" quando o navegador perguntar.'})]}),n==="success"&&i.jsxs(Fi,{className:"bg-green-500/10 border-green-500/20",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsx(Vi,{className:"text-green-600 dark:text-green-400",children:"Perfeito! Sua câmera e microfone estão funcionando. Redirecionando..."})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n==="idle"&&i.jsxs(i.Fragment,{children:[i.jsxs(q,{onClick:h,className:"flex-1",children:[i.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Testar Câmera"]}),e&&i.jsx(q,{variant:"outline",onClick:e,children:"Pular Teste"})]}),n==="success"&&i.jsxs(q,{onClick:t,className:"w-full bg-green-500 hover:bg-green-600",children:[i.jsx($e,{className:"h-4 w-4 mr-2"}),"Continuar para Live"]})]}),i.jsx("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:"💡 Dica: Você verá uma solicitação de permissão no topo do navegador"})]})})}function rG({open:t,onClose:e,onSuccess:n}){const[r,s]=g.useState(""),[o,a]=g.useState(""),[l,d]=g.useState(""),[h,m]=g.useState(""),[f,v]=g.useState(!1),[y,w]=g.useState(!1),[b,k]=g.useState(!1),[j,T]=g.useState(!1);async function E(P){if(P.preventDefault(),!r.trim()){K.error("Título é obrigatório");return}if(f&&!l){K.error("Selecione data e hora para live agendada");return}if(!f&&!j){k(!0);return}w(!0);try{const{live:N}=await Sr.createLive({title:r.trim(),description:o.trim()||void 0,scheduledFor:f?l:void 0,thumbnailUrl:h.trim()||void 0});K.success(f?"Live agendada com sucesso! 📅":"Live criada! Começando transmissão... 🔴",{description:f?`Agendada para ${new Date(l).toLocaleString("pt-BR")}`:"Sua live já está no ar!"}),n(N),s(""),a(""),d(""),m(""),v(!1),k(!1),T(!1),e()}catch(N){console.error("❌ Erro ao criar live:",N),K.error("Erro ao criar live",{description:N.message||"Tente novamente"})}finally{w(!1)}}return b?i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"sm:max-w-[600px]",children:[i.jsxs(fn,{children:[i.jsxs(on,{className:"flex items-center gap-2",children:[i.jsx(Nr,{className:"h-5 w-5 text-primary"}),"Verificar Câmera e Microfone"]}),i.jsx(Ln,{children:"Vamos testar se sua câmera e microfone estão funcionando antes de criar a live"})]}),i.jsx(nG,{onSuccess:()=>{T(!0),k(!1),K.success("Câmera testada com sucesso! 🎥",{description:"Agora você pode criar sua live"}),setTimeout(()=>{const P=document.querySelector("form");P&&P.requestSubmit()},100)},onSkip:()=>{T(!0),k(!1),K.info("Teste pulado",{description:"Você pode ter problemas com a câmera"})}})]})}):i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"sm:max-w-[500px]",children:[i.jsxs(fn,{children:[i.jsxs(on,{className:"flex items-center gap-2",children:[i.jsx(In,{className:"h-5 w-5 text-red-500"}),f?"Agendar Live":"Iniciar Transmissão",i.jsx(Se,{variant:"secondary",className:"bg-green-500 text-white text-xs",children:"Todos os perfis"})]}),i.jsx(Ln,{children:f?"Agende uma transmissão ao vivo para uma data futura. Disponível para fãs, atletas e times!":"Comece a transmitir agora mesmo! Qualquer perfil pode criar lives e compartilhar com o mundo."})]}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{type:"button",variant:f?"outline":"default",size:"sm",onClick:()=>v(!1),className:"flex-1",children:[i.jsx(In,{className:"h-4 w-4 mr-2"}),"Ao Vivo Agora"]}),i.jsxs(q,{type:"button",variant:f?"default":"outline",size:"sm",onClick:()=>v(!0),className:"flex-1",children:[i.jsx(jr,{className:"h-4 w-4 mr-2"}),"Agendar"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"title",children:"Título da Live *"}),i.jsx(ht,{id:"title",placeholder:"Ex: Treino aberto - Preparação para final",value:r,onChange:P=>s(P.target.value),maxLength:100,required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"description",children:"Descrição"}),i.jsx(os,{id:"description",placeholder:"Descreva sobre o que será a transmissão...",value:o,onChange:P=>a(P.target.value),maxLength:500,rows:3})]}),f&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"scheduledFor",children:"Data e Hora *"}),i.jsx(ht,{id:"scheduledFor",type:"datetime-local",value:l,onChange:P=>d(P.target.value),min:new Date().toISOString().slice(0,16),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"thumbnailUrl",children:[i.jsx(BE,{className:"h-4 w-4 inline mr-2"}),"URL da Thumbnail (opcional)"]}),i.jsx(ht,{id:"thumbnailUrl",type:"url",placeholder:"https://exemplo.com/imagem.jpg",value:h,onChange:P=>m(P.target.value)})]}),!f&&j&&i.jsxs("div",{className:"rounded-lg bg-green-500/10 border border-green-500/20 p-3 flex items-center gap-2",children:[i.jsx(Nr,{className:"h-4 w-4 text-green-600"}),i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"✅ Câmera testada e funcionando!"})]}),!f&&i.jsx("div",{className:"rounded-lg bg-primary/10 border border-primary/20 p-3",children:i.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400",children:j?"🎥 Sua câmera está pronta! Clique em 'Iniciar Agora' para começar.":"📹 Sua câmera será testada antes de iniciar a transmissão."})}),i.jsxs(Hi,{children:[i.jsx(q,{type:"button",variant:"outline",onClick:e,disabled:y,children:"Cancelar"}),i.jsxs(q,{type:"submit",disabled:y,className:f?"":"bg-gradient-to-r from-red-500 to-red-600 hover:opacity-90",children:[y&&i.jsx(or,{className:"h-4 w-4 mr-2 animate-spin"}),f?"Agendar Live":"Iniciar Agora"]})]})]})]})})}const sG=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xn(async()=>{const{default:r}=await Promise.resolve().then(()=>Qc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class kw extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class pT extends kw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gT extends kw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vT extends kw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Gy||(Gy={}));var iG=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};class oG{constructor(e,{headers:n={},customFetch:r,region:s=Gy.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=sG(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return iG(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:o,method:a,body:l,signal:d}=r;let h={},{region:m}=r;m||(m=this.region);const f=new URL(`${this.url}/${n}`);m&&m!=="any"&&(h["x-region"]=m,f.searchParams.set("forceFunctionRegion",m));let v;l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(h["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(h["Content-Type"]="application/json",v=JSON.stringify(l)));const y=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:v,signal:d}).catch(j=>{throw j.name==="AbortError"?j:new pT(j)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new gT(y);if(!y.ok)throw new vT(y);let b=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return b==="application/json"?k=yield y.json():b==="application/octet-stream"?k=yield y.blob():b==="text/event-stream"?k=y:b==="multipart/form-data"?k=yield y.formData():k=yield y.text(),{data:k,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new pT(o)}:{data:null,error:o,response:o instanceof vT||o instanceof gT?o.context:void 0}}})}}var Rn={},Ul={},Fl={},Vl={},Bl={},$l={},aG=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dc=aG();const lG=Dc.fetch,KA=Dc.fetch.bind(Dc),JA=Dc.Headers,cG=Dc.Request,dG=Dc.Response,Qc=Object.freeze(Object.defineProperty({__proto__:null,Headers:JA,Request:cG,Response:dG,default:KA,fetch:lG},Symbol.toStringTag,{value:"Module"})),uG=a4(Qc);var Am={},xT;function YA(){if(xT)return Am;xT=1,Object.defineProperty(Am,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Am.default=t,Am}var yT;function XA(){if(yT)return $l;yT=1;var t=$l&&$l.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty($l,"__esModule",{value:!0});const e=t(uG),n=t(YA());class r{constructor(o){var a,l;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(l=o.isMaybeSingle)!==null&&l!==void 0?l:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,f,v,y;let w=null,b=null,k=null,j=h.status,T=h.statusText;if(h.ok){if(this.method!=="HEAD"){const _=await h.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?b=_:b=JSON.parse(_))}const P=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),N=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");P&&N&&N.length>1&&(k=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(w={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,k=null,j=406,T="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const P=await h.text();try{w=JSON.parse(P),Array.isArray(w)&&h.status===404&&(b=[],w=null,j=200,T="OK")}catch{h.status===404&&P===""?(j=204,T="No Content"):w={message:P}}if(w&&this.isMaybeSingle&&(!((y=w?.details)===null||y===void 0)&&y.includes("0 rows"))&&(w=null,j=200,T="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:b,count:k,status:j,statusText:T}});return this.shouldThrowOnError||(d=d.catch(h=>{var m,f,v;return{error:{message:`${(m=h?.name)!==null&&m!==void 0?m:"FetchError"}: ${h?.message}`,details:`${(f=h?.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(v=h?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,a)}returns(){return this}overrideTypes(){return this}}return $l.default=r,$l}var bT;function QA(){if(bT)return Bl;bT=1;var t=Bl&&Bl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bl,"__esModule",{value:!0});const e=t(XA());class n extends e.default{select(s){let o=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:a,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${s}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,o,{foreignTable:a,referencedTable:l=a}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:a=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var m;const f=[s?"analyze":null,o?"verbose":null,a?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${f};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Bl.default=n,Bl}var wT;function jw(){if(wT)return Vl;wT=1;var t=Vl&&Vl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vl,"__esModule",{value:!0});const e=t(QA());class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${d}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return Vl.default=n,Vl}var ST;function ZA(){if(ST)return Fl;ST=1;var t=Fl&&Fl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fl,"__esModule",{value:!0});const e=t(jw());class n{constructor(s,{headers:o={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(o),this.schema=a,this.fetch=l}select(s,o){const{head:a=!1,count:l}=o??{},d=a?"HEAD":"GET";let h=!1;const m=(s??"*").split("").map(f=>/\s/.test(f)&&!h?"":(f==='"'&&(h=!h),f)).join("");return this.url.searchParams.set("select",m),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:a=!0}={}){var l;const d="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(h.length>0){const m=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:a=!1,count:l,defaultToNull:d=!0}={}){var h;const m="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(f.length>0){const v=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(s,{count:o}={}){var a;const l="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var o;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Fl.default=n,Fl}var kT;function hG(){if(kT)return Ul;kT=1;var t=Ul&&Ul.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ul,"__esModule",{value:!0});const e=t(ZA()),n=t(jw());class r{constructor(o,{headers:a={},schema:l,fetch:d}={}){this.url=o,this.headers=new Headers(a),this.schemaName=l,this.fetch=d}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:d=!1,count:h}={}){var m;let f;const v=new URL(`${this.url}/rpc/${o}`);let y;l||d?(f=l?"HEAD":"GET",Object.entries(a).filter(([b,k])=>k!==void 0).map(([b,k])=>[b,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([b,k])=>{v.searchParams.append(b,k)})):(f="POST",y=a);const w=new Headers(this.headers);return h&&w.set("Prefer",`count=${h}`),new n.default({method:f,url:v,headers:w,schema:this.schemaName,body:y,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return Ul.default=r,Ul}var jT;function mG(){if(jT)return Rn;jT=1;var t=Rn&&Rn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.PostgrestError=Rn.PostgrestBuilder=Rn.PostgrestTransformBuilder=Rn.PostgrestFilterBuilder=Rn.PostgrestQueryBuilder=Rn.PostgrestClient=void 0;const e=t(hG());Rn.PostgrestClient=e.default;const n=t(ZA());Rn.PostgrestQueryBuilder=n.default;const r=t(jw());Rn.PostgrestFilterBuilder=r.default;const s=t(QA());Rn.PostgrestTransformBuilder=s.default;const o=t(XA());Rn.PostgrestBuilder=o.default;const a=t(YA());return Rn.PostgrestError=a.default,Rn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:a.default},Rn}var fG=mG();const pG=q0(fG),{PostgrestClient:gG,PostgrestQueryBuilder:Tie,PostgrestFilterBuilder:Nie,PostgrestTransformBuilder:Eie,PostgrestBuilder:Pie,PostgrestError:_ie}=pG;class vG{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const xG="2.75.0",yG=`realtime-js/${xG}`,bG="1.0.0",Ky=1e4,wG=1e3,SG=100;var ru;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ru||(ru={}));var wn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wn||(wn={}));var Ss;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ss||(Ss={}));var Jy;(function(t){t.websocket="websocket"})(Jy||(Jy={}));var Na;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Na||(Na={}));class kG{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const d=r.decode(e.slice(a,a+o));a=a+o;const h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:d,payload:h}}}class eI{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Tt||(Tt={}));const CT=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=jG(a,t,e,s),o),{}):{}},jG=(t,e,n,r)=>{const s=e.find(l=>l.name===t),o=s?.type,a=n[t];return o&&!r.includes(o)?tI(o,a):Yy(a)},tI=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return EG(e,n)}switch(t){case Tt.bool:return CG(e);case Tt.float4:case Tt.float8:case Tt.int2:case Tt.int4:case Tt.int8:case Tt.numeric:case Tt.oid:return TG(e);case Tt.json:case Tt.jsonb:return NG(e);case Tt.timestamp:return PG(e);case Tt.abstime:case Tt.date:case Tt.daterange:case Tt.int4range:case Tt.int8range:case Tt.money:case Tt.reltime:case Tt.text:case Tt.time:case Tt.timestamptz:case Tt.timetz:case Tt.tsrange:case Tt.tstzrange:return Yy(e);default:return Yy(e)}},Yy=t=>t,CG=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},TG=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},NG=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},EG=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>tI(e,l))}return t},PG=t=>typeof t=="string"?t.replace(" ","T"):t,nI=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Sx{constructor(e,n,r={},s=Ky){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var TT;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(TT||(TT={}));class su{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=su.syncState(this.state,s,o,a),this.pendingDiffs.forEach(d=>{this.state=su.syncDiff(this.state,d,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=su.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),a=this.transformState(n),l={},d={};return this.map(o,(h,m)=>{a[h]||(d[h]=m)}),this.map(a,(h,m)=>{const f=o[h];if(f){const v=m.map(k=>k.presence_ref),y=f.map(k=>k.presence_ref),w=m.filter(k=>y.indexOf(k.presence_ref)<0),b=f.filter(k=>v.indexOf(k.presence_ref)<0);w.length>0&&(l[h]=w),b.length>0&&(d[h]=b)}else l[h]=m}),this.syncDiff(o,{joins:l,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(l,d)=>{var h;const m=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(d),m.length>0){const f=e[l].map(y=>y.presence_ref),v=m.filter(y=>f.indexOf(y.presence_ref)<0);e[l].unshift(...v)}r(l,m,d)}),this.map(a,(l,d)=>{let h=e[l];if(!h)return;const m=d.map(f=>f.presence_ref);h=h.filter(f=>m.indexOf(f.presence_ref)<0),e[l]=h,s(l,h,d),h.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var NT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(NT||(NT={}));var iu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(iu||(iu={}));var Ii;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ii||(Ii={}));class Cw{constructor(e,n={config:{}},r){var s,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sx(this,Ss.join,this.params,this.timeout),this.rejoinTimer=new eI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ss.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new su(this),this.broadcastEndpointURL=nI(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==wn.closed){const{config:{broadcast:a,presence:l,private:d}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[iu.PRESENCE]&&this.bindings[iu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},v={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:m}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(Ii.CHANNEL_ERROR,y)),this._onClose(()=>e?.(Ii.CLOSED)),this.updateJoinPayload(Object.assign({config:v},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var w;if(this.socket.setAuth(),y===void 0){e?.(Ii.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,k=(w=b?.length)!==null&&w!==void 0?w:0,j=[];for(let T=0;T<k;T++){const E=b[T],{filter:{event:P,schema:N,table:_,filter:I}}=E,M=y&&y[T];if(M&&M.event===P&&M.schema===N&&M.table===_&&M.filter===I)j.push(Object.assign(Object.assign({},E),{id:M.id}));else{this.unsubscribe(),this.state=wn.errored,e?.(Ii.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(Ii.SUBSCRIBED);return}}).receive("error",y=>{this.state=wn.errored,e?.(Ii.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ii.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===wn.joined&&e===iu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,d;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ss.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Sx(this,Ss.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sx(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>SG){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const a=e.toLocaleLowerCase(),{close:l,error:d,leave:h,join:m}=Ss;if(r&&[l,d,h,m].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var w,b,k;return((w=y.filter)===null||w===void 0?void 0:w.event)==="*"||((k=(b=y.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(y=>y.callback(v,r)):(o=this.bindings[a])===null||o===void 0||o.filter(y=>{var w,b,k,j,T,E;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const P=y.id,N=(w=y.filter)===null||w===void 0?void 0:w.event;return P&&((b=n.ids)===null||b===void 0?void 0:b.includes(P))&&(N==="*"||N?.toLocaleLowerCase()===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const P=(T=(j=y?.filter)===null||j===void 0?void 0:j.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return P==="*"||P===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:b,table:k,commit_timestamp:j,type:T,errors:E}=w;v=Object.assign(Object.assign({},{schema:b,table:k,commit_timestamp:j,eventType:T,new:{},old:{},errors:E}),this._getPayloadRecords(w))}y.callback(v,r)})}_isClosed(){return this.state===wn.closed}_isJoined(){return this.state===wn.joined}_isJoining(){return this.state===wn.joining}_isLeaving(){return this.state===wn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Cw.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ss.close,{},e)}_onError(e){this._on(Ss.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=CT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=CT(e.columns,e.old_record)),n}}const kx=()=>{},Im={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_G=[1e3,2e3,5e3,1e4],RG=1e4,AG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class IG{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ky,this.transport=null,this.heartbeatIntervalMs=Im.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kx,this.ref=0,this.reconnectTimer=null,this.logger=kx,this.conn=null,this.sendBuffer=[],this.serializer=new kG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Xn(async()=>{const{default:l}=await Promise.resolve().then(()=>Qc);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Jy.websocket}`,this.httpEndpoint=nI(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vG.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bG}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ru.connecting:return Na.Connecting;case ru.open:return Na.Open;case ru.closing:return Na.Closing;default:return Na.Closed}}isConnected(){return this.connectionState()===Na.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Cw(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,a=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(wG,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Im.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:a}=n,l=a?`(${a})`:"",d=o.status||"";this.log("receive",`${d} ${r} ${s} ${l}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ss.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([AG],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:yG};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ss.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new eI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Im.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,a,l,d,h,m;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Ky,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:Im.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:kx,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(f=>_G[f-1]||RG),this.encode=(h=e?.encode)!==null&&h!==void 0?h:((f,v)=>v(JSON.stringify(f))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Tw extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class OG extends Tw{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xy extends Tw{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var MG=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};const rI=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xn(async()=>{const{default:r}=await Promise.resolve().then(()=>Qc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},DG=()=>MG(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xn(()=>Promise.resolve().then(()=>Qc),void 0)).Response:Response}),Qy=t=>{if(Array.isArray(t))return t.map(n=>Qy(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Qy(r)}),e},LG=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var rl=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};const jx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),UG=(t,e,n)=>rl(void 0,void 0,void 0,function*(){const r=yield DG();t instanceof r&&!n?.noResolveJson?t.json().then(s=>{const o=t.status||500,a=s?.statusCode||o+"";e(new OG(jx(s),o,a))}).catch(s=>{e(new Xy(jx(s),s))}):e(new Xy(jx(t),t))}),FG=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||!r?s:(LG(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function ih(t,e,n,r,s,o){return rl(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,FG(e,r,s,o)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>UG(d,l,r))})})}function Of(t,e,n,r){return rl(this,void 0,void 0,function*(){return ih(t,"GET",e,n,r)})}function ni(t,e,n,r,s){return rl(this,void 0,void 0,function*(){return ih(t,"POST",e,r,s,n)})}function Zy(t,e,n,r,s){return rl(this,void 0,void 0,function*(){return ih(t,"PUT",e,r,s,n)})}function VG(t,e,n,r){return rl(this,void 0,void 0,function*(){return ih(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function sI(t,e,n,r,s){return rl(this,void 0,void 0,function*(){return ih(t,"DELETE",e,r,s,n)})}var BG=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};class $G{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return BG(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dn(e))return{data:null,error:e};throw e}})}}var zG=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};class qG{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new $G(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return zG(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dn(e))return{data:null,error:e};throw e}})}}var br=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};const WG={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ET={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class HG{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=rI(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return br(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},ET),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s?.headers&&(l=Object.assign(Object.assign({},l),s.headers));const h=this._removeEmptyFolders(n),m=this._getFinalPath(h),f=yield(e=="PUT"?Zy:ni)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o))return{data:null,error:o};throw o}})}upload(e,n,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return br(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let d;const h=Object.assign({upsert:ET.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType);const f=yield Zy(this.fetch,l.toString(),d,{headers:m});return{data:{path:o,fullPath:f.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(dn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return br(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n?.upsert&&(s["x-upsert"]="true");const o=yield ni(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new Tw("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}})}update(e,n,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return br(this,void 0,void 0,function*(){try{return{data:yield ni(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}})}copy(e,n,r){return br(this,void 0,void 0,function*(){try{return{data:{path:(yield ni(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return br(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield ni(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return br(this,void 0,void 0,function*(){try{const s=yield ni(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),a=o?`?${o}`:"",l=this._getFinalPath(e),d=()=>Of(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new qG(d,this.shouldThrowOnError)}info(e){return br(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Of(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Qy(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}})}exists(e){return br(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield VG(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dn(r)&&r instanceof Xy){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const l=typeof n?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(n?.transform||{});d!==""&&s.push(d);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(e){return br(this,void 0,void 0,function*(){try{return{data:yield sI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}list(e,n,r){return br(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},WG),n),{prefix:e||""});return{data:yield ni(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}})}listV2(e,n){return br(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ni(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const GG="2.75.0",KG={"X-Client-Info":`storage-js/${GG}`};var zl=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};class JG{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const o=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KG),n),this.fetch=rI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return zl(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dn(e))return{data:null,error:e};throw e}})}getBucket(e){return zl(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}createBucket(e){return zl(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield ni(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return zl(this,void 0,void 0,function*(){try{return{data:yield Zy(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return zl(this,void 0,void 0,function*(){try{return{data:yield ni(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return zl(this,void 0,void 0,function*(){try{return{data:yield sI(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}}class YG extends JG{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new HG(this.url,this.headers,e,this.fetch)}}const XG="2.75.0";let Jd="";typeof Deno<"u"?Jd="deno":typeof document<"u"?Jd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jd="react-native":Jd="node";const QG={"X-Client-Info":`supabase-js-${Jd}/${XG}`},ZG={headers:QG},eK={schema:"public"},tK={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nK={};var rK=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};const sK=t=>{let e;return t?e=t:typeof fetch>"u"?e=KA:e=fetch,(...n)=>e(...n)},iK=()=>typeof Headers>"u"?JA:Headers,oK=(t,e,n)=>{const r=sK(n),s=iK();return(o,a)=>rK(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:t;let h=new s(a?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(o,Object.assign(Object.assign({},a),{headers:h}))})};var aK=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};function lK(t){return t.endsWith("/")?t:t+"/"}function cK(t,e){var n,r;const{db:s,auth:o,realtime:a,global:l}=t,{db:d,auth:h,realtime:m,global:f}=e,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},m),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f?.headers)!==null&&n!==void 0?n:{}),(r=l?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>aK(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function dK(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lK(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const iI="2.75.0",Ql=30*1e3,e0=3,Cx=e0*Ql,uK="http://localhost:9999",hK="supabase.auth.token",mK={"X-Client-Info":`gotrue-js/${iI}`},t0="X-Supabase-Api-Version",oI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fK=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pK=600*1e3;class Mu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ge(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class gK extends Mu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function vK(t){return Ge(t)&&t.name==="AuthApiError"}class Ea extends Mu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ea extends Mu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ro extends ea{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xK(t){return Ge(t)&&t.name==="AuthSessionMissingError"}class ql extends ea{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Om extends ea{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mm extends ea{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yK(t){return Ge(t)&&t.name==="AuthImplicitGrantRedirectError"}class PT extends ea{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class n0 extends ea{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Tx(t){return Ge(t)&&t.name==="AuthRetryableFetchError"}class _T extends ea{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class r0 extends ea{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),RT=` 	
\r=`.split(""),bK=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<RT.length;e+=1)t[RT[e].charCodeAt(0)]=-2;for(let e=0;e<Mf.length;e+=1)t[Mf[e].charCodeAt(0)]=e;return t})();function AT(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mf[r]),e.queuedBits-=6}}function aI(t,e,n){const r=bK[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function IT(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{kK(a,r,n)};for(let a=0;a<t.length;a+=1)aI(t.charCodeAt(a),s,o);return e.join("")}function wK(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function SK(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}wK(r,e)}}function kK(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Sc(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)aI(t.charCodeAt(s),n,r);return new Uint8Array(e)}function jK(t){const e=[];return SK(t,n=>e.push(n)),new Uint8Array(e)}function Ra(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>AT(s,n,r)),AT(null,n,r),e.join("")}function CK(t){return Math.round(Date.now()/1e3)+t}function TK(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Lr=()=>typeof window<"u"&&typeof document<"u",ba={tested:!1,writable:!1},lI=()=>{if(!Lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ba.tested)return ba.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ba.tested=!0,ba.writable=!0}catch{ba.tested=!0,ba.writable=!1}return ba.writable};function NK(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const cI=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Xn(async()=>{const{default:r}=await Promise.resolve().then(()=>Qc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},EK=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Zl=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},wa=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},To=async(t,e)=>{await t.removeItem(e)};class Lp{constructor(){this.promise=new Lp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Lp.promiseConstructor=Promise;function Nx(t){const e=t.split(".");if(e.length!==3)throw new r0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!fK.test(e[r]))throw new r0("JWT not in base64url format");return{header:JSON.parse(IT(e[0])),payload:JSON.parse(IT(e[1])),signature:Sc(e[2]),raw:{header:e[0],payload:e[1]}}}async function PK(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _K(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){s(a);return}}})()})}function RK(t){return("0"+t.toString(16)).substr(-2)}function AK(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,RK).join("")}async function IK(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function OK(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await IK(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wl(t,e,n=!1){const r=AK();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Zl(t,`${e}-code-verifier`,s);const o=await OK(r);return[o,r===o?"plain":"s256"]}const MK=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function DK(t){const e=t.headers.get(t0);if(!e||!e.match(MK))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function LK(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function UK(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FK=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hl(t){if(!FK.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ex(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function OT(t){return JSON.parse(JSON.stringify(t))}var VK=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const ja=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BK=[502,503,504];async function MT(t){var e;if(!EK(t))throw new n0(ja(t),0);if(BK.includes(t.status))throw new n0(ja(t),t.status);let n;try{n=await t.json()}catch(o){throw new Ea(ja(o),o)}let r;const s=DK(t);if(s&&s.getTime()>=oI["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new _T(ja(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ro}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new _T(ja(n),t.status,n.weak_password.reasons);throw new gK(ja(n),t.status||500,r)}const $K=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ze(t,e,n,r){var s;const o=Object.assign({},r?.headers);o[t0]||(o[t0]=oI["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await zK(t,e,n+l,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function zK(t,e,n,r,s,o){const a=$K(e,r,s,o);let l;try{l=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new n0(ja(d),0)}if(l.ok||await MT(l),r?.noResolveJson)return l;try{return await l.json()}catch(d){await MT(d)}}function ys(t){var e;let n=null;HK(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=CK(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function DT(t){const e=ys(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Io(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function qK(t){return{data:t,error:null}}function WK(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,a=VK(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},d=Object.assign({},a);return{data:{properties:l,user:d},error:null}}function LT(t){return t}function HK(t){return t.access_token&&t.refresh_token&&t.expires_in}const Px=["global","local","others"];var GK=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class KK{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=cI(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Px[0]){if(Px.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Px.join(", ")}`);try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Io})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=GK(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:WK,redirectTo:n?.redirectTo})}catch(n){if(Ge(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Io})}catch(n){if(Ge(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,a,l,d;try{const h={nextPage:null,lastPage:0,total:0},m=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:LT});if(m.error)throw m.error;const f=await m.json(),v=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(d=(l=m.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);h[`${k}Page`]=b}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if(Ge(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Hl(e);try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Io})}catch(n){if(Ge(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Hl(e);try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Io})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Hl(e);try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Io})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Hl(e.userId);try{const{data:n,error:r}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Hl(e.userId),Hl(e.id);try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,o,a,l,d;try{const h={nextPage:null,lastPage:0,total:0},m=await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:LT});if(m.error)throw m.error;const f=await m.json(),v=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(d=(l=m.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(w.split(";")[1].split("=")[1]);h[`${k}Page`]=b}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if(Ge(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}}function UT(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Gl={debug:!!(globalThis&&lI()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dI extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class JK extends dI{}async function YK(t,e,n){Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new JK(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gl.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function XK(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function uI(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function QK(t){return parseInt(t,16)}function ZK(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function eJ(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:l,requestId:d,resources:h,scheme:m,uri:f,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const y=uI(t.address),w=m?`${m}://${r}`:r,b=t.statement?`${t.statement}
`:"",k=`${w} wants you to sign in with your Ethereum account:
${y}

${b}`;let j=`URI: ${f}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(j+=`
Expiration Time: ${s.toISOString()}`),l&&(j+=`
Not Before: ${l.toISOString()}`),d&&(j+=`
Request ID: ${d}`),h){let T=`
Resources:`;for(const E of h){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);T+=`
- ${E}`}j+=T}return`${k}
${j}`}class cn extends Error{constructor({message:e,code:n,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Df extends cn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function tJ({error:t,options:e}){var n,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new cn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new cn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new cn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new cn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new cn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new cn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new cn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new cn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(mI(a)){if(o.rp.id!==a)return new cn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new cn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function nJ({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new cn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new cn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(mI(r)){if(n.rpId!==r)return new cn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var hI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class rJ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const sJ=new rJ;function iJ(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=hI(t,["challenge","user","excludeCredentials"]),o=Sc(e).buffer,a=Object.assign(Object.assign({},n),{id:Sc(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:o,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const h=r[d];l.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:Sc(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function oJ(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=hI(t,["challenge","allowCredentials"]),s=Sc(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Sc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return o}function aJ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ra(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ra(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lJ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ra(new Uint8Array(s.authenticatorData)),clientDataJSON:Ra(new Uint8Array(s.clientDataJSON)),signature:Ra(new Uint8Array(s.signature)),userHandle:s.userHandle?Ra(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mI(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function FT(){var t,e;return!!(Lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function cJ(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Df("Browser returned unexpected credential type",e)}:{data:null,error:new Df("Empty credential response",e)}}catch(e){return{data:null,error:tJ({error:e,options:t})}}}async function dJ(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Df("Browser returned unexpected credential type",e)}:{data:null,error:new Df("Empty credential response",e)}}catch(e){return{data:null,error:nJ({error:e,options:t})}}}const uJ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},hJ={userVerification:"preferred",hints:["security-key"]};function Lf(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const l=r[o];e(l)?r[o]=Lf(l,a):r[o]=Lf(a)}else r[o]=a}return r}function mJ(t,e){return Lf(uJ,t,e||{})}function fJ(t,e){return Lf(hJ,t,e||{})}class pJ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},o){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const d=s??sJ.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:h}=a.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(a.webauthn.type){case"create":{const h=mJ(a.webauthn.credential_options.publicKey,o?.create),{data:m,error:f}=await cJ({publicKey:h,signal:d});return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:f}}case"request":{const h=fJ(a.webauthn.credential_options.publicKey,o?.request),{data:m,error:f}=await dJ(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:h,signal:d}));return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:f}}}}catch(a){return Ge(a)?{data:null,error:a}:{data:null,error:new Ea("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!n)return{data:null,error:new Mu("rpId is required for WebAuthn authentication")};try{if(!FT())return{data:null,error:new Ea("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!a)return{data:null,error:l};const{webauthn:d}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(a){return Ge(a)?{data:null,error:a}:{data:null,error:new Ea("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!n)return{data:null,error:new Mu("rpId is required for WebAuthn registration")};try{if(!FT())return{data:null,error:new Ea("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(m=>{var f;return(f=m.data)===null||f===void 0?void 0:f.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:l};const{data:d,error:h}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return d?this._verify({factorId:a.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(a){return Ge(a)?{data:null,error:a}:{data:null,error:new Ea("Unexpected error in register",a)}}}}XK();const gJ={url:uK,storageKey:hK,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mK,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function VT(t,e,n){return await n()}const Kl={};class Du{get jwks(){var e,n;return(n=(e=Kl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Kl[this.storageKey]=Object.assign(Object.assign({},Kl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Kl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kl[this.storageKey]=Object.assign(Object.assign({},Kl[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Du.nextInstanceID,Du.nextInstanceID+=1,this.instanceID>0&&Lr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},gJ),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new KK({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=cI(s.fetch),this.lock=s.lock||VT,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Lr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=YK:this.lock=VT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new pJ(this)},this.persistSession?(s.storage?this.storage=s.storage:lI()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=UT(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=UT(this.memoryStorage)),Lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${iI}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=NK(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Lr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),yK(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ge(n)?{error:n}:{error:new Ea("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:ys}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const d=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(o){if(Ge(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:m,password:f,options:v}=e;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await Wl(this.storage,this.storageKey)),o=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:m,password:f,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:y,code_challenge_method:w},xform:ys})}else if("phone"in e){const{phone:m,password:f,options:v}=e;o=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:f,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:ys})}else throw new Om("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const d=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(o){if(Ge(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:l}=e;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:DT})}else if("phone"in e){const{phone:o,password:a,options:l}=e;n=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:DT})}else throw new Om("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ql}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,o,a,l,d,h,m,f,v;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:b,wallet:k,statement:j,options:T}=e;let E;if(Lr())if(typeof k=="object")E=k;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")E=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=k}const P=new URL((n=T?.url)!==null&&n!==void 0?n:window.location.href),N=await E.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=uI(N[0]);let I=(r=T?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const O=await E.request({method:"eth_chainId"});I=QK(O)}const M={domain:P.host,address:_,statement:j,uri:P.href,version:"1",chainId:I,nonce:(s=T?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=T?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=T?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=T?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=T?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=T?.signInWithEthereum)===null||m===void 0?void 0:m.resources};y=eJ(M),w=await E.request({method:"personal_sign",params:[ZK(y),_]})}try{const{data:b,error:k}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:w},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ys});if(k)throw k;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ql}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:k})}catch(b){if(Ge(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(e){var n,r,s,o,a,l,d,h,m,f,v,y;let w,b;if("message"in e)w=e.message,b=e.signature;else{const{chain:k,wallet:j,statement:T,options:E}=e;let P;if(Lr())if(typeof j=="object")P=j;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))P=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=j}const N=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const _=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),T?{statement:T}:null));let I;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")I=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)I=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)w=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),b=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${N.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=E?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=E?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((a=E?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((l=E?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((d=E?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((f=(m=E?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||f===void 0)&&f.length?["Resources",...E.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const _=await P.signMessage(new TextEncoder().encode(w),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=_}}try{const{data:k,error:j}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Ra(b)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ys});if(j)throw j;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new ql}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:j})}catch(k){if(Ge(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const n=await wa(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:a}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ys});if(await To(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ql}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(Ge(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:a}=e,l=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ys}),{data:d,error:h}=l;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new ql}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,a;try{if("email"in e){const{email:l,options:d}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Wl(this.storage,this.storageKey));const{error:f}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:d}=e,{data:h,error:m}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(o=d?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(a=d?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new Om("You must provide either an email or phone number.")}catch(l){if(Ge(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:ys});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,h=a.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(Ge(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await Wl(this.storage,this.storageKey)),await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:qK})}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ro;const{error:s}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ge(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:a}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:a,error:l}=await Ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Om("You must provide either an email or phone number and a type")}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await wa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Cx:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await wa(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=Ex()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,h,m)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,m))})}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Io}):await this._useSession(async n=>{var r,s,o;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ro}:await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Io})})}catch(n){if(Ge(n))return xK(n)&&(await this._removeSession(),await To(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Ro;const a=s.session;let l=null,d=null;this.flowType==="pkce"&&e.email!=null&&([l,d]=await Wl(this.storage,this.storageKey));const{data:h,error:m}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:a.access_token,xform:Io});if(m)throw m;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Ge(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ro;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:a}=Nx(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Ge(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:l}=n;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Ro;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ge(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Lr())throw new Mm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new PT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new PT("No code detected.");const{data:T,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:d,token_type:h}=e;if(!o||!l||!a||!h)throw new Mm("No session defined in URL");const m=Math.round(Date.now()/1e3),f=parseInt(l);let v=m+f;d&&(v=parseInt(d));const y=v-m;y*1e3<=Ql&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const w=v-f;m-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,m):m-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,m);const{data:b,error:k}=await this._getUser(o);if(k)throw k;const j={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:v,refresh_token:a,token_type:h,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(r){if(Ge(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await wa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(vK(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await To(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=TK(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wl(this.storage,this.storageKey,!0));try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var a,l,d,h,m;const{data:f,error:v}=o;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",y,{headers:this.headers,jwt:(m=(h=f.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return Lr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(Ge(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:a,provider:l,token:d,access_token:h,nonce:m}=e,f=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:d,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ys}),{data:v,error:y}=f;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new ql}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(s){if(Ge(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)throw a;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _K(async s=>(s>0&&await PK(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ys})),(s,o)=>{const a=200*Math.pow(2,s);return o&&Tx(o)&&Date.now()+a-r<Ql})}catch(r){if(this._debug(n,"error",r),Ge(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Lr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await wa(this.storage,this.storageKey);if(s&&this.userStorage){let a=await wa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Zl(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a?.user)!==null&&e!==void 0?e:Ex()}else if(s&&!s.user&&!s.user){const a=await wa(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,await To(this.storage,this.storageKey+"-user"),await Zl(this.storage,this.storageKey,s)):s.user=Ex()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Cx;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Cx}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Tx(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&a?.user?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Lp;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Ro;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={data:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),Ge(o)){const a={data:null,error:o};return Tx(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Zl(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=OT(s);await Zl(this.storage,this.storageKey,o)}else{const s=OT(n);await Zl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await To(this.storage,this.storageKey),await To(this.storage,this.storageKey+"-code-verifier"),await To(this.storage,this.storageKey+"-user"),this.userStorage&&await To(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Lr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ql);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ql);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ql}ms, refresh threshold is ${e0} ticks`),s<=e0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dI)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await Wl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:h}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&d.type==="totp"&&(!((s=d?.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?aJ(e.webauthn.credential_response):lJ(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:d}=await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:d})})}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=await Ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:iJ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:oJ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ge(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Nx(s.access_token);let l=null;a.aal&&(l=a.aal);let d=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const m=a.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+pK>s)return r;const{data:o,error:a}=await Ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:y,error:w}=await this.getSession();if(w||!y.session)return{data:null,error:w};r=y.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:d}}=Nx(r);n?.allowExpired||LK(o.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!h){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:o,header:s,signature:a},error:null}}const m=UK(s.alg),f=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,f,a,jK(`${l}.${d}`)))throw new r0("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}}}Du.nextInstanceID=0;const vJ=Du;class xJ extends vJ{constructor(e){super(e)}}var yJ=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})};class bJ{constructor(e,n,r){var s,o,a;this.supabaseUrl=e,this.supabaseKey=n;const l=dK(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:eK,realtime:nK,auth:Object.assign(Object.assign({},tK),{storageKey:d}),global:ZG},m=cK(r??{},h);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(f,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,m.global.fetch),this.fetch=oK(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new gG(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new YG(this.storageUrl.href,this.headers,this.fetch,r?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new oG(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return yJ(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:a,flowType:l,lock:d,debug:h},m,f){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xJ({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),m),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:l,lock:d,debug:h,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new IG(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wJ=(t,e,n)=>new bJ(t,e,n);function SJ(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}SJ()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let Dm=null;function Nw(){return Dm||(Dm=wJ(`https://${el}.supabase.co`,Gc,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,flowType:"pkce"},global:{headers:{"X-Client-Info":"volleypro-web"}}}),Dm)}const Aa=Object.freeze(Object.defineProperty({__proto__:null,createClient:Nw},Symbol.toStringTag,{value:"Module"}));function kJ({liveId:t,isCreator:e,isLive:n,onStreamStart:r,onStreamStop:s}){const[o,a]=g.useState(null),[l,d]=g.useState(!0),[h,m]=g.useState(!0),[f,v]=g.useState(!1),[y,w]=g.useState(null),[b,k]=g.useState(null),[j,T]=g.useState("disconnected"),[E,P]=g.useState(0),N=g.useRef(null),_=g.useRef(null),I=g.useRef(null),M=Nw();g.useEffect(()=>(e&&n&&!o&&O(),()=>{L(),Z()}),[e,n]),g.useEffect(()=>{o&&N.current&&(N.current.srcObject=o)},[o]),g.useEffect(()=>(e&&o&&n&&l?A():Z(),()=>Z()),[e,o,n,l]),g.useEffect(()=>(!e&&n&&se(),()=>{}),[e,n,t]);async function O(){v(!0),w(null);const U=await ww();U.success&&U.stream?(a(U.stream),T("connected"),r?.(U.stream),K.success("Câmera ativada! 📹",{description:"Transmitindo para seus espectadores"})):(w(U.error||"Erro ao acessar câmera"),T("disconnected"),K.error("Erro ao ativar câmera",{description:U.error})),v(!1)}function L(){Sw(o),a(null),T("disconnected"),s?.(),N.current&&(N.current.srcObject=null)}function D(){if(!N.current||!_.current)return null;const U=N.current,G=_.current,le=G.getContext("2d");return!le||U.readyState!==U.HAVE_ENOUGH_DATA?null:(G.width=U.videoWidth,G.height=U.videoHeight,le.drawImage(U,0,0,G.width,G.height),G.toDataURL("image/jpeg",.6))}function A(){Z(),console.log("📡 Iniciando broadcast de frames..."),T("connecting"),I.current=setInterval(async()=>{const U=D();if(!U){console.warn("⚠️ Não foi possível capturar frame");return}try{await M.channel(`live:${t}`).send({type:"broadcast",event:"frame",payload:{frame:U,timestamp:Date.now(),liveId:t}}),P(le=>le+1),T("connected"),E===0&&K.success("Transmissão iniciada! 📡",{description:"Seus espectadores podem te ver"})}catch(G){console.error("❌ Erro ao enviar frame:",G),T("disconnected")}},1e3)}function Z(){I.current&&(clearInterval(I.current),I.current=null,console.log("🛑 Broadcast parado"))}async function se(){console.log(`👁️ Inscrevendo-se para receber frames da live ${t}...`),T("connecting");const U=M.channel(`live:${t}`);return U.on("broadcast",{event:"frame"},G=>{console.log("📥 Frame recebido!",G),G.payload.frame&&(k(G.payload.frame),T("connected"),P(le=>le+1))}).subscribe(G=>{console.log("📡 Status da inscrição:",G),G==="SUBSCRIBED"?(T("connected"),K.success("Conectado à transmissão! 📡")):G==="CHANNEL_ERROR"&&(T("disconnected"),K.error("Erro ao conectar à transmissão"))}),()=>{U.unsubscribe()}}function fe(){if(o){const U=o.getVideoTracks()[0];U&&(U.enabled=!U.enabled,d(U.enabled),K.info(U.enabled?"Câmera ativada 📹":"Câmera desativada 📴"))}}function ae(){if(o){const U=o.getAudioTracks()[0];U&&(U.enabled=!U.enabled,m(U.enabled),K.info(U.enabled?"Microfone ativado 🎤":"Microfone mudo 🔇"))}}function de(){switch(j){case"connected":return i.jsx(r3,{className:"h-4 w-4 text-green-500 animate-pulse"});case"connecting":return i.jsx(a3,{className:"h-4 w-4 text-yellow-500 animate-pulse"});case"disconnected":return i.jsx(i3,{className:"h-4 w-4 text-red-500"})}}return e?i.jsxs("div",{className:"relative aspect-video bg-black overflow-hidden",children:[i.jsx("canvas",{ref:_,className:"hidden"}),i.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-cover ${l?"":"opacity-0"}`}),o&&!f&&i.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-black/70 backdrop-blur-sm px-3 py-2 rounded-lg",children:[de(),i.jsx("span",{className:"text-white text-sm",children:j==="connected"?`Transmitindo • ${E} frames enviados`:j==="connecting"?"Iniciando transmissão...":"Desconectado"})]}),i.jsx(Se,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white border-0 w-fit shadow-lg",children:"⚡ Streaming Ativo"})]}),!l&&o&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx(p1,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("p",{children:"Câmera desativada"})]})}),f&&i.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx(or,{className:"h-12 w-12 animate-spin mx-auto mb-4"}),i.jsx("p",{children:"Ativando câmera..."})]})}),y&&!o&&i.jsx(bw,{error:y,onRetry:O}),o&&!f&&i.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2",children:[i.jsx(q,{size:"icon",variant:"outline",onClick:fe,className:`
              ${l?"bg-white/10 text-white border-white/20 hover:bg-white/20":"bg-red-500 text-white border-red-600 hover:bg-red-600"}
            `,children:l?i.jsx(js,{className:"h-5 w-5"}):i.jsx(p1,{className:"h-5 w-5"})}),i.jsx(q,{size:"icon",variant:"outline",onClick:ae,className:`
              ${h?"bg-white/10 text-white border-white/20 hover:bg-white/20":"bg-red-500 text-white border-red-600 hover:bg-red-600"}
            `,children:h?i.jsx(LL,{className:"h-5 w-5"}):i.jsx(ML,{className:"h-5 w-5"})}),i.jsx(Se,{className:"bg-red-500 ml-2",children:"🔴 TRANSMITINDO"})]}),!o&&!f&&!y&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx(Nr,{className:"h-24 w-24 mx-auto mb-4 text-white/50"}),i.jsx("h3",{className:"text-xl mb-2",children:"Ative sua câmera"}),i.jsx("p",{className:"text-sm text-white/70 mb-4",children:"Seus espectadores poderão te ver em tempo real"}),i.jsxs(q,{onClick:O,className:"bg-red-500 hover:bg-red-600",children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),"Iniciar Transmissão"]})]})})]}):i.jsx("div",{className:"relative aspect-video bg-gradient-to-br from-gray-900 via-blue-900/30 to-black overflow-hidden",children:b?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:b,alt:"Live stream",className:"w-full h-full object-cover"}),i.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-black/70 backdrop-blur-sm px-3 py-2 rounded-lg",children:[de(),i.jsx("span",{className:"text-white text-sm",children:j==="connected"?`Ao vivo • ${E} frames`:"Conectando..."})]}),i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx(Se,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white border-0 shadow-lg",children:"👁️ Assistindo"})})]}):i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white px-6",children:[i.jsx(or,{className:"h-16 w-16 mx-auto mb-4 text-blue-500 animate-spin"}),i.jsx("h3",{className:"text-xl mb-2",children:"Conectando à transmissão..."}),i.jsx("p",{className:"text-sm text-white/70 mb-4",children:j==="connected"?"Aguardando primeiro frame do criador...":"Estabelecendo conexão..."}),i.jsxs(Se,{variant:"outline",className:"text-white border-white/30",children:[de(),i.jsx("span",{className:"ml-2",children:j})]})]})})})}var BT={};function jJ(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var CJ=Object.defineProperty,TJ=(t,e,n)=>e in t?CJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$T=(t,e,n)=>TJ(t,typeof e!="symbol"?e+"":e,n);class Er{constructor(){$T(this,"_locking"),$T(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(s=>e=()=>{this._locks-=1,s()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function Wt(t,e){if(!t)throw new Error(e)}const NJ=34028234663852886e22,EJ=-34028234663852886e22,PJ=4294967295,_J=2147483647,RJ=-2147483648;function Zm(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>_J||t<RJ)throw new Error("invalid int 32: "+t)}function s0(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>PJ||t<0)throw new Error("invalid uint 32: "+t)}function fI(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>NJ||t<EJ))throw new Error("invalid float 32: "+t)}const pI=Symbol("@bufbuild/protobuf/enum-type");function AJ(t){const e=t[pI];return Wt(e,"missing enum type on enum object"),e}function gI(t,e,n,r){t[pI]=vI(e,n.map(s=>({no:s.no,name:s.name,localName:t[s.no]})))}function vI(t,e,n){const r=Object.create(null),s=Object.create(null),o=[];for(const a of e){const l=xI(a);o.push(l),r[a.name]=l,s[a.no]=l}return{typeName:t,values:o,findName(a){return r[a]},findNumber(a){return s[a]}}}function IJ(t,e,n){const r={};for(const s of e){const o=xI(s);r[o.localName]=o.no,r[o.no]=o.localName}return gI(r,t,e),r}function xI(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Ew{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),s=r.runtime.bin,o=s.makeReadOptions(n);return s.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const r=this.getType(),s=r.runtime.json,o=s.makeReadOptions(n);return s.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(s){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(s instanceof Error?s.message:String(s)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,s=r.makeWriteOptions(e),o=s.writerFactory();return r.writeMessage(this,o,s),o.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,s=r.makeWriteOptions(e);return r.writeMessage(this,s)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function OJ(t,e,n,r){var s;const o=(s=r?.localName)!==null&&s!==void 0?s:e.substring(e.lastIndexOf(".")+1),a={[o]:function(l){t.util.initFields(this),t.util.initPartial(l,this)}}[o];return Object.setPrototypeOf(a.prototype,new Ew),Object.assign(a,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(l,d){return new a().fromBinary(l,d)},fromJson(l,d){return new a().fromJson(l,d)},fromJsonString(l,d){return new a().fromJsonString(l,d)},equals(l,d){return t.util.equals(a,l,d)}}),a}function MJ(){let t=0,e=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function _x(t,e,n){for(let o=0;o<28;o=o+7){const a=t>>>o,l=!(!(a>>>7)&&e==0),d=(l?a|128:a)&255;if(n.push(d),!l)return}const r=t>>>28&15|(e&7)<<4,s=e>>3!=0;if(n.push((s?r|128:r)&255),!!s){for(let o=3;o<31;o=o+7){const a=e>>>o,l=!!(a>>>7),d=(l?a|128:a)&255;if(n.push(d),!l)return}n.push(e>>>31&1)}}const ef=4294967296;function zT(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,s=0;function o(a,l){const d=Number(t.slice(a,l));s*=n,r=r*n+d,r>=ef&&(s=s+(r/ef|0),r=r%ef)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?bI(r,s):Pw(r,s)}function DJ(t,e){let n=Pw(t,e);const r=n.hi&2147483648;r&&(n=bI(n.lo,n.hi));const s=yI(n.lo,n.hi);return r?"-"+s:s}function yI(t,e){if({lo:t,hi:e}=LJ(t,e),e<=2097151)return String(ef*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,s=e>>16&65535;let o=n+r*6777216+s*6710656,a=r+s*8147497,l=s*2;const d=1e7;return o>=d&&(a+=Math.floor(o/d),o%=d),a>=d&&(l+=Math.floor(a/d),a%=d),l.toString()+qT(a)+qT(o)}function LJ(t,e){return{lo:t>>>0,hi:e>>>0}}function Pw(t,e){return{lo:t|0,hi:e|0}}function bI(t,e){return e=~e,t?t=~t+1:e+=1,Pw(t,e)}const qT=t=>{const e=String(t);return"0000000".slice(e.length)+e};function WT(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function UJ(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function FJ(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof BT!="object"||BT.BUF_BIGINT_DISABLE!=="1")){const s=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),a=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>o||h<s)throw new Error("int64 invalid: ".concat(d));return h},uParse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>l||h<a)throw new Error("uint64 invalid: ".concat(d));return h},enc(d){return t.setBigInt64(0,this.parse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(d){return t.setBigInt64(0,this.uParse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(d,h){return t.setInt32(0,d,!0),t.setInt32(4,h,!0),t.getBigInt64(0,!0)},uDec(d,h){return t.setInt32(0,d,!0),t.setInt32(4,h,!0),t.getBigUint64(0,!0)}}}const n=s=>Wt(/^-?[0-9]+$/.test(s),"int64 invalid: ".concat(s)),r=s=>Wt(/^[0-9]+$/.test(s),"uint64 invalid: ".concat(s));return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),n(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),r(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),n(s),zT(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),r(s),zT(s)},dec(s,o){return DJ(s,o)},uDec(s,o){return yI(s,o)}}}const Ot=FJ();var pe;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(pe||(pe={}));var Ko;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Ko||(Ko={}));function No(t,e,n){if(e===n)return!0;if(t==pe.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case pe.UINT64:case pe.FIXED64:case pe.INT64:case pe.SFIXED64:case pe.SINT64:return e==n}return!1}function Lc(t,e){switch(t){case pe.BOOL:return!1;case pe.UINT64:case pe.FIXED64:case pe.INT64:case pe.SFIXED64:case pe.SINT64:return e==0?Ot.zero:"0";case pe.DOUBLE:case pe.FLOAT:return 0;case pe.BYTES:return new Uint8Array(0);case pe.STRING:return"";default:return 0}}function wI(t,e){switch(t){case pe.BOOL:return e===!1;case pe.STRING:return e==="";case pe.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var nn;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(nn||(nn={}));class VJ{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let n=new Uint8Array(e),r=0;for(let s=0;s<this.chunks.length;s++)n.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(s0(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Zm(e),WT(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){fI(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){s0(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Zm(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Zm(e),e=(e<<1^e>>31)>>>0,WT(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),s=Ot.enc(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),s=Ot.uEnc(e);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}int64(e){let n=Ot.enc(e);return _x(n.lo,n.hi,this.buf),this}sint64(e){let n=Ot.enc(e),r=n.hi>>31,s=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return _x(s,o,this.buf),this}uint64(e){let n=Ot.uEnc(e);return _x(n.lo,n.hi,this.buf),this}}class BJ{constructor(e,n){this.varint64=MJ,this.uint32=UJ,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e,n){let r=this.pos;switch(e){case nn.Varint:for(;this.buf[this.pos++]&128;);break;case nn.Bit64:this.pos+=4;case nn.Bit32:this.pos+=4;break;case nn.LengthDelimited:let s=this.uint32();this.pos+=s;break;case nn.StartGroup:for(;;){const[o,a]=this.tag();if(a===nn.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(a,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Ot.dec(...this.varint64())}uint64(){return Ot.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Ot.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ot.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ot.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function $J(t,e,n,r){let s;return{typeName:e,extendee:n,get field(){if(!s){const o=typeof r=="function"?r():r;o.name=e.split(".").pop(),o.jsonName="[".concat(e,"]"),s=t.util.newFieldList([o]).list()[0]}return s},runtime:t}}function SI(t){const e=t.field.localName,n=Object.create(null);return n[e]=zJ(t),[n,()=>n[e]]}function zJ(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Lc(e.T,e.L);case"message":const n=e.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function qJ(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Up=[];for(let t=0;t<Mi.length;t++)Up[Mi[t].charCodeAt(0)]=t;Up[45]=Mi.indexOf("+");Up[95]=Mi.indexOf("/");const kI={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,s=0,o,a=0;for(let l=0;l<t.length;l++){if(o=Up[t.charCodeAt(l)],o===void 0)switch(t[l]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:a=o,s=1;break;case 1:n[r++]=a<<2|(o&48)>>4,a=o,s=2;break;case 2:n[r++]=(a&15)<<4|(o&60)>>2,a=o,s=3;break;case 3:n[r++]=(a&3)<<6|o,s=0;break}}if(s==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,s=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=Mi[r>>2],s=(r&3)<<4,n=1;break;case 1:e+=Mi[s|r>>4],s=(r&15)<<2,n=2;break;case 2:e+=Mi[s|r>>6],e+=Mi[r&63],n=0;break}return n&&(e+=Mi[s],e+="=",n==1&&(e+="=")),e}};function WJ(t,e,n){CI(e,t);const r=e.runtime.bin.makeReadOptions(n),s=qJ(t.getType().runtime.bin.listUnknownFields(t),e.field),[o,a]=SI(e);for(const l of s)e.runtime.bin.readField(o,r.readerFactory(l.data),e.field,l.wireType,r);return a()}function HJ(t,e,n,r){CI(e,t);const s=e.runtime.bin.makeReadOptions(r),o=e.runtime.bin.makeWriteOptions(r);if(jI(t,e)){const h=t.getType().runtime.bin.listUnknownFields(t).filter(m=>m.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const m of h)t.getType().runtime.bin.onUnknownField(t,m.no,m.wireType,m.data)}const a=o.writerFactory();let l=e.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(l,n,a,o);const d=s.readerFactory(a.finish());for(;d.pos<d.len;){const[h,m]=d.tag(),f=d.skip(m,h);t.getType().runtime.bin.onUnknownField(t,h,m,f)}}function jI(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(r=>r.no==e.field.no)}function CI(t,e){Wt(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function TI(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!wI(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function HT(t,e){const n=t.localName,r=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=r?t.T.values[0].no:void 0;break;case"scalar":e[n]=r?Lc(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Di(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(Ew.prototype).every(r=>r in t&&typeof t[r]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function NI(t,e){return Di(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}pe.DOUBLE,pe.FLOAT,pe.INT64,pe.UINT64,pe.INT32,pe.UINT32,pe.BOOL,pe.STRING,pe.BYTES;const GT={ignoreUnknownFields:!1},KT={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function GJ(t){return t?Object.assign(Object.assign({},GT),t):GT}function KJ(t){return t?Object.assign(Object.assign({},KT),t):KT}const Uf=Symbol(),tf=Symbol();function JJ(){return{makeReadOptions:GJ,makeWriteOptions:KJ,readMessage(t,e,n,r){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(ri(e)));r=r??new t;const s=new Map,o=n.typeRegistry;for(const[a,l]of Object.entries(e)){const d=t.fields.findJsonName(a);if(d){if(d.oneof){if(l===null&&d.kind=="scalar")continue;const h=s.get(d.oneof);if(h!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(d.oneof.name,'" present: "').concat(h,'", "').concat(a,'"'));s.set(d.oneof,a)}JT(r,l,d,n,t)}else{let h=!1;if(o?.findExtension&&a.startsWith("[")&&a.endsWith("]")){const m=o.findExtension(a.substring(1,a.length-1));if(m&&m.extendee.typeName==t.typeName){h=!0;const[f,v]=SI(m);JT(f,l,m.field,n,m),HJ(r,m,v(),n)}}if(!h&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(a,'" is unknown'))}}return r},writeMessage(t,e){const n=t.getType(),r={};let s;try{for(s of n.fields.byNumber()){if(!TI(s,t)){if(s.req)throw"required field not set";if(!e.emitDefaultValues||!XJ(s))continue}const a=s.oneof?t[s.oneof.localName].value:t[s.localName],l=YT(s,a,e);l!==void 0&&(r[e.useProtoFieldName?s.name:s.jsonName]=l)}const o=e.typeRegistry;if(o?.findExtensionFor)for(const a of n.runtime.bin.listUnknownFields(t)){const l=o.findExtensionFor(n.typeName,a.no);if(l&&jI(t,l)){const d=WJ(t,l,e),h=YT(l.field,d,e);h!==void 0&&(r[l.field.jsonName]=h)}}}catch(o){const a=s?"cannot encode field ".concat(n.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=o instanceof Error?o.message:String(o);throw new Error(a+(l.length>0?": ".concat(l):""))}return r},readScalar(t,e,n){return ou(t,e,n??Ko.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||wI(t,e)))return nf(t,e)},debug:ri}}function ri(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function JT(t,e,n,r,s){let o=n.localName;if(n.repeated){if(Wt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(ri(e)));const a=t[o];for(const l of e){if(l===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(ri(l)));switch(n.kind){case"message":a.push(n.T.fromJson(l,r));break;case"enum":const d=Rx(n.T,l,r.ignoreUnknownFields,!0);d!==tf&&a.push(d);break;case"scalar":try{a.push(ou(n.T,l,n.L,!0))}catch(h){let m="cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(ri(l));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(ri(e)));const a=t[o];for(const[l,d]of Object.entries(e)){if(d===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: map value null"));let h;try{h=YJ(n.K,l)}catch(m){let f="cannot decode map key for field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(ri(e));throw m instanceof Error&&m.message.length>0&&(f+=": ".concat(m.message)),new Error(f)}switch(n.V.kind){case"message":a[h]=n.V.T.fromJson(d,r);break;case"enum":const m=Rx(n.V.T,d,r.ignoreUnknownFields,!0);m!==tf&&(a[h]=m);break;case"scalar":try{a[h]=ou(n.V.T,d,Ko.BIGINT,!0)}catch(f){let v="cannot decode map value for field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(ri(e));throw f instanceof Error&&f.message.length>0&&(v+=": ".concat(f.message)),new Error(v)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const a=n.T;if(e===null&&a.typeName!="google.protobuf.Value")return;let l=t[o];Di(l)?l.fromJson(e,r):(t[o]=l=a.fromJson(e,r),a.fieldWrapper&&!n.oneof&&(t[o]=a.fieldWrapper.unwrapField(l)));break;case"enum":const d=Rx(n.T,e,r.ignoreUnknownFields,!1);switch(d){case Uf:HT(n,t);break;case tf:break;default:t[o]=d;break}break;case"scalar":try{const h=ou(n.T,e,n.L,!1);switch(h){case Uf:HT(n,t);break;default:t[o]=h;break}}catch(h){let m="cannot decode field ".concat(s.typeName,".").concat(n.name," from JSON: ").concat(ri(e));throw h instanceof Error&&h.message.length>0&&(m+=": ".concat(h.message)),new Error(m)}break}}function YJ(t,e){if(t===pe.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return ou(t,e,Ko.BIGINT,!0).toString()}function ou(t,e,n,r){if(e===null)return r?Lc(t,n):Uf;switch(t){case pe.DOUBLE:case pe.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const s=Number(e);if(Number.isNaN(s)||!Number.isFinite(s))break;return t==pe.FLOAT&&fI(s),s;case pe.INT32:case pe.FIXED32:case pe.SFIXED32:case pe.SINT32:case pe.UINT32:let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return t==pe.UINT32||t==pe.FIXED32?s0(o):Zm(o),o;case pe.INT64:case pe.SFIXED64:case pe.SINT64:if(typeof e!="number"&&typeof e!="string")break;const a=Ot.parse(e);return n?a.toString():a;case pe.FIXED64:case pe.UINT64:if(typeof e!="number"&&typeof e!="string")break;const l=Ot.uParse(e);return n?l.toString():l;case pe.BOOL:if(typeof e!="boolean")break;return e;case pe.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case pe.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return kI.dec(e)}throw new Error}function Rx(t,e,n,r){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:r?t.values[0].no:Uf;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const s=t.findName(e);if(s!==void 0)return s.no;if(n)return tf;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(ri(e)))}function XJ(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function YT(t,e,n){if(t.kind=="map"){Wt(typeof e=="object"&&e!=null);const r={},s=Object.entries(e);switch(t.V.kind){case"scalar":for(const[a,l]of s)r[a.toString()]=nf(t.V.T,l);break;case"message":for(const[a,l]of s)r[a.toString()]=l.toJson(n);break;case"enum":const o=t.V.T;for(const[a,l]of s)r[a.toString()]=Ax(o,l,n.enumAsInteger);break}return n.emitDefaultValues||s.length>0?r:void 0}if(t.repeated){Wt(Array.isArray(e));const r=[];switch(t.kind){case"scalar":for(let s=0;s<e.length;s++)r.push(nf(t.T,e[s]));break;case"enum":for(let s=0;s<e.length;s++)r.push(Ax(t.T,e[s],n.enumAsInteger));break;case"message":for(let s=0;s<e.length;s++)r.push(e[s].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(t.kind){case"scalar":return nf(t.T,e);case"enum":return Ax(t.T,e,n.enumAsInteger);case"message":return NI(t.T,e).toJson(n)}}function Ax(t,e,n){var r;if(Wt(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const s=t.findNumber(e);return(r=s?.name)!==null&&r!==void 0?r:e}function nf(t,e){switch(t){case pe.INT32:case pe.SFIXED32:case pe.SINT32:case pe.FIXED32:case pe.UINT32:return Wt(typeof e=="number"),e;case pe.FLOAT:case pe.DOUBLE:return Wt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case pe.STRING:return Wt(typeof e=="string"),e;case pe.BOOL:return Wt(typeof e=="boolean"),e;case pe.UINT64:case pe.FIXED64:case pe.INT64:case pe.SFIXED64:case pe.SINT64:return Wt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case pe.BYTES:return Wt(e instanceof Uint8Array),kI.enc(e)}}const Jl=Symbol("@bufbuild/protobuf/unknown-fields"),XT={readUnknownFields:!0,readerFactory:t=>new BJ(t)},QT={writeUnknownFields:!0,writerFactory:()=>new VJ};function QJ(t){return t?Object.assign(Object.assign({},XT),t):XT}function ZJ(t){return t?Object.assign(Object.assign({},QT),t):QT}function eY(){return{makeReadOptions:QJ,makeWriteOptions:ZJ,listUnknownFields(t){var e;return(e=t[Jl])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Jl]},writeUnknownFields(t,e){const r=t[Jl];if(r)for(const s of r)e.tag(s.no,s.wireType).raw(s.data)},onUnknownField(t,e,n,r){const s=t;Array.isArray(s[Jl])||(s[Jl]=[]),s[Jl].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r,s){const o=t.getType(),a=s?e.len:e.pos+n;let l,d;for(;e.pos<a&&([l,d]=e.tag(),!(s===!0&&d==nn.EndGroup));){const h=o.fields.find(l);if(!h){const m=e.skip(d,l);r.readUnknownFields&&this.onUnknownField(t,l,d,m);continue}ZT(t,e,h,d,r)}if(s&&(d!=nn.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:ZT,writeMessage(t,e,n){const r=t.getType();for(const s of r.fields.byNumber()){if(!TI(s,t)){if(s.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(s.name," to binary: required field not set"));continue}const o=s.oneof?t[s.oneof.localName].value:t[s.localName];eN(s,o,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,r){e!==void 0&&eN(t,e,n,r)}}}function ZT(t,e,n,r,s){let{repeated:o,localName:a}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=a&&delete t.value,t.case=a,a="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?pe.INT32:n.T;let d=Ff;if(n.kind=="scalar"&&n.L>0&&(d=nY),o){let v=t[a];if(r==nn.LengthDelimited&&l!=pe.STRING&&l!=pe.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)v.push(d(e,l))}else v.push(d(e,l))}else t[a]=d(e,l);break;case"message":const h=n.T;o?t[a].push(rf(e,new h,s,n)):Di(t[a])?rf(e,t[a],s,n):(t[a]=rf(e,new h,s,n),h.fieldWrapper&&!n.oneof&&!n.repeated&&(t[a]=h.fieldWrapper.unwrapField(t[a])));break;case"map":let[m,f]=tY(n,e,s);t[a][m]=f;break}}function rf(t,e,n,r){const s=e.getType().runtime.bin,o=r?.delimited;return s.readMessage(e,t,o?r.no:t.uint32(),n,o),e}function tY(t,e,n){const r=e.uint32(),s=e.pos+r;let o,a;for(;e.pos<s;){const[l]=e.tag();switch(l){case 1:o=Ff(e,t.K);break;case 2:switch(t.V.kind){case"scalar":a=Ff(e,t.V.T);break;case"enum":a=e.int32();break;case"message":a=rf(e,new t.V.T,n,void 0);break}break}}if(o===void 0&&(o=Lc(t.K,Ko.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),a===void 0)switch(t.V.kind){case"scalar":a=Lc(t.V.T,Ko.BIGINT);break;case"enum":a=t.V.T.values[0].no;break;case"message":a=new t.V.T;break}return[o,a]}function nY(t,e){const n=Ff(t,e);return typeof n=="bigint"?n.toString():n}function Ff(t,e){switch(e){case pe.STRING:return t.string();case pe.BOOL:return t.bool();case pe.DOUBLE:return t.double();case pe.FLOAT:return t.float();case pe.INT32:return t.int32();case pe.INT64:return t.int64();case pe.UINT64:return t.uint64();case pe.FIXED64:return t.fixed64();case pe.BYTES:return t.bytes();case pe.FIXED32:return t.fixed32();case pe.SFIXED32:return t.sfixed32();case pe.SFIXED64:return t.sfixed64();case pe.SINT64:return t.sint64();case pe.UINT32:return t.uint32();case pe.SINT32:return t.sint32()}}function eN(t,e,n,r){Wt(e!==void 0);const s=t.repeated;switch(t.kind){case"scalar":case"enum":let o=t.kind=="enum"?pe.INT32:t.T;if(s)if(Wt(Array.isArray(e)),t.packed)sY(n,o,t.no,e);else for(const a of e)au(n,o,t.no,a);else au(n,o,t.no,e);break;case"message":if(s){Wt(Array.isArray(e));for(const a of e)tN(n,r,t,a)}else tN(n,r,t,e);break;case"map":Wt(typeof e=="object"&&e!=null);for(const[a,l]of Object.entries(e))rY(n,r,t,a,l);break}}function rY(t,e,n,r,s){t.tag(n.no,nn.LengthDelimited),t.fork();let o=r;switch(n.K){case pe.INT32:case pe.FIXED32:case pe.UINT32:case pe.SFIXED32:case pe.SINT32:o=Number.parseInt(r);break;case pe.BOOL:Wt(r=="true"||r=="false"),o=r=="true";break}switch(au(t,n.K,1,o),n.V.kind){case"scalar":au(t,n.V.T,2,s);break;case"enum":au(t,pe.INT32,2,s);break;case"message":Wt(s!==void 0),t.tag(2,nn.LengthDelimited).bytes(s.toBinary(e));break}t.join()}function tN(t,e,n,r){const s=NI(n.T,r);n.delimited?t.tag(n.no,nn.StartGroup).raw(s.toBinary(e)).tag(n.no,nn.EndGroup):t.tag(n.no,nn.LengthDelimited).bytes(s.toBinary(e))}function au(t,e,n,r){Wt(r!==void 0);let[s,o]=EI(e);t.tag(n,s)[o](r)}function sY(t,e,n,r){if(!r.length)return;t.tag(n,nn.LengthDelimited).fork();let[,s]=EI(e);for(let o=0;o<r.length;o++)t[s](r[o]);t.join()}function EI(t){let e=nn.Varint;switch(t){case pe.BYTES:case pe.STRING:e=nn.LengthDelimited;break;case pe.DOUBLE:case pe.FIXED64:case pe.SFIXED64:e=nn.Bit64;break;case pe.FIXED32:case pe.SFIXED32:case pe.FLOAT:e=nn.Bit32;break}const n=pe[t].toLowerCase();return[e,n]}function iY(){return{setEnumType:gI,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const s=r.localName,o=e,a=t;if(a[s]!=null)switch(r.kind){case"oneof":const l=a[s].case;if(l===void 0)continue;const d=r.findField(l);let h=a[s].value;d&&d.kind=="message"&&!Di(h,d.T)?h=new d.T(h):d&&d.kind==="scalar"&&d.T===pe.BYTES&&(h=Ud(h)),o[s]={case:l,value:h};break;case"scalar":case"enum":let m=a[s];r.T===pe.BYTES&&(m=r.repeated?m.map(Ud):Ud(m)),o[s]=m;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===pe.BYTES)for(const[y,w]of Object.entries(a[s]))o[s][y]=Ud(w);else Object.assign(o[s],a[s]);break;case"message":const v=r.V.T;for(const y of Object.keys(a[s])){let w=a[s][y];v.fieldWrapper||(w=new v(w)),o[s][y]=w}break}break;case"message":const f=r.T;if(r.repeated)o[s]=a[s].map(v=>Di(v,f)?v:new f(v));else{const v=a[s];f.fieldWrapper?f.typeName==="google.protobuf.BytesValue"?o[s]=Ud(v):o[s]=v:o[s]=Di(v,f)?v:new f(v)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const s=e[r.localName],o=n[r.localName];if(r.repeated){if(s.length!==o.length)return!1;switch(r.kind){case"message":return s.every((a,l)=>r.T.equals(a,o[l]));case"scalar":return s.every((a,l)=>No(r.T,a,o[l]));case"enum":return s.every((a,l)=>No(pe.INT32,a,o[l]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":let a=s,l=o;return r.T.fieldWrapper&&(a!==void 0&&!Di(a)&&(a=r.T.fieldWrapper.wrapField(a)),l!==void 0&&!Di(l)&&(l=r.T.fieldWrapper.wrapField(l))),r.T.equals(a,l);case"enum":return No(pe.INT32,s,o);case"scalar":return No(r.T,s,o);case"oneof":if(s.case!==o.case)return!1;const d=r.findField(s.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(s.value,o.value);case"enum":return No(pe.INT32,s.value,o.value);case"scalar":return No(d.T,s.value,o.value)}throw new Error("oneof cannot contain ".concat(d.kind));case"map":const h=Object.keys(s).concat(Object.keys(o));switch(r.V.kind){case"message":const m=r.V.T;return h.every(v=>m.equals(s[v],o[v]));case"enum":return h.every(v=>No(pe.INT32,s[v],o[v]));case"scalar":const f=r.V.T;return h.every(v=>No(f,s[v],o[v]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const s of e.fields.byMember()){const o=t[s.localName];let a;if(s.repeated)a=o.map(Lm);else if(s.kind=="map"){a=r[s.localName];for(const[l,d]of Object.entries(o))a[l]=Lm(d)}else s.kind=="oneof"?a=s.findField(o.case)?{case:o.case,value:Lm(o.value)}:{case:void 0}:a=Lm(o);r[s.localName]=a}for(const s of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(r,s.no,s.wireType,s.data);return n}}}function Lm(t){if(t===void 0)return t;if(Di(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Ud(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function oY(t,e,n){return{syntax:t,json:JJ(),bin:eY(),util:Object.assign(Object.assign({},iY()),{newFieldList:e,initFields:n}),makeMessageType(r,s,o){return OJ(this,r,s,o)},makeEnum:IJ,makeEnumType:vI,getEnumType:AJ,makeExtension(r,s,o){return $J(this,r,s,o)}}}class aY{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function PI(t,e){const n=_I(t);return e?n:mY(hY(n))}function lY(t){return PI(t,!1)}const cY=_I;function _I(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let s=t.charAt(r);switch(s){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(s),e=!1;break;default:e&&(e=!1,s=s.toUpperCase()),n.push(s);break}}return n.join("")}const dY=new Set(["constructor","toString","toJSON","valueOf"]),uY=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),RI=t=>"".concat(t,"$"),hY=t=>uY.has(t)?RI(t):t,mY=t=>dY.has(t)?RI(t):t;class fY{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=lY(e)}addField(e){Wt(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function pY(t,e){var n,r,s,o,a,l;const d=[];let h;for(const m of typeof t=="function"?t():t){const f=m;if(f.localName=PI(m.name,m.oneof!==void 0),f.jsonName=(n=m.jsonName)!==null&&n!==void 0?n:cY(m.name),f.repeated=(r=m.repeated)!==null&&r!==void 0?r:!1,m.kind=="scalar"&&(f.L=(s=m.L)!==null&&s!==void 0?s:Ko.BIGINT),f.delimited=(o=m.delimited)!==null&&o!==void 0?o:!1,f.req=(a=m.req)!==null&&a!==void 0?a:!1,f.opt=(l=m.opt)!==null&&l!==void 0?l:!1,m.packed===void 0&&(f.packed=m.kind=="enum"||m.kind=="scalar"&&m.T!=pe.BYTES&&m.T!=pe.STRING),m.oneof!==void 0){const v=typeof m.oneof=="string"?m.oneof:m.oneof.name;(!h||h.name!=v)&&(h=new fY(v)),f.oneof=h,h.addField(f)}d.push(f)}return d}const X=oY("proto3",t=>new aY(t,e=>pY(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Lc(e.T,e.L);break}}});class kr extends Ew{constructor(e){super(),this.seconds=Ot.zero,this.nanos=0,X.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(X.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const s=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(s))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Ot.parse(s/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const s=(this.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?r="."+s.substring(0,3)+"Z":s.substring(6)==="000"?r="."+s.substring(0,6)+"Z":r="."+s+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return kr.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new kr({seconds:Ot.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new kr().fromBinary(e,n)}static fromJson(e,n){return new kr().fromJson(e,n)}static fromJsonString(e,n){return new kr().fromJsonString(e,n)}static equals(e,n){return X.util.equals(kr,e,n)}}kr.runtime=X;kr.typeName="google.protobuf.Timestamp";kr.fields=X.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const gY=X.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:kr},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:vY,repeated:!0},{no:5,name:"events",kind:"message",T:yY,repeated:!0}]),vY=X.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:xY,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),xY=X.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:kr},{no:3,name:"value",kind:"scalar",T:2}]),yY=X.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:kr},{no:7,name:"normalized_end_timestamp",kind:"message",T:kr,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),AI=X.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Cs=X.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),hn=X.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),_w=X.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Yd=X.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Lu=X.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Ps=X.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),Ca=X.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),bY=X.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),An=X.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Fp=X.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Vf,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:WI}]),Vf=X.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),wY=X.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:X.getEnumType(hn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Ka=X.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:X.getEnumType(kc)},{no:4,name:"tracks",kind:"message",T:dc,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:wY},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:X.getEnumType(Uu)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:X.getEnumType(Ps)},{no:18,name:"kind_details",kind:"enum",T:X.getEnumType(SY),repeated:!0}]),kc=X.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Uu=X.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),SY=X.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),kn=X.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),kY=X.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Fo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:X.getEnumType(II)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),dc=X.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:X.getEnumType(Cs)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:X.getEnumType(hn)},{no:10,name:"layers",kind:"message",T:Fo,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:kY,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:X.getEnumType(kn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:WI},{no:19,name:"audio_features",kind:"enum",T:X.getEnumType(An),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:X.getEnumType(AI)}]),Fo=X.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:X.getEnumType(_w)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),II=X.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),sr=X.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:X.getEnumType(st)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Rw,oneof:"value"},{no:3,name:"speaker",kind:"message",T:jY,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:LI,oneof:"value"},{no:7,name:"transcription",kind:"message",T:CY,oneof:"value"},{no:8,name:"metrics",kind:"message",T:gY,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Bf,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Aw,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Iw,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:Ow,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:$f,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:zf,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:qf,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:OI,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),st=X.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),OI=X.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:X.getEnumType(kn)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),MI=X.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:Rw,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:Bf,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:Aw,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:Iw,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:Ow,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:$f,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:zf,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:qf,oneof:"value"}]),jY=X.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:DI,repeated:!0}]),DI=X.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),Rw=X.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),LI=X.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),CY=X.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:TY,repeated:!0}]),TY=X.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Bf=X.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Aw=X.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Iw=X.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),Ow=X.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:UI,oneof:"value"}]),UI=X.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),FI=X.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),VI=X.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:X.getEnumType(BI)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),BI=X.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),$I=X.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:X.getEnumType(zI)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),zI=X.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),qI=X.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:nN},{no:2,name:"screen",kind:"message",T:nN},{no:3,name:"resume_connection",kind:"enum",T:X.getEnumType(Lu)},{no:4,name:"disabled_codecs",kind:"message",T:NY},{no:5,name:"force_relay",kind:"enum",T:X.getEnumType(Lu)}]),nN=X.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:X.getEnumType(Lu)}]),NY=X.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Vf,repeated:!0},{no:2,name:"publish",kind:"message",T:Vf,repeated:!0}]),WI=X.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),i0=X.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),HI=X.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:X.getEnumType(i0)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),GI=X.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),$f=X.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:X.getEnumType(kn)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:HI,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:GI,oneof:"content_header"}],{localName:"DataStream_Header"}),zf=X.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),qf=X.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),EY=X.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),Ts=X.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),o0=X.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),PY=X.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),_Y=X.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Jo,oneof:"message"},{no:2,name:"answer",kind:"message",T:Jo,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Vp,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Fu,oneof:"message"},{no:5,name:"mute",kind:"message",T:Bp,oneof:"message"},{no:6,name:"subscription",kind:"message",T:$p,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:KI,oneof:"message"},{no:8,name:"leave",kind:"message",T:zp,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:YI,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:ZI,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Fw,oneof:"message"},{no:13,name:"simulate",kind:"message",T:ti,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:Lw,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:nO,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:Dw,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:JI,oneof:"message"}]),rN=X.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:RY,oneof:"message"},{no:2,name:"answer",kind:"message",T:Jo,oneof:"message"},{no:3,name:"offer",kind:"message",T:Jo,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Vp,oneof:"message"},{no:5,name:"update",kind:"message",T:OY,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Mw,oneof:"message"},{no:8,name:"leave",kind:"message",T:zp,oneof:"message"},{no:9,name:"mute",kind:"message",T:Bp,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:MY,oneof:"message"},{no:11,name:"room_update",kind:"message",T:DY,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:UY,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:VY,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:$Y,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:qY,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:IY,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:AY,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:HY,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:JY,oneof:"message"},{no:22,name:"request_response",kind:"message",T:YY,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:XY,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:WY,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:tX,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:zY,oneof:"message"}]),a0=X.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Fo,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:X.getEnumType(II)}]),Fu=X.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:X.getEnumType(Cs)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:X.getEnumType(hn)},{no:9,name:"layers",kind:"message",T:Fo,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:a0,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:X.getEnumType(kn)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:X.getEnumType(AI)},{no:17,name:"audio_features",kind:"enum",T:X.getEnumType(An),repeated:!0}]),Vp=X.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:X.getEnumType(Ts)},{no:3,name:"final",kind:"scalar",T:8}]),Bp=X.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),RY=X.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Fp},{no:2,name:"participant",kind:"message",T:Ka},{no:3,name:"other_participants",kind:"message",T:Ka,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:XI,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:qI},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:VI},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Vf,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),AY=X.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:XI,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:qI},{no:3,name:"server_info",kind:"message",T:VI},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),Mw=X.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:dc}]),IY=X.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Jo=X.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),OY=X.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Ka,repeated:!0}]),$p=X.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:FI,repeated:!0}]),KI=X.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:X.getEnumType(_w)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),Dw=X.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:X.getEnumType(An),repeated:!0}]),JI=X.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),zp=X.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:X.getEnumType(Ps)},{no:3,name:"action",kind:"enum",T:X.getEnumType(jc)},{no:4,name:"regions",kind:"message",T:GY}]),jc=X.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),YI=X.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Fo,repeated:!0}]),Lw=X.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),XI=X.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),MY=X.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:DI,repeated:!0}]),DY=X.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Fp}]),LY=X.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:X.getEnumType(Yd)},{no:3,name:"score",kind:"scalar",T:2}]),UY=X.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:LY,repeated:!0}]),FY=X.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:X.getEnumType(o0)}]),VY=X.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:FY,repeated:!0}]),Uw=X.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:X.getEnumType(_w)},{no:2,name:"enabled",kind:"scalar",T:8}]),BY=X.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Uw,repeated:!0}]),$Y=X.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Uw,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:BY,repeated:!0}]),zY=X.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:EY,repeated:!0}]),QI=X.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),ZI=X.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:QI,repeated:!0}]),qY=X.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),WY=X.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Fp},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Ka},{no:4,name:"other_participants",kind:"message",T:Ka,repeated:!0}]),Fw=X.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Jo},{no:2,name:"subscription",kind:"message",T:$p},{no:3,name:"publish_tracks",kind:"message",T:Mw,repeated:!0},{no:4,name:"data_channels",kind:"message",T:tO,repeated:!0},{no:5,name:"offer",kind:"message",T:Jo},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:eO,repeated:!0}]),eO=X.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),tO=X.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:X.getEnumType(Ts)}]),ti=X.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:X.getEnumType(PY),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),nO=X.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),HY=X.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),GY=X.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:KY,repeated:!0}]),KY=X.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),JY=X.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:X.getEnumType(bY)}]),YY=X.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:X.getEnumType(Vw)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:Vp,oneof:"request"},{no:5,name:"add_track",kind:"message",T:Fu,oneof:"request"},{no:6,name:"mute",kind:"message",T:Bp,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:Lw,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:Dw,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:JI,oneof:"request"}]),Vw=X.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),XY=X.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),rO=X.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),QY=X.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:$I},{no:2,name:"connection_settings",kind:"message",T:rO},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:Fu,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:Jo},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:X.getEnumType(Ca)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:Fw}]),ZY=X.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:X.getEnumType(eX)},{no:2,name:"join_request",kind:"scalar",T:12}]),eX=X.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),tX=X.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function nX(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sf={exports:{}},rX=sf.exports,sN;function sX(){return sN||(sN=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(rX,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],o={},a=null;function l(b,k){var j=b[k];if(typeof j.bind=="function")return j.bind(b);try{return Function.prototype.bind.call(j,b)}catch{return function(){return Function.prototype.apply.apply(j,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&r?d:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):e}function m(){for(var b=this.getLevel(),k=0;k<s.length;k++){var j=s[k];this[j]=k<b?e:this.methodFactory(j,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function f(b){return function(){typeof console!==n&&(m.call(this),this[b].apply(this,arguments))}}function v(b,k,j){return h(b)||f.apply(this,arguments)}function y(b,k){var j=this,T,E,P,N="loglevel";typeof b=="string"?N+=":"+b:typeof b=="symbol"&&(N=void 0);function _(D){var A=(s[D]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=A;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+A+";"}catch{}}}function I(){var D;if(!(typeof window===n||!N)){try{D=window.localStorage[N]}catch{}if(typeof D===n)try{var A=window.document.cookie,Z=encodeURIComponent(N),se=A.indexOf(Z+"=");se!==-1&&(D=/^([^;]+)/.exec(A.slice(se+Z.length+1))[1])}catch{}return j.levels[D]===void 0&&(D=void 0),D}}function M(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function O(D){var A=D;if(typeof A=="string"&&j.levels[A.toUpperCase()]!==void 0&&(A=j.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=j.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+D)}j.name=b,j.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},j.methodFactory=k||v,j.getLevel=function(){return P??E??T},j.setLevel=function(D,A){return P=O(D),A!==!1&&_(P),m.call(j)},j.setDefaultLevel=function(D){E=O(D),I()||j.setLevel(D,!1)},j.resetLevel=function(){P=null,M(),m.call(j)},j.enableAll=function(D){j.setLevel(j.levels.TRACE,D)},j.disableAll=function(D){j.setLevel(j.levels.SILENT,D)},j.rebuild=function(){if(a!==j&&(T=O(a.getLevel())),m.call(j),a===j)for(var D in o)o[D].rebuild()},T=O(a?a.getLevel():"WARN");var L=I();L!=null&&(P=O(L)),m.call(j)}a=new y,a.getLogger=function(k){if(typeof k!="symbol"&&typeof k!="string"||k==="")throw new TypeError("You must supply a name when creating a logger.");var j=o[k];return j||(j=o[k]=new y(k,a.methodFactory)),j};var w=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=w),a},a.getLoggers=function(){return o},a.default=a,a})})(sf)),sf.exports}var qp=sX(),l0;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(l0||(l0={}));var Ms;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Ms||(Ms={}));let tt=qp.getLogger("livekit");Object.values(Ms).map(t=>qp.getLogger(t));tt.setDefaultLevel(l0.info);function Gi(t){const e=qp.getLogger(t);return e.setDefaultLevel(tt.getLevel()),e}const iX=qp.getLogger("lk-e2ee"),Fd=7e3,oX=[0,300,4*300,9*300,16*300,Fd,Fd,Fd,Fd,Fd];class aX{constructor(e){this._retryDelays=e!==void 0?[...e]:oX}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function lX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function V(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,e||[])).next())})}function iN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Li(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iN=="function"?iN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(l,d){a=t[o](a),s(l,d,a.done,a.value)})}}function s(o,a,l,d){Promise.resolve(d).then(function(h){o({value:h,done:l})},a)}}var Um={exports:{}},oN;function cX(){if(oN)return Um.exports;oN=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(N,_,I){return Function.prototype.apply.call(N,_,I)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:n=function(N){return Object.getOwnPropertyNames(N)};function r(P){console&&console.warn&&console.warn(P)}var s=Number.isNaN||function(N){return N!==N};function o(){o.init.call(this)}Um.exports=o,Um.exports.once=j,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function l(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(P){if(typeof P!="number"||P<0||s(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");a=P}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||s(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function d(P){return P._maxListeners===void 0?o.defaultMaxListeners:P._maxListeners}o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(N){for(var _=[],I=1;I<arguments.length;I++)_.push(arguments[I]);var M=N==="error",O=this._events;if(O!==void 0)M=M&&O.error===void 0;else if(!M)return!1;if(M){var L;if(_.length>0&&(L=_[0]),L instanceof Error)throw L;var D=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw D.context=L,D}var A=O[N];if(A===void 0)return!1;if(typeof A=="function")e(A,this,_);else for(var Z=A.length,se=w(A,Z),I=0;I<Z;++I)e(se[I],this,_);return!0};function h(P,N,_,I){var M,O,L;if(l(_),O=P._events,O===void 0?(O=P._events=Object.create(null),P._eventsCount=0):(O.newListener!==void 0&&(P.emit("newListener",N,_.listener?_.listener:_),O=P._events),L=O[N]),L===void 0)L=O[N]=_,++P._eventsCount;else if(typeof L=="function"?L=O[N]=I?[_,L]:[L,_]:I?L.unshift(_):L.push(_),M=d(P),M>0&&L.length>M&&!L.warned){L.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=P,D.type=N,D.count=L.length,r(D)}return P}o.prototype.addListener=function(N,_){return h(this,N,_,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(N,_){return h(this,N,_,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(P,N,_){var I={fired:!1,wrapFn:void 0,target:P,type:N,listener:_},M=m.bind(I);return M.listener=_,I.wrapFn=M,M}o.prototype.once=function(N,_){return l(_),this.on(N,f(this,N,_)),this},o.prototype.prependOnceListener=function(N,_){return l(_),this.prependListener(N,f(this,N,_)),this},o.prototype.removeListener=function(N,_){var I,M,O,L,D;if(l(_),M=this._events,M===void 0)return this;if(I=M[N],I===void 0)return this;if(I===_||I.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete M[N],M.removeListener&&this.emit("removeListener",N,I.listener||_));else if(typeof I!="function"){for(O=-1,L=I.length-1;L>=0;L--)if(I[L]===_||I[L].listener===_){D=I[L].listener,O=L;break}if(O<0)return this;O===0?I.shift():b(I,O),I.length===1&&(M[N]=I[0]),M.removeListener!==void 0&&this.emit("removeListener",N,D||_)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(N){var _,I,M;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[N]),this;if(arguments.length===0){var O=Object.keys(I),L;for(M=0;M<O.length;++M)L=O[M],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=I[N],typeof _=="function")this.removeListener(N,_);else if(_!==void 0)for(M=_.length-1;M>=0;M--)this.removeListener(N,_[M]);return this};function v(P,N,_){var I=P._events;if(I===void 0)return[];var M=I[N];return M===void 0?[]:typeof M=="function"?_?[M.listener||M]:[M]:_?k(M):w(M,M.length)}o.prototype.listeners=function(N){return v(this,N,!0)},o.prototype.rawListeners=function(N){return v(this,N,!1)},o.listenerCount=function(P,N){return typeof P.listenerCount=="function"?P.listenerCount(N):y.call(P,N)},o.prototype.listenerCount=y;function y(P){var N=this._events;if(N!==void 0){var _=N[P];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(P,N){for(var _=new Array(N),I=0;I<N;++I)_[I]=P[I];return _}function b(P,N){for(;N+1<P.length;N++)P[N]=P[N+1];P.pop()}function k(P){for(var N=new Array(P.length),_=0;_<N.length;++_)N[_]=P[_].listener||P[_];return N}function j(P,N){return new Promise(function(_,I){function M(L){P.removeListener(N,O),I(L)}function O(){typeof P.removeListener=="function"&&P.removeListener("error",M),_([].slice.call(arguments))}E(P,N,O,{once:!0}),N!=="error"&&T(P,M,{once:!0})})}function T(P,N,_){typeof P.on=="function"&&E(P,"error",N,_)}function E(P,N,_,I){if(typeof P.on=="function")I.once?P.once(N,_):P.on(N,_);else if(typeof P.addEventListener=="function")P.addEventListener(N,function M(O){I.once&&P.removeEventListener(N,M),_(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}return Um.exports}var xi=cX();let sO=!0,iO=!0;function Xd(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function sl(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(a,l){if(a!==e)return s.apply(this,arguments);const d=h=>{const m=n(h);m&&(l.handleEvent?l.handleEvent(m):l(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,d),s.apply(this,[a,d])};const o=r.removeEventListener;r.removeEventListener=function(a,l){if(a!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(l))return o.apply(this,arguments);const d=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[a,d])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function dX(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(sO=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function uX(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(iO=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function oO(){if(typeof window=="object"){if(sO)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Bw(t,e){iO&&console.warn(t+" is deprecated, please use "+e+" instead.")}function hX(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(s=>s.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Xd(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Xd(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Xd(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Xd(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function aN(t){return Object.prototype.toString.call(t)==="[object Object]"}function aO(t){return aN(t)?Object.keys(t).reduce(function(e,n){const r=aN(t[n]),s=r?aO(t[n]):t[n],o=r&&!Object.keys(s).length;return s===void 0||o?e:Object.assign(e,{[n]:s})},{}):t}function c0(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?c0(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(s=>{c0(t,t.get(s),n)})}))}function lN(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const o=[];return t.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&o.push(a)}),o.forEach(a=>{t.forEach(l=>{l.type===r&&l.trackId===a.id&&c0(t,l,s)})}),s}const cN=oO;function lO(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const d={};return Object.keys(l).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const m=typeof l[h]=="object"?l[h]:{ideal:l[h]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const f=function(v,y){return v?v+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(m.ideal!==void 0){d.optional=d.optional||[];let v={};typeof m.ideal=="number"?(v[f("min",h)]=m.ideal,d.optional.push(v),v={},v[f("max",h)]=m.ideal,d.optional.push(v)):(v[f("",h)]=m.ideal,d.optional.push(v))}m.exact!==void 0&&typeof m.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[f("",h)]=m.exact):["min","max"].forEach(v=>{m[v]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[f(v,h)]=m[v])})}),l.advanced&&(d.optional=(d.optional||[]).concat(l.advanced)),d},s=function(l,d){if(e.version>=61)return d(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const h=function(m,f,v){f in m&&!(v in m)&&(m[v]=m[f],delete m[f])};l=JSON.parse(JSON.stringify(l)),h(l.audio,"autoGainControl","googAutoGainControl"),h(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let h=l.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const m=e.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete l.video.facingMode;let f;if(h.exact==="environment"||h.ideal==="environment"?f=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(w=>w.kind==="videoinput");let y=v.find(w=>f.some(b=>w.label.toLowerCase().includes(b)));return!y&&v.length&&f.includes("back")&&(y=v[v.length-1]),y&&(l.video.deviceId=h.exact?{exact:y.deviceId}:{ideal:y.deviceId}),l.video=r(l.video),cN("chrome: "+JSON.stringify(l)),d(l)})}l.video=r(l.video)}return cN("chrome: "+JSON.stringify(l)),d(l)},o=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(l,d,h){s(l,m=>{n.webkitGetUserMedia(m,d,f=>{h&&h(o(f))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return s(d,h=>l(h).then(m=>{if(h.audio&&!m.getAudioTracks().length||h.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(o(m))))}}}function cO(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function dO(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):o={track:s.track};const a=new Event("track");a.track=s.track,a.receiver=o,a.transceiver={receiver:o},a.streams=[r.stream],this.dispatchEvent(a)}),r.stream.getTracks().forEach(s=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===s.id):o={track:s};const a=new Event("track");a.track=s,a.receiver=o,a.transceiver={receiver:o},a.streams=[r.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else sl(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function uO(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=s.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,d){let h=s.apply(this,arguments);return h||(h=e(this,l),this._senders.push(h)),h};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const d=this._senders.indexOf(l);d!==-1&&this._senders.splice(d,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(a=>{const l=this._senders.find(d=>d.track===a);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function hO(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(a=>a._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>lN(a,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s}),sl(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>lN(o,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let s,o,a;return this.getSenders().forEach(l=>{l.track===r&&(s?a=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===r&&(o?a=!0:o=l),l.track===r)),a||s&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function mO(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(d)===-1&&this._shimmedLocalStreams[l.id].push(d):this._shimmedLocalStreams[l.id]=[l,d],d};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(h=>{if(this.getSenders().find(f=>f.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(h=>l.indexOf(h)===-1);this._shimmedLocalStreams[a.id]=[a].concat(d)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],r.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const d=this._shimmedLocalStreams[l].indexOf(a);d!==-1&&this._shimmedLocalStreams[l].splice(d,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function fO(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return mO(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(f=>this._reverseStreams[f.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(f=>{if(this.getSenders().find(y=>y.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const f=new t.MediaStream(m.getTracks());this._streams[m.id]=f,this._reverseStreams[f.id]=m,m=f}r.apply(this,[m])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(b=>b===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(b=>b.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const w=this._streams[f.id];if(w)w.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const b=new t.MediaStream([m]);this._streams[f.id]=b,this._reverseStreams[b.id]=f,this.addStream(b)}return this.getSenders().find(b=>b.track===m)};function o(h,m){let f=m.sdp;return Object.keys(h._reverseStreams||[]).forEach(v=>{const y=h._reverseStreams[v],w=h._streams[y.id];f=f.replace(new RegExp(w.id,"g"),y.id)}),new RTCSessionDescription({type:m.type,sdp:f})}function a(h,m){let f=m.sdp;return Object.keys(h._reverseStreams||[]).forEach(v=>{const y=h._reverseStreams[v],w=h._streams[y.id];f=f.replace(new RegExp(y.id,"g"),w.id)}),new RTCSessionDescription({type:m.type,sdp:f})}["createOffer","createAnswer"].forEach(function(h){const m=t.RTCPeerConnection.prototype[h],f={[h](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[w=>{const b=o(this,w);v[0].apply(null,[b])},w=>{v[1]&&v[1].apply(null,w)},arguments[2]]):m.apply(this,arguments).then(w=>o(this,w))}};t.RTCPeerConnection.prototype[h]=f[h]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=a(this,arguments[0]),l.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const h=d.get.apply(this);return h.type===""?h:o(this,h)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(b=>m.track===b)&&(v=this._streams[y])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function d0(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],s={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=s[n]})}function pO(t,e){sl(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var dN=Object.freeze({__proto__:null,fixNegotiationNeeded:pO,shimAddTrackRemoveTrack:fO,shimAddTrackRemoveTrackWithNative:mO,shimGetSendersWithDtmf:uO,shimGetUserMedia:lO,shimMediaStream:cO,shimOnTrack:dO,shimPeerConnection:d0,shimSenderReceiverGetStats:hO});function gO(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(s,o,a){Bw("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(s).then(o,a)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const s=function(a,l,d){l in a&&!(d in a)&&(a[d]=a[l],delete a[l])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a.audio,"autoGainControl","mozAutoGainControl"),s(a.audio,"noiseSuppression","mozNoiseSuppression")),o(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const l=a.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[l])}}}}function mX(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function vO(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function u0(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const o=t.RTCPeerConnection.prototype[s],a={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=a[s]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,a,l]=arguments;return r.apply(this,[o||null]).then(d=>{if(e.version<53&&!a)try{d.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;d.forEach((m,f)=>{d.set(f,Object.assign({},m,{type:n[m.type]||m.type}))})}return d}).then(a,l)}}function xO(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(o=>o._pc=this),s});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function yO(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r}),sl(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function bO(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Bw("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function wO(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function SO(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const s=r.length>0;s&&r.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(s){const{sender:a}=o,l=a.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,a.sendEncodings=r,this.setParametersPromises.push(a.setParameters(l).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return o})}function kO(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function jO(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function CO(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var uN=Object.freeze({__proto__:null,shimAddTransceiver:SO,shimCreateAnswer:CO,shimCreateOffer:jO,shimGetDisplayMedia:mX,shimGetParameters:kO,shimGetUserMedia:gO,shimOnTrack:vO,shimPeerConnection:u0,shimRTCDataChannel:wO,shimReceiverGetStats:yO,shimRemoveStream:bO,shimSenderGetStats:xO});function TO(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>e.call(this,s,r)),r.getVideoTracks().forEach(s=>e.call(this,s,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];return o&&o.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const s=n.getTracks();this.getSenders().forEach(o=>{s.includes(o.track)&&this.removeTrack(o)})})}}function NO(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,r.dispatchEvent(a)})}),e.apply(r,arguments)}}}function EO(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,o=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(h,m){const f=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[f]);return m?(v.then(h,m),Promise.resolve()):v},e.createAnswer=function(h,m){const f=arguments.length>=2?arguments[2]:arguments[0],v=r.apply(this,[f]);return m?(v.then(h,m),Promise.resolve()):v};let l=function(d,h,m){const f=s.apply(this,[d]);return m?(f.then(h,m),Promise.resolve()):f};e.setLocalDescription=l,l=function(d,h,m){const f=o.apply(this,[d]);return m?(f.then(h,m),Promise.resolve()):f},e.setRemoteDescription=l,l=function(d,h,m){const f=a.apply(this,[d]);return m?(f.then(h,m),Promise.resolve()):f},e.addIceCandidate=l}function PO(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=s=>r(_O(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,s,o){e.mediaDevices.getUserMedia(r).then(s,o)}.bind(e))}function _O(t){return t&&t.video!==void 0?Object.assign({},t,{video:aO(t.video)}):t}function RO(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const o=[];for(let a=0;a<r.iceServers.length;a++){let l=r.iceServers[a];l.urls===void 0&&l.url?(Bw("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(r.iceServers[a])}r.iceServers=o}return new e(r,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function AO(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function IO(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(a=>a.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function OO(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var hN=Object.freeze({__proto__:null,shimAudioContext:OO,shimCallbacksAPI:EO,shimConstraints:_O,shimCreateOfferLegacy:IO,shimGetUserMedia:PO,shimLocalStreamsAPI:TO,shimRTCIceServerUrls:RO,shimRemoteStreamsAPI:NO,shimTrackEventTransceiver:AO}),Ix={exports:{}},mN;function fX(){return mN||(mN=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((s,o)=>(o>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(s=>s.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const s={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":s.relatedAddress=r[o+1];break;case"rport":s.relatedPort=parseInt(r[o+1],10);break;case"tcptype":s.tcpType=r[o+1];break;case"ufrag":s.ufrag=r[o+1],s.usernameFragment=r[o+1];break;default:s[r[o]]===void 0&&(s[r[o]]=r[o+1]);break}return s},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const s=n.component;s==="rtp"?r.push(1):s==="rtcp"?r.push(2):r.push(s),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const s=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let s;const o=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<o.length;a++)s=o[a].trim().split("="),r[s[0].trim()]=s[1];return r},e.writeFmtp=function(n){let r="",s=n.payloadType;if(n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?o.push(a+"="+n.parameters[a]):o.push(a)}),r+="a=fmtp:"+s+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",s=n.payloadType;return n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+s+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),s={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(s.attribute=n.substring(r+1,o),s.value=n.substring(o+1)):s.attribute=n.substring(r+1),s},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(s=>parseInt(s,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let s="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{s+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),s},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const s=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return s&&o?{usernameFragment:s.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let l=3;l<o.length;l++){const d=o[l],h=e.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(h){const m=e.parseRtpMap(h),f=e.matchPrefix(n,"a=fmtp:"+d+" ");switch(m.parameters=f.length?e.parseFmtp(f[0]):{},m.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),r.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(m.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(e.parseExtmap(l))});const a=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(l=>{a.forEach(d=>{l.rtcpFeedback.find(m=>m.type===d.type&&m.parameter===d.parameter)||l.rtcpFeedback.push(d)})}),r},e.writeRtpDescription=function(n,r){let s="";s+="m="+n+" ",s+=r.codecs.length>0?"9":"0",s+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{s+=e.writeRtpMap(a),s+=e.writeFmtp(a),s+=e.writeRtcpFb(a)});let o=0;return r.codecs.forEach(a=>{a.maxptime>o&&(o=a.maxptime)}),o>0&&(s+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{s+=e.writeExtmap(a)}),s},e.parseRtpEncodingParameters=function(n){const r=[],s=e.parseRtpParameters(n),o=s.fecMechanisms.indexOf("RED")!==-1,a=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),d=l.length>0&&l[0].ssrc;let h;const m=e.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(w=>parseInt(w,10)));m.length>0&&m[0].length>1&&m[0][0]===d&&(h=m[0][1]),s.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let y={ssrc:d,codecPayloadType:parseInt(v.parameters.apt,10)};d&&h&&(y.rtx={ssrc:h}),r.push(y),o&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:d,mechanism:a?"red+ulpfec":"red"},r.push(y))}}),r.length===0&&d&&r.push({ssrc:d});let f=e.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-2e3*8:f=void 0,r.forEach(v=>{v.maxBitrate=f})),r},e.parseRtcpParameters=function(n){const r={},s=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const a=e.matchPrefix(n,"a=rtcp-mux");return r.mux=a.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const s=e.matchPrefix(n,"a=msid:");if(s.length===1)return r=s[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),s=e.matchPrefix(n,"a=max-message-size:");let o;s.length>0&&(o=parseInt(s[0].substring(19),10)),isNaN(o)&&(o=65536);const a=e.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const d=l[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let s=[];return n.protocol!=="DTLS/SCTP"?s=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:s=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,s){let o;const a=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+o+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const s=e.splitLines(n);for(let o=0;o<s.length;o++)switch(s[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const s=e.splitLines(n)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(n){const s=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(Ix)),Ix.exports}var MO=fX(),Cc=nX(MO),pX=jJ({__proto__:null,default:Cc},[MO]);function of(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const s=new e(r),o=Cc.parseCandidate(r.candidate);for(const a in o)a in s||Object.defineProperty(s,a,{value:o[a]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,sl(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function h0(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||sl(t,"icecandidate",e=>{if(e.candidate){const n=Cc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function af(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const d=Cc.splitSections(l.sdp);return d.shift(),d.some(h=>{const m=Cc.parseMLine(h);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},r=function(l){const d=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const h=parseInt(d[1],10);return h!==h?-1:h},s=function(l){let d=65536;return e.browser==="firefox"&&(e.version<57?l===-1?d=16384:d=2147483637:e.version<60?d=e.version===57?65535:65536:d=2147483637),d},o=function(l,d){let h=65536;e.browser==="firefox"&&e.version===57&&(h=65535);const m=Cc.matchPrefix(l.sdp,"a=max-message-size:");return m.length>0?h=parseInt(m[0].substring(19),10):e.browser==="firefox"&&d!==-1&&(h=2147483637),h},a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=r(arguments[0]),h=s(d),m=o(arguments[0],d);let f;h===0&&m===0?f=Number.POSITIVE_INFINITY:h===0||m===0?f=Math.max(h,m):f=Math.min(h,m);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return f}}),this._sctp=v}return a.apply(this,arguments)}}function lf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,s){const o=r.send;r.send=function(){const l=arguments[0],d=l.length||l.size||l.byteLength;if(r.readyState==="open"&&s.sctp&&d>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=n.apply(this,arguments);return e(s,this),s},sl(t,"datachannel",r=>(e(r.channel,r.target),r))}function m0(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const o=s.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const a=new Event("connectionstatechange",s);o.dispatchEvent(a)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function f0(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=s.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:o}):s.sdp=o}return n.apply(this,arguments)}}function cf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function df(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return n.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?n.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}var gX=Object.freeze({__proto__:null,removeExtmapAllowMixed:f0,shimAddIceCandidateNullOrEmpty:cf,shimConnectionState:m0,shimMaxMessageSize:af,shimParameterlessSetLocalDescription:df,shimRTCIceCandidate:of,shimRTCIceCandidateRelayProtocol:h0,shimSendThrowTypeError:lf});function vX(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=oO,r=hX(t),s={browserDetails:r,commonShim:gX,extractVersion:Xd,disableLog:dX,disableWarnings:uX,sdp:pX};switch(r.browser){case"chrome":if(!dN||!d0||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),s;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),s;n("adapter.js shimming chrome."),s.browserShim=dN,cf(t,r),df(t),lO(t,r),cO(t),d0(t,r),dO(t),fO(t,r),uO(t),hO(t),pO(t,r),of(t),h0(t),m0(t),af(t,r),lf(t),f0(t,r);break;case"firefox":if(!uN||!u0||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),s;n("adapter.js shimming firefox."),s.browserShim=uN,cf(t,r),df(t),gO(t,r),u0(t,r),vO(t),bO(t),xO(t),yO(t),wO(t),SO(t),kO(t),jO(t),CO(t),of(t),m0(t),af(t,r),lf(t);break;case"safari":if(!hN||!e.shimSafari)return n("Safari shim is not included in this adapter release."),s;n("adapter.js shimming safari."),s.browserShim=hN,cf(t,r),df(t),RO(t),IO(t),EO(t),TO(t),NO(t),AO(t),PO(t),OO(t),of(t),h0(t),af(t,r),lf(t),f0(t,r);break;default:n("Unsupported browser!");break}return s}vX({window:typeof window>"u"?void 0:window});const xX=10,Vd="lk_e2ee",yX="LKFrameEncryptionKey",bX={sharedKey:!1,ratchetSalt:yX,ratchetWindowSize:8,failureTolerance:xX,keyringSize:16};var Vo;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Vo||(Vo={}));var fN;(function(t){t.KeyRatcheted="keyRatcheted"})(fN||(fN={}));var Do;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Do||(Do={}));var pN;(function(t){t.Error="cryptorError"})(pN||(pN={}));function wX(){return SX()||p0()}function p0(){return typeof window.RTCRtpScriptTransform<"u"}function SX(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function kX(t){var e,n,r,s,o;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="speaker"&&((s=t.value)===null||s===void 0?void 0:s.case)!=="transcription"&&((o=t.value)===null||o===void 0?void 0:o.case)!=="encryptedPacket")return new MI({value:t.value})}class Rie extends xi.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r,s)=>{tt.debug("key ratcheted event received",{ratchetResult:n,participantId:r,keyIndex:s})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},bX),e),this.on(Vo.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const s={key:e,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),s),this.emit(Vo.SetKey,s)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Vo.RatchetRequest,e,n)}}class Qi extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var ut;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(ut||(ut={}));class xt extends Qi{constructor(e,n,r,s){super(1,e),this.name="ConnectionError",this.status=r,this.reason=n,this.context=s,this.reasonName=ut[n]}}class $w extends Qi{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Ui extends Qi{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class jX extends Qi{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Sn extends Qi{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class g0 extends Qi{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class gN extends Qi{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class vN extends Qi{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:Vw[n]}}var rr;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(rr||(rr={}));class ts extends Qi{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=rr[n]}}var Vu;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Vu||(Vu={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Vu||(Vu={}));var xN;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(xN||(xN={}));var oe;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(oe||(oe={}));var ue;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(ue||(ue={}));var Ne;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(Ne||(Ne={}));var je;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(je||(je={}));function CX(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const TX=/version\/(\d+(\.?_?\d+)+)/i;let Ox;function Pr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Ox===void 0||e){const r=NX.find(s=>{let{test:o}=s;return o.test(n)});Ox=r?.describe(n)}return Ox}const NX=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:uf(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Mx(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:uf(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Mx(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:uf(TX,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Mx(t)}}}];function uf(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}function Mx(t){return t.includes("mac os")?uf(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var EX="2.15.10";const PX=EX,_X=16;class qn{}qn.setTimeout=function(){return setTimeout(...arguments)};qn.setInterval=function(){return setInterval(...arguments)};qn.clearTimeout=function(){return clearTimeout(...arguments)};qn.clearInterval=function(){return clearInterval(...arguments)};const RX=5e3,Bd=[];var Fr;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(Fr||(Fr={}));class Y extends xi.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var s;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=Y.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=tt,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),RX):this.handleAppVisibilityChanged()},this.log=Gi((s=r.loggerName)!==null&&s!==void 0?s:Ms.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Y.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),at(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===Y.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===Y.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Bd.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&Bd.splice(Bd.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),uc(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),s=r.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(s?je.AudioPlaybackStarted:je.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(s?je.AudioPlaybackFailed:je.VideoPlaybackFailed,o):o.name==="AbortError"?tt.debug("".concat(s?"audio":"video"," playback aborted, likely due to new play request")):tt.warn("could not playback ".concat(s?"audio":"video"),o),s&&e&&r.some(a=>a.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(je.ElementAttached,e),e}detach(e){try{if(e){Tc(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(je.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{Tc(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(je.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Gi(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Bd.forEach(r=>{r.parentElement||(n=!1)}),n&&Bd.push(e)}}handleAppVisibilityChanged(){return V(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Y.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Tr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Tr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function uc(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(s=>{n.removeTrack(s)}),n.addTrack(t)),(!Ya()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Ya()||Ja())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function Tc(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(h){h.Audio="audio",h.Video="video",h.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(h){h.Camera="camera",h.Microphone="microphone",h.ScreenShare="screen_share",h.ScreenShareAudio="screen_share_audio",h.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(h){h.Active="active",h.Paused="paused",h.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function s(h){switch(h){case e.Audio:return Cs.AUDIO;case e.Video:return Cs.VIDEO;default:return Cs.DATA}}t.kindToProto=s;function o(h){switch(h){case Cs.AUDIO:return e.Audio;case Cs.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function a(h){switch(h){case n.Camera:return hn.CAMERA;case n.Microphone:return hn.MICROPHONE;case n.ScreenShare:return hn.SCREEN_SHARE;case n.ScreenShareAudio:return hn.SCREEN_SHARE_AUDIO;default:return hn.UNKNOWN}}t.sourceToProto=a;function l(h){switch(h){case hn.CAMERA:return n.Camera;case hn.MICROPHONE:return n.Microphone;case hn.SCREEN_SHARE:return n.ScreenShare;case hn.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=l;function d(h){switch(h){case o0.ACTIVE:return r.Active;case o0.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=d})(Y||(Y={}));class kt{constructor(e,n,r,s,o){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&r!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:r,maxFramerate:s,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const AX=["vp8","h264"],IX=["vp8","h264","vp9","av1","h265"];function OX(t){return!!AX.find(e=>e===t)}const MX=OX;var yN;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(yN||(yN={}));var v0;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(v0||(v0={}));const Bu={h90:new kt(160,90,9e4,20),h180:new kt(320,180,16e4,20),h216:new kt(384,216,18e4,20),h360:new kt(640,360,45e4,20),h540:new kt(960,540,8e5,25),h720:new kt(1280,720,17e5,30),h1080:new kt(1920,1080,3e6,30),h1440:new kt(2560,1440,5e6,30),h2160:new kt(3840,2160,8e6,30)},x0={h120:new kt(160,120,7e4,20),h180:new kt(240,180,125e3,20),h240:new kt(320,240,14e4,20),h360:new kt(480,360,33e4,20),h480:new kt(640,480,5e5,20),h540:new kt(720,540,6e5,25),h720:new kt(960,720,13e5,30),h1080:new kt(1440,1080,23e5,30),h1440:new kt(1920,1440,38e5,30)},zw={h360fps3:new kt(640,360,2e5,3,"medium"),h360fps15:new kt(640,360,4e5,15,"medium"),h720fps5:new kt(1280,720,8e5,5,"medium"),h720fps15:new kt(1280,720,15e5,15,"medium"),h720fps30:new kt(1280,720,2e6,30,"medium"),h1080fps15:new kt(1920,1080,25e5,15,"medium"),h1080fps30:new kt(1920,1080,5e6,30,"medium"),original:new kt(0,0,7e6,30,"medium")},DX="|",bN="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function LX(t){const e=t.split(DX);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function lr(t){return V(this,void 0,void 0,function*(){return new Promise(e=>qn.setTimeout(e,t))})}function y0(){return"addTransceiver"in RTCPeerConnection.prototype}function b0(){return"addTrack"in RTCPeerConnection.prototype}function UX(){if(!("getCapabilities"in RTCRtpSender)||Ya()||Ja())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function FX(){if(!("getCapabilities"in RTCRtpSender)||Ja())return!1;if(Ya()){const n=Pr();if(n?.version&&Ds(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&Ds(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function oi(t){return t==="av1"||t==="vp9"}function w0(t){return!document||$u()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function VX(){return typeof RTCPeerConnection>"u"?!1:y0()||b0()}function Ja(){var t;return((t=Pr())===null||t===void 0?void 0:t.name)==="Firefox"}function Ya(){var t;return((t=Pr())===null||t===void 0?void 0:t.name)==="Safari"}function $u(){const t=Pr();return t?.name==="Safari"||t?.os==="iOS"}function BX(){const t=Pr();return t?.name==="Safari"&&t.version.startsWith("17.")||t?.os==="iOS"&&!!t?.osVersion&&Ds(t.osVersion,"17")>=0}function $X(t){return t||(t=Pr()),t?.name==="Safari"&&Ds(t.version,"18.3")>0||t?.os==="iOS"&&!!t?.osVersion&&Ds(t.osVersion,"18.3")>0}function DO(){var t,e;return Tr()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function zX(){const t=Pr(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Ds(t.osVersion,e)>=0?!0:t.name==="Safari"&&Ds(t.version,e)>=0}function Tr(){return typeof document<"u"}function fi(){return navigator.product=="ReactNative"}function S0(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function LO(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function UO(){if(!fi())return;let t=LO();if(t)return t.platform}function wN(){if(Tr())return window.devicePixelRatio;if(fi()){let t=LO();if(t)return t.devicePixelRatio}return 1}function Ds(t,e){const n=t.split("."),r=e.split("."),s=Math.min(n.length,r.length);for(let o=0;o<s;++o){const a=parseInt(n[o],10),l=parseInt(r[o],10);if(a>l)return 1;if(a<l)return-1;if(o===s-1&&a===l)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function qX(t){for(const e of t)e.target.handleResize(e)}function WX(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Dx=null;const SN=()=>(Dx||(Dx=new ResizeObserver(qX)),Dx);let Lx=null;const kN=()=>(Lx||(Lx=new IntersectionObserver(WX,{root:null,rootMargin:"0px"})),Lx);function HX(){var t;const e=new $I({sdk:zI.JS,protocol:_X,version:PX});return fi()&&(e.os=(t=UO())!==null&&t!==void 0?t:""),e}function jN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=document.createElement("canvas");s.width=t,s.height=e;const o=s.getContext("2d");o?.fillRect(0,0,s.width,s.height),r&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const a=s.captureStream(),[l]=a.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let $d;function Ux(){if(!$d){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[$d]=r.stream.getAudioTracks(),!$d)throw Error("Could not get empty media stream audio track");$d.enabled=!1}return $d.clone()}class ss{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((r,s)=>V(this,void 0,void 0,function*(){this.resolve=r,this.reject=s,e&&(yield e(r,s))})).finally(()=>{var r;this._isResolved=!0,(r=this.onFinally)===null||r===void 0||r.call(this)})}}function GX(t){return IX.includes(t)}function Bo(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function KX(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function k0(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function JX(t,e){return t.segments.map(n=>{let{id:r,text:s,language:o,startTime:a,endTime:l,final:d}=n;var h;const m=(h=e.get(r))!==null&&h!==void 0?h:Date.now(),f=Date.now();return d?e.delete(r):e.set(r,m),{id:r,text:s,startTime:Number.parseInt(a.toString()),endTime:Number.parseInt(l.toString()),final:d,language:o,firstReceivedTime:m,lastReceivedTime:f}})}function YX(t){const{id:e,timestamp:n,message:r,editTimestamp:s}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:s?Number.parseInt(s.toString()):void 0,message:r}}function CN(t){switch(t.reason){case ut.LeaveRequest:return t.context;case ut.Cancelled:return Ps.CLIENT_INITIATED;case ut.NotAllowed:return Ps.USER_REJECTED;case ut.ServerUnreachable:return Ps.JOIN_FAILURE;default:return Ps.UNKNOWN_REASON}}function hf(t){return t!==void 0?Number(t):void 0}function Ta(t){return t!==void 0?BigInt(t):void 0}function Da(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function ui(t){return!!t&&t.kind==Y.Kind.Audio}function ta(t){return!!t&&t.kind==Y.Kind.Video}function Eo(t){return Da(t)&&ta(t)}function Ai(t){return Da(t)&&ui(t)}function j0(t){return!!t&&!t.isLocal}function XX(t){return!!t&&!t.isLocal}function Fx(t){return j0(t)&&ta(t)}function QX(t){return t.isLocal}function ZX(t,e){const n=[];let r=new TextEncoder().encode(t);for(;r.length>e;){let s=e;for(;s>0;){const o=r[s];if(o!==void 0&&(o&192)!==128)break;s--}n.push(r.slice(0,s)),r=r.slice(s)}return r.length>0&&n.push(r),n}function FO(t,e,n){var r,s,o,a;const{optionsWithoutProcessor:l,audioProcessor:d,videoProcessor:h}=$O(t??{}),m=e?.processor,f=n?.processor,v=l??{};return v.audio===!0&&(v.audio={}),v.video===!0&&(v.video={}),v.audio&&(C0(v.audio,e),(r=(o=v.audio).deviceId)!==null&&r!==void 0||(o.deviceId={ideal:"default"}),(d||m)&&(v.audio.processor=d??m)),v.video&&(C0(v.video,n),(s=(a=v.video).deviceId)!==null&&s!==void 0||(a.deviceId={ideal:"default"}),(h||f)&&(v.video.processor=h??f)),v}function C0(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function qw(t){var e,n,r,s;const o={};if(t.video)if(typeof t.video=="object"){const a={},l=a,d=t.video;Object.keys(d).forEach(h=>{switch(h){case"resolution":C0(l,d.resolution);break;default:l[h]=d[h]}}),o.video=a,(e=(r=o.video).deviceId)!==null&&e!==void 0||(r.deviceId={ideal:"default"})}else o.video=t.video?{deviceId:{ideal:"default"}}:!1;else o.video=!1;return t.audio?typeof t.audio=="object"?(o.audio=t.audio,(n=(s=o.audio).deviceId)!==null&&n!==void 0||(s.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function VO(t){return V(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const r=BO();if(r){const s=r.createAnalyser();s.fftSize=2048;const o=s.frequencyBinCount,a=new Uint8Array(o);r.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(s),yield lr(n),s.getByteTimeDomainData(a);const d=a.some(h=>h!==128&&h!==0);return r.close(),!d}return!1})()})}function BO(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const r=()=>V(this,void 0,void 0,function*(){var s;try{n.state==="suspended"&&(yield n.resume())}catch(o){console.warn("Error trying to auto-resume audio context",o)}finally{(s=window.document.body)===null||s===void 0||s.removeEventListener("click",r)}});n.addEventListener("statechange",()=>{var s;n.state==="closed"&&((s=window.document.body)===null||s===void 0||s.removeEventListener("click",r))}),window.document.body.addEventListener("click",r)}return n}}function eQ(t){return t==="audioinput"?Y.Source.Microphone:t==="videoinput"?Y.Source.Camera:Y.Source.Unknown}function T0(t){return t===Y.Source.Microphone?"audioinput":t===Y.Source.Camera?"videoinput":void 0}function tQ(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Ya()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function lu(t){return t.split("/")[1].toLowerCase()}function nQ(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new Mw({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function at(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?at(t.track):{})}}function rQ(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function sQ(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const r=[...Object.keys(e),...Object.keys(t)],s={};for(const o of r)t[o]!==e[o]&&(s[o]=(n=e[o])!==null&&n!==void 0?n:"");return s}function $O(t){const e=Object.assign({},t);let n,r;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(r=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:r,optionsWithoutProcessor:CX(e)}}function iQ(t){switch(t){case hn.CAMERA:return Y.Source.Camera;case hn.MICROPHONE:return Y.Source.Microphone;case hn.SCREEN_SHARE:return Y.Source.ScreenShare;case hn.SCREEN_SHARE_AUDIO:return Y.Source.ScreenShareAudio;default:return Y.Source.Unknown}}function TN(t,e){return t.width*t.height<e.width*e.height}function oQ(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(r=>r.quality===e)}class aQ extends xi.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=r=>{var s,o;const{kind:a,data:l}=r.data;switch(a){case"error":tt.error(l.error.message),this.emit(Do.EncryptionError,l.error);break;case"initAck":l.enabled&&this.keyProvider.getKeys().forEach(m=>{this.postKey(m)});break;case"enable":if(l.enabled&&this.keyProvider.getKeys().forEach(m=>{this.postKey(m)}),this.encryptionEnabled!==l.enabled&&l.participantIdentity===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity))this.emit(Do.ParticipantEncryptionStatusChanged,l.enabled,this.room.localParticipant),this.encryptionEnabled=l.enabled;else if(l.participantIdentity){const m=(o=this.room)===null||o===void 0?void 0:o.getParticipantByIdentity(l.participantIdentity);if(!m)throw TypeError("couldn't set encryption status, participant not found".concat(l.participantIdentity));this.emit(Do.ParticipantEncryptionStatusChanged,l.enabled,m)}break;case"ratchetKey":this.keyProvider.emit(Vo.KeyRatcheted,l.ratchetResult,l.participantIdentity,l.keyIndex);break;case"decryptDataResponse":const d=this.decryptDataRequests.get(l.uuid);d?.resolve&&d.resolve(l);break;case"encryptDataResponse":const h=this.encryptDataRequests.get(l.uuid);h?.resolve&&h.resolve(l);break}},this.onWorkerError=r=>{tt.error("e2ee worker encountered an error:",{error:r.error}),this.emit(Do.EncryptionError,r.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!wX())throw new $w("tried to setup end-to-end encryption on an unsupported browser");if(tt.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:iX.getLevel()}};this.worker&&(tt.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){tt.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?tt.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Ne.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(oe.TrackPublished,(r,s)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==kn.NONE,s.identity)),e.on(oe.ConnectionStateChanged,r=>{r===dt.Connected&&e.remoteParticipants.forEach(s=>{s.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==kn.NONE,s.identity)})})}).on(oe.TrackUnsubscribed,(r,s,o)=>{var a;const l={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(a=this.worker)===null||a===void 0||a.postMessage(l)}).on(oe.TrackSubscribed,(r,s,o)=>{this.setupE2EEReceiver(r,o.identity,s.trackInfo)}).on(oe.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ue.LocalSenderCreated,(r,s)=>V(this,void 0,void 0,function*(){this.setupE2EESender(s,r)})),e.localParticipant.on(ue.LocalTrackPublished,r=>{if(!ta(r.track)||!$u())return;const s={kind:"updateCodec",data:{trackId:r.track.mediaStreamID,codec:lu(r.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s)}),n.on(Vo.SetKey,r=>this.postKey(r)).on(Vo.RatchetRequest,(r,s)=>this.postRatchetRequest(r,s))}encryptData(e){return V(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),r={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},s=new ss;return s.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,s),this.worker.postMessage(r),s.promise})}handleEncryptedData(e,n,r,s){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const o=crypto.randomUUID(),a={kind:"decryptDataRequest",data:{uuid:o,payload:e,iv:n,participantIdentity:r,keyIndex:s}},l=new ss;return l.onFinally=()=>{this.decryptDataRequests.delete(o)},this.decryptDataRequests.set(o,l),this.worker.postMessage(a),l.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:s}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const a={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:s}};this.worker.postMessage(a)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!r?.mimeType||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?lu(r.mimeType):void 0)}}setupE2EESender(e,n){if(!Da(e)||!n){n||tt.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,s){return V(this,void 0,void 0,function*(){if(this.worker){if(p0()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:s};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Vd in e&&s){const d={kind:"updateCodec",data:{trackId:n,codec:s,participantIdentity:r}};this.worker.postMessage(d);return}let o=e.writableStream,a=e.readableStream;if(!o||!a){const d=e.createEncodedStreams();e.writableStream=d.writable,o=d.writable,e.readableStream=d.readable,a=d.readable}const l={kind:"decode",data:{readableStream:a,writableStream:o,trackId:n,codec:s,participantIdentity:r,isReuse:Vd in e}};this.worker.postMessage(l,[a,o])}e[Vd]=!0}})}handleSender(e,n,r){var s;if(!(Vd in e||!this.worker)){if(!(!((s=this.room)===null||s===void 0)&&s.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(p0()){tt.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{tt.info("initialize encoded streams");const o=e.createEncodedStreams(),a={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(a,[o.readable,o.writable])}e[Vd]=!0}}}const Vx="default";class On{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new On),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return V(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o;if(((o=On.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){tt.debug("awaiting getUserMedia promise");try{n?yield On.userMediaPromiseMap.get(n):yield Promise.all(On.userMediaPromiseMap.values())}catch{tt.warn("error waiting for media permissons")}}let a=yield navigator.mediaDevices.enumerateDevices();if(s&&!(Ya()&&r.hasDeviceInUse(n))&&(a.filter(d=>d.kind===n).length===0||a.some(d=>{const h=d.label==="",m=n?d.kind===n:!0;return h&&m}))){const d={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},h=yield navigator.mediaDevices.getUserMedia(d);a=yield navigator.mediaDevices.enumerateDevices(),h.getTracks().forEach(m=>{m.stop()})}return r._previousDevices=a,n&&(a=a.filter(l=>l.kind===n)),a})()})}normalizeDeviceId(e,n,r){return V(this,void 0,void 0,function*(){if(n!==Vx)return n;const s=yield this.getDevices(e),o=s.find(l=>l.deviceId===Vx);if(!o){tt.warn("could not reliably determine default device");return}const a=s.find(l=>l.deviceId!==Vx&&l.groupId===(r??o.groupId));if(!a){tt.warn("could not reliably determine default device");return}return a?.deviceId})}hasDeviceInUse(e){return e?On.userMediaPromiseMap.has(e):On.userMediaPromiseMap.size>0}}On.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];On.userMediaPromiseMap=new Map;var cu;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(cu||(cu={}));class lQ{constructor(){this.pendingTasks=new Map,this.taskMutex=new Er,this.nextTaskIndex=0}run(e){return V(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:cu.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=cu.RUNNING,yield e()}finally{n.status=cu.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return V(this,void 0,void 0,function*(){return this.run(()=>V(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class cQ{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r,s;if(!((r=n.signal)===null||r===void 0)&&r.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const o=new WebSocket(e,(s=n.protocols)!==null&&s!==void 0?s:[]);o.binaryType="arraybuffer",this.ws=o;const a=function(){let{closeCode:l,reason:d}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o.close(l,d)};this.opened=new Promise((l,d)=>{o.onopen=()=>{l({readable:new ReadableStream({start(h){o.onmessage=m=>{let{data:f}=m;return h.enqueue(f)},o.onerror=m=>h.error(m)},cancel:a}),writable:new WritableStream({write(h){o.send(h)},abort(){o.close()},close:a}),protocol:o.protocol,extensions:o.extensions}),o.removeEventListener("error",d)},o.addEventListener("error",d)}),this.closed=new Promise((l,d)=>{const h=()=>V(this,void 0,void 0,function*(){const m=new Promise(v=>{o.readyState!==WebSocket.CLOSED&&o.addEventListener("close",y=>{v(y)},{once:!0})}),f=yield Promise.race([lr(250),m]);f?l(f):d(new Error("Encountered unspecified websocket error without a timely close event"))});o.onclose=m=>{let{code:f,reason:v}=m;l({closeCode:f,reason:v}),o.removeEventListener("error",h)},o.addEventListener("error",h)}),n.signal&&(n.signal.onabort=()=>o.close()),this.close=a}}function dQ(t,e){const n=new URL(KX(t));return e.forEach((r,s)=>{n.searchParams.set(s,r)}),zO(n,"rtc")}function uQ(t){const e=new URL(k0(t));return zO(e,"validate")}function hQ(t){return t.endsWith("/")?t:"".concat(t,"/")}function zO(t,e){return t.pathname="".concat(hQ(t.pathname)).concat(e),t.toString()}function NN(t){if(typeof t=="string")return rN.fromJson(JSON.parse(t),{ignoreUnknownFields:!0});if(t instanceof ArrayBuffer)return rN.fromBinary(new Uint8Array(t));throw new Error("could not decode websocket message: ".concat(typeof t))}const mQ=["syncState","trickle","offer","answer","simulate","leave"];function fQ(t){const e=mQ.indexOf(t.case)>=0;return tt.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Ft;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Ft||(Ft={}));const pQ=250;class Ww{get currentState(){return this.state}get isDisconnected(){return this.state===Ft.DISCONNECTING||this.state===Ft.DISCONNECTED}get isEstablishingConnection(){return this.state===Ft.CONNECTING||this.state===Ft.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Ft.DISCONNECTED,this.log=tt,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Gi((r=n.loggerName)!==null&&r!==void 0?r:Ms.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new lQ,this.queuedRequests=[],this.closingLock=new Er,this.connectionLock=new Er,this.state=Ft.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,s){return V(this,void 0,void 0,function*(){return this.state=Ft.CONNECTING,this.options=r,yield this.connect(e,n,r,s)})}reconnect(e,n,r,s){return V(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Ft.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:s}))})}connect(e,n,r,s){return V(this,void 0,void 0,function*(){const o=yield this.connectionLock.lock();this.connectOptions=r;const a=HX(),l=r.singlePeerConnection?vQ(n,a,r):gQ(n,a,r),d=dQ(e,l),h=uQ(d);return new Promise((m,f)=>V(this,void 0,void 0,function*(){var v,y;try{const w=new AbortController,b=s?[w.signal,s]:[w.signal],k=AbortSignal.any(b),j=N=>V(this,void 0,void 0,function*(){this.streamWriter?this.sendLeave().then(()=>this.close()).catch(I=>{this.log.error(I),this.close()}):this.close(),clearTimeout(T);const _=N.currentTarget;f(_ instanceof AbortSignal?_.reason:_)});k.addEventListener("abort",j);const T=setTimeout(()=>{w.abort(new xt("room connection has timed out (signal)",ut.ServerUnreachable))},r.websocketTimeout),E=(N,_)=>{this.handleSignalConnected(N,T,_)},P=new URL(d);P.searchParams.has("access_token")&&P.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(P),Object.assign({reconnect:r.reconnect,reconnectReason:r.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new cQ(d,{signal:k});try{this.ws.closed.then(D=>{this.isEstablishingConnection&&f(new xt("Websocket got closed during a (re)connection attempt: ".concat(D.reason),ut.InternalError)),D.closeCode!==1e3&&this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:D.reason,code:D.closeCode,wasClean:D.closeCode===1e3,state:this.state}))}).catch(D=>{this.isEstablishingConnection&&f(new xt("Websocket error during a (re)connection attempt: ".concat(D),ut.InternalError))});const N=yield this.ws.opened.catch(D=>V(this,void 0,void 0,function*(){if(this.state!==Ft.CONNECTED){this.state=Ft.DISCONNECTED,clearTimeout(T);const A=yield this.handleConnectionError(D,h);f(A);return}this.handleWSError(D),f(D)}));if(clearTimeout(T),!N)return;const _=N.readable.getReader();this.streamWriter=N.writable.getWriter();const I=yield _.read();if(_.releaseLock(),!I.value)throw new xt("no message received as first message",ut.InternalError);const M=NN(I.value),O=this.validateFirstMessage(M,(v=r.reconnect)!==null&&v!==void 0?v:!1);if(!O.isValid){f(O.error);return}((y=M.message)===null||y===void 0?void 0:y.case)==="join"&&(this.pingTimeoutDuration=M.message.value.pingTimeout,this.pingIntervalDuration=M.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const L=O.shouldProcessFirstMessage?M:void 0;E(N,L),m(O.response)}catch(N){clearTimeout(T),f(N)}}finally{o()}}))})}startReadingLoop(e,n){return V(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield lr(this.signalLatency));const{done:r,value:s}=yield e.read();if(r)break;const o=NN(s);this.handleSignalResponse(o)}})}close(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Ft.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:"Close method called on signal client"});const s=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([s,lr(pQ)])}}catch(s){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:s}))}finally{n&&(e.state=Ft.DISCONNECTED),r()}})()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:hc(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:hc(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Vp({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Bp({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return V(this,arguments,void 0,function(r,s){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const l=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new Lw({requestId:l,metadata:r,name:s,attributes:a})}),l})()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new YI({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new ZI({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Ot.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new nO({timestamp:Ot.parse(Date.now()),rtt:Ot.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new Dw({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new zp({reason:Ps.CLIENT_INITIATED,action:jc.DISCONNECT})})}sendRequest(e){return V(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!s&&!fQ(n)&&r.state===Ft.RECONNECTING){r.queuedRequests.push(()=>V(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(s||(yield r.requestQueue.flush()),r.signalLatency&&(yield lr(r.signalLatency)),r.isDisconnected){r.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!r.streamWriter){r.log.error("cannot send signal request before connected, type: ".concat(n?.case),r.logContext);return}const a=new _Y({message:n});try{r.useJSON?yield r.streamWriter.write(a.toJsonString()):yield r.streamWriter.write(a.toBinary())}catch(l){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:l}))}})()})}handleSignalResponse(e){var n,r;const s=e.message;if(s==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(s.case==="answer"){const a=EN(s.value);this.onAnswer&&this.onAnswer(a,s.value.id)}else if(s.case==="offer"){const a=EN(s.value);this.onOffer&&this.onOffer(a,s.value.id)}else if(s.case==="trickle"){const a=JSON.parse(s.value.candidateInit);this.onTrickle&&this.onTrickle(a,s.value.target)}else s.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=s.value.participants)!==null&&n!==void 0?n:[]):s.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(s.value):s.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=s.value.speakers)!==null&&r!==void 0?r:[]):s.case==="leave"?this.onLeave&&this.onLeave(s.value):s.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(s.value.sid,s.value.muted):s.case==="roomUpdate"?this.onRoomUpdate&&s.value.room&&this.onRoomUpdate(s.value.room):s.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(s.value):s.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(s.value):s.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(s.value):s.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(s.value):s.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(s.value):s.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(s.value):s.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(s.value):s.case==="pong"||(s.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(s.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):s.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(s.value):s.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(s.value.trackSid):s.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(s.value.token),this.onRoomMoved&&this.onRoomMoved(s.value)):s.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(s.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:s.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return V(this,void 0,void 0,function*(){if(this.state===Ft.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=qn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&qn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=qn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&qn.clearInterval(this.pingInterval)}handleSignalConnected(e,n,r){this.state=Ft.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),r)}validateFirstMessage(e,n){var r,s,o,a,l;return((r=e.message)===null||r===void 0?void 0:r.case)==="join"?{isValid:!0,response:e.message.value}:this.state===Ft.RECONNECTING&&((s=e.message)===null||s===void 0?void 0:s.case)!=="leave"?((o=e.message)===null||o===void 0?void 0:o.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((a=e.message)===null||a===void 0?void 0:a.case)==="leave"?{isValid:!1,error:new xt("Received leave request while trying to (re)connect",ut.LeaveRequest,void 0,e.message.value.reason)}:n?{isValid:!1,error:new xt("Unexpected first message",ut.InternalError)}:{isValid:!1,error:new xt("did not receive join response, got ".concat((l=e.message)===null||l===void 0?void 0:l.case," instead"),ut.InternalError)}}handleConnectionError(e,n){return V(this,void 0,void 0,function*(){try{const r=yield fetch(n);if(r.status.toFixed(0).startsWith("4")){const s=yield r.text();return new xt(s,ut.NotAllowed,r.status)}else return e instanceof xt?e:new xt("Encountered unknown websocket error during connection: ".concat(e),ut.InternalError,r.status)}catch(r){return r instanceof xt?r:new xt(r instanceof Error?r.message:"server was not reachable",ut.ServerUnreachable)}})}}function EN(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function hc(t,e){return new Jo({sdp:t.sdp,type:t.type,id:e})}function gQ(t,e,n){var r;const s=new URLSearchParams;return s.set("access_token",t),n.reconnect&&(s.set("reconnect","1"),n.sid&&s.set("sid",n.sid)),s.set("auto_subscribe",n.autoSubscribe?"1":"0"),s.set("sdk",fi()?"reactnative":"js"),s.set("version",e.version),s.set("protocol",e.protocol.toString()),e.deviceModel&&s.set("device_model",e.deviceModel),e.os&&s.set("os",e.os),e.osVersion&&s.set("os_version",e.osVersion),e.browser&&s.set("browser",e.browser),e.browserVersion&&s.set("browser_version",e.browserVersion),n.adaptiveStream&&s.set("adaptive_stream","1"),n.reconnectReason&&s.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&s.set("network",navigator.connection.type),s}function vQ(t,e,n){const r=new URLSearchParams;r.set("access_token",t);const s=new QY({clientInfo:e,connectionSettings:new rO({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(s.reconnectReason=n.reconnectReason);const o=new ZY({joinRequest:s.toBinary()});return r.set("join_request",btoa(new TextDecoder("utf-8").decode(o.toBinary()))),r}class PN{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class xQ{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const r=Date.now();r-this._lastCleanup>this.ttl/2&&this.cleanup();const s=r+this.ttl;return this._map.set(e,{value:n,expiresAt:s}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,r]of this._map.entries())r.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e(r.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],r=this.asValueMap();for(const[s,o]of r.entries())n.push(e(o,s,r));return n}asValueMap(){const e=new Map;for(const[n,r]of this._map.entries())r.expiresAt>=Date.now()&&e.set(n,r.value);return e}}var xs={},Bx={},$x={exports:{}},_N;function Hw(){if(_N)return $x.exports;_N=1;var t=$x.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),$x.exports}var RN;function yQ(){return RN||(RN=1,(function(t){var e=function(l){return String(Number(l))===l?Number(l):l},n=function(l,d,h,m){if(m&&!h)d[m]=e(l[1]);else for(var f=0;f<h.length;f+=1)l[f+1]!=null&&(d[h[f]]=e(l[f+1]))},r=function(l,d,h){var m=l.name&&l.names;l.push&&!d[l.push]?d[l.push]=[]:m&&!d[l.name]&&(d[l.name]={});var f=l.push?{}:m?d[l.name]:d;n(h.match(l.reg),f,l.names,l.name),l.push&&d[l.push].push(f)},s=Hw(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(l){var d={},h=[],m=d;return l.split(/(\r\n|\r|\n)/).filter(o).forEach(function(f){var v=f[0],y=f.slice(2);v==="m"&&(h.push({rtp:[],fmtp:[]}),m=h[h.length-1]);for(var w=0;w<(s[v]||[]).length;w+=1){var b=s[v][w];if(b.reg.test(y))return r(b,m,y)}}),d.media=h,d};var a=function(l,d){var h=d.split(/=(.+)/,2);return h.length===2?l[h[0]]=e(h[1]):h.length===1&&d.length>1&&(l[h[0]]=void 0),l};t.parseParams=function(l){return l.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(l){return l.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(l){for(var d=[],h=l.split(" ").map(e),m=0;m<h.length;m+=3)d.push({component:h[m],ip:h[m+1],port:h[m+2]});return d},t.parseImageAttributes=function(l){return l.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(l){return l.split(";").map(function(d){return d.split(",").map(function(h){var m,f=!1;return h[0]!=="~"?m=e(h):(m=e(h.substring(1,h.length)),f=!0),{scid:m,paused:f}})})}})(Bx)),Bx}var zx,AN;function bQ(){if(AN)return zx;AN=1;var t=Hw(),e=/%[sdv%]/g,n=function(a){var l=1,d=arguments,h=d.length;return a.replace(e,function(m){if(l>=h)return m;var f=d[l];switch(l+=1,m){case"%%":return"%";case"%s":return String(f);case"%d":return Number(f);case"%v":return""}})},r=function(a,l,d){var h=l.format instanceof Function?l.format(l.push?d:d[l.name]):l.format,m=[a+"="+h];if(l.names)for(var f=0;f<l.names.length;f+=1){var v=l.names[f];l.name?m.push(d[l.name][v]):m.push(d[l.names[f]])}else m.push(d[l.name]);return n.apply(null,m)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return zx=function(a,l){l=l||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(f){f.payloads==null&&(f.payloads="")});var d=l.outerOrder||s,h=l.innerOrder||o,m=[];return d.forEach(function(f){t[f].forEach(function(v){v.name in a&&a[v.name]!=null?m.push(r(f,v,a)):v.push in a&&a[v.push]!=null&&a[v.push].forEach(function(y){m.push(r(f,v,y))})})}),a.media.forEach(function(f){m.push(r("m",t.m[0],f)),h.forEach(function(v){t[v].forEach(function(y){y.name in f&&f[y.name]!=null?m.push(r(v,y,f)):y.push in f&&f[y.push]!=null&&f[y.push].forEach(function(w){m.push(r(v,y,w))})})})}),m.join(`\r
`)+`\r
`},zx}var IN;function wQ(){if(IN)return xs;IN=1;var t=yQ(),e=bQ(),n=Hw();return xs.grammar=n,xs.write=e,xs.parse=t.parse,xs.parseParams=t.parseParams,xs.parseFmtpConfig=t.parseFmtpConfig,xs.parsePayloads=t.parsePayloads,xs.parseRemoteCandidates=t.parseRemoteCandidates,xs.parseImageAttributes=t.parseImageAttributes,xs.parseSimulcastStreamList=t.parseSimulcastStreamList,xs}var Ao=wQ();function Gw(t,e,n){var r,s,o;e===void 0&&(e=50),n===void 0&&(n={});var a=(r=n.isImmediate)!=null&&r,l=(s=n.callback)!=null&&s,d=n.maxWait,h=Date.now(),m=[];function f(){if(d!==void 0){var y=Date.now()-h;if(y+e>=d)return d-y}return e}var v=function(){var y=[].slice.call(arguments),w=this;return new Promise(function(b,k){var j=a&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,h=Date.now(),!a){var E=t.apply(w,y);l&&l(E),m.forEach(function(P){return(0,P.resolve)(E)}),m=[]}},f()),j){var T=t.apply(w,y);return l&&l(T),b(T)}m.push({resolve:b,reject:k})})};return v.cancel=function(y){o!==void 0&&clearTimeout(o),m.forEach(function(w){return(0,w.reject)(y)}),m=[]},v}const SQ=.7,kQ=20,Nc={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class ON extends xi.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=tt,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Gw(s=>V(this,void 0,void 0,function*(){this.emit(Nc.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(s)s(o);else throw o}}),kQ),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Gi((r=n.loggerName)!==null&&r!==void 0?r:Ms.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new Er}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return V(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return V(this,void 0,void 0,function*(){var r;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let s;if(e.type==="offer"){let{stereoMids:o,nackMids:a}=jQ(e);this.remoteStereoMids=o,this.remoteNackMids=a}else if(e.type==="answer"){const o=Ao.parse((r=e.sdp)!==null&&r!==void 0?r:"");o.media.forEach(a=>{const l=Kw(a.mid);a.type==="audio"&&this.trackBitrates.some(d=>{if(!d.transceiver||l!=d.transceiver.mid)return!1;let h=0;if(a.rtp.some(f=>f.codec.toUpperCase()===d.codec.toUpperCase()?(h=f.payload,!0):!1),h===0)return!0;let m=!1;for(const f of a.fmtp)if(f.payload===h){f.config=f.config.split(";").filter(v=>!v.includes("maxaveragebitrate")).join(";"),d.maxbr>0&&(f.config+=";maxaveragebitrate=".concat(d.maxbr*1e3)),m=!0;break}return m||d.maxbr>0&&a.fmtp.push({payload:h,config:"maxaveragebitrate=".concat(d.maxbr*1e3)}),!0})}),s=Ao.write(o)}return yield this.setMungedSDP(e,s,!0),this.pendingCandidates.forEach(o=>{this.pc.addIceCandidate(o)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Nc.NegotiationComplete),e.sdp&&Ao.parse(e.sdp).media.forEach(a=>{a.type==="video"&&this.emit(Nc.RTPVideoPayloadTypes,a.rtp)})),!0})}createAndSendOffer(e){return V(this,void 0,void 0,function*(){var n;const r=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(e?.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const s=this.latestOfferId+1;this.latestOfferId=s;const o=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:o.sdp},this.logContext));const a=Ao.parse((n=o.sdp)!==null&&n!==void 0?n:"");if(a.media.forEach(l=>{DN(l),l.type==="audio"?MN(l,["all"],[]):l.type==="video"&&this.trackBitrates.some(d=>{if(!l.msid||!d.cid||!l.msid.includes(d.cid))return!1;let h=0;if(l.rtp.some(f=>f.codec.toUpperCase()===d.codec.toUpperCase()?(h=f.payload,!0):!1),h===0||(oi(d.codec)&&!Ya()&&this.ensureVideoDDExtensionForSVC(l,a),d.codec!=="av1"))return!0;const m=Math.round(d.maxbr*SQ);for(const f of l.fmtp)if(f.payload===h){f.config.includes("x-google-start-bitrate")||(f.config+=";x-google-start-bitrate=".concat(m));break}return!0})}),this.latestOfferId>s){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:s}));return}yield this.setMungedSDP(o,Ao.write(a)),this.onOffer(o,this.latestOfferId)}finally{r()}})}createAndSetAnswer(){return V(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),r=Ao.parse((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(s=>{DN(s),s.type==="audio"&&MN(s,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Ao.write(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Sn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Sn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return V(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const r=new Map,s=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),r.set(l.id,l);break;case"remote-candidate":s.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const a=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(a!==void 0)return s.get(a)})}setMungedSDP(e,n,r){return V(this,void 0,void 0,function*(){if(n){const s=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=s}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(s){let o="unknown error";s instanceof Error?o=s.message:typeof s=="string"&&(o=s);const a={error:o,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(a.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:a})),new g0(o)}})}ensureVideoDDExtensionForSVC(e,n){var r,s;if(!((r=e.ext)===null||r===void 0?void 0:r.some(a=>a.uri===bN))){if(this.ddExtID===0){let a=0;n.media.forEach(l=>{var d;l.type==="video"&&((d=l.ext)===null||d===void 0||d.forEach(h=>{h.value>a&&(a=h.value)}))}),this.ddExtID=a+1}(s=e.ext)===null||s===void 0||s.push({value:this.ddExtID,uri:bN})}}}function MN(t,e,n){const r=Kw(t.mid);let s=0;t.rtp.some(o=>o.codec==="opus"?(s=o.payload,!0):!1),s>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(r)&&!t.rtcpFb.some(o=>o.payload===s&&o.type==="nack")&&t.rtcpFb.push({payload:s,type:"nack"}),(e.includes(r)||e.length===1&&e[0]==="all")&&t.fmtp.some(o=>o.payload===s?(o.config.includes("stereo=1")||(o.config+=";stereo=1"),!0):!1))}function jQ(t){var e;const n=[],r=[],s=Ao.parse((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return s.media.forEach(a=>{var l;const d=Kw(a.mid);a.type==="audio"&&(a.rtp.some(h=>h.codec==="opus"?(o=h.payload,!0):!1),!((l=a.rtcpFb)===null||l===void 0)&&l.some(h=>h.payload===o&&h.type==="nack")&&r.push(d),a.fmtp.some(h=>h.payload===o?(h.config.includes("sprop-stereo=1")&&n.push(d),!0):!1))}),{stereoMids:n,nackMids:r}}function DN(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function Kw(t){return typeof t=="number"?t.toFixed(0):t}const N0="vp8",CQ={audioPreset:v0.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:zw.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:N0,backupCodec:!0,preConnectBuffer:!1},qO={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},WO={deviceId:{ideal:"default"},resolution:Bu.h720.resolution},TQ={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new aX,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},Jw={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var qt;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(qt||(qt={}));class NQ{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var s;this.peerConnectionTimeout=Jw.peerConnectionTimeout,this.log=tt,this.updateState=()=>{var o,a;const l=this.state,d=this.requiredTransports.map(h=>h.getConnectionState());d.every(h=>h==="connected")?this.state=qt.CONNECTED:d.some(h=>h==="failed")?this.state=qt.FAILED:d.some(h=>h==="connecting")?this.state=qt.CONNECTING:d.every(h=>h==="closed")?this.state=qt.CLOSED:d.some(h=>h==="closed")?this.state=qt.CLOSING:d.every(h=>h==="new")&&(this.state=qt.NEW),l!==this.state&&(this.log.debug("pc state change: from ".concat(qt[l]," to ").concat(qt[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),(a=this.subscriber)===null||a===void 0?void 0:a.getConnectionState()))},this.log=Gi((s=r.loggerName)!==null&&s!==void 0?s:Ms.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new ON(e,r),n!=="publisher-only"&&(this.subscriber=new ON(e,r),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=o=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,o,Ts.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,o)},this.subscriber.onTrack=o=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,o)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,o,Ts.PUBLISHER)},this.publisher.onTrack=o=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,o)},this.publisher.onOffer=(o,a)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,o,a)},this.state=qt.NEW,this.connectionLock=new Er,this.remoteOfferLock=new Er}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return V(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const r of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(r)}catch(s){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:s}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return V(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return V(this,void 0,void 0,function*(){var r;n===Ts.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(r=this.subscriber)===null||r===void 0?void 0:r.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return V(this,void 0,void 0,function*(){var r,s,o;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(r=this.subscriber)===null||r===void 0?void 0:r.getSignallingState().toString()}));const a=yield this.remoteOfferLock.lock();try{return(yield(s=this.subscriber)===null||s===void 0?void 0:s.setRemoteDescription(e,n))?yield(o=this.subscriber)===null||o===void 0?void 0:o.createAndSetAnswer():void 0}finally{a()}})}updateConfiguration(e,n){var r;this.publisher.setConfiguration(e),(r=this.subscriber)===null||r===void 0||r.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return V(this,void 0,void 0,function*(){var r;const s=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,e,n)))}finally{s()}})}negotiate(e){return V(this,void 0,void 0,function*(){return new Promise((n,r)=>V(this,void 0,void 0,function*(){const s=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(s),r("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(Nc.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Nc.NegotiationComplete,()=>{clearTimeout(s),n()})}),yield this.publisher.negotiate(a=>{clearTimeout(s),r(a)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Ts.PUBLISHER?this.publisher.getConnectedAddress():e===Ts.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return V(this,arguments,void 0,function(r,s){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(r.getConnectionState()!=="connected")return new Promise((d,h)=>V(o,void 0,void 0,function*(){const m=()=>{this.log.warn("abort transport connection",this.logContext),qn.clearTimeout(f),h(new xt("room connection has been cancelled",ut.Cancelled))};s?.signal.aborted&&m(),s?.signal.addEventListener("abort",m);const f=qn.setTimeout(()=>{s?.signal.removeEventListener("abort",m),h(new xt("could not establish pc connection",ut.InternalError))},a);for(;this.state!==qt.CONNECTED;)if(yield lr(50),s?.signal.aborted){h(new xt("room connection has been cancelled",ut.Cancelled));return}qn.clearTimeout(f),s?.signal.removeEventListener("abort",m),d()}))})()})}}class Ht extends Error{constructor(e,n,r){super(n),this.code=e,this.message=LN(n,Ht.MAX_MESSAGE_BYTES),this.data=r?LN(r,Ht.MAX_DATA_BYTES):void 0}static fromProto(e){return new Ht(e.code,e.message,e.data)}toProto(){return new UI({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Ht(Ht.ErrorCode[e],Ht.ErrorMessage[e],n)}}Ht.MAX_MESSAGE_BYTES=256;Ht.MAX_DATA_BYTES=15360;Ht.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Ht.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const HO=15360;function Yw(t){return new TextEncoder().encode(t).length}function LN(t,e){if(Yw(t)<=e)return t;let n=0,r=t.length;const s=new TextEncoder;for(;n<r;){const o=Math.floor((n+r+1)/2);s.encode(t.slice(0,o)).length<=e?n=o:r=o-1}return t.slice(0,n)}const Xw=2e3;function Wp(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}const Qw=typeof MediaRecorder<"u";class EQ{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const PQ=Qw?MediaRecorder:EQ;class _Q extends PQ{constructor(e,n){if(!Qw)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let r,s;const o=()=>s===void 0,a=()=>{this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",l),s?.close(),s=void 0},l=d=>{s?.error(d),this.removeEventListener("dataavailable",r),this.removeEventListener("stop",a),this.removeEventListener("error",l),s=void 0};this.byteStream=new ReadableStream({start:d=>{s=d,r=h=>V(this,void 0,void 0,function*(){let m;if(h.data.arrayBuffer){const f=yield h.data.arrayBuffer();m=new Uint8Array(f)}else if(h.data.byteArray)m=h.data.byteArray;else throw new Error("no data available!");o()||d.enqueue(m)}),this.addEventListener("dataavailable",r)},cancel:()=>{a()}}),this.addEventListener("stop",a),this.addEventListener("error",l)}}function RQ(){return Qw}const AQ=1e3,IQ=1e4;class GO extends Y{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Gw(()=>V(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>V(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(je.Ended,this)},this.reacquireTrack=!1,this.providedByUser=s,this.muteLock=new Er,this.pauseUpstreamLock=new Er,this.trackChangeLock=new Er,this.trackChangeLock.lock().then(a=>V(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{a()}})),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Y.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return V(this,void 0,void 0,function*(){var r;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(o=>{Tc(this._mediaStreamTrack,o)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let s;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(uc(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),s=this.processor.processedTrack}this.sender&&((r=this.sender.transport)===null||r===void 0?void 0:r.state)!=="closed"&&(yield this.sender.replaceTrack(s??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(o=>{uc(s??e,o)}))})}waitForDimensions(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:AQ;return(function*(){var r;if(e.kind===Y.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=Pr())===null||r===void 0?void 0:r.os)==="iOS"&&(yield lr(10));const s=Date.now();for(;Date.now()-s<n;){const o=e.dimensions;if(o)return o;yield lr(50)}throw new Ui("unable to get track dimensions after timeout")})()})}setDeviceId(e){return V(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Bo(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Bo(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(e.source===Y.Source.ScreenShare)return;const{deviceId:r,groupId:s}=e._mediaStreamTrack.getSettings(),o=e.kind===Y.Kind.Audio?"audioinput":"videoinput";return n?On.getInstance().normalizeDeviceId(o,r,s):r})()})}mute(){return V(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return V(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return V(this,void 0,void 0,function*(){const r=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Ui("unable to replace an unpublished track");let s,o;return typeof n=="boolean"?s=n:n!==void 0&&(s=n.userProvidedTrack,o=n.stopProcessor),this.providedByUser=s??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),o&&this.processor&&(yield this.internalStopProcessor()),this}finally{r()}})}restart(e){return V(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:r,facingMode:s}=e,o=lX(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const a={audio:!1,video:!1};this.kind===Y.Kind.Video?a.video=r||s?{deviceId:r,facingMode:s}:!0:a.audio=r?Object.assign({deviceId:r},o):!0,this.attachedElements.forEach(h=>{Tc(this.mediaStreamTrack,h)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const d=(yield navigator.mediaDevices.getUserMedia(a)).getTracks()[0];return this.kind===Y.Kind.Video&&(yield d.applyConstraints(o)),d.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(d),this._constraints=e,this.emit(je.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?je.Muted:je.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return V(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),DO()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return V(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(je.UpstreamPaused,this);const r=Pr();if(r?.name==="Safari"&&Ds(r.version,"12.0")<0)throw new $w("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return V(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(je.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return V(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return V(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o;const a=yield r.trackChangeLock.lock();try{r.log.debug("setting up processor",r.logContext);const l=document.createElement(r.kind),d={kind:r.kind,track:r._mediaStreamTrack,element:l,audioContext:r.audioContext};if(yield n.init(d),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.internalStopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(uc(r._mediaStreamTrack,l),l.muted=!0,l.play().catch(h=>{h instanceof DOMException&&h.name==="AbortError"?(r.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},r.logContext),{error:h})),setTimeout(()=>{l.play().catch(m=>{r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{err:m}))})},100)):r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:h}))}),r.processor=n,r.processorElement=l,r.processor.processedTrack){for(const h of r.attachedElements)h!==r.processorElement&&s&&(Tc(r._mediaStreamTrack,h),uc(r.processor.processedTrack,h));yield(o=r.sender)===null||o===void 0?void 0:o.replaceTrack(r.processor.processedTrack)}r.emit(je.TrackProcessorUpdate,r.processor)}finally{a()}})()})}getProcessor(){return this.processor}stopProcessor(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const r=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{r()}})()})}internalStopProcessor(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var r,s;e.processor&&(e.log.debug("stopping processor",e.logContext),(r=e.processor.processedTrack)===null||r===void 0||r.stop(),yield e.processor.destroy(),e.processor=void 0,n||((s=e.processorElement)===null||s===void 0||s.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(je.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!RQ()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new _Q(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},IQ)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class Wf extends GO{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,Y.Kind.Audio,n,r,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>V(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}a&&this.prevStats&&(this._currentBitrate=Wp(a,this.prevStats)),this.prevStats=a}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(je.AudioTrackFeatureUpdate,this,An.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(je.AudioTrackFeatureUpdate,this,An.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=s,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Y.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Bo(this._constraints.deviceId);return this.source===Y.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return V(this,void 0,void 0,function*(){let n;if(e){const r=qw({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return V(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){Tr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Xw)))}setProcessor(e){return V(this,void 0,void 0,function*(){var n;const r=yield this.trackChangeLock.lock();try{if(!fi()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const s={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(s),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(je.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return V(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(s=>{s.type==="outbound-rtp"&&(r={type:"audio",streamId:s.id,packetsSent:s.packetsSent,packetsLost:s.packetsLost,bytesSent:s.bytesSent,timestamp:s.timestamp,roundTripTime:s.roundTripTime,jitter:s.jitter})}),r})}checkForSilence(){return V(this,void 0,void 0,function*(){const e=yield VO(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(je.AudioSilenceDetected)),e})}}function OQ(t,e,n){switch(t.kind){case"audio":return new Wf(t,e,!1,void 0,n);case"video":return new Hf(t,e,!1,n);default:throw new Ui("unsupported track type: ".concat(t.kind))}}const MQ=Object.values(Bu),DQ=Object.values(x0),LQ=Object.values(zw),UQ=[Bu.h180,Bu.h360],FQ=[x0.h180,x0.h360],VQ=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,s;return new kt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((s=n.fps)!==null&&s!==void 0?s:30))))),n.fps,t.encoding.priority)}),E0=["q","h","f"];function P0(t,e,n,r){var s,o;let a=r?.videoEncoding;t&&(a=r?.screenShareEncoding);const l=r?.simulcast,d=r?.scalabilityMode,h=r?.videoCodec;if(!a&&!l&&!d||!e||!n)return[{}];a||(a=$Q(t,e,n,h),tt.debug("using video encoding",a));const m=a.maxFramerate,f=new kt(e,n,a.maxBitrate,a.maxFramerate,a.priority);if(d&&oi(h)){const w=new KO(d),b=[];if(w.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(d));const k=Pr();if($u()||fi()||k?.name==="Chrome"&&Ds(k?.version,"113")<0){const j=w.suffix=="h"?2:3,T=$X(k);for(let E=0;E<w.spatial;E+=1)b.push({rid:E0[2-E],maxBitrate:a.maxBitrate/Math.pow(j,E),maxFramerate:f.encoding.maxFramerate,scaleResolutionDownBy:T?Math.pow(2,E):void 0});b[0].scalabilityMode=d}else b.push({maxBitrate:a.maxBitrate,maxFramerate:f.encoding.maxFramerate,scalabilityMode:d});return f.encoding.priority&&(b[0].priority=f.encoding.priority,b[0].networkPriority=f.encoding.priority),tt.debug("using svc encoding",{encodings:b}),b}if(!l)return[a];let v=[];t?v=(s=FN(r?.screenShareSimulcastLayers))!==null&&s!==void 0?s:UN(t,f):v=(o=FN(r?.videoSimulcastLayers))!==null&&o!==void 0?o:UN(t,f);let y;if(v.length>0){const w=v[0];v.length>1&&([,y]=v);const b=Math.max(e,n);if(b>=960&&y)return qx(e,n,[w,y,f],m);if(b>=480)return qx(e,n,[w,f],m)}return qx(e,n,[f])}function BQ(t,e,n){var r,s,o,a;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&tt.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const l=t.mediaStreamTrack.getSettings(),d=(r=l.width)!==null&&r!==void 0?r:(s=t.dimensions)===null||s===void 0?void 0:s.width,h=(o=l.height)!==null&&o!==void 0?o:(a=t.dimensions)===null||a===void 0?void 0:a.height;return t.source===Y.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),P0(t.source===Y.Source.ScreenShare,d,h,n)}function $Q(t,e,n,r){const s=zQ(t,e,n);let{encoding:o}=s[0];const a=Math.max(e,n);for(let l=0;l<s.length;l+=1){const d=s[l];if(o=d.encoding,d.width>=a)break}if(r)switch(r){case"av1":case"h265":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function zQ(t,e,n){if(t)return LQ;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?MQ:DQ}function UN(t,e){if(t)return VQ(e);const{width:n,height:r}=e,s=n>r?n/r:r/n;return Math.abs(s-16/9)<Math.abs(s-4/3)?UQ:FQ}function qx(t,e,n,r){const s=[];if(n.forEach((o,a)=>{if(a>=E0.length)return;const l=Math.min(t,e),h={rid:E0[a],scaleResolutionDownBy:Math.max(1,l/Math.min(o.width,o.height)),maxBitrate:o.encoding.maxBitrate},m=r&&o.encoding.maxFramerate?Math.min(r,o.encoding.maxFramerate):o.encoding.maxFramerate;m&&(h.maxFramerate=m);const f=Ja()||a===0;o.encoding.priority&&f&&(h.priority=o.encoding.priority,h.networkPriority=o.encoding.priority),s.push(h)}),fi()&&UO()==="ios"){let o;s.forEach(l=>{o?l.maxFramerate&&l.maxFramerate>o&&(o=l.maxFramerate):o=l.maxFramerate});let a=!0;s.forEach(l=>{var d;l.maxFramerate!=o&&(a&&(a=!1,tt.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),tt.info('Setting framerate of encoding "'.concat((d=l.rid)!==null&&d!==void 0?d:"",'" to ').concat(o)),l.maxFramerate=o)})}return s}function FN(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:s}=n;return r.maxBitrate>s.maxBitrate?1:r.maxBitrate<s.maxBitrate?-1:r.maxBitrate===s.maxBitrate&&r.maxFramerate&&s.maxFramerate?r.maxFramerate>s.maxFramerate?1:-1:0})}class KO{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function qQ(t){return t.source===Y.Source.ScreenShare||t.constraints.height&&Bo(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const WQ=5e3;class Hf extends GO{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0;super(e,Y.Kind.Video,n,r,s),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>V(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(d){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}const a=new Map(o.map(d=>[d.rid,d])),l=o.some(d=>d.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(je.CpuConstrained)),this.prevStats){let d=0;a.forEach((h,m)=>{var f;const v=(f=this.prevStats)===null||f===void 0?void 0:f.get(m);d+=Wp(h,v)}),this._currentBitrate=d}this.prevStats=a}),this.senderLock=new Er}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Tr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Xw))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return V(this,void 0,void 0,function*(){var n,r,s,o,a;yield e.pauseUpstream.call(this);try{for(var l=!0,d=Li(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;l=!0)o=h.value,l=!1,yield(a=o.sender)===null||a===void 0?void 0:a.replaceTrack(null)}catch(m){r={error:m}}finally{try{!l&&!n&&(s=d.return)&&(yield s.call(d))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return V(this,void 0,void 0,function*(){var n,r,s,o,a;yield e.resumeUpstream.call(this);try{for(var l=!0,d=Li(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;l=!0){o=h.value,l=!1;const m=o;yield(a=m.sender)===null||a===void 0?void 0:a.replaceTrack(m.mediaStreamTrack)}}catch(m){r={error:m}}finally{try{!l&&!n&&(s=d.return)&&(yield s.call(d))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return V(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return V(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(s=>{var o;if(s.type==="outbound-rtp"){const a={type:"video",streamId:s.id,frameHeight:s.frameHeight,frameWidth:s.frameWidth,framesPerSecond:s.framesPerSecond,framesSent:s.framesSent,firCount:s.firCount,pliCount:s.pliCount,nackCount:s.nackCount,packetsSent:s.packetsSent,bytesSent:s.bytesSent,qualityLimitationReason:s.qualityLimitationReason,qualityLimitationDurations:s.qualityLimitationDurations,qualityLimitationResolutionChanges:s.qualityLimitationResolutionChanges,rid:(o=s.rid)!==null&&o!==void 0?o:s.id,retransmittedPacketsSent:s.retransmittedPacketsSent,targetBitrate:s.targetBitrate,timestamp:s.timestamp},l=r.get(s.remoteId);l&&(a.jitter=l.jitter,a.packetsLost=l.packetsLost,a.roundTripTime=l.roundTripTime),n.push(a)}}),n.sort((s,o)=>{var a,l;return((a=o.frameWidth)!==null&&a!==void 0?a:0)-((l=s.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(e){const n=[];for(let r=Fr.LOW;r<=Fr.HIGH;r+=1)n.push(new Uw({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(oi(this.codec),n)}restartTrack(e){return V(this,void 0,void 0,function*(){var n,r,s,o,a;let l;if(e){const f=qw({video:e});typeof f.video!="boolean"&&(l=f.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var d=!0,h=Li(this.simulcastCodecs.values()),m;m=yield h.next(),n=m.done,!n;d=!0){o=m.value,d=!1;const f=o;f.sender&&((a=f.sender.transport)===null||a===void 0?void 0:a.state)!=="closed"&&(f.mediaStreamTrack=this.mediaStreamTrack.clone(),yield f.sender.replaceTrack(f.mediaStreamTrack))}}catch(f){r={error:f}}finally{try{!d&&!n&&(s=h.return)&&(yield s.call(h))}finally{if(r)throw r.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return V(this,arguments,void 0,function(r){var s=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var a,l,d,h,m,f;if(yield n.setProcessor.call(s,r,o),!((m=s.processor)===null||m===void 0)&&m.processedTrack)try{for(var v=!0,y=Li(s.simulcastCodecs.values()),w;w=yield y.next(),a=w.done,!a;v=!0)h=w.value,v=!1,yield(f=h.sender)===null||f===void 0?void 0:f.replaceTrack(s.processor.processedTrack)}catch(b){l={error:b}}finally{try{!v&&!a&&(d=y.return)&&(yield d.call(y))}finally{if(l)throw l.error}}})()})}setDegradationPreference(e){return V(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},WQ))}setPublishingCodecs(e){return V(this,void 0,void 0,function*(){var n,r,s,o,a,l,d;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(oi(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const h=[];try{for(n=!0,r=Li(e);s=yield r.next(),o=s.done,!o;n=!0){d=s.value,n=!1;const m=d;if(!this.codec||this.codec===m.codec)yield this.setPublishingLayers(oi(m.codec),m.qualities);else{const f=this.simulcastCodecs.get(m.codec);if(this.log.debug("try setPublishingCodec for ".concat(m.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:f})),!f||!f.sender){for(const v of m.qualities)if(v.enabled){h.push(m.codec);break}}else f.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(m.codec),this.logContext),yield VN(f.sender,f.encodings,m.qualities,this.senderLock,oi(m.codec),this.log,this.logContext))}}}catch(m){a={error:m}}finally{try{!n&&!o&&(l=r.return)&&(yield l.call(r))}finally{if(a)throw a.error}}return h})}setPublishingLayers(e,n){return V(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield VN(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return V(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((r,s)=>{var o;return Object.assign(Object.assign({},r),{active:s===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((o=this.mediaStreamTrack.getSettings().height)!==null&&o!==void 0?o:360)/360)),scalabilityMode:s===0&&oi(this.codec)?"L1T3":void 0,maxFramerate:s===0?15:0,maxBitrate:s===0?r.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return V(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),DO()&&this.isInBackground&&this.source===Y.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function VN(t,e,n,r,s,o,a){return V(this,void 0,void 0,function*(){const l=yield r.lock();o.debug("setPublishingLayersForSender",Object.assign(Object.assign({},a),{sender:t,qualities:n,senderEncodings:e}));try{const d=t.getParameters(),{encodings:h}=d;if(!h)return;if(h.length!==e.length){o.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},a),{encodings:h,senderEncodings:e}));return}let m=!1;!1&&h[0].scalabilityMode||(s&&n.some(y=>y.enabled)&&n.forEach(y=>y.enabled=!0),h.forEach((v,y)=>{var w;let b=(w=v.rid)!==null&&w!==void 0?w:"";b===""&&(b="q");const k=JO(b),j=n.find(T=>T.quality===k);j&&v.active!==j.enabled&&(m=!0,v.active=j.enabled,o.debug("setting layer ".concat(j.quality," to ").concat(v.active?"enabled":"disabled"),a),Ja()&&(j.enabled?(v.scaleResolutionDownBy=e[y].scaleResolutionDownBy,v.maxBitrate=e[y].maxBitrate,v.maxFrameRate=e[y].maxFrameRate):(v.scaleResolutionDownBy=4,v.maxBitrate=10,v.maxFrameRate=2)))})),m&&(d.encodings=h,o.debug("setting encodings",Object.assign(Object.assign({},a),{encodings:d.encodings})),yield t.setParameters(d))}finally{l()}})}function JO(t){switch(t){case"f":return Fr.HIGH;case"h":return Fr.MEDIUM;case"q":return Fr.LOW;default:return Fr.HIGH}}function BN(t,e,n,r){if(!n)return[new Fo({quality:Fr.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const s=n[0].scalabilityMode,o=new KO(s),a=[],l=o.suffix=="h"?1.5:2,d=o.suffix=="h"?2:3;for(let h=0;h<o.spatial;h+=1)a.push(new Fo({quality:Math.min(Fr.HIGH,o.spatial-1)-h,width:Math.ceil(t/Math.pow(l,h)),height:Math.ceil(e/Math.pow(l,h)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(d,h)):0,ssrc:0}));return a}return n.map(s=>{var o,a,l;const d=(o=s.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let h=JO((a=s.rid)!==null&&a!==void 0?a:"");return new Fo({quality:h,width:Math.ceil(t/d),height:Math.ceil(e/d),bitrate:(l=s.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const $N="_lossy",zN="_reliable",HQ=2*1e3,Wx="leave-reconnect",GQ=3e4;var es;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(es||(es={}));class KQ extends xi.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Jw.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=es.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=tt,this.reliableDataSequence=1,this.reliableMessageBuffer=new PN,this.reliableReceivedState=new xQ(GQ),this.handleDataChannel=r=>V(this,[r],void 0,function(s){var o=this;let{channel:a}=s;return(function*(){if(a){if(a.label===zN)o.reliableDCSub=a;else if(a.label===$N)o.lossyDCSub=a;else return;o.log.debug("on data channel ".concat(a.id,", ").concat(a.label),o.logContext),a.onmessage=o.handleDataMessage}})()}),this.handleDataMessage=r=>V(this,void 0,void 0,function*(){var s,o,a,l,d;const h=yield this.dataProcessLock.lock();try{let m;if(r.data instanceof ArrayBuffer)m=r.data;else if(r.data instanceof Blob)m=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const f=sr.fromBinary(new Uint8Array(m));if(f.sequence>0&&f.participantSid!==""){const v=this.reliableReceivedState.get(f.participantSid);if(v&&f.sequence<=v)return;this.reliableReceivedState.set(f.participantSid,f.sequence)}if(((s=f.value)===null||s===void 0?void 0:s.case)==="speaker")this.emit(Ne.ActiveSpeakersUpdate,f.value.value.speakers);else if(((o=f.value)===null||o===void 0?void 0:o.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const v=yield(a=this.e2eeManager)===null||a===void 0?void 0:a.handleEncryptedData(f.value.value.encryptedValue,f.value.value.iv,f.participantIdentity,f.value.value.keyIndex),y=MI.fromBinary(v.payload),w=new sr({value:y.value,participantIdentity:f.participantIdentity,participantSid:f.participantSid});((l=w.value)===null||l===void 0?void 0:l.case)==="user"&&qN(w,w.value.value),this.emit(Ne.DataPacketReceived,w,f.value.value.encryptionType)}else((d=f.value)===null||d===void 0?void 0:d.case)==="user"&&qN(f,f.value.value),this.emit(Ne.DataPacketReceived,f,kn.NONE)}finally{h()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:a}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:a}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?st.LOSSY:st.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,s)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=d=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(d,"ms. giving up"),this.logContext),this.emit(Ne.Disconnected),this.close()},a=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:a,retryCount:this.reconnectAttempts});if(l===null){o(a);return}r===Wx&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=qn.setTimeout(()=>this.attemptReconnect(s).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((r,s)=>{this.pcState===es.Connected&&r();const o=()=>{this.off(Ne.Disconnected,a),r()},a=()=>{this.off(Ne.Restarted,o),s()};this.once(Ne.Restarted,o),this.once(Ne.Disconnected,a)}),this.updateAndEmitDCBufferStatus=r=>{const s=this.isBufferStatusLow(r);typeof s<"u"&&s!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,s),this.emit(Ne.DCBufferStatusChanged,s,r))},this.isBufferStatusLow=r=>{const s=this.dataChannelForKind(r);if(s)return r===st.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(s.bufferedAmount),s.bufferedAmount<=s.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Ft.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Ca.RR_SIGNAL_DISCONNECTED))},this.log=Gi((n=e.loggerName)!==null&&n!==void 0?n:Ms.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Ww(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new Er,this.dataProcessLock=new Er,this.dcBufferStatus=new Map([[st.LOSSY,!0],[st.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Ne.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Ne.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Ne.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Ne.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Ne.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Ne.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Ne.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(Ne.SignalRequestResponse,r)}get logContext(){var e,n,r,s,o,a;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(s=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||s===void 0?void 0:s.sid,participant:(a=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||a===void 0?void 0:a.identity,pID:this.participantSid}}join(e,n,r,s){return V(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,r,s);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),(!this.subscriberPrimary||o.fastPublish)&&this.negotiate().catch(a=>{tt.error(a,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=o.clientConfiguration,this.emit(Ne.SignalConnected,o),o}catch(o){if(o instanceof xt&&o.reason===ut.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,s);throw o}})}close(){return V(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(Ne.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return V(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new PN,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return V(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Ui("a track with the same ID has already been published");return new Promise((n,r)=>{const s=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new xt("publication of local track timed out, no response from server",ut.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(s),n(o)},reject:()=>{clearTimeout(s),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return V(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return V(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==qt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const s=this.makeRTCConfiguration(e);this.pcManager=new NQ(s,this.options.singlePeerConnection?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(Ne.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(o,a)=>{this.client.sendIceCandidate(o,a)},this.pcManager.onPublisherOffer=(o,a)=>{this.client.sendOffer(o,a)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(o,a,l)=>V(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(o),this.logContext),["closed","disconnected","failed"].includes(a)&&(this.publisherConnectionPromise=void 0),o===qt.CONNECTED){const m=this.pcState===es.New;this.pcState=es.Connected,m&&this.emit(Ne.Connected,e)}else o===qt.FAILED&&(this.pcState===es.Connected||this.pcState===es.Reconnecting)&&(this.pcState=es.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?Ca.RR_SUBSCRIBER_FAILED:Ca.RR_PUBLISHER_FAILED));const d=this.client.isDisconnected||this.client.currentState===Ft.RECONNECTING,h=[qt.FAILED,qt.CLOSING,qt.CLOSED].includes(o);d&&h&&!this._isClosed&&this.emit(Ne.Offline)}),this.pcManager.onTrack=o=>{o.streams.length!==0&&this.emit(Ne.MediaTrackAdded,o.track,o.streams[0],o.receiver)},JQ((r=e.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n)=>V(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp})),yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n)=>V(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const r=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);r&&this.client.sendAnswer(r,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Ne.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(Ne.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Ne.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Ne.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(Ne.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,r;const s={direction:"recvonly"};for(let o=0;o<e.numAudios;o++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",s);for(let o=0;o<e.numVideos;o++)(r=this.pcManager)===null||r===void 0||r.addPublisherTransceiverOfKind("video",s);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",Ca.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case jc.DISCONNECT:this.emit(Ne.Disconnected,e?.reason),this.close();break;case jc.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Wx);break;case jc.RESUME:this.handleDisconnect(Wx)}}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const s=[];e.iceServers.forEach(o=>{const a={urls:o.urls};o.username&&(a.username=o.username),o.credential&&(a.credential=o.credential),s.push(a)}),r.iceServers=s}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Lu.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel($N,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(zN,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,r){return V(this,void 0,void 0,function*(){if(y0())return yield this.createTransceiverRTCRtpSender(e,n,r);if(b0())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Sn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,s){return V(this,void 0,void 0,function*(){if(y0())return this.createSimulcastTransceiverSender(e,n,r,s);if(b0())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Sn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new Sn("publisher is closed");const s=[];e.mediaStream&&s.push(e.mediaStream),ta(e)&&(e.codec=n.videoCodec);const o={direction:"sendonly",streams:s};return r&&(o.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(e,n,r,s){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new Sn("publisher is closed");const o={direction:"sendonly"};s&&(o.sendEncodings=s);const a=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return e.setSimulcastTrackSender(r.videoCodec,a.sender),a.sender})}createRTCRtpSender(e){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new Sn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return V(this,void 0,void 0,function*(){var n,r,s;if(!this._isClosed){if(this.attemptingReconnect){tt.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Lu.DISABLED||((s=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&s!==void 0?s:qt.NEW)===qt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let a=!0;o instanceof Sn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),a=!1):o instanceof Yl||(this.fullReconnectOnNext=!0),a?this.handleDisconnect("reconnect",Ca.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Ne.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return V(this,void 0,void 0,function*(){var n,r,s;try{if(!this.url||!this.token)throw new Sn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Ne.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Yl;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(a){throw a instanceof xt&&a.reason===ut.NotAllowed?new Sn("could not reconnect, token might be expired"):new Yl}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Ne.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Ft.CONNECTED)throw new Yl("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Ne.Restarted)}catch(o){const a=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(a){yield this.restartConnection(a);return}else throw(s=this.regionUrlProvider)===null||s===void 0||s.resetAttempts(),o}})}resumeConnection(e){return V(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Sn("could not reconnect, url or token not saved");if(!this.pcManager)throw new Sn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Ne.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(s){let o="";throw s instanceof Error&&(o=s.message,this.log.error(s.message,Object.assign(Object.assign({},this.logContext),{error:s}))),s instanceof xt&&s.reason===ut.NotAllowed?new Sn("could not reconnect, token might be expired"):s instanceof xt&&s.reason===ut.LeaveRequest?s:new Yl(o)}if(this.emit(Ne.SignalResumed),r){const s=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(s),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=r.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Ft.CONNECTED)throw new Yl("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),r?.lastMessageSeq&&this.resendReliableMessagesForResume(r.lastMessageSeq),this.emit(Ne.Resumed)})}waitForPCInitialConnection(e,n){return V(this,void 0,void 0,function*(){if(!this.pcManager)throw new Sn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return V(this,void 0,void 0,function*(){this.pcState=es.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield lr(HQ),!this.pcManager)throw new Sn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=es.Connected}catch(e){throw this.pcState=es.Disconnected,new xt("could not establish PC connection, ".concat(e.message),ut.InternalError)}})}publishRpcResponse(e,n,r,s){return V(this,void 0,void 0,function*(){const o=new sr({destinationIdentities:[e],kind:st.RELIABLE,value:{case:"rpcResponse",value:new Ow({requestId:n,value:s?{case:"error",value:s.toProto()}:{case:"payload",value:r??""}})}});yield this.sendDataPacket(o,st.RELIABLE)})}publishRpcAck(e,n){return V(this,void 0,void 0,function*(){const r=new sr({destinationIdentities:[e],kind:st.RELIABLE,value:{case:"rpcAck",value:new Iw({requestId:n})}});yield this.sendDataPacket(r,st.RELIABLE)})}sendDataPacket(e,n){return V(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const o=kX(e);if(o){const a=yield this.e2eeManager.encryptData(o.toBinary());e.value={case:"encryptedPacket",value:new OI({encryptedValue:a.payload,iv:a.iv,keyIndex:a.keyIndex})}}}n===st.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const r=e.toBinary(),s=this.dataChannelForKind(n);if(s){if(n===st.RELIABLE&&this.reliableMessageBuffer.push({data:r,sequence:e.sequence}),this.attemptingReconnect)return;s.send(r)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return V(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(st.RELIABLE);const n=this.dataChannelForKind(st.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(r=>{n.send(r.data)})),this.updateAndEmitDCBufferStatus(st.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,r)=>V(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const s=()=>r("Engine closed");for(this.once(Ne.Closing,s);!this.dcBufferStatus.get(e);)yield lr(10);this.off(Ne.Closing,s),n()}}))}ensureDataTransportConnected(e){return V(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var o;if(!r.pcManager)throw new Sn("PC manager is closed");const a=s?r.pcManager.subscriber:r.pcManager.publisher,l=s?"Subscriber":"Publisher";if(!a)throw new xt("".concat(l," connection not set"),ut.InternalError);let d=!1;!s&&!r.dataChannelForKind(n,s)&&(r.createDataChannels(),d=!0),!d&&!s&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(d=!0),d&&r.negotiate().catch(f=>{tt.error(f,r.logContext)});const h=r.dataChannelForKind(n,s);if(h?.readyState==="open")return;const m=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<m;){if(a.isICEConnected&&((o=r.dataChannelForKind(n,s))===null||o===void 0?void 0:o.readyState)==="open")return;yield lr(50)}throw new xt("could not establish ".concat(l," connection, state: ").concat(a.getICEConnectionState()),ut.InternalError)})()})}ensurePublisherConnected(e){return V(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==qt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return V(this,void 0,void 0,function*(){return new Promise((e,n)=>V(this,void 0,void 0,function*(){if(!this.pcManager){n(new g0("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,s=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Ne.Closing,s),this.pcManager.publisher.once(Nc.RTPVideoPayloadTypes,o=>{const a=new Map;o.forEach(l=>{const d=l.codec.toLowerCase();GX(d)&&a.set(l.payload,d)}),this.emit(Ne.RTPVideoMapUpdate,a)});try{yield this.pcManager.negotiate(r),e()}catch(o){o instanceof g0&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Ca.RR_UNKNOWN),n(o)}finally{this.off(Ne.Closing,s)}}))})}dataChannelForKind(e,n){if(n){if(e===st.LOSSY)return this.lossyDCSub;if(e===st.RELIABLE)return this.reliableDCSub}else{if(e===st.LOSSY)return this.lossyDC;if(e===st.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,s,o,a;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const l=this.pcManager.publisher.getLocalDescription(),d=this.pcManager.publisher.getRemoteDescription(),h=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getRemoteDescription(),m=(s=this.pcManager.subscriber)===null||s===void 0?void 0:s.getLocalDescription(),f=(a=(o=this.signalOpts)===null||o===void 0?void 0:o.autoSubscribe)!==null&&a!==void 0?a:!0,v=new Array,y=new Array;e.forEach(w=>{w.isDesired!==f&&v.push(w.trackSid),w.isEnabled||y.push(w.trackSid)}),this.client.sendSyncState(new Fw({answer:this.options.singlePeerConnection?d?hc({sdp:d.sdp,type:d.type}):void 0:m?hc({sdp:m.sdp,type:m.type}):void 0,offer:this.options.singlePeerConnection?l?hc({sdp:l.sdp,type:l.type}):void 0:h?hc({sdp:h.sdp,type:h.type}):void 0,subscription:new $p({trackSids:v,subscribe:!f,participantTracks:[]}),publishTracks:nQ(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:y,datachannelReceiveStates:this.reliableReceivedState.map((w,b)=>new eO({publisherSid:b,lastSeq:w}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,s)=>{r?.id!==void 0&&r.id!==null&&e.push(new tO({label:r.label,id:r.id,target:s}))};return n(this.dataChannelForKind(st.LOSSY),Ts.PUBLISHER),n(this.dataChannelForKind(st.RELIABLE),Ts.PUBLISHER),n(this.dataChannelForKind(st.LOSSY,!0),Ts.SUBSCRIBER),n(this.dataChannelForKind(st.RELIABLE,!0),Ts.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&qn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Tr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Tr()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Yl extends Error{}function JQ(t){return t!==void 0&&t>13}function qN(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const r=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=r,e.destinationIdentities=r}class _0{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return S0(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return V(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(s=>s.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),tt.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return V(this,void 0,void 0,function*(){const n=yield fetch("".concat(YQ(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new xt("Could not fetch region settings: ".concat(n.statusText),n.status===401?ut.NotAllowed:ut.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function YQ(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class YO{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new ts("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),rr.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new ts("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),rr.LengthExceeded)}}constructor(e,n,r,s){this.reader=n,this.totalByteSize=r,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=s}}class XQ extends YO{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new ss,r=null,s=null;if(this.signal){const a=this.signal;s=()=>{var l;(l=n.reject)===null||l===void 0||l.call(n,a.reason)},a.addEventListener("abort",s),r=a}const o=()=>{e.releaseLock(),r&&s&&r.removeEventListener("abort",s),this.signal=void 0};return{next:()=>V(this,void 0,void 0,function*(){var a,l;try{const{done:d,value:h}=yield Promise.race([e.read(),n.promise,(l=(a=this.outOfBandFailureRejectingFuture)===null||a===void 0?void 0:a.promise)!==null&&l!==void 0?l:new Promise(()=>{})]);return d?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(h),{done:!1,value:h.content})}catch(d){throw o(),d}}),return(){return V(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,s,o,a;let l=new Set;const d=n.signal?e.withAbortSignal(n.signal):e;try{for(var h=!0,m=Li(d),f;f=yield m.next(),r=f.done,!r;h=!0){a=f.value,h=!1;const v=a;l.add(v)}}catch(v){s={error:v}}finally{try{!h&&!r&&(o=m.return)&&(yield o.call(m))}finally{if(s)throw s.error}}return Array.from(l)})()})}}class QQ extends YO{constructor(e,n,r,s){super(e,n,r,s),this.receivedChunks=new Map}handleChunkReceived(e){var n;const r=hf(e.chunkIndex),s=this.receivedChunks.get(r);if(s&&s.version>e.version)return;this.receivedChunks.set(r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const o=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,o)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let r=new ss,s=null,o=null;if(this.signal){const l=this.signal;o=()=>{var d;(d=r.reject)===null||d===void 0||d.call(r,l.reason)},l.addEventListener("abort",o),s=l}const a=()=>{e.releaseLock(),s&&o&&s.removeEventListener("abort",o),this.signal=void 0};return{next:()=>V(this,void 0,void 0,function*(){var l,d;try{const{done:h,value:m}=yield Promise.race([e.read(),r.promise,(d=(l=this.outOfBandFailureRejectingFuture)===null||l===void 0?void 0:l.promise)!==null&&d!==void 0?d:new Promise(()=>{})]);if(h)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(m);let f;try{f=n.decode(m.content)}catch(v){throw new ts("Cannot decode datastream chunk ".concat(m.chunkIndex," as text: ").concat(v),rr.DecodeFailed)}return{done:!1,value:f}}}catch(h){throw a(),h}}),return(){return V(this,void 0,void 0,function*(){return a(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return V(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var r,s,o,a;let l="";const d=n.signal?e.withAbortSignal(n.signal):e;try{for(var h=!0,m=Li(d),f;f=yield m.next(),r=f.done,!r;h=!0)a=f.value,h=!1,l+=a}catch(v){s={error:v}}finally{try{!h&&!r&&(o=m.return)&&(yield o.call(m))}finally{if(s)throw s.error}}return l})()})}}class ZQ{constructor(){this.log=tt,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new ts('A text stream handler for topic "'.concat(e,'" has already been set.'),rr.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new ts('A byte stream handler for topic "'.concat(e,'" has already been set.'),rr.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,r,s,o;const a=Array.from(this.textStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===e),l=Array.from(this.byteStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===e);if(a.length>0||l.length>0){const d=new ts("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),rr.AbnormalEnd);for(const[h,m]of l)(r=(n=m.outOfBandFailureRejectingFuture).reject)===null||r===void 0||r.call(n,d),this.byteStreamControllers.delete(h);for(const[h,m]of a)(o=(s=m.outOfBandFailureRejectingFuture).reject)===null||o===void 0||o.call(s,d),this.textStreamControllers.delete(h)}}handleDataStreamPacket(e,n){return V(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,r){return V(this,void 0,void 0,function*(){var s;if(e.contentHeader.case==="byteHeader"){const o=this.byteStreamHandlers.get(e.topic);if(!o){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let a;const l=new ss;l.promise.catch(m=>{this.log.error(m)});const d={id:e.streamId,name:(s=e.contentHeader.value.name)!==null&&s!==void 0?s:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:hf(e.timestamp),attributes:e.attributes,encryptionType:r},h=new ReadableStream({start:m=>{if(a=m,this.textStreamControllers.has(e.streamId))throw new ts("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),rr.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:d,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});o(new XQ(d,h,hf(e.totalLength),l),{identity:n})}else if(e.contentHeader.case==="textHeader"){const o=this.textStreamHandlers.get(e.topic);if(!o){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let a;const l=new ss;l.promise.catch(m=>{this.log.error(m)});const d={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:r},h=new ReadableStream({start:m=>{if(a=m,this.textStreamControllers.has(e.streamId))throw new ts("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),rr.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:d,controller:a,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:l})}});o(new QQ(d,h,hf(e.totalLength),l),{identity:n})}})}handleStreamChunk(e,n){const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new ts("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),rr.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e));const s=this.textStreamControllers.get(e.streamId);s&&(s.info.encryptionType!==n?(s.controller.error(new ts("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(s.info.encryptionType),rr.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&s.controller.enqueue(e))}handleStreamTrailer(e,n){const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new ts("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),rr.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close(),this.textStreamControllers.delete(e.streamId)));const s=this.byteStreamControllers.get(e.streamId);s&&(s.info.encryptionType!==n?s.controller.error(new ts("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(s.info.encryptionType),rr.EncryptionTypeMismatch)):(s.info.attributes=Object.assign(Object.assign({},s.info.attributes),e.attributes),s.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class XO{constructor(e,n,r){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=r,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return V(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class eZ extends XO{}class tZ extends XO{}const WN=15e3;class nZ{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return V(this,void 0,void 0,function*(){var r;const s=crypto.randomUUID(),a=new TextEncoder().encode(e).byteLength,l=(r=n?.attachments)===null||r===void 0?void 0:r.map(()=>crypto.randomUUID()),d=new Array(l?l.length+1:1).fill(0),h=(f,v)=>{var y;d[v]=f;const w=d.reduce((b,k)=>b+k,0);(y=n?.onProgress)===null||y===void 0||y.call(n,w)},m=yield this.streamText({streamId:s,totalSize:a,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:l,attributes:n?.attributes});return yield m.write(e),h(1,0),yield m.close(),n?.attachments&&l&&(yield Promise.all(n.attachments.map((f,v)=>V(this,void 0,void 0,function*(){return this._sendFile(l[v],f,{topic:n.topic,mimeType:f.type,onProgress:y=>{h(y,v+1)}})})))),m.info})}streamText(e){return V(this,void 0,void 0,function*(){var n,r,s;const o=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),a={id:o,mimeType:"text/plain",timestamp:Date.now(),topic:(r=e?.topic)!==null&&r!==void 0?r:"",size:e?.totalSize,attributes:e?.attributes,encryptionType:!((s=this.engine.e2eeManager)===null||s===void 0)&&s.isDataChannelEncryptionEnabled?kn.GCM:kn.NONE},l=new $f({streamId:o,mimeType:a.mimeType,topic:a.topic,timestamp:Ta(a.timestamp),totalLength:Ta(e?.totalSize),attributes:a.attributes,contentHeader:{case:"textHeader",value:new HI({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?i0.UPDATE:i0.CREATE})}}),d=e?.destinationIdentities,h=new sr({destinationIdentities:d,value:{case:"streamHeader",value:l}});yield this.engine.sendDataPacket(h,st.RELIABLE);let m=0;const f=this.engine,v=new WritableStream({write(b){return V(this,void 0,void 0,function*(){for(const k of ZX(b,WN)){yield f.waitForBufferStatusLow(st.RELIABLE);const j=new zf({content:k,streamId:o,chunkIndex:Ta(m)}),T=new sr({destinationIdentities:d,value:{case:"streamChunk",value:j}});yield f.sendDataPacket(T,st.RELIABLE),m+=1}})},close(){return V(this,void 0,void 0,function*(){const b=new qf({streamId:o}),k=new sr({destinationIdentities:d,value:{case:"streamTrailer",value:b}});yield f.sendDataPacket(k,st.RELIABLE)})},abort(b){console.log("Sink error:",b)}});let y=()=>V(this,void 0,void 0,function*(){yield w.close()});f.once(Ne.Closing,y);const w=new eZ(v,a,()=>this.engine.off(Ne.Closing,y));return w})}sendFile(e,n){return V(this,void 0,void 0,function*(){const r=crypto.randomUUID();return yield this._sendFile(r,e,n),{id:r}})}_sendFile(e,n,r){return V(this,void 0,void 0,function*(){var s;const o=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(s=r?.mimeType)!==null&&s!==void 0?s:n.type,topic:r?.topic,destinationIdentities:r?.destinationIdentities}),a=n.stream().getReader();for(;;){const{done:l,value:d}=yield a.read();if(l)break;yield o.write(d)}return yield o.close(),o.info})}streamBytes(e){return V(this,void 0,void 0,function*(){var n,r,s,o,a,l;const d=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),h=e?.destinationIdentities,m={id:d,mimeType:(r=e?.mimeType)!==null&&r!==void 0?r:"application/octet-stream",topic:(s=e?.topic)!==null&&s!==void 0?s:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(o=e?.name)!==null&&o!==void 0?o:"unknown",encryptionType:!((a=this.engine.e2eeManager)===null||a===void 0)&&a.isDataChannelEncryptionEnabled?kn.GCM:kn.NONE},f=new $f({totalLength:Ta((l=m.size)!==null&&l!==void 0?l:0),mimeType:m.mimeType,streamId:d,topic:m.topic,timestamp:Ta(Date.now()),attributes:m.attributes,contentHeader:{case:"byteHeader",value:new GI({name:m.name})}}),v=new sr({destinationIdentities:h,value:{case:"streamHeader",value:f}});yield this.engine.sendDataPacket(v,st.RELIABLE);let y=0;const w=new Er,b=this.engine,k=this.log,j=new WritableStream({write(E){return V(this,void 0,void 0,function*(){const P=yield w.lock();let N=0;try{for(;N<E.byteLength;){const _=E.slice(N,N+WN);yield b.waitForBufferStatusLow(st.RELIABLE);const I=new sr({destinationIdentities:h,value:{case:"streamChunk",value:new zf({content:_,streamId:d,chunkIndex:Ta(y)})}});yield b.sendDataPacket(I,st.RELIABLE),y+=1,N+=_.byteLength}}finally{P()}})},close(){return V(this,void 0,void 0,function*(){const E=new qf({streamId:d}),P=new sr({destinationIdentities:h,value:{case:"streamTrailer",value:E}});yield b.sendDataPacket(P,st.RELIABLE)})},abort(E){k.error("Sink error:",E)}});return new tZ(j,m)})}}class QO extends Y{constructor(e,n,r,s,o){super(e,r,o),this.sid=n,this.receiver=s}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?je.Muted:je.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(je.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return V(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Xw)),rQ()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:s,rtpTimestamp:o}=r;o&&this.rtpTimestamp!==o&&(this.emit(je.TimeSyncUpdate,{timestamp:s,rtpTimestamp:o}),this.rtpTimestamp=o)}};e()}}class ZO extends QO{constructor(e,n,r,s,o,a){super(e,n,Y.Kind.Audio,r,a),this.monitorReceiver=()=>V(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=Wp(l,this.prevStats)),this.prevStats=l}),this.audioContext=s,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;fi()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(fi())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return V(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(w0(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&w0(e)&&e.setSinkId(this.sinkId).catch(r=>{this.log.error("Failed to set sink id on remote audio track",r,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(s=>{r.connect(s),r=s}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(je.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(s=>{this.emit(je.AudioPlaybackFailed,s)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return V(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",streamId:r.id,timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Hx=100;class rZ extends QO{constructor(e,n,r,s,o){super(e,n,Y.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>V(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Wp(a,this.prevStats)),this.prevStats=a}),this.debouncedHandleResize=Gw(()=>{this.updateDimensions()},Hx),this.adaptiveStreamSettings=s}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),console.log("setStreamState",e),e===Y.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?Tc(this._mediaStreamTrack,n):uc(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new sZ(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return V(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",s=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",streamId:o.id,framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&s.set(o.id,o)}),n&&r!==""&&s.get(r)&&(n.mimeType=s.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return V(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,r;const s=this.elementInfos.reduce((d,h)=>Math.max(d,h.visibilityChangedAt||0),0),o=!((r=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&r!==void 0)||r?this.isInBackground:!1,a=this.elementInfos.some(d=>d.pictureInPicture),l=this.elementInfos.some(d=>d.visible)&&!o||a;if(!(this.lastVisible===l&&!e)){if(!l&&Date.now()-s<Hx){qn.setTimeout(()=>{this.updateVisibility()},Hx);return}this.lastVisible=l,this.emit(je.VisibilityChanged,l,this)}}updateDimensions(){var e,n;let r=0,s=0;const o=this.getPixelDensity();for(const a of this.elementInfos){const l=a.width()*o,d=a.height()*o;l+d>r+s&&(r=l,s=d)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===s||(this.lastDimensions={width:r,height:s},this.emit(je.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?wN():n||(wN()>2?2:1)}}class sZ{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var s;const{target:o,isIntersecting:a}=r;o===this.element&&(this.isIntersecting=a,this.isPiP=zd(this.element),this.visibilityChangedAt=Date.now(),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this))},this.onEnterPiP=()=>{var r,s,o;(s=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||s===void 0||s.addEventListener("pagehide",this.onLeavePiP),this.isPiP=zd(this.element),(o=this.handleVisibilityChanged)===null||o===void 0||o.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=zd(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??R0(e),this.isPiP=Tr()&&zd(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,r;this.isIntersecting=R0(this.element),this.isPiP=zd(this.element),this.element.handleResize=()=>{var s;(s=this.handleResize)===null||s===void 0||s.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,kN().observe(this.element),SN().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(r=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,r,s,o;(e=kN())===null||e===void 0||e.unobserve(this.element),(n=SN())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(r=window.documentPictureInPicture)===null||r===void 0||r.removeEventListener("enter",this.onEnterPiP),(o=(s=window.documentPictureInPicture)===null||s===void 0?void 0:s.window)===null||o===void 0||o.removeEventListener("pagehide",this.onLeavePiP)}}function zd(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?R0(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function R0(t,e){const n=e||window;let r=t.offsetTop,s=t.offsetLeft;const o=t.offsetWidth,a=t.offsetHeight,{hidden:l}=t,{display:d}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,r+=t.offsetTop,s+=t.offsetLeft;return r<n.pageYOffset+n.innerHeight&&s<n.pageXOffset+n.innerWidth&&r+a>n.pageYOffset&&s+o>n.pageXOffset&&!l&&d!=="none"}class Oi extends xi.EventEmitter{constructor(e,n,r,s){var o;super(),this.metadataMuted=!1,this.encryption=kn.NONE,this.log=tt,this.handleMuted=()=>{this.emit(je.Muted)},this.handleUnmuted=()=>{this.emit(je.Unmuted)},this.log=Gi((o=s?.loggerName)!==null&&o!==void 0?o:Ms.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=Y.Source.Unknown}setTrack(e){this.track&&(this.track.off(je.Muted,this.handleMuted),this.track.off(je.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(je.Muted,this.handleMuted),e.on(je.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),at(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==kn.NONE}get audioTrack(){if(ui(this.track))return this.track}get videoTrack(){if(ta(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Y.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Y.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),(function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"})(t.PermissionStatus||(t.PermissionStatus={}))})(Oi||(Oi={}));class Gf extends Oi{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,s){super(e,n.sid,n.name,s),this.track=void 0,this.handleTrackEnded=()=>{this.emit(je.Ended)},this.handleCpuConstrained=()=>{this.track&&ta(this.track)&&this.emit(je.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&(this.track.off(je.Ended,this.handleTrackEnded),this.track.off(je.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(je.Ended,this.handleTrackEnded),e.on(je.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return V(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return V(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return V(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return V(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(ui(this.track)){const n=this.track.getSourceTrackSettings(),r=new Set;return n.autoGainControl&&r.add(An.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(An.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(An.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(An.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||r.add(An.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(An.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function Hp(t,e){return V(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:r,videoProcessor:s,optionsWithoutProcessor:o}=$O(t);let a=o.audio,l=o.video;if(r&&typeof o.audio=="object"&&(o.audio.processor=r),s&&typeof o.video=="object"&&(o.video.processor=s),t.audio&&typeof o.audio=="object"&&typeof o.audio.deviceId=="string"){const f=o.audio.deviceId;o.audio.deviceId={exact:f},n=!0,a=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:f}})}if(o.video&&typeof o.video=="object"&&typeof o.video.deviceId=="string"){const f=o.video.deviceId;o.video.deviceId={exact:f},n=!0,l=Object.assign(Object.assign({},o.video),{deviceId:{ideal:f}})}(o.audio===!0||typeof o.audio=="object"&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),o.video===!0?o.video={deviceId:"default"}:typeof o.video=="object"&&!o.video.deviceId&&(o.video.deviceId="default");const d=FO(o,qO,WO),h=qw(d),m=navigator.mediaDevices.getUserMedia(h);o.audio&&(On.userMediaPromiseMap.set("audioinput",m),m.catch(()=>On.userMediaPromiseMap.delete("audioinput"))),o.video&&(On.userMediaPromiseMap.set("videoinput",m),m.catch(()=>On.userMediaPromiseMap.delete("videoinput")));try{const f=yield m;return yield Promise.all(f.getTracks().map(v=>V(this,void 0,void 0,function*(){const y=v.kind==="audio";let w=y?d.audio:d.video;(typeof w=="boolean"||!w)&&(w={});let b;const k=y?h.audio:h.video;typeof k!="boolean"&&(b=k);const j=v.getSettings().deviceId;b?.deviceId&&Bo(b.deviceId)!==j?b.deviceId=j:b||(b={deviceId:j});const T=OQ(v,b,e);return T.kind===Y.Kind.Video?T.source=Y.Source.Camera:T.kind===Y.Kind.Audio&&(T.source=Y.Source.Microphone),T.mediaStream=f,ui(T)&&r?yield T.setProcessor(r):ta(T)&&s&&(yield T.setProcessor(s)),T})))}catch(f){if(!n)throw f;return Hp(Object.assign(Object.assign({},t),{audio:a,video:l}),e)}})}function iZ(t){return V(this,void 0,void 0,function*(){return(yield Hp({audio:!1,video:!0}))[0]})}function oZ(t){return V(this,void 0,void 0,function*(){return(yield Hp({audio:!0,video:!1}))[0]})}var Ns;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Ns||(Ns={}));function aZ(t){switch(t){case Yd.EXCELLENT:return Ns.Excellent;case Yd.GOOD:return Ns.Good;case Yd.POOR:return Ns.Poor;case Yd.LOST:return Ns.Lost;default:return Ns.Unknown}}class e5 extends xi.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Uu.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===kc.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,r,s,o,a){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Uu.STANDARD;var d;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Ns.Unknown,this.log=tt,this.log=Gi((d=a?.loggerName)!==null&&d!==void 0?d:Ms.Participant),this.loggerOptions=a,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=s,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=o??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new ss,this.once(ue.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(Y.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(Y.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(Y.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===kc.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==kc.ACTIVE&&this.emit(ue.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(ue.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ue.ParticipantNameChanged,e)}_setAttributes(e){const n=sQ(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(ue.AttributesChanged,n)}setPermissions(e){var n,r,s,o,a,l;const d=this.permissions,h=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((s=this.permissions)===null||s===void 0?void 0:s.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((a=this.permissions)===null||a===void 0?void 0:a.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((m,f)=>{var v;return m!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[f])})||e.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=e,h&&this.emit(ue.ParticipantPermissionsChanged,d),h}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ue.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=aZ(e),n!==this._connectionQuality&&this.emit(ue.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>ui(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(je.Muted,()=>{this.emit(ue.TrackMuted,e)}),e.on(je.Unmuted,()=>{this.emit(ue.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case Y.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case Y.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function lZ(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new QI({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class cZ extends e5{constructor(e,n,r,s,o,a){super(e,n,void 0,void 0,void 0,{loggerName:s.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=kn.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new ss)},this.handleReconnected=()=>{var l,d;(d=(l=this.reconnectFuture)===null||l===void 0?void 0:l.resolve)===null||d===void 0||d.call(l),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var l,d,h,m,f,v;this.reconnectFuture&&(this.reconnectFuture.promise.catch(y=>this.log.warn(y.message,this.logContext)),(d=(l=this.reconnectFuture)===null||l===void 0?void 0:l.reject)===null||d===void 0||d.call(l,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((m=(h=this.signalConnectedFuture).reject)===null||m===void 0||m.call(h,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(v=(f=this.activeAgentFuture)===null||f===void 0?void 0:f.reject)===null||v===void 0||v.call(f,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=l=>{var d,h;l.participant&&this.updateInfo(l.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new ss),(h=(d=this.signalConnectedFuture).resolve)===null||h===void 0||h.call(d)},this.handleSignalRequestResponse=l=>{const{requestId:d,reason:h,message:m}=l,f=this.pendingSignalRequests.get(d);f&&(h!==Vw.OK&&f.reject(new vN(m,h)),this.pendingSignalRequests.delete(d))},this.handleDataPacket=l=>{switch(l.value.case){case"rpcResponse":let d=l.value.value,h=null,m=null;d.value.case==="payload"?h=d.value.value:d.value.case==="error"&&(m=Ht.fromProto(d.value.value)),this.handleIncomingRpcResponse(d.requestId,h,m);break;case"rpcAck":let f=l.value.value;this.handleIncomingRpcAck(f.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(l=>lZ(l)))},this.onTrackUnmuted=l=>{this.onTrackMuted(l,l.isUpstreamPaused)},this.onTrackMuted=(l,d)=>{if(d===void 0&&(d=!0),!l.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),at(l)));return}this.engine.updateMuteStatus(l.sid,d)},this.onTrackUpstreamPaused=l=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),at(l))),this.onTrackMuted(l,!0)},this.onTrackUpstreamResumed=l=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),at(l))),this.onTrackMuted(l,l.isMuted)},this.onTrackFeatureUpdate=l=>{const d=this.audioTrackPublications.get(l.sid);if(!d){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(l.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(d.trackSid,d.getTrackFeatures())},this.onTrackCpuConstrained=(l,d)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),at(d))),this.emit(ue.LocalTrackCpuConstrained,l,d)},this.handleSubscribedQualityUpdate=l=>V(this,void 0,void 0,function*(){var d,h,m,f,v;if(!(!((v=this.roomOptions)===null||v===void 0)&&v.dynacast))return;const y=this.videoTrackPublications.get(l.trackSid);if(!y){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}if(!y.videoTrack)return;const w=yield y.videoTrack.setPublishingCodecs(l.subscribedCodecs);try{for(var b=!0,k=Li(w),j;j=yield k.next(),d=j.done,!d;b=!0){f=j.value,b=!1;const T=f;MX(T)&&(this.log.debug("publish ".concat(T," for ").concat(y.videoTrack.sid),Object.assign(Object.assign({},this.logContext),at(y))),yield this.publishAdditionalCodecForTrack(y.videoTrack,T,y.options))}}catch(T){h={error:T}}finally{try{!b&&!d&&(m=k.return)&&(yield m.call(k))}finally{if(h)throw h.error}}}),this.handleLocalTrackUnpublished=l=>{const d=this.trackPublications.get(l.trackSid);if(!d){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:l.trackSid}));return}this.unpublishTrack(d.track)},this.handleTrackEnded=l=>V(this,void 0,void 0,function*(){if(l.source===Y.Source.ScreenShare||l.source===Y.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),at(l))),this.unpublishTrack(l);else if(l.isUserProvided)yield l.mute();else if(Ai(l)||Eo(l))try{if(Tr())try{const d=yield navigator?.permissions.query({name:l.source===Y.Source.Camera?"camera":"microphone"});if(d&&d.state==="denied")throw this.log.warn("user has revoked access to ".concat(l.source),Object.assign(Object.assign({},this.logContext),at(l))),d.onchange=()=>{d.state!=="denied"&&(l.isMuted||l.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}l.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),at(l))),Ai(l)?yield l.restartTrack({deviceId:"default"}):yield l.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),at(l))),yield l.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=s,this.setupEngine(r),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=o,this.roomOutgoingDataStreamManager=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==kn.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(Ne.RemoteMute,(r,s)=>{const o=this.trackPublications.get(r);!o||!o.track||(s?o.mute():o.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(Ne.Connected,this.handleReconnected).on(Ne.SignalConnected,this.handleSignalConnected).on(Ne.SignalRestarted,this.handleReconnected).on(Ne.SignalResumed,this.handleReconnected).on(Ne.Restarting,this.handleReconnecting).on(Ne.Resuming,this.handleReconnecting).on(Ne.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Ne.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Ne.Closing,this.handleClosing).on(Ne.SignalRequestResponse,this.handleSignalRequestResponse).on(Ne.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return V(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return V(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return V(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return V(this,arguments,void 0,function(n){var r=this;let{metadata:s,name:o,attributes:a}=n;return(function*(){return new Promise((l,d)=>V(r,void 0,void 0,function*(){var h,m;try{let f=!1;const v=yield this.engine.client.sendUpdateLocalMetadata((h=s??this.metadata)!==null&&h!==void 0?h:"",(m=o??this.name)!==null&&m!==void 0?m:"",a),y=performance.now();for(this.pendingSignalRequests.set(v,{resolve:l,reject:w=>{d(w),f=!0},values:{name:o,metadata:s,attributes:a}});performance.now()-y<5e3&&!f;){if((!o||this.name===o)&&(!s||this.metadata===s)&&(!a||Object.entries(a).every(w=>{let[b,k]=w;return this.attributes[b]===k||k===""&&!this.attributes[b]}))){this.pendingSignalRequests.delete(v),l();return}yield lr(50)}d(new vN("Request to update local metadata timed out","TimeoutError"))}catch(f){f instanceof Error&&d(f)}}))})()})}setCameraEnabled(e,n,r){return this.setTrackEnabled(Y.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(Y.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(Y.Source.ScreenShare,e,n,r)}setE2EEEnabled(e){return V(this,void 0,void 0,function*(){this.encryptionType=e?kn.GCM:kn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,s){return V(this,void 0,void 0,function*(){var o,a;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(e);if(n)if(l)yield l.unmute();else{let d;if(this.pendingPublishing.has(e)){const h=yield this.waitForPendingPublicationOfSource(e);return h||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield h?.unmute(),h}this.pendingPublishing.add(e);try{switch(e){case Y.Source.Camera:d=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case Y.Source.Microphone:d=yield this.createTracks({audio:(a=r)!==null&&a!==void 0?a:!0});break;case Y.Source.ScreenShare:d=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Ui(e)}}catch(h){throw d?.forEach(m=>{m.stop()}),h instanceof Error&&this.emit(ue.MediaDevicesError,h,T0(e)),this.pendingPublishing.delete(e),h}for(const h of d){const m=Object.assign(Object.assign({},this.roomOptions.publishDefaults),r);e===Y.Source.Microphone&&ui(h)&&m.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),h.startPreConnectBuffer())}try{const h=[];for(const f of d)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),at(f))),h.push(this.publishTrack(f,s));[l]=yield Promise.all(h)}catch(h){throw d?.forEach(m=>{m.stop()}),h}finally{this.pendingPublishing.delete(e)}}else if(!l?.track&&this.pendingPublishing.has(e)&&(l=yield this.waitForPendingPublicationOfSource(e),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),l&&l.track)if(e===Y.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const d=this.getTrackPublication(Y.Source.ScreenShareAudio);d&&d.track&&this.unpublishTrack(d.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return V(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Y.Source.Camera)||this.pendingPublishing.has(Y.Source.Microphone))){this.pendingPublishing.add(Y.Source.Camera),this.pendingPublishing.add(Y.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Y.Source.Camera),this.pendingPublishing.delete(Y.Source.Microphone)}}})}createTracks(e){return V(this,void 0,void 0,function*(){var n,r;e??(e={});const s=FO(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults);try{return(yield Hp(s,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>(ui(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=Y.Source.Microphone,this.emit(ue.AudioStreamAcquired)),ta(l)&&(this.cameraError=void 0,l.source=Y.Source.Camera),l))}catch(o){throw o instanceof Error&&(e.audio&&(this.microphoneError=o),e.video&&(this.cameraError=o)),o}})}createScreenTracks(e){return V(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new $w("getDisplayMedia not supported");e.resolution===void 0&&!BX()&&(e.resolution=zw.h1080fps30.resolution);const n=tQ(e),r=yield navigator.mediaDevices.getDisplayMedia(n),s=r.getVideoTracks();if(s.length===0)throw new Ui("no video track found");const o=new Hf(s[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=Y.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const a=[o];if(r.getAudioTracks().length>0){this.emit(ue.AudioStreamAcquired);const l=new Wf(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=Y.Source.ScreenShareAudio,a.push(l)}return a})}publishTrack(e,n){return V(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return V(this,arguments,void 0,function(r,s){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var l,d,h,m;Ai(r)&&r.setAudioContext(o.audioContext),yield(l=o.reconnectFuture)===null||l===void 0?void 0:l.promise,o.republishPromise&&!a&&(yield o.republishPromise),Da(r)&&o.pendingPublishPromises.has(r)&&(yield o.pendingPublishPromises.get(r));let f;if(r instanceof MediaStreamTrack)f=r.getConstraints();else{f=r.constraints;let j;switch(r.source){case Y.Source.Microphone:j="audioinput";break;case Y.Source.Camera:j="videoinput"}j&&o.activeDeviceMap.has(j)&&(f=Object.assign(Object.assign({},f),{deviceId:o.activeDeviceMap.get(j)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new Wf(r,f,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":r=new Hf(r,f,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new Ui("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let v;if(o.trackPublications.forEach(j=>{j.track&&j.track===r&&(v=j)}),v)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),at(v))),v;const y=Object.assign(Object.assign({},o.roomOptions.publishDefaults),s),w="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,b=(d=y.forceStereo)!==null&&d!==void 0?d:w;b&&(y.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),at(r))),y.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(h=y.dtx)!==null&&h!==void 0||(y.dtx=!1),(m=y.red)!==null&&m!==void 0||(y.red=!1)),!zX()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),y.simulcast=!1),y.source&&(r.source=y.source);const k=new Promise((j,T)=>V(o,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Ft.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:at(r)}));const E=setTimeout(()=>{T(new gN("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(E);const P=yield this.publish(r,y,b);j(P)}else try{const E=yield this.publish(r,y,b);j(E)}catch(E){T(E)}}catch(E){T(E)}}));o.pendingPublishPromises.set(r,k);try{return yield k}catch(j){throw j}finally{o.pendingPublishPromises.delete(r)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new ss),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),at(e))),!1;const{canPublish:n,canPublishSources:r}=this.permissions;return n&&(r.length===0||r.map(s=>iQ(s)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),at(e))),!1)}publish(e,n,r){return V(this,void 0,void 0,function*(){var s,o,a,l,d,h,m,f,v,y;if(!this.hasPermissionsToPublish(e))throw new gN("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(O=>Da(e)&&O.source===e.source)&&e.source!==Y.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),at(e))),n.stopMicTrackOnMute&&ui(e)&&(e.stopOnMute=!0),e.source===Y.Source.ScreenShare&&Ja()&&(n.simulcast=!1),n.videoCodec==="av1"&&!UX()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!FX()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=N0),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(O=>n.videoCodec===lu(O.mime))||(n.videoCodec=lu(this.enabledPublishVideoCodecs[0].mime)));const b=n.videoCodec;e.on(je.Muted,this.onTrackMuted),e.on(je.Unmuted,this.onTrackUnmuted),e.on(je.Ended,this.handleTrackEnded),e.on(je.UpstreamPaused,this.onTrackUpstreamPaused),e.on(je.UpstreamResumed,this.onTrackUpstreamResumed),e.on(je.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const k=[],j=!(!((s=n.dtx)!==null&&s!==void 0)||s),T=e.getSourceTrackSettings();T.autoGainControl&&k.push(An.TF_AUTO_GAIN_CONTROL),T.echoCancellation&&k.push(An.TF_ECHO_CANCELLATION),T.noiseSuppression&&k.push(An.TF_NOISE_SUPPRESSION),T.channelCount&&T.channelCount>1&&k.push(An.TF_STEREO),j&&k.push(An.TF_NO_DTX),Ai(e)&&e.hasPreConnectBuffer&&k.push(An.TF_PRECONNECT_BUFFER);const E=new Fu({cid:e.mediaStreamTrack.id,name:n.name,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),disableDtx:j,encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:k});let P;if(e.kind===Y.Kind.Video){let O={width:0,height:0};try{O=yield e.waitForDimensions()}catch{const D=(l=(a=this.roomOptions.videoCaptureDefaults)===null||a===void 0?void 0:a.resolution)!==null&&l!==void 0?l:Bu.h720.resolution;O={width:D.width,height:D.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),at(e)),{dims:O}))}E.width=O.width,E.height=O.height,Eo(e)&&(oi(b)&&(e.source===Y.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),at(e))))),n.scalabilityMode=(d=n.scalabilityMode)!==null&&d!==void 0?d:"L3T3_KEY"),E.simulcastCodecs=[new a0({codec:b,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:N0}),n.backupCodec&&b!==n.backupCodec.codec&&E.encryption===kn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),E.simulcastCodecs.push(new a0({codec:n.backupCodec.codec,cid:""})))),P=P0(e.source===Y.Source.ScreenShare,E.width,E.height,n),E.layers=BN(E.width,E.height,P,oi(n.videoCodec))}else e.kind===Y.Kind.Audio&&(P=[{maxBitrate:(h=n.audioPreset)===null||h===void 0?void 0:h.maxBitrate,priority:(f=(m=n.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&f!==void 0?f:"high",networkPriority:(y=(v=n.audioPreset)===null||v===void 0?void 0:v.priority)!==null&&y!==void 0?y:"high"}]);if(!this.engine||this.engine.isClosed)throw new Sn("cannot publish track when not connected");const N=()=>V(this,void 0,void 0,function*(){var O,L,D;if(!this.engine.pcManager)throw new Sn("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,P),this.emit(ue.LocalSenderCreated,e.sender,e),Eo(e)&&((O=n.degradationPreference)!==null&&O!==void 0||(n.degradationPreference=qQ(e)),e.setDegradationPreference(n.degradationPreference)),P)if(Ja()&&e.kind===Y.Kind.Audio){let A;for(const Z of this.engine.pcManager.publisher.getTransceivers())if(Z.sender===e.sender){A=Z;break}A&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:A,codec:"opus",maxbr:!((L=P[0])===null||L===void 0)&&L.maxBitrate?P[0].maxBitrate/1e3:0})}else e.codec&&oi(e.codec)&&(!((D=P[0])===null||D===void 0)&&D.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:E.cid,codec:e.codec,maxbr:P[0].maxBitrate/1e3});yield this.engine.negotiate()});let _;const I=new Promise((O,L)=>V(this,void 0,void 0,function*(){var D;try{_=yield this.engine.addTrack(E),O(_)}catch(A){e.sender&&(!((D=this.engine.pcManager)===null||D===void 0)&&D.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(Z=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),at(e)),{error:Z}))})),L(A)}}));if(this.enabledPublishVideoCodecs.length>0)_=(yield Promise.all([I,N()]))[0];else{_=yield I;let O;if(_.codecs.forEach(L=>{O===void 0&&(O=L.mimeType)}),O&&e.kind===Y.Kind.Video){const L=lu(O);L!==b&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),at(e)),{codec:L})),n.videoCodec=L,P=P0(e.source===Y.Source.ScreenShare,E.width,E.height,n))}yield N()}const M=new Gf(e.kind,_,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(M.on(je.CpuConstrained,O=>this.onTrackCpuConstrained(O,M)),M.options=n,e.sid=_.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:P,trackInfo:_})),Eo(e)?e.startMonitor(this.engine.client):Ai(e)&&e.startMonitor(),this.addTrackPublication(M),this.emit(ue.LocalTrackPublished,M),Ai(e)&&_.audioFeatures.includes(An.TF_PRECONNECT_BUFFER)){const O=e.getPreConnectBuffer(),L=e.getPreConnectBufferMimeType();this.on(ue.LocalTrackSubscribed,D=>{if(D.trackSid===_.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),at(e))),e.stopPreConnectBuffer()}}),O&&new Promise((A,Z)=>V(this,void 0,void 0,function*(){var se,fe,ae,de,U,G;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),at(e)));const he=setTimeout(()=>{Z(new Error("agent not active within 10 seconds"))},1e4),B=yield this.waitUntilActiveAgentPresent();clearTimeout(he),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),at(e)));const te=yield this.streamBytes({name:"preconnect-buffer",mimeType:L,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[B.identity],attributes:{trackId:M.trackSid,sampleRate:String((U=T.sampleRate)!==null&&U!==void 0?U:"48000"),channels:String((G=T.channelCount)!==null&&G!==void 0?G:"1")}});try{for(var le=!0,$=Li(O),ee;ee=yield $.next(),se=ee.done,!se;le=!0){de=ee.value,le=!1;const Te=de;yield te.write(Te)}}catch(Te){fe={error:Te}}finally{try{!le&&!se&&(ae=$.return)&&(yield ae.call($))}finally{if(fe)throw fe.error}}yield te.close(),A()}catch(he){Z(he)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),at(e)))}).catch(A=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),at(e)),{error:A}))})}return M})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){return V(this,void 0,void 0,function*(){var s;if(this.encryptionType!==kn.NONE)return;let o;if(this.trackPublications.forEach(y=>{y.track&&y.track===e&&(o=y)}),!o)throw new Ui("track is not published");if(!Eo(e))throw new Ui("track is not a video track");const a=Object.assign(Object.assign({},(s=this.roomOptions)===null||s===void 0?void 0:s.publishDefaults),r),l=BQ(e,n,a);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),at(e)));return}const d=e.addSimulcastTrack(n,l);if(!d)return;const h=new Fu({cid:d.mediaStreamTrack.id,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:a.videoCodec,cid:d.mediaStreamTrack.id}]});if(h.layers=BN(h.width,h.height,l),!this.engine||this.engine.isClosed)throw new Sn("cannot publish track when not connected");const m=()=>V(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,d,a,l),yield this.engine.negotiate()}),v=(yield Promise.all([this.engine.addTrack(h),m()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:v}))})}unpublishTrack(e,n){return V(this,void 0,void 0,function*(){var r,s;if(Da(e)){const h=this.pendingPublishPromises.get(e);h&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),at(e))),yield h)}const o=this.getPublicationForTrack(e),a=o?at(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),a)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),a));return}e=o.track,e.off(je.Muted,this.onTrackMuted),e.off(je.Unmuted,this.onTrackUnmuted),e.off(je.Ended,this.handleTrackEnded),e.off(je.UpstreamPaused,this.onTrackUpstreamPaused),e.off(je.UpstreamResumed,this.onTrackUpstreamResumed),e.off(je.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(s=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&s!==void 0?s:!0),n?e.stop():e.stopMonitor();let l=!1;const d=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<qt.FAILED&&d)try{for(const h of this.engine.pcManager.publisher.getTransceivers())h.sender===d&&(h.direction="inactive",l=!0);if(this.engine.removeTrack(d)&&(l=!0),Eo(e)){for(const[,h]of e.simulcastCodecs)h.sender&&(this.engine.removeTrack(h.sender)&&(l=!0),h.sender=void 0);e.simulcastCodecs.clear()}}catch(h){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),a),{error:h}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case Y.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case Y.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit(ue.LocalTrackUnpublished,o),o.setTrack(void 0),l&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return V(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>!!r)})}republishAllTracks(e){return V(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((o,a)=>V(r,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(d=>{d.track&&(n&&(d.options=Object.assign(Object.assign({},d.options),n)),l.push(d))}),yield Promise.all(l.map(d=>V(this,void 0,void 0,function*(){const h=d.track;yield this.unpublishTrack(h,!1),s&&!h.isMuted&&h.source!==Y.Source.ScreenShare&&h.source!==Y.Source.ScreenShareAudio&&(Ai(h)||Eo(h))&&!h.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:d.trackSid})),yield h.restartTrack()),yield this.publishOrRepublishTrack(h,d.options,!0)}))),o()}catch(l){a(l)}finally{this.republishPromise=void 0}})),yield r.republishPromise})()})}publishData(e){return V(this,arguments,void 0,function(n){var r=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const o=s.reliable?st.RELIABLE:st.LOSSY,a=s.destinationIdentities,l=s.topic;let d=new Rw({participantIdentity:r.identity,payload:n,destinationIdentities:a,topic:l});const h=new sr({kind:o,value:{case:"user",value:d}});yield r.engine.sendDataPacket(h,o)})()})}publishDtmf(e,n){return V(this,void 0,void 0,function*(){const r=new sr({kind:st.RELIABLE,value:{case:"sipDtmf",value:new LI({code:e,digit:n})}});yield this.engine.sendDataPacket(r,st.RELIABLE)})}sendChatMessage(e,n){return V(this,void 0,void 0,function*(){const r={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},s=new sr({value:{case:"chatMessage",value:new Bf(Object.assign(Object.assign({},r),{timestamp:Ot.parse(r.timestamp)}))}});return yield this.engine.sendDataPacket(s,st.RELIABLE),this.emit(ue.ChatMessage,r),r})}editChatMessage(e,n){return V(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),s=new sr({value:{case:"chatMessage",value:new Bf(Object.assign(Object.assign({},r),{timestamp:Ot.parse(r.timestamp),editTimestamp:Ot.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(s,st.RELIABLE),this.emit(ue.ChatMessage,r),r})}sendText(e,n){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return V(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return V(this,arguments,void 0,function(n){var r=this;let{destinationIdentity:s,method:o,payload:a,responseTimeout:l=15e3}=n;return(function*(){return new Promise((h,m)=>V(r,void 0,void 0,function*(){var f,v,y,w;if(Yw(a)>HO){m(Ht.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((v=(f=this.engine.latestJoinResponse)===null||f===void 0?void 0:f.serverInfo)===null||v===void 0)&&v.version&&Ds((w=(y=this.engine.latestJoinResponse)===null||y===void 0?void 0:y.serverInfo)===null||w===void 0?void 0:w.version,"1.8.0")<0){m(Ht.builtIn("UNSUPPORTED_SERVER"));return}const b=crypto.randomUUID();yield this.publishRpcRequest(s,b,o,a,l-7e3);const k=setTimeout(()=>{this.pendingAcks.delete(b),m(Ht.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(b),clearTimeout(j)},7e3);this.pendingAcks.set(b,{resolve:()=>{clearTimeout(k)},participantIdentity:s});const j=setTimeout(()=>{this.pendingResponses.delete(b),m(Ht.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(b,{resolve:(T,E)=>{clearTimeout(j),this.pendingAcks.has(b)&&(console.warn("RPC response received before ack",b),this.pendingAcks.delete(b),clearTimeout(k)),E?m(E):h(T??"")},participantIdentity:s})}))})()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,r){const s=this.pendingResponses.get(e);s?(s.resolve(n,r),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,r,s,o){return V(this,void 0,void 0,function*(){const a=new sr({destinationIdentities:[e],kind:st.RELIABLE,value:{case:"rpcRequest",value:new Aw({id:n,method:r,payload:s,responseTimeoutMs:o,version:1})}});yield this.engine.sendDataPacket(a,st.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:r}]of this.pendingAcks)r===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:r,resolve:s}]of this.pendingResponses)r===e&&(s(null,Ht.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var r,s;const o=this.trackPublications.get(n.sid);if(o){const a=o.isMuted||((s=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&s!==void 0?s:!1);a!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),at(o)),{mutedOnServer:a})),this.engine.client.sendMuteTrack(n.sid,a))}}),!0):!1}setActiveAgent(e){var n,r,s,o;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(r=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||r===void 0||r.call(n,e):(o=(s=this.activeAgentFuture)===null||s===void 0?void 0:s.reject)===null||o===void 0||o.call(s,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new ss),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(r=>{const s=r.track;s&&(e instanceof MediaStreamTrack?(Ai(s)||Eo(s))&&s.mediaStreamTrack===e&&(n=r):e===s&&(n=r))}),n}waitForPendingPublicationOfSource(e){return V(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()<r+1e4;){const s=Array.from(this.pendingPublishPromises.entries()).find(o=>{let[a]=o;return a.source===e});if(s)return s[1];yield lr(20)}})}}class Kf extends Oi{constructor(e,n,r,s){super(e,n.sid,n.name,s),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=o=>{this.setTrack(void 0),this.emit(je.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.visible=o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensionsAdaptiveStream=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const s=new $p({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new FI({participantSid:"",trackSids:[this.trackSid]})]});this.emit(je.UpdateSubscription,s),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Oi.SubscriptionStatus.Unsubscribed:super.isSubscribed?Oi.SubscriptionStatus.Subscribed:Oi.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Oi.PermissionStatus.Allowed:Oi.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.requestedVideoDimensions)===null||r===void 0?void 0:r.height)===e.height||(Fx(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Fx(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:Fr.HIGH}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,s=this.track;s!==e&&(s&&(s.off(je.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.off(je.VisibilityChanged,this.handleVisibilityChange),s.off(je.Ended,this.handleEnded),s.detach(),s.stopMonitor(),this.emit(je.Unsubscribed,s)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(je.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(je.VisibilityChanged,this.handleVisibilityChange),e.on(je.Ended,this.handleEnded),this.emit(je.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(je.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?je.Muted:je.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(je.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(je.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Fx(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new KI({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===Y.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)TN(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const r=oQ(this.trackInfo,this.requestedMaxQuality);r&&TN(this.videoDimensionsAdaptiveStream,r)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:Fr.HIGH})),e.quality=Fr.HIGH)}this.emit(je.UpdateSettings,e)}}class Jf extends e5{static fromParticipantInfo(e,n,r){return new Jf(e,n.sid,n.identity,n.name,n.metadata,n.attributes,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,r,s,o,a,l){let d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Uu.STANDARD;super(n,r||"",s,o,a,l,d),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(je.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),at(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(je.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(je.SubscriptionPermissionChanged,n=>{this.emit(ue.TrackSubscriptionPermissionChanged,e,n)}),e.on(je.SubscriptionStatusChanged,n=>{this.emit(ue.TrackSubscriptionStatusChanged,e,n)}),e.on(je.Subscribed,n=>{this.emit(ue.TrackSubscribed,n,e)}),e.on(je.Unsubscribed,n=>{this.emit(ue.TrackUnsubscribed,n,e)}),e.on(je.SubscriptionFailed,n=>{this.emit(ue.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,s,o,a){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(m=>{!l&&e.kind===m.kind.toString()&&(l=m)}),!l){if(a===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ue.TrackSubscriptionFailed,n);return}a===void 0&&(a=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,s,o,a-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),at(l))),this.emit(ue.TrackSubscriptionFailed,n);return}const d=e.kind==="video";let h;return d?h=new rZ(e,n,s,o):h=new ZO(e,n,s,this.audioContext,this.audioOutput),h.source=l.source,h.isMuted=l.isMuted,h.setMediaStream(r),h.start(),l.setTrack(h),this.volumeMap.has(l.source)&&j0(h)&&ui(h)&&h.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(s=>{var o,a;let l=this.getTrackPublicationBySid(s.sid);if(l)l.updateInfo(s);else{const d=Y.kindFromProto(s.type);if(!d)return;l=new Kf(d,s,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(a=this.loggerOptions)===null||a===void 0?void 0:a.loggerName}),l.updateInfo(s),r.set(s.sid,l);const h=Array.from(this.trackPublications.values()).find(m=>m.source===l?.source);h&&l.source!==Y.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:at(h),newTrack:at(l)})),this.addTrackPublication(l)}n.set(s.sid,l)}),this.trackPublications.forEach(s=>{n.has(s.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),at(s))),this.unpublishTrack(s.trackSid,!0))}),r.forEach(s=>{this.emit(ue.TrackPublished,s)}),!0}unpublishTrack(e,n){const r=this.trackPublications.get(e);if(!r)return;const{track:s}=r;switch(s&&(s.stop(),r.setTrack(void 0)),this.trackPublications.delete(e),r.kind){case Y.Kind.Audio:this.audioTrackPublications.delete(e);break;case Y.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(ue.TrackUnpublished,r)}setAudioOutput(e){return V(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(r=>{var s;ui(r.track)&&j0(r.track)&&n.push(r.track.setSinkId((s=e.deviceId)!==null&&s!==void 0?s:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}var dt;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(dt||(dt={}));const dZ=4*1e3;class Ki extends xi.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,r,s,o;if(super(),n=this,this.state=dt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=tt,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(a,l,d)=>V(this,void 0,void 0,function*(){var h;if(!VX())throw fi()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const m=yield this.disconnectLock.lock();if(this.state===dt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),m(),Promise.resolve();if(this.connectFuture)return m(),this.connectFuture.promise;this.setAndEmitConnectionState(dt.Connecting),((h=this.regionUrlProvider)===null||h===void 0?void 0:h.getServerUrl().toString())!==a&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),S0(new URL(a))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new _0(a,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(y=>{var w;(w=this.regionUrlProvider)===null||w===void 0||w.setServerReportedRegions(y)}).catch(y=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:y}))}));const f=(y,w,b)=>V(this,void 0,void 0,function*(){var k,j;this.abortController&&this.abortController.abort();const T=new AbortController;this.abortController=T,m?.();try{yield this.attemptConnection(b??a,l,d,T),this.abortController=void 0,y()}catch(E){if(this.regionUrlProvider&&E instanceof xt&&E.reason!==ut.Cancelled&&E.reason!==ut.NotAllowed){let P=null;try{P=yield this.regionUrlProvider.getNextBestRegionUrl((k=this.abortController)===null||k===void 0?void 0:k.signal)}catch(N){if(N instanceof xt&&(N.status===401||N.reason===ut.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),w(N);return}}P&&!(!((j=this.abortController)===null||j===void 0)&&j.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(E.message,". Retrying with another region: ").concat(P),this.logContext),this.recreateEngine(),yield f(y,w,P)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,CN(E)),w(E))}else{let P=Ps.UNKNOWN_REASON;E instanceof xt&&(P=CN(E)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,P),w(E)}}}),v=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new ss((y,w)=>{f(y,w,v)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(a,l,d,h,m,f)=>V(this,void 0,void 0,function*(){var v,y,w;const b=yield d.join(a,l,{autoSubscribe:h.autoSubscribe,adaptiveStream:typeof m.adaptiveStream=="object"?!0:m.adaptiveStream,maxRetries:h.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:h.websocketTimeout,singlePeerConnection:m.singlePeerConnection},f.signal);let k=b.serverInfo;if(k||(k={version:b.serverVersion,region:b.serverRegion}),this.serverInfo=k,this.log.debug("connected to Livekit Server ".concat(Object.entries(k).map(j=>{let[T,E]=j;return"".concat(T,": ").concat(E)}).join(", ")),{room:(v=b.room)===null||v===void 0?void 0:v.name,roomSid:(y=b.room)===null||y===void 0?void 0:y.sid,identity:(w=b.participant)===null||w===void 0?void 0:w.identity}),!k.version)throw new jX("unknown server version");return k.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),m.dynacast=!1),b}),this.applyJoinResponse=a=>{const l=a.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(a.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(a.sifTrailer)}catch(d){this.log.error(d instanceof Error?d.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:d}))}this.handleParticipantUpdates([l,...a.otherParticipants]),a.room&&this.handleRoomUpdate(a.room)},this.attemptConnection=(a,l,d,h)=>V(this,void 0,void 0,function*(){var m,f;this.state===dt.Reconnecting||this.isResuming||!((m=this.engine)===null||m===void 0)&&m.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((f=this.regionUrlProvider)===null||f===void 0)&&f.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Jw),d),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const v=yield this.connectSignal(a,l,this.engine,this.connOptions,this.options,h);this.applyJoinResponse(v),this.setupLocalParticipantEvents(),this.emit(oe.SignalConnected)}catch(v){yield this.engine.close(),this.recreateEngine();const y=new xt("could not establish signal connection",ut.ServerUnreachable);throw v instanceof Error&&(y.message="".concat(y.message,": ").concat(v.message)),v instanceof xt&&(y.reason=v.reason,y.status=v.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:v})),y}if(h.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new xt("Connection attempt aborted",ut.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,h)}catch(v){throw yield this.engine.close(),this.recreateEngine(),v}Tr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Tr()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(dt.Connected),this.emit(oe.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return V(n,[...l],void 0,function(){var h=this;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var f,v,y,w;const b=yield h.disconnectLock.lock();try{if(h.state===dt.Disconnected){h.log.debug("already disconnected",h.logContext);return}if(h.log.info("disconnect from room",Object.assign({},h.logContext)),h.state===dt.Connecting||h.state===dt.Reconnecting||h.isResuming){const k="Abort connection attempt due to user initiated disconnect";h.log.warn(k,h.logContext),(f=h.abortController)===null||f===void 0||f.abort(k),(y=(v=h.connectFuture)===null||v===void 0?void 0:v.reject)===null||y===void 0||y.call(v,new xt("Client initiated disconnect",ut.Cancelled)),h.connectFuture=void 0}!((w=h.engine)===null||w===void 0)&&w.client.isDisconnected||(yield h.engine.client.sendLeave()),h.engine&&(yield h.engine.close()),h.handleDisconnect(m,Ps.CLIENT_INITIATED),h.engine=void 0}finally{b()}})()})},this.onPageLeave=()=>V(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>V(this,void 0,void 0,function*(){const a=[],l=Pr();if(l&&l.os==="iOS"){const d="livekit-dummy-audio-el";let h=document.getElementById(d);if(!h){h=document.createElement("audio"),h.id=d,h.autoplay=!0,h.hidden=!0;const m=Ux();m.enabled=!0;const f=new MediaStream([m]);h.srcObject=f,document.addEventListener("visibilitychange",()=>{h&&(h.srcObject=document.hidden?null:f,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(h),this.once(oe.Disconnected,()=>{h?.remove(),h=null})}a.push(h)}this.remoteParticipants.forEach(d=>{d.audioTrackPublications.forEach(h=>{h.track&&h.track.attachedElements.forEach(m=>{a.push(m)})})});try{yield Promise.all([this.acquireAudioContext(),...a.map(d=>(d.muted=!1,d.play()))]),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}),this.startVideo=()=>V(this,void 0,void 0,function*(){const a=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(d=>{var h;(h=d.track)===null||h===void 0||h.attachedElements.forEach(m=>{a.includes(m)||a.push(m)})});yield Promise.all(a.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const a of this.remoteParticipants.values())this.handleParticipantDisconnected(a.identity,a);this.setAndEmitConnectionState(dt.Reconnecting)&&this.emit(oe.Reconnecting)},this.handleSignalRestarted=a=>V(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(a.serverRegion),Object.assign(Object.assign({},this.logContext),{region:a.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(a);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:a.serverRegion}))}catch{return}this.setAndEmitConnectionState(dt.Connected),this.emit(oe.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=a=>{a.forEach(l=>{var d;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(d=this.sidToIdentity.get(l.sid))!==null&&d!==void 0?d:"");let h=this.remoteParticipants.get(l.identity);l.state===kc.DISCONNECTED?this.handleParticipantDisconnected(l.identity,h):h=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=a=>{const l=[],d={};a.forEach(h=>{if(d[h.sid]=!0,h.sid===this.localParticipant.sid)this.localParticipant.audioLevel=h.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const m=this.getRemoteParticipantBySid(h.sid);m&&(m.audioLevel=h.level,m.setIsSpeaking(!0),l.push(m))}}),d[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(h=>{d[h.sid]||(h.audioLevel=0,h.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(oe.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=a=>{const l=new Map;this.activeSpeakers.forEach(h=>{const m=this.remoteParticipants.get(h.identity);m&&m.sid!==h.sid||l.set(h.sid,h)}),a.forEach(h=>{let m=this.getRemoteParticipantBySid(h.sid);h.sid===this.localParticipant.sid&&(m=this.localParticipant),m&&(m.audioLevel=h.level,m.setIsSpeaking(h.active),h.active?l.set(h.sid,m):l.delete(h.sid))});const d=Array.from(l.values());d.sort((h,m)=>m.audioLevel-h.audioLevel),this.activeSpeakers=d,this.emitWhenConnected(oe.ActiveSpeakersChanged,d)},this.handleStreamStateUpdate=a=>{a.streamStates.forEach(l=>{const d=this.getRemoteParticipantBySid(l.participantSid);if(!d)return;const h=d.getTrackPublicationBySid(l.trackSid);if(!h||!h.track)return;const m=Y.streamStateFromProto(l.state);h.track.setStreamState(m),m!==h.track.streamState&&(d.emit(ue.TrackStreamStateChanged,h,h.track.streamState),this.emitWhenConnected(oe.TrackStreamStateChanged,h,h.track.streamState,d))})},this.handleSubscriptionPermissionUpdate=a=>{const l=this.getRemoteParticipantBySid(a.participantSid);if(!l)return;const d=l.getTrackPublicationBySid(a.trackSid);d&&d.setAllowed(a.allowed)},this.handleSubscriptionError=a=>{const l=Array.from(this.remoteParticipants.values()).find(h=>h.trackPublications.has(a.trackSid));if(!l)return;const d=l.getTrackPublicationBySid(a.trackSid);d&&d.setSubscriptionError(a.err)},this.handleDataPacket=(a,l)=>{const d=this.remoteParticipants.get(a.participantIdentity);if(a.value.case==="user")this.handleUserPacket(d,a.value.value,a.kind,l);else if(a.value.case==="transcription")this.handleTranscription(d,a.value.value);else if(a.value.case==="sipDtmf")this.handleSipDtmf(d,a.value.value);else if(a.value.case==="chatMessage")this.handleChatMessage(d,a.value.value);else if(a.value.case==="metrics")this.handleMetrics(a.value.value,d);else if(a.value.case==="streamHeader"||a.value.case==="streamChunk"||a.value.case==="streamTrailer")this.handleDataStream(a,l);else if(a.value.case==="rpcRequest"){const h=a.value.value;this.handleIncomingRpcRequest(a.participantIdentity,h.id,h.method,h.payload,h.responseTimeoutMs,h.version)}},this.handleUserPacket=(a,l,d,h)=>{this.emit(oe.DataReceived,l.payload,a,d,l.topic,h),a?.emit(ue.DataReceived,l.payload,d,h)},this.handleSipDtmf=(a,l)=>{this.emit(oe.SipDTMFReceived,l,a),a?.emit(ue.SipDTMFReceived,l)},this.handleTranscription=(a,l)=>{const d=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),h=d?.trackPublications.get(l.trackId),m=JX(l,this.transcriptionReceivedTimes);h?.emit(je.TranscriptionReceived,m),d?.emit(ue.TranscriptionReceived,m,h),this.emit(oe.TranscriptionReceived,m,d,h)},this.handleChatMessage=(a,l)=>{const d=YX(l);this.emit(oe.ChatMessage,d,a)},this.handleMetrics=(a,l)=>{this.emit(oe.MetricsReceived,a,l)},this.handleDataStream=(a,l)=>{this.incomingDataStreamManager.handleDataStreamPacket(a,l)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(oe.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=a=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:a})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(oe.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(oe.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(oe.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>V(this,void 0,void 0,function*(){var a;((a=Pr())===null||a===void 0?void 0:a.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(oe.MediaDevicesChanged)}),this.handleRoomUpdate=a=>{const l=this.roomInfo;this.roomInfo=a,l&&l.metadata!==a.metadata&&this.emitWhenConnected(oe.RoomMetadataChanged,a.metadata),l?.activeRecording!==a.activeRecording&&this.emitWhenConnected(oe.RecordingStatusChanged,a.activeRecording)},this.handleConnectionQualityUpdate=a=>{a.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const d=this.getRemoteParticipantBySid(l.participantSid);d&&d.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=a=>{this.emit(oe.ParticipantMetadataChanged,a,this.localParticipant)},this.onLocalParticipantNameChanged=a=>{this.emit(oe.ParticipantNameChanged,a,this.localParticipant)},this.onLocalAttributesChanged=a=>{this.emit(oe.ParticipantAttributesChanged,a,this.localParticipant)},this.onLocalTrackMuted=a=>{this.emit(oe.TrackMuted,a,this.localParticipant)},this.onLocalTrackUnmuted=a=>{this.emit(oe.TrackUnmuted,a,this.localParticipant)},this.onTrackProcessorUpdate=a=>{var l;(l=a?.onPublish)===null||l===void 0||l.call(a,this)},this.onLocalTrackPublished=a=>V(this,void 0,void 0,function*(){var l,d,h,m,f,v;(l=a.track)===null||l===void 0||l.on(je.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=a.track)===null||d===void 0||d.on(je.Restarted,this.onLocalTrackRestarted),(f=(m=(h=a.track)===null||h===void 0?void 0:h.getProcessor())===null||m===void 0?void 0:m.onPublish)===null||f===void 0||f.call(m,this),this.emit(oe.LocalTrackPublished,a,this.localParticipant),Ai(a.track)&&(yield a.track.checkForSilence())&&this.emit(oe.LocalAudioSilenceDetected,a);const y=yield(v=a.track)===null||v===void 0?void 0:v.getDeviceId(!1),w=T0(a.source);w&&y&&y!==this.localParticipant.activeDeviceMap.get(w)&&(this.localParticipant.activeDeviceMap.set(w,y),this.emit(oe.ActiveDeviceChanged,w,y))}),this.onLocalTrackUnpublished=a=>{var l,d;(l=a.track)===null||l===void 0||l.off(je.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=a.track)===null||d===void 0||d.off(je.Restarted,this.onLocalTrackRestarted),this.emit(oe.LocalTrackUnpublished,a,this.localParticipant)},this.onLocalTrackRestarted=a=>V(this,void 0,void 0,function*(){const l=yield a.getDeviceId(!1),d=T0(a.source);d&&l&&l!==this.localParticipant.activeDeviceMap.get(d)&&(this.log.debug("local track restarted, setting ".concat(d," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(d,l),this.emit(oe.ActiveDeviceChanged,d,l))}),this.onLocalConnectionQualityChanged=a=>{this.emit(oe.ConnectionQualityChanged,a,this.localParticipant)},this.onMediaDevicesError=(a,l)=>{this.emit(oe.MediaDevicesError,a,l)},this.onLocalParticipantPermissionsChanged=a=>{this.emit(oe.ParticipantPermissionsChanged,a,this.localParticipant)},this.onLocalChatMessageSent=a=>{this.emit(oe.ChatMessage,a,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},TQ),e),this.log=Gi((r=this.options.loggerName)!==null&&r!==void 0?r:Ms.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},qO),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},WO),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},CQ),e?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new ZQ,this.outgoingDataStreamManager=new nZ(this.engine,this.log),this.disconnectLock=new Er,this.localParticipant=new cZ("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Bo(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Bo(this.options.audioCaptureDefaults.deviceId)),!((s=this.options.audioOutput)===null||s===void 0)&&s.deviceId&&this.switchActiveDevice("audiooutput",Bo(this.options.audioOutput.deviceId)).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),Tr()){const a=new AbortController;(o=navigator.mediaDevices)===null||o===void 0||o.addEventListener("devicechange",this.handleDeviceChange,{signal:a.signal}),Ki.cleanupRegistry&&Ki.cleanupRegistry.register(this,()=>{a.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return V(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,r=this.options.encryption||this.options.e2ee;r&&("e2eeManager"in r?(this.e2eeManager=r.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new aQ(r,n),this.e2eeManager.on(Do.ParticipantEncryptionStatusChanged,(s,o)=>{QX(o)&&(this.isE2EEEnabled=s),this.emit(oe.ParticipantEncryptionStatusChanged,s,o)}),this.e2eeManager.on(Do.EncryptionError,s=>this.emit(oe.EncryptionError,s)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return V(this,void 0,void 0,function*(){return this.state===dt.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const r=s=>{s.sid!==""&&(this.engine.off(Ne.RoomUpdate,r),e(s.sid))};this.engine.on(Ne.RoomUpdate,r),this.once(oe.Disconnected,()=>{this.engine.off(Ne.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new KQ(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(Ne.ParticipantUpdate,this.handleParticipantUpdates).on(Ne.RoomUpdate,this.handleRoomUpdate).on(Ne.SpeakersChanged,this.handleSpeakersChanged).on(Ne.StreamStateChanged,this.handleStreamStateUpdate).on(Ne.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Ne.SubscriptionError,this.handleSubscriptionError).on(Ne.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Ne.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Ne.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Ne.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Ne.DataPacketReceived,this.handleDataPacket).on(Ne.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(dt.SignalReconnecting)&&this.emit(oe.SignalReconnecting)}).on(Ne.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(dt.Connected)&&this.emit(oe.Reconnected)}).on(Ne.SignalResumed,()=>{this.bufferedEvents=[],(this.state===dt.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(Ne.Restarting,this.handleRestarting).on(Ne.SignalRestarted,this.handleSignalRestarted).on(Ne.Offline,()=>{this.setAndEmitConnectionState(dt.Reconnecting)&&this.emit(oe.Reconnecting)}).on(Ne.DCBufferStatusChanged,(e,n)=>{this.emit(oe.DCBufferStatusChanged,e,n)}).on(Ne.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:s}=r;return s===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ue.LocalTrackSubscribed,n),this.emitWhenConnected(oe.LocalTrackSubscribed,n,this.localParticipant)}).on(Ne.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,r)=>{this.handleParticipantDisconnected(r,n)}),this.emit(oe.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return On.getInstance().getDevices(e,n)}prepareConnection(e,n){return V(this,void 0,void 0,function*(){if(this.state===dt.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(S0(new URL(e))&&n){this.regionUrlProvider=new _0(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===dt.Disconnected&&(this.regionUrl=r,yield fetch(k0(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(k0(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return V(this,void 0,void 0,function*(){let r=()=>V(this,void 0,void 0,function*(){}),s;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":s=new ti({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":s=new ti({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":s=new ti({scenario:{case:"serverLeave",value:!0}});break;case"migration":s=new ti({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>V(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new ti({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>V(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new ti({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":s=new ti({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>V(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new zp({reason:Ps.CLIENT_INITIATED,action:jc.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");s=new ti({scenario:{case:"subscriberBandwidth",value:Ta(n)}});break;case"leave-full-reconnect":s=new ti({scenario:{case:"leaveRequestFullReconnect",value:!0}})}s&&(yield this.engine.client.sendSimulateScenario(s),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return V(this,arguments,void 0,function(r,s){var o=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var l,d,h,m,f,v,y;let w=!0,b=!1;const k=a?{exact:s}:s;if(r==="audioinput"){b=o.localParticipant.audioTrackPublications.size===0;const j=(l=o.getActiveDevice(r))!==null&&l!==void 0?l:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=k;const T=Array.from(o.localParticipant.audioTrackPublications.values()).filter(P=>P.source===Y.Source.Microphone);try{w=(yield Promise.all(T.map(P=>{var N;return(N=P.audioTrack)===null||N===void 0?void 0:N.setDeviceId(k)}))).every(P=>P===!0)}catch(P){throw o.options.audioCaptureDefaults.deviceId=j,P}const E=T.some(P=>{var N,_;return(_=(N=P.track)===null||N===void 0?void 0:N.isMuted)!==null&&_!==void 0?_:!1});w&&E&&(b=!0)}else if(r==="videoinput"){b=o.localParticipant.videoTrackPublications.size===0;const j=(d=o.getActiveDevice(r))!==null&&d!==void 0?d:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=k;const T=Array.from(o.localParticipant.videoTrackPublications.values()).filter(P=>P.source===Y.Source.Camera);try{w=(yield Promise.all(T.map(P=>{var N;return(N=P.videoTrack)===null||N===void 0?void 0:N.setDeviceId(k)}))).every(P=>P===!0)}catch(P){throw o.options.videoCaptureDefaults.deviceId=j,P}const E=T.some(P=>{var N,_;return(_=(N=P.track)===null||N===void 0?void 0:N.isMuted)!==null&&_!==void 0?_:!1});w&&E&&(b=!0)}else if(r==="audiooutput"){if(b=!0,!w0()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");o.options.webAudioMix&&(s=(h=yield On.getInstance().normalizeDeviceId("audiooutput",s))!==null&&h!==void 0?h:""),(m=(y=o.options).audioOutput)!==null&&m!==void 0||(y.audioOutput={});const j=(f=o.getActiveDevice(r))!==null&&f!==void 0?f:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=s;try{o.options.webAudioMix&&((v=o.audioContext)===null||v===void 0||v.setSinkId(s)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(T=>T.setAudioOutput({deviceId:s})))}catch(T){throw o.options.audioOutput.deviceId=j,T}}return b&&(o.localParticipant.activeDeviceMap.set(r,s),o.emit(oe.ActiveDeviceChanged,r,s)),w})()})}setupLocalParticipantEvents(){this.localParticipant.on(ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ue.AttributesChanged,this.onLocalAttributesChanged).on(ue.TrackMuted,this.onLocalTrackMuted).on(ue.TrackUnmuted,this.onLocalTrackUnmuted).on(ue.LocalTrackPublished,this.onLocalTrackPublished).on(ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ue.MediaDevicesError,this.onMediaDevicesError).on(ue.AudioStreamAcquired,this.startAudio).on(ue.ChatMessage,this.onLocalChatMessageSent).on(ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===dt.Connecting||this.state===dt.Reconnecting){const f=()=>{this.onTrackAdded(e,n,r),v()},v=()=>{this.off(oe.Reconnected,f),this.off(oe.Connected,f),this.off(oe.Disconnected,v)};this.once(oe.Reconnected,f),this.once(oe.Connected,f),this.once(oe.Disconnected,v);return}if(this.state===dt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const s=LX(n.id),o=s[0];let a=s[1],l=e.id;if(a&&a.startsWith("TR")&&(l=a),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const d=Array.from(this.remoteParticipants.values()).find(f=>f.sid===o);if(!d){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let h;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?h=this.options.adaptiveStream:h={});const m=d.addSubscribedMediaTrack(e,l,n,r,h);m?.isEncrypted&&!this.e2eeManager&&this.emit(oe.EncryptionError,new Error("Encrypted ".concat(m.source," track received from participant ").concat(d.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==dt.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(s=>{s.trackPublications.forEach(o=>{s.unpublishTrack(o.trackSid)})}),this.localParticipant.trackPublications.forEach(s=>{var o,a,l;s.track&&this.localParticipant.unpublishTrack(s.track,e),e?((o=s.track)===null||o===void 0||o.detach(),(a=s.track)===null||a===void 0||a.stop()):(l=s.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ue.AttributesChanged,this.onLocalAttributesChanged).off(ue.TrackMuted,this.onLocalTrackMuted).off(ue.TrackUnmuted,this.onLocalTrackUnmuted).off(ue.LocalTrackPublished,this.onLocalTrackPublished).off(ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ue.MediaDevicesError,this.onMediaDevicesError).off(ue.AudioStreamAcquired,this.startAudio).off(ue.ChatMessage,this.onLocalChatMessageSent).off(ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Tr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(dt.Disconnected),this.emit(oe.Disconnected,n)}}}handleParticipantDisconnected(e,n){var r;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(s=>{n.unpublishTrack(s.trackSid,!0)}),this.emit(oe.ParticipantDisconnected,n),n.setDisconnected(),(r=this.localParticipant)===null||r===void 0||r.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,r,s,o,a){return V(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),a!==1){yield this.engine.publishRpcResponse(e,n,null,Ht.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(r);if(!l){yield this.engine.publishRpcResponse(e,n,null,Ht.builtIn("UNSUPPORTED_METHOD"));return}let d=null,h=null;try{const m=yield l({requestId:n,callerIdentity:e,payload:s,responseTimeout:o});Yw(m)>HO?(d=Ht.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(r))):h=m}catch(m){m instanceof Ht?d=m:(console.warn("Uncaught error returned by RPC handler for ".concat(r,". Returning APPLICATION_ERROR instead."),m),d=Ht.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,h,d)})}selectDefaultDevices(){return V(this,void 0,void 0,function*(){var e,n,r;const s=On.getInstance().previousDevices,o=yield On.getInstance().getDevices(void 0,!1),a=Pr();if(a?.name==="Chrome"&&a.os!=="iOS")for(let d of o){const h=s.find(m=>m.deviceId===d.deviceId);h&&h.label!==""&&h.kind===d.kind&&h.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(oe.ActiveDeviceChanged,d.kind,d.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let d of l){const h=eQ(d),m=this.localParticipant.getTrackPublication(h);if(m&&(!((e=m.track)===null||e===void 0)&&e.isUserProvided))continue;const f=o.filter(y=>y.kind===d),v=this.getActiveDevice(d);if(v===((n=s.filter(y=>y.kind===d)[0])===null||n===void 0?void 0:n.deviceId)&&f.length>0&&((r=f[0])===null||r===void 0?void 0:r.deviceId)!==v){yield this.switchActiveDevice(d,f[0].deviceId);continue}d==="audioinput"&&!$u()||d==="videoinput"||f.length>0&&!f.find(y=>y.deviceId===this.getActiveDevice(d))&&(d!=="audiooutput"||!$u())&&(yield this.switchActiveDevice(d,f[0].deviceId))}})}acquireAudioContext(){return V(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=BO())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(s=>s.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),lr(200)])}catch(s){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:s}))}const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(oe.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let s;return n?s=Jf.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):s=new Jf(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&s.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&s.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),s}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const s=this.remoteParticipants.get(e);return n&&s.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),s}const r=this.createParticipant(e,n);return this.remoteParticipants.set(e,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(oe.ParticipantConnected,r),r.on(ue.TrackPublished,s=>{this.emitWhenConnected(oe.TrackPublished,s,r)}).on(ue.TrackSubscribed,(s,o)=>{s.kind===Y.Kind.Audio?(s.on(je.AudioPlaybackStarted,this.handleAudioPlaybackStarted),s.on(je.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):s.kind===Y.Kind.Video&&(s.on(je.VideoPlaybackFailed,this.handleVideoPlaybackFailed),s.on(je.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(oe.TrackSubscribed,s,o,r)}).on(ue.TrackUnpublished,s=>{this.emit(oe.TrackUnpublished,s,r)}).on(ue.TrackUnsubscribed,(s,o)=>{this.emit(oe.TrackUnsubscribed,s,o,r)}).on(ue.TrackMuted,s=>{this.emitWhenConnected(oe.TrackMuted,s,r)}).on(ue.TrackUnmuted,s=>{this.emitWhenConnected(oe.TrackUnmuted,s,r)}).on(ue.ParticipantMetadataChanged,s=>{this.emitWhenConnected(oe.ParticipantMetadataChanged,s,r)}).on(ue.ParticipantNameChanged,s=>{this.emitWhenConnected(oe.ParticipantNameChanged,s,r)}).on(ue.AttributesChanged,s=>{this.emitWhenConnected(oe.ParticipantAttributesChanged,s,r)}).on(ue.ConnectionQualityChanged,s=>{this.emitWhenConnected(oe.ConnectionQualityChanged,s,r)}).on(ue.ParticipantPermissionsChanged,s=>{this.emitWhenConnected(oe.ParticipantPermissionsChanged,s,r)}).on(ue.TrackSubscriptionStatusChanged,(s,o)=>{this.emitWhenConnected(oe.TrackSubscriptionStatusChanged,s,o,r)}).on(ue.TrackSubscriptionFailed,(s,o)=>{this.emit(oe.TrackSubscriptionFailed,s,r,o)}).on(ue.TrackSubscriptionPermissionChanged,(s,o)=>{this.emitWhenConnected(oe.TrackSubscriptionPermissionChanged,s,o,r)}).on(ue.Active,()=>{this.emitWhenConnected(oe.ParticipantActive,r),r.kind===Uu.AGENT&&this.localParticipant.setActiveAgent(r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((r,s)=>(r.push(...s.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&XX(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=qn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ps.STATE_MISMATCH))):e=0},dZ)}clearConnectionReconcile(){this.connectionReconcileInterval&&qn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(oe.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(this.state===dt.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,r]);else if(this.state===dt.Connected)return this.emit(e,...r);return!1}simulateParticipants(e){return V(this,void 0,void 0,function*(){var n,r;const s=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Fp({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Ot.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Ka({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(oe.SignalConnected),this.emit(oe.Connected),this.setAndEmitConnectionState(dt.Connected),s.video){const a=new Gf(Y.Kind.Video,new dc({source:hn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Cs.AUDIO,name:"video-dummy"}),new Hf(s.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:jN(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(ue.LocalTrackPublished,a)}if(s.audio){const a=new Gf(Y.Kind.Audio,new dc({source:hn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Cs.AUDIO}),new Wf(s.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Ux(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(a),this.localParticipant.emit(ue.LocalTrackPublished,a)}for(let a=0;a<o.count-1;a+=1){let l=new Ka({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(a),state:kc.ACTIVE,tracks:[],joinedAt:Ot.parse(Date.now())});const d=this.getOrCreateParticipant(l.identity,l);if(o.video){const h=jN(160*((r=o.aspectRatios[a%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),m=new dc({source:hn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Cs.AUDIO});d.addSubscribedMediaTrack(h,m.sid,new MediaStream([h]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}if(o.audio){const h=Ux(),m=new dc({source:hn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Cs.AUDIO});d.addSubscribedMediaTrack(h,m.sid,new MediaStream([h]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}d.updateInfo(l)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(e!==oe.ActiveSpeakersChanged&&e!==oe.TranscriptionReceived){const o=t5(r).filter(a=>a!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...r)}}Ki.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function t5(t){return t.map(e=>{if(e)return Array.isArray(e)?t5(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var ks;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(ks||(ks={}));class na extends xi.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=ks.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Ki(r.roomOptions),this.connectOptions=r.connectOptions,this.options=r}run(e){return V(this,void 0,void 0,function*(){if(this.status!==ks.IDLE)throw Error("check is running already");this.setStatus(ks.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==ks.SKIPPED&&this.setStatus(this.isSuccess()?ks.SUCCESS:ks.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return V(this,void 0,void 0,function*(){return this.room.state===dt.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return V(this,void 0,void 0,function*(){this.room&&this.room.state!==dt.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(ks.SKIPPED)}switchProtocol(e){return V(this,void 0,void 0,function*(){let n=!1,r=!1;if(this.room.on(oe.Reconnecting,()=>{n=!0}),this.room.once(oe.Reconnected,()=>{r=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(o=>setTimeout(o,1e3)),!n)return;const s=Date.now()+1e4;for(;Date.now()<s;){if(r)return;yield lr(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class uZ extends na{get description(){return"Cloud regions"}perform(){return V(this,void 0,void 0,function*(){const e=new _0(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],r=new Set;for(let o=0;o<3;o++){const a=yield e.getNextBestRegionUrl();if(!a)break;if(r.has(a))continue;r.add(a);const l=yield this.checkCloudRegion(a);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((o,a)=>(o.duration-a.duration)*.5+(o.rtt-a.rtt)*.5);const s=n[0];this.bestStats=s,this.appendMessage("best Cloud region: ".concat(s.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return V(this,void 0,void 0,function*(){var n,r;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const s=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!s)throw new Error("Region not found");const o=yield this.room.localParticipant.streamText({topic:"test"}),a=1e3,d=1e6/a,h="A".repeat(a),m=Date.now();for(let w=0;w<d;w++)yield o.write(h);yield o.close();const f=Date.now(),v=yield(r=this.room.engine.pcManager)===null||r===void 0?void 0:r.publisher.getStats(),y={region:s,rtt:1e4,duration:f-m};return v?.forEach(w=>{w.type==="candidate-pair"&&w.nominated&&(y.rtt=w.currentRoundTripTime*1e3)}),yield this.disconnect(),y})}}const Gx=1e4;class hZ extends na{get description(){return"Connection via UDP vs TCP"}perform(){return V(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const r=this.bestStats;this.appendMessage("upstream bitrate: ".concat((r.bitrateTotal/r.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((r.rttTotal/r.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((r.jitterTotal/r.count*1e3).toFixed(2)," ms")),r.packetsLost>0&&this.appendWarning("packets lost: ".concat((r.packetsLost/r.packetsSent*100).toFixed(2),"%")),r.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((r.qualityLimitationDurations.bandwidth/(Gx/1e3)*100).toFixed(2),"%")),r.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((r.qualityLimitationDurations.cpu/(Gx/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return V(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const r=n.getContext("2d");if(!r)throw new Error("Could not get canvas context");let s=0;const o=()=>{s=(s+1)%360,r.fillStyle="hsl(".concat(s,", 100%, 50%)"),r.fillRect(0,0,n.width,n.height),requestAnimationFrame(o)};o();const l=n.captureStream(30).getVideoTracks()[0],h=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,m={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},f=setInterval(()=>V(this,void 0,void 0,function*(){const v=yield h.getRTCStatsReport();v?.forEach(y=>{y.type==="outbound-rtp"?(m.packetsSent=y.packetsSent,m.qualityLimitationDurations=y.qualityLimitationDurations,m.bitrateTotal+=y.targetBitrate,m.count++):y.type==="remote-inbound-rtp"&&(m.packetsLost=y.packetsLost,m.rttTotal+=y.roundTripTime,m.jitterTotal+=y.jitter)})}),1e3);return yield new Promise(v=>setTimeout(v,Gx)),clearInterval(f),l.stop(),n.remove(),yield this.disconnect(),m})}}class mZ extends na{get description(){return"Can publish audio"}perform(){return V(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield oZ();if(yield VO(r,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(r),yield new Promise(l=>setTimeout(l,3e3));const o=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!o)throw new Error("Could not get RTCStats");let a=0;if(o.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(a=l.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," audio packets"))})}}class fZ extends na{get description(){return"Can publish video"}perform(){return V(this,void 0,void 0,function*(){var e;const n=yield this.connect(),r=yield iZ();yield this.checkForVideo(r.mediaStreamTrack),n.localParticipant.publishTrack(r),yield new Promise(a=>setTimeout(a,5e3));const s=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let o=0;if(s.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="video"||!a.kind&&a.mediaType==="video")&&(o+=a.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}checkForVideo(e){return V(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const r=document.createElement("video");r.srcObject=n,r.muted=!0,r.autoplay=!0,r.playsInline=!0,r.setAttribute("playsinline","true"),document.body.appendChild(r),yield new Promise(s=>{r.onplay=()=>{setTimeout(()=>{var o,a,l,d;const h=document.createElement("canvas"),m=e.getSettings(),f=(a=(o=m.width)!==null&&o!==void 0?o:r.videoWidth)!==null&&a!==void 0?a:1280,v=(d=(l=m.height)!==null&&l!==void 0?l:r.videoHeight)!==null&&d!==void 0?d:720;h.width=f,h.height=v;const y=h.getContext("2d");y.drawImage(r,0,0);const b=y.getImageData(0,0,h.width,h.height).data;let k=!0;for(let j=0;j<b.length;j+=4)if(b[j]!==0||b[j+1]!==0||b[j+2]!==0){k=!1;break}k?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),s()},1e3)},r.play()}),n.getTracks().forEach(s=>s.stop()),r.remove()})}}class pZ extends na{get description(){return"Resuming connection after interruption"}perform(){return V(this,void 0,void 0,function*(){var e;const n=yield this.connect();let r=!1,s=!1,o;const a=new Promise(h=>{setTimeout(h,5e3),o=h}),l=()=>{r=!0};n.on(oe.SignalReconnecting,l).on(oe.Reconnecting,l).on(oe.Reconnected,()=>{s=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const d=n.engine.client.onClose;if(d&&d(""),yield a,r){if(!s||n.state!==dt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class gZ extends na{get description(){return"Can connect via TURN"}perform(){return V(this,void 0,void 0,function*(){var e,n;const r=new Ww,s=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let o=!1,a=!1,l=!1;for(let d of s.iceServers)for(let h of d.urls)h.startsWith("turn:")?(a=!0,l=!0):h.startsWith("turns:")&&(a=!0,l=!0,o=!0),h.startsWith("stun:")&&(l=!0);l?a&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||a?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class vZ extends na{get description(){return"Establishing WebRTC connection"}perform(){return V(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(oe.SignalConnected,()=>{var r;const s=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(o,a)=>{if(o.candidate){const l=new RTCIceCandidate(o);let d="".concat(l.protocol," ").concat(l.address,":").concat(l.port," ").concat(l.type);l.address&&(xZ(l.address)?d+=" (private)":l.protocol==="tcp"&&l.tcpType==="passive"?(e=!0,d+=" (passive)"):l.protocol==="udp"&&(n=!0)),this.appendMessage(d)}s&&s(o,a)},!((r=this.room.engine.pcManager)===null||r===void 0)&&r.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=o=>{o instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(o.errorCode," ").concat(o.errorText," ").concat(o.url))})});try{yield this.connect(),tt.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function xZ(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class yZ extends na{get description(){return"Connecting to signal connection via WebSocket"}perform(){return V(this,void 0,void 0,function*(){var e,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let s=new Ww;const o=yield s.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===BI.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield s.close()})}}class Aie extends xi.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=r}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:ks.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==ks.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return V(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token,this.options),s=a=>{this.updateCheck(n,a)};r.on("update",s);const o=yield r.run();return r.off("update",s),o})}checkWebsocket(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(yZ)})}checkWebRTC(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(vZ)})}checkTURN(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(gZ)})}checkReconnect(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(pZ)})}checkPublishAudio(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(mZ)})}checkPublishVideo(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(fZ)})}checkConnectionProtocol(){return V(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(hZ);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return V(this,void 0,void 0,function*(){return this.createAndRunCheck(uZ)})}}function lt(t,e,n){return(e=wZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wZ(t){var e=bZ(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class hr extends Error{constructor(e,n){var r;super(e,n),lt(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}lt(hr,"code","ERR_JOSE_GENERIC");class SZ extends hr{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:s,payload:n}}),lt(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),lt(this,"claim",void 0),lt(this,"reason",void 0),lt(this,"payload",void 0),this.claim=r,this.reason=s,this.payload=n}}lt(SZ,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class kZ extends hr{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:r,reason:s,payload:n}}),lt(this,"code","ERR_JWT_EXPIRED"),lt(this,"claim",void 0),lt(this,"reason",void 0),lt(this,"payload",void 0),this.claim=r,this.reason=s,this.payload=n}}lt(kZ,"code","ERR_JWT_EXPIRED");class jZ extends hr{constructor(){super(...arguments),lt(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}lt(jZ,"code","ERR_JOSE_ALG_NOT_ALLOWED");class CZ extends hr{constructor(){super(...arguments),lt(this,"code","ERR_JOSE_NOT_SUPPORTED")}}lt(CZ,"code","ERR_JOSE_NOT_SUPPORTED");class TZ extends hr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),lt(this,"code","ERR_JWE_DECRYPTION_FAILED")}}lt(TZ,"code","ERR_JWE_DECRYPTION_FAILED");class NZ extends hr{constructor(){super(...arguments),lt(this,"code","ERR_JWE_INVALID")}}lt(NZ,"code","ERR_JWE_INVALID");class EZ extends hr{constructor(){super(...arguments),lt(this,"code","ERR_JWS_INVALID")}}lt(EZ,"code","ERR_JWS_INVALID");class PZ extends hr{constructor(){super(...arguments),lt(this,"code","ERR_JWT_INVALID")}}lt(PZ,"code","ERR_JWT_INVALID");class _Z extends hr{constructor(){super(...arguments),lt(this,"code","ERR_JWK_INVALID")}}lt(_Z,"code","ERR_JWK_INVALID");class RZ extends hr{constructor(){super(...arguments),lt(this,"code","ERR_JWKS_INVALID")}}lt(RZ,"code","ERR_JWKS_INVALID");class AZ extends hr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),lt(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}lt(AZ,"code","ERR_JWKS_NO_MATCHING_KEY");class IZ extends hr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),lt(this,Symbol.asyncIterator,void 0),lt(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}lt(IZ,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class OZ extends hr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),lt(this,"code","ERR_JWKS_TIMEOUT")}}lt(OZ,"code","ERR_JWKS_TIMEOUT");class MZ extends hr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),lt(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}lt(MZ,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function DZ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=Da(t)?t.mediaStreamTrack:t,s=r.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in s){const a=s.facingMode;tt.trace("rawFacingMode",{rawFacingMode:a}),a&&typeof a=="string"&&FZ(a)&&(o={facingMode:a,confidence:"high"})}if(["low","medium"].includes(o.confidence)){tt.trace("Try to get facing mode from device label: (".concat(r.label,")"));const a=UZ(r.label);a!==void 0&&(o=a)}return o}const HN=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),LZ=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function UZ(t){var e;const n=t.trim().toLowerCase();if(n!=="")return HN.has(n)?HN.get(n):(e=Array.from(LZ.entries()).find(r=>{let[s]=r;return n.includes(s)}))===null||e===void 0?void 0:e[1]}function FZ(t){return t===void 0||["user","environment","left","right"].includes(t)}const Yf=Math.min,La=Math.max,Xf=Math.round,Fm=Math.floor,hi=t=>({x:t,y:t}),VZ={left:"right",right:"left",bottom:"top",top:"bottom"},BZ={start:"end",end:"start"};function GN(t,e,n){return La(t,Yf(e,n))}function Gp(t,e){return typeof t=="function"?t(e):t}function Xa(t){return t.split("-")[0]}function Kp(t){return t.split("-")[1]}function n5(t){return t==="x"?"y":"x"}function r5(t){return t==="y"?"height":"width"}function Uc(t){return["top","bottom"].includes(Xa(t))?"y":"x"}function s5(t){return n5(Uc(t))}function $Z(t,e,n){n===void 0&&(n=!1);const r=Kp(t),s=s5(t),o=r5(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Qf(a)),[a,Qf(a)]}function zZ(t){const e=Qf(t);return[A0(t),e,A0(e)]}function A0(t){return t.replace(/start|end/g,e=>BZ[e])}function qZ(t,e,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?o:a;default:return[]}}function WZ(t,e,n,r){const s=Kp(t);let o=qZ(Xa(t),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(A0)))),o}function Qf(t){return t.replace(/left|right|bottom|top/g,e=>VZ[e])}function HZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function GZ(t){return typeof t!="number"?HZ(t):{top:t,right:t,bottom:t,left:t}}function Zf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function KN(t,e,n){let{reference:r,floating:s}=t;const o=Uc(e),a=s5(e),l=r5(a),d=Xa(e),h=o==="y",m=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,v=r[l]/2-s[l]/2;let y;switch(d){case"top":y={x:m,y:r.y-s.height};break;case"bottom":y={x:m,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Kp(e)){case"start":y[a]-=v*(n&&h?-1:1);break;case"end":y[a]+=v*(n&&h?-1:1);break}return y}const KZ=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:m,y:f}=KN(h,r,d),v=r,y={},w=0;for(let b=0;b<l.length;b++){const{name:k,fn:j}=l[b],{x:T,y:E,data:P,reset:N}=await j({x:m,y:f,initialPlacement:r,placement:v,strategy:s,middlewareData:y,rects:h,platform:a,elements:{reference:t,floating:e}});m=T??m,f=E??f,y={...y,[k]:{...y[k],...P}},N&&w<=50&&(w++,typeof N=="object"&&(N.placement&&(v=N.placement),N.rects&&(h=N.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):N.rects),{x:m,y:f}=KN(h,v,d)),b=-1)}return{x:m,y:f,placement:v,strategy:s,middlewareData:y}};async function i5(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:v=!1,padding:y=0}=Gp(e,t),w=GZ(y),b=l[v?f==="floating"?"reference":"floating":f],k=Zf(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:h,rootBoundary:m,strategy:d})),j=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),E=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},P=Zf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:T,strategy:d}):j);return{top:(k.top-P.top+w.top)/E.y,bottom:(P.bottom-k.bottom+w.bottom)/E.y,left:(k.left-P.left+w.left)/E.x,right:(P.right-k.right+w.right)/E.x}}const JZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:b=!0,...k}=Gp(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const j=Xa(s),T=Uc(l),E=Xa(l)===l,P=await(d.isRTL==null?void 0:d.isRTL(h.floating)),N=v||(E||!b?[Qf(l)]:zZ(l)),_=w!=="none";!v&&_&&N.push(...WZ(l,b,w,P));const I=[l,...N],M=await i5(e,k),O=[];let L=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&O.push(M[j]),f){const se=$Z(s,a,P);O.push(M[se[0]],M[se[1]])}if(L=[...L,{placement:s,overflows:O}],!O.every(se=>se<=0)){var D,A;const se=(((D=o.flip)==null?void 0:D.index)||0)+1,fe=I[se];if(fe)return{data:{index:se,overflows:L},reset:{placement:fe}};let ae=(A=L.filter(de=>de.overflows[0]<=0).sort((de,U)=>de.overflows[1]-U.overflows[1])[0])==null?void 0:A.placement;if(!ae)switch(y){case"bestFit":{var Z;const de=(Z=L.filter(U=>{if(_){const G=Uc(U.placement);return G===T||G==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(G=>G>0).reduce((G,le)=>G+le,0)]).sort((U,G)=>U[1]-G[1])[0])==null?void 0:Z[0];de&&(ae=de);break}case"initialPlacement":ae=l;break}if(s!==ae)return{reset:{placement:ae}}}return{}}}};async function YZ(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Xa(n),l=Kp(n),d=Uc(n)==="y",h=["left","top"].includes(a)?-1:1,m=o&&d?-1:1,f=Gp(e,t);let{mainAxis:v,crossAxis:y,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(y=l==="end"?w*-1:w),d?{x:y*m,y:v*h}:{x:v*h,y:y*m}}const XZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=e,d=await YZ(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:a}}}}},QZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:k=>{let{x:j,y:T}=k;return{x:j,y:T}}},...d}=Gp(t,e),h={x:n,y:r},m=await i5(e,d),f=Uc(Xa(s)),v=n5(f);let y=h[v],w=h[f];if(o){const k=v==="y"?"top":"left",j=v==="y"?"bottom":"right",T=y+m[k],E=y-m[j];y=GN(T,y,E)}if(a){const k=f==="y"?"top":"left",j=f==="y"?"bottom":"right",T=w+m[k],E=w-m[j];w=GN(T,w,E)}const b=l.fn({...e,[v]:y,[f]:w});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[v]:o,[f]:a}}}}}};function Jp(){return typeof window<"u"}function Zc(t){return o5(t)?(t.nodeName||"").toLowerCase():"#document"}function $r(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yi(t){var e;return(e=(o5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function o5(t){return Jp()?t instanceof Node||t instanceof $r(t).Node:!1}function Ls(t){return Jp()?t instanceof Element||t instanceof $r(t).Element:!1}function pi(t){return Jp()?t instanceof HTMLElement||t instanceof $r(t).HTMLElement:!1}function JN(t){return!Jp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $r(t).ShadowRoot}function oh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Us(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function ZZ(t){return["table","td","th"].includes(Zc(t))}function Yp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Zw(t){const e=eS(),n=Ls(t)?Us(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function eee(t){let e=Yo(t);for(;pi(e)&&!Fc(e);){if(Zw(e))return e;if(Yp(e))return null;e=Yo(e)}return null}function eS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fc(t){return["html","body","#document"].includes(Zc(t))}function Us(t){return $r(t).getComputedStyle(t)}function Xp(t){return Ls(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Yo(t){if(Zc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||JN(t)&&t.host||yi(t);return JN(e)?e.host:e}function a5(t){const e=Yo(t);return Fc(e)?t.ownerDocument?t.ownerDocument.body:t.body:pi(e)&&oh(e)?e:a5(e)}function zu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=a5(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),a=$r(s);if(o){const l=I0(a);return e.concat(a,a.visualViewport||[],oh(s)?s:[],l&&n?zu(l):[])}return e.concat(s,zu(s,[],n))}function I0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function l5(t){const e=Us(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=pi(t),o=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Xf(n)!==o||Xf(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function tS(t){return Ls(t)?t:t.contextElement}function Ec(t){const e=tS(t);if(!pi(e))return hi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=l5(e);let a=(o?Xf(n.width):n.width)/r,l=(o?Xf(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const tee=hi(0);function c5(t){const e=$r(t);return!eS()||!e.visualViewport?tee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function nee(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$r(t)?!1:e}function Qa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=tS(t);let a=hi(1);e&&(r?Ls(r)&&(a=Ec(r)):a=Ec(t));const l=nee(o,n,r)?c5(o):hi(0);let d=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,m=s.width/a.x,f=s.height/a.y;if(o){const v=$r(o),y=r&&Ls(r)?$r(r):r;let w=v,b=I0(w);for(;b&&r&&y!==w;){const k=Ec(b),j=b.getBoundingClientRect(),T=Us(b),E=j.left+(b.clientLeft+parseFloat(T.paddingLeft))*k.x,P=j.top+(b.clientTop+parseFloat(T.paddingTop))*k.y;d*=k.x,h*=k.y,m*=k.x,f*=k.y,d+=E,h+=P,w=$r(b),b=I0(w)}}return Zf({width:m,height:f,x:d,y:h})}function nS(t,e){const n=Xp(t).scrollLeft;return e?e.left+n:Qa(yi(t)).left+n}function d5(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:nS(t,r)),o=r.top+e.scrollTop;return{x:s,y:o}}function ree(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",a=yi(r),l=e?Yp(e.floating):!1;if(r===a||l&&o)return n;let d={scrollLeft:0,scrollTop:0},h=hi(1);const m=hi(0),f=pi(r);if((f||!f&&!o)&&((Zc(r)!=="body"||oh(a))&&(d=Xp(r)),pi(r))){const y=Qa(r);h=Ec(r),m.x=y.x+r.clientLeft,m.y=y.y+r.clientTop}const v=a&&!f&&!o?d5(a,d,!0):hi(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+m.x+v.x,y:n.y*h.y-d.scrollTop*h.y+m.y+v.y}}function see(t){return Array.from(t.getClientRects())}function iee(t){const e=yi(t),n=Xp(t),r=t.ownerDocument.body,s=La(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=La(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+nS(t);const l=-n.scrollTop;return Us(r).direction==="rtl"&&(a+=La(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function oee(t,e){const n=$r(t),r=yi(t),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,d=0;if(s){o=s.width,a=s.height;const h=eS();(!h||h&&e==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}return{width:o,height:a,x:l,y:d}}function aee(t,e){const n=Qa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=pi(t)?Ec(t):hi(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,d=s*o.x,h=r*o.y;return{width:a,height:l,x:d,y:h}}function YN(t,e,n){let r;if(e==="viewport")r=oee(t,n);else if(e==="document")r=iee(yi(t));else if(Ls(e))r=aee(e,n);else{const s=c5(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Zf(r)}function u5(t,e){const n=Yo(t);return n===e||!Ls(n)||Fc(n)?!1:Us(n).position==="fixed"||u5(n,e)}function lee(t,e){const n=e.get(t);if(n)return n;let r=zu(t,[],!1).filter(l=>Ls(l)&&Zc(l)!=="body"),s=null;const o=Us(t).position==="fixed";let a=o?Yo(t):t;for(;Ls(a)&&!Fc(a);){const l=Us(a),d=Zw(a);!d&&l.position==="fixed"&&(s=null),(o?!d&&!s:!d&&l.position==="static"&&s&&["absolute","fixed"].includes(s.position)||oh(a)&&!d&&u5(t,a))?r=r.filter(h=>h!==a):s=l,a=Yo(a)}return e.set(t,r),r}function cee(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Yp(e)?[]:lee(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((d,h)=>{const m=YN(e,h,s);return d.top=La(m.top,d.top),d.right=Yf(m.right,d.right),d.bottom=Yf(m.bottom,d.bottom),d.left=La(m.left,d.left),d},YN(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dee(t){const{width:e,height:n}=l5(t);return{width:e,height:n}}function uee(t,e,n){const r=pi(e),s=yi(e),o=n==="fixed",a=Qa(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const d=hi(0);if(r||!r&&!o)if((Zc(e)!=="body"||oh(s))&&(l=Xp(e)),r){const v=Qa(e,!0,o,e);d.x=v.x+e.clientLeft,d.y=v.y+e.clientTop}else s&&(d.x=nS(s));const h=s&&!r&&!o?d5(s,l):hi(0),m=a.left+l.scrollLeft-d.x-h.x,f=a.top+l.scrollTop-d.y-h.y;return{x:m,y:f,width:a.width,height:a.height}}function Kx(t){return Us(t).position==="static"}function XN(t,e){if(!pi(t)||Us(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return yi(t)===n&&(n=n.ownerDocument.body),n}function h5(t,e){const n=$r(t);if(Yp(t))return n;if(!pi(t)){let s=Yo(t);for(;s&&!Fc(s);){if(Ls(s)&&!Kx(s))return s;s=Yo(s)}return n}let r=XN(t,e);for(;r&&ZZ(r)&&Kx(r);)r=XN(r,e);return r&&Fc(r)&&Kx(r)&&!Zw(r)?n:r||eee(t)||n}const hee=async function(t){const e=this.getOffsetParent||h5,n=this.getDimensions,r=await n(t.floating);return{reference:uee(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mee(t){return Us(t).direction==="rtl"}const fee={convertOffsetParentRelativeRectToViewportRelativeRect:ree,getDocumentElement:yi,getClippingRect:cee,getOffsetParent:h5,getElementRects:hee,getClientRects:see,getDimensions:dee,getScale:Ec,isElement:Ls,isRTL:mee};function m5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function pee(t,e){let n=null,r;const s=yi(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),o();const h=t.getBoundingClientRect(),{left:m,top:f,width:v,height:y}=h;if(l||e(),!v||!y)return;const w=Fm(f),b=Fm(s.clientWidth-(m+v)),k=Fm(s.clientHeight-(f+y)),j=Fm(m),T={rootMargin:-w+"px "+-b+"px "+-k+"px "+-j+"px",threshold:La(0,Yf(1,d))||1};let E=!0;function P(N){const _=N[0].intersectionRatio;if(_!==d){if(!E)return a();_?a(!1,_):r=setTimeout(()=>{a(!1,1e-7)},1e3)}_===1&&!m5(h,t.getBoundingClientRect())&&a(),E=!1}try{n=new IntersectionObserver(P,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,T)}n.observe(t)}return a(!0),o}function gee(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=tS(t),m=s||o?[...h?zu(h):[],...zu(e)]:[];m.forEach(j=>{s&&j.addEventListener("scroll",n,{passive:!0}),o&&j.addEventListener("resize",n)});const f=h&&l?pee(h,n):null;let v=-1,y=null;a&&(y=new ResizeObserver(j=>{let[T]=j;T&&T.target===h&&y&&(y.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(e)})),n()}),h&&!d&&y.observe(h),y.observe(e));let w,b=d?Qa(t):null;d&&k();function k(){const j=Qa(t);b&&!m5(b,j)&&n(),b=j,w=requestAnimationFrame(k)}return n(),()=>{var j;m.forEach(T=>{s&&T.removeEventListener("scroll",n),o&&T.removeEventListener("resize",n)}),f?.(),(j=y)==null||j.disconnect(),y=null,d&&cancelAnimationFrame(w)}}const vee=XZ,xee=QZ,yee=JZ,bee=(t,e,n)=>{const r=new Map,s={platform:fee,...n},o={...s.platform,_c:r};return KZ(t,e,{...s,platform:o})};var Vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O0={exports:{}},wee=O0.exports,QN;function See(){return QN||(QN=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(wee,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],o={},a=null;function l(b,k){var j=b[k];if(typeof j.bind=="function")return j.bind(b);try{return Function.prototype.bind.call(j,b)}catch{return function(){return Function.prototype.apply.apply(j,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&r?d:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):e}function m(){for(var b=this.getLevel(),k=0;k<s.length;k++){var j=s[k];this[j]=k<b?e:this.methodFactory(j,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function f(b){return function(){typeof console!==n&&(m.call(this),this[b].apply(this,arguments))}}function v(b,k,j){return h(b)||f.apply(this,arguments)}function y(b,k){var j=this,T,E,P,N="loglevel";typeof b=="string"?N+=":"+b:typeof b=="symbol"&&(N=void 0);function _(D){var A=(s[D]||"silent").toUpperCase();if(!(typeof window===n||!N)){try{window.localStorage[N]=A;return}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+A+";"}catch{}}}function I(){var D;if(!(typeof window===n||!N)){try{D=window.localStorage[N]}catch{}if(typeof D===n)try{var A=window.document.cookie,Z=encodeURIComponent(N),se=A.indexOf(Z+"=");se!==-1&&(D=/^([^;]+)/.exec(A.slice(se+Z.length+1))[1])}catch{}return j.levels[D]===void 0&&(D=void 0),D}}function M(){if(!(typeof window===n||!N)){try{window.localStorage.removeItem(N)}catch{}try{window.document.cookie=encodeURIComponent(N)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function O(D){var A=D;if(typeof A=="string"&&j.levels[A.toUpperCase()]!==void 0&&(A=j.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=j.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+D)}j.name=b,j.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},j.methodFactory=k||v,j.getLevel=function(){return P??E??T},j.setLevel=function(D,A){return P=O(D),A!==!1&&_(P),m.call(j)},j.setDefaultLevel=function(D){E=O(D),I()||j.setLevel(D,!1)},j.resetLevel=function(){P=null,M(),m.call(j)},j.enableAll=function(D){j.setLevel(j.levels.TRACE,D)},j.disableAll=function(D){j.setLevel(j.levels.SILENT,D)},j.rebuild=function(){if(a!==j&&(T=O(a.getLevel())),m.call(j),a===j)for(var D in o)o[D].rebuild()},T=O(a?a.getLevel():"WARN");var L=I();L!=null&&(P=O(L)),m.call(j)}a=new y,a.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var k=o[b];return k||(k=o[b]=new y(b,a.methodFactory)),k};var w=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=w),a},a.getLoggers=function(){return o},a.default=a,a})})(O0)),O0.exports}var kee=See();const jee=f5(kee);var M0=function(t,e){return M0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},M0(t,e)};function Zi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Cee(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(m){try{h(r.next(m))}catch(f){a(f)}}function d(m){try{h(r.throw(m))}catch(f){a(f)}}function h(m){m.done?o(m.value):s(m.value).then(l,d)}h((r=r.apply(t,[])).next())})}function p5(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(h){return function(m){return d([h,m])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,s&&(o=h[0]&2?s.return:h[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,h[1])).done)return o;switch(s=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],s=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Vc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bc(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function qu(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Pc(t){return this instanceof Pc?(this.v=t,this):new Pc(t)}function Tee(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(y){return function(w){return Promise.resolve(w).then(y,f)}}function l(y,w){r[y]&&(s[y]=function(b){return new Promise(function(k,j){o.push([y,b,k,j])>1||d(y,b)})},w&&(s[y]=w(s[y])))}function d(y,w){try{h(r[y](w))}catch(b){v(o[0][3],b)}}function h(y){y.value instanceof Pc?Promise.resolve(y.value.v).then(m,f):v(o[0][2],y)}function m(y){d("next",y)}function f(y){d("throw",y)}function v(y,w){y(w),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Nee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vc=="function"?Vc(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(l,d){a=t[o](a),s(l,d,a.done,a.value)})}}function s(o,a,l,d){Promise.resolve(d).then(function(h){o({value:h,done:l})},a)}}function Et(t){return typeof t=="function"}function rS(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Jx=rS(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function ep(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ah=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var l=Vc(a),d=l.next();!d.done;d=l.next()){var h=d.value;h.remove(this)}}catch(b){e={error:b}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}else a.remove(this);var m=this.initialTeardown;if(Et(m))try{m()}catch(b){o=b instanceof Jx?b.errors:[b]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var v=Vc(f),y=v.next();!y.done;y=v.next()){var w=y.value;try{ZN(w)}catch(b){o=o??[],b instanceof Jx?o=qu(qu([],Bc(o)),Bc(b.errors)):o.push(b)}}}catch(b){r={error:b}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}}if(o)throw new Jx(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)ZN(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&ep(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&ep(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})(),g5=ah.EMPTY;function v5(t){return t instanceof ah||t&&"closed"in t&&Et(t.remove)&&Et(t.add)&&Et(t.unsubscribe)}function ZN(t){Et(t)?t():t.unsubscribe()}var Eee={Promise:void 0},Pee={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,qu([t,e],Bc(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function x5(t){Pee.setTimeout(function(){throw t})}function tp(){}function mf(t){t()}var sS=(function(t){Zi(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,v5(n)&&n.add(r)):r.destination=Aee,r}return e.create=function(n,r,s){return new D0(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(ah),_ee=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Bm(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Bm(r)}else Bm(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Bm(n)}},t})(),D0=(function(t){Zi(e,t);function e(n,r,s){var o=t.call(this)||this,a;return Et(n)||!n?a={next:n??void 0,error:r??void 0,complete:s??void 0}:a=n,o.destination=new _ee(a),o}return e})(sS);function Bm(t){x5(t)}function Ree(t){throw t}var Aee={closed:!0,next:tp,error:Ree,complete:tp},iS=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function oS(t){return t}function Iee(t){return t.length===0?oS:t.length===1?t[0]:function(e){return t.reduce(function(n,r){return r(n)},e)}}var Cn=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,o=Mee(e)?e:new D0(e,n,r);return mf(function(){var a=s,l=a.operator,d=a.source;o.add(l?l.call(o,d):d?s._subscribe(o):s._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=eE(n),new n(function(s,o){var a=new D0({next:function(l){try{e(l)}catch(d){o(d),a.unsubscribe()}},error:o,complete:s});r.subscribe(a)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[iS]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Iee(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=eE(e),new e(function(r,s){var o;n.subscribe(function(a){return o=a},function(a){return s(a)},function(){return r(o)})})},t.create=function(e){return new t(e)},t})();function eE(t){var e;return(e=t??Eee.Promise)!==null&&e!==void 0?e:Promise}function Oee(t){return t&&Et(t.next)&&Et(t.error)&&Et(t.complete)}function Mee(t){return t&&t instanceof sS||Oee(t)&&v5(t)}function Dee(t){return Et(t?.lift)}function $s(t){return function(e){if(Dee(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fs(t,e,n,r,s){return new Lee(t,e,n,r,s)}var Lee=(function(t){Zi(e,t);function e(n,r,s,o,a,l){var d=t.call(this,n)||this;return d.onFinalize=a,d.shouldUnsubscribe=l,d._next=r?function(h){try{r(h)}catch(m){n.error(m)}}:t.prototype._next,d._error=o?function(h){try{o(h)}catch(m){n.error(m)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=s?function(){try{s()}catch(h){n.error(h)}finally{this.unsubscribe()}}:t.prototype._complete,d}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e})(sS),Uee=rS(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Za=(function(t){Zi(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new tE(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new Uee},e.prototype.next=function(n){var r=this;mf(function(){var s,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=Vc(r.currentObservers),l=a.next();!l.done;l=a.next()){var d=l.value;d.next(n)}}catch(h){s={error:h}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;mf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;mf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,o=s.hasError,a=s.isStopped,l=s.observers;return o||a?g5:(this.currentObservers=null,l.push(n),new ah(function(){r.currentObservers=null,ep(l,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,o=r.thrownError,a=r.isStopped;s?n.error(o):a&&n.complete()},e.prototype.asObservable=function(){var n=new Cn;return n.source=this,n},e.create=function(n,r){return new tE(n,r)},e})(Cn),tE=(function(t){Zi(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:g5},e})(Za),y5=(function(t){Zi(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,s=n.thrownError,o=n._value;if(r)throw s;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e})(Za),Fee={now:function(){return Date.now()}},Vee=(function(t){Zi(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e})(ah),nE={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,qu([t,e],Bc(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},Bee=(function(t){Zi(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.scheduler=n,s.work=r,s.pending=!1,s}return e.prototype.schedule=function(n,r){var s;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,r)),this.pending=!0,this.delay=r,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(a,this.id,r),this},e.prototype.requestAsyncId=function(n,r,s){return s===void 0&&(s=0),nE.setInterval(n.flush.bind(n,this),s)},e.prototype.recycleAsyncId=function(n,r,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return r;r!=null&&nE.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(n,r);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var s=!1,o;try{this.work(n)}catch(a){s=!0,o=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,s=n.scheduler,o=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ep(o,this),r!=null&&(this.id=this.recycleAsyncId(s,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e})(Vee),rE=(function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Fee.now,t})(),$ee=(function(t){Zi(e,t);function e(n,r){r===void 0&&(r=rE.now);var s=t.call(this,n,r)||this;return s.actions=[],s._active=!1,s}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var s;this._active=!0;do if(s=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}},e})(rE),zee=new $ee(Bee);function qee(t){return t&&Et(t.schedule)}function Wee(t){return t[t.length-1]}function aS(t){return qee(Wee(t))?t.pop():void 0}var lS=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function b5(t){return Et(t?.then)}function w5(t){return Et(t[iS])}function S5(t){return Symbol.asyncIterator&&Et(t?.[Symbol.asyncIterator])}function k5(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Hee(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var j5=Hee();function C5(t){return Et(t?.[j5])}function T5(t){return Tee(this,arguments,function(){var e,n,r,s;return p5(this,function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Pc(e.read())];case 3:return n=o.sent(),r=n.value,s=n.done,s?[4,Pc(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Pc(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function N5(t){return Et(t?.getReader)}function eo(t){if(t instanceof Cn)return t;if(t!=null){if(w5(t))return Gee(t);if(lS(t))return Kee(t);if(b5(t))return Jee(t);if(S5(t))return E5(t);if(C5(t))return Yee(t);if(N5(t))return Xee(t)}throw k5(t)}function Gee(t){return new Cn(function(e){var n=t[iS]();if(Et(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kee(t){return new Cn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Jee(t){return new Cn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,x5)})}function Yee(t){return new Cn(function(e){var n,r;try{for(var s=Vc(t),o=s.next();!o.done;o=s.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function E5(t){return new Cn(function(e){Qee(t,e).catch(function(n){return e.error(n)})})}function Xee(t){return E5(T5(t))}function Qee(t,e){var n,r,s,o;return Cee(this,void 0,void 0,function(){var a,l;return p5(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=Nee(t),d.label=1;case 1:return[4,n.next()];case 2:if(r=d.sent(),!!r.done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),s={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function $o(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var o=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!s)return o}function P5(t,e){return e===void 0&&(e=0),$s(function(n,r){n.subscribe(Fs(r,function(s){return $o(r,t,function(){return r.next(s)},e)},function(){return $o(r,t,function(){return r.complete()},e)},function(s){return $o(r,t,function(){return r.error(s)},e)}))})}function _5(t,e){return e===void 0&&(e=0),$s(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function Zee(t,e){return eo(t).pipe(_5(e),P5(e))}function ete(t,e){return eo(t).pipe(_5(e),P5(e))}function tte(t,e){return new Cn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function nte(t,e){return new Cn(function(n){var r;return $o(n,e,function(){r=t[j5](),$o(n,e,function(){var s,o,a;try{s=r.next(),o=s.value,a=s.done}catch(l){n.error(l);return}a?n.complete():n.next(o)},0,!0)}),function(){return Et(r?.return)&&r.return()}})}function R5(t,e){if(!t)throw new Error("Iterable cannot be null");return new Cn(function(n){$o(n,e,function(){var r=t[Symbol.asyncIterator]();$o(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function rte(t,e){return R5(T5(t),e)}function ste(t,e){if(t!=null){if(w5(t))return Zee(t,e);if(lS(t))return tte(t,e);if(b5(t))return ete(t,e);if(S5(t))return R5(t,e);if(C5(t))return nte(t,e);if(N5(t))return rte(t,e)}throw k5(t)}function cS(t,e){return e?ste(t,e):eo(t)}function sE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=aS(t);return cS(t,n)}function ite(t){return t instanceof Date&&!isNaN(t)}var ote=rS(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function ate(t,e){var n=ite(t)?{first:t}:typeof t=="number"?{each:t}:t,r=n.first,s=n.each,o=n.with,a=o===void 0?lte:o,l=n.scheduler,d=l===void 0?zee:l,h=n.meta,m=h===void 0?null:h;if(r==null&&s==null)throw new TypeError("No timeout provided.");return $s(function(f,v){var y,w,b=null,k=0,j=function(T){w=$o(v,d,function(){try{y.unsubscribe(),eo(a({meta:m,lastValue:b,seen:k})).subscribe(v)}catch(E){v.error(E)}},T)};y=f.subscribe(Fs(v,function(T){w?.unsubscribe(),k++,v.next(b=T),s>0&&j(s)},void 0,void 0,function(){w!=null&&w.closed||w==null||w.unsubscribe(),b=null})),!k&&j(r!=null?typeof r=="number"?r:+r-d.now():s)})}function lte(t){throw new ote(t)}function pn(t,e){return $s(function(n,r){var s=0;n.subscribe(Fs(r,function(o){r.next(t.call(e,o,s++))}))})}var cte=Array.isArray;function dte(t,e){return cte(e)?t.apply(void 0,qu([],Bc(e))):t(e)}function ute(t){return pn(function(e){return dte(t,e)})}function hte(t,e,n,r,s,o,a,l){var d=[],h=0,m=0,f=!1,v=function(){f&&!d.length&&!h&&e.complete()},y=function(b){return h<r?w(b):d.push(b)},w=function(b){h++;var k=!1;eo(n(b,m++)).subscribe(Fs(e,function(j){e.next(j)},function(){k=!0},void 0,function(){if(k)try{h--;for(var j=function(){var T=d.shift();a||w(T)};d.length&&h<r;)j();v()}catch(T){e.error(T)}}))};return t.subscribe(Fs(e,y,function(){f=!0,v()})),function(){}}function dS(t,e,n){return n===void 0&&(n=1/0),Et(e)?dS(function(r,s){return pn(function(o,a){return e(r,o,s,a)})(eo(t(r,s)))},n):(typeof e=="number"&&(n=e),$s(function(r,s){return hte(r,s,t,n)}))}function mte(t){return dS(oS,t)}function fte(){return mte(1)}function np(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fte()(cS(t,aS(t)))}var pte=["addListener","removeListener"],gte=["addEventListener","removeEventListener"],vte=["on","off"];function L0(t,e,n,r){if(Et(n)&&(r=n,n=void 0),r)return L0(t,e,n).pipe(ute(r));var s=Bc(bte(t)?gte.map(function(l){return function(d){return t[l](e,d,n)}}):xte(t)?pte.map(iE(t,e)):yte(t)?vte.map(iE(t,e)):[],2),o=s[0],a=s[1];if(!o&&lS(t))return dS(function(l){return L0(l,e,n)})(eo(t));if(!o)throw new TypeError("Invalid event target");return new Cn(function(l){var d=function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];return l.next(1<h.length?h:h[0])};return o(d),function(){return a(d)}})}function iE(t,e){return function(n){return function(r){return t[n](e,r)}}}function xte(t){return Et(t.addListener)&&Et(t.removeListener)}function yte(t){return Et(t.on)&&Et(t.off)}function bte(t){return Et(t.addEventListener)&&Et(t.removeEventListener)}function Qp(t,e){return $s(function(n,r){var s=0;n.subscribe(Fs(r,function(o){return t.call(e,o,s++)&&r.next(o)}))})}function wte(t,e,n,r,s){return function(o,a){var l=n,d=e,h=0;o.subscribe(Fs(a,function(m){var f=h++;d=l?t(d,m,f):(l=!0,m),a.next(d)},s))}}function Ste(t,e){return e===void 0&&(e=oS),t=t??kte,$s(function(n,r){var s,o=!0;n.subscribe(Fs(r,function(a){var l=e(a);(o||!t(s,l))&&(o=!1,s=l,r.next(a))}))})}function kte(t,e){return t===e}function oE(t,e){return $s(wte(t,e,arguments.length>=2,!0))}function jte(t){return $s(function(e,n){var r=!1,s=Fs(n,function(){s?.unsubscribe(),r=!0},tp);eo(t).subscribe(s),e.subscribe(Fs(n,function(o){return r&&n.next(o)}))})}function zs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=aS(t);return $s(function(r,s){(n?np(t,r,n):np(t,r)).subscribe(s)})}function aE(t){return $s(function(e,n){eo(t).subscribe(Fs(n,function(){return n.complete()},tp)),!n.closed&&e.subscribe(n)})}var Cte=Object.defineProperty,Tte=Object.defineProperties,Nte=Object.getOwnPropertyDescriptors,lE=Object.getOwnPropertySymbols,Ete=Object.prototype.hasOwnProperty,Pte=Object.prototype.propertyIsEnumerable,cE=(t,e,n)=>e in t?Cte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oo=(t,e)=>{for(var n in e||(e={}))Ete.call(e,n)&&cE(t,n,e[n]);if(lE)for(var n of lE(e))Pte.call(e,n)&&cE(t,n,e[n]);return t},qd=(t,e)=>Tte(t,Nte(e)),Vs=(t,e,n)=>new Promise((r,s)=>{var o=d=>{try{l(n.next(d))}catch(h){s(h)}},a=d=>{try{l(n.throw(d))}catch(h){s(h)}},l=d=>d.done?r(d.value):Promise.resolve(d.value).then(o,a);l((n=n.apply(t,e)).next())}),A5="lk";function jn(t){return typeof t>"u"?!1:_te(t)||Rte(t)}function _te(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function Rte(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function Wu(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function Dn(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(Wu(t))return`${t.participant.identity}_${t.source}_placeholder`;if(jn(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function Ate(t,e){return t===void 0||e===void 0?!1:jn(t)&&jn(e)?t.publication.trackSid===e.publication.trackSid:Dn(t)===Dn(e)}function I5(t,e){return typeof e>"u"?!1:jn(t)?e.some(n=>n.participant.identity===t.participant.identity&&jn(n)&&n.publication.trackSid===t.publication.trackSid):Wu(t)?e.some(n=>n.participant.identity===t.participant.identity&&Wu(n)&&n.source===t.source):!1}function Ite(t,e){return Wu(t)&&jn(e)&&e.participant.identity===t.participant.identity&&e.source===t.source}function Ote(){const t=document.createElement("p");t.style.width="100%",t.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return n===r&&(r=e.clientWidth),document.body.removeChild(e),n-r}function Mte(){return typeof document<"u"}function Dte(t,e,n){return gee(t,e,()=>Vs(this,null,function*(){const{x:r,y:s}=yield bee(t,e,{placement:"top",middleware:[vee(6),yee(),xee({padding:5})]});n?.(r,s)}))}function Lte(t,e){return!t.contains(e.target)}var Ute=[oe.ConnectionStateChanged,oe.RoomMetadataChanged,oe.ActiveSpeakersChanged,oe.ConnectionQualityChanged,oe.ParticipantConnected,oe.ParticipantDisconnected,oe.ParticipantPermissionsChanged,oe.ParticipantMetadataChanged,oe.ParticipantNameChanged,oe.ParticipantAttributesChanged,oe.TrackMuted,oe.TrackUnmuted,oe.TrackPublished,oe.TrackUnpublished,oe.TrackStreamStateChanged,oe.TrackSubscriptionFailed,oe.TrackSubscriptionPermissionChanged,oe.TrackSubscriptionStatusChanged],Fte=[...Ute,oe.LocalTrackPublished,oe.LocalTrackUnpublished];ue.TrackPublished,ue.TrackUnpublished,ue.TrackMuted,ue.TrackUnmuted,ue.TrackStreamStateChanged,ue.TrackSubscribed,ue.TrackUnsubscribed,ue.TrackSubscriptionPermissionChanged,ue.TrackSubscriptionFailed,ue.LocalTrackPublished,ue.LocalTrackUnpublished;var Vte=[ue.ConnectionQualityChanged,ue.IsSpeakingChanged,ue.ParticipantMetadataChanged,ue.ParticipantPermissionsChanged,ue.TrackMuted,ue.TrackUnmuted,ue.TrackPublished,ue.TrackUnpublished,ue.TrackStreamStateChanged,ue.TrackSubscriptionFailed,ue.TrackSubscriptionPermissionChanged,ue.TrackSubscriptionStatusChanged];[...Vte,ue.LocalTrackPublished,ue.LocalTrackUnpublished];var nt=jee.getLogger("lk-components-js");nt.setDefaultLevel("WARN");var Bte=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function O5(t,e,n,r){if(t.length<1)throw new Error("At least one grid layout definition must be provided.");const s=$te(t);if(n<=0||r<=0)return s[0];let o=0;const a=n/r>1?"landscape":"portrait";let l=s.find((d,h,m)=>{o=h;const f=m.findIndex((v,y)=>{const w=!v.orientation||v.orientation===a,b=y>h,k=v.maxTiles===d.maxTiles;return b&&k&&w})!==-1;return d.maxTiles>=e&&!f});if(l===void 0)if(l=s[s.length-1],l)nt.warn(`No layout found for: participantCount: ${e}, width/height: ${n}/${r} fallback to biggest available layout (${l}).`);else throw new Error("No layout or fallback layout found.");if((n<l.minWidth||r<l.minHeight)&&o>0){const d=s[o-1];l=O5(s.slice(0,o),d.maxTiles,n,r)}return l}function $te(t){return[...t].map(e=>{var n,r;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:(n=e.minWidth)!=null?n:0,minHeight:(r=e.minHeight)!=null?r:0,orientation:e.orientation}}).sort((e,n)=>e.maxTiles!==n.maxTiles?e.maxTiles-n.maxTiles:e.minWidth!==0||n.minWidth!==0?e.minWidth-n.minWidth:e.minHeight!==0||n.minHeight!==0?e.minHeight-n.minHeight:0)}function zte(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var M5=[],D5={showChat:!1,unreadMessages:0,showSettings:!1};function L5(t){return typeof t=="object"}function U5(t){return Array.isArray(t)&&t.filter(L5).length>0}function qte(t,e){return e.audioLevel-t.audioLevel}function Wte(t,e){return t.isSpeaking===e.isSpeaking?0:t.isSpeaking?-1:1}function Hte(t,e){var n,r,s,o;return t.lastSpokeAt!==void 0||e.lastSpokeAt!==void 0?((r=(n=e.lastSpokeAt)==null?void 0:n.getTime())!=null?r:0)-((o=(s=t.lastSpokeAt)==null?void 0:s.getTime())!=null?o:0):0}function U0(t,e){var n,r,s,o;return((r=(n=t.joinedAt)==null?void 0:n.getTime())!=null?r:0)-((o=(s=e.joinedAt)==null?void 0:s.getTime())!=null?o:0)}function Gte(t,e){return jn(t)?jn(e)?0:-1:jn(e)?1:0}function Kte(t,e){const n=t.participant.isCameraEnabled,r=e.participant.isCameraEnabled;return n!==r?n?-1:1:0}function Jte(t){const e=[],n=[],r=[],s=[];t.forEach(l=>{l.participant.isLocal&&l.source===Y.Source.Camera?e.push(l):l.source===Y.Source.ScreenShare?n.push(l):l.source===Y.Source.Camera?r.push(l):s.push(l)});const o=Yte(n),a=Xte(r);return[...e,...o,...a,...s]}function Yte(t){const e=[],n=[];return t.forEach(r=>{r.participant.isLocal?e.push(r):n.push(r)}),e.sort((r,s)=>U0(r.participant,s.participant)),n.sort((r,s)=>U0(r.participant,s.participant)),[...n,...e]}function Xte(t){const e=[],n=[];return t.forEach(r=>{r.participant.isLocal?e.push(r):n.push(r)}),n.sort((r,s)=>r.participant.isSpeaking&&s.participant.isSpeaking?qte(r.participant,s.participant):r.participant.isSpeaking!==s.participant.isSpeaking?Wte(r.participant,s.participant):r.participant.lastSpokeAt!==s.participant.lastSpokeAt?Hte(r.participant,s.participant):jn(r)!==jn(s)?Gte(r,s):r.participant.isCameraEnabled!==s.participant.isCameraEnabled?Kte(r,s):U0(r.participant,s.participant)),[...e,...n]}function Qte(t,e){return t.reduce((n,r,s)=>s%e===0?[...n,[r]]:[...n.slice(0,-1),[...n.slice(-1)[0],r]],[])}function dE(t,e){const n=Math.max(t.length,e.length);return new Array(n).fill([]).map((r,s)=>[t[s],e[s]])}function rp(t,e,n){return t.filter(r=>!e.map(s=>n(s)).includes(n(r)))}function F0(t){return t.map(e=>typeof e=="string"||typeof e=="number"?`${e}`:Dn(e))}function Zte(t,e){return{dropped:rp(t,e,Dn),added:rp(e,t,Dn)}}function ene(t){return t.added.length!==0||t.dropped.length!==0}function V0(t,e){const n=e.findIndex(r=>Dn(r)===Dn(t));if(n===-1)throw new Error(`Element not part of the array: ${Dn(t)} not in ${F0(e)}`);return n}function tne(t,e,n){const r=V0(t,n),s=V0(e,n);return n.splice(r,1,e),n.splice(s,1,t),n}function nne(t,e){const n=V0(t,e);return e.splice(n,1),e}function rne(t,e){return[...e,t]}function Yx(t,e){return Qte(t,e)}function sne(t,e,n){let r=ine(t,e);if(r.length<e.length){const a=rp(e,r,Dn);r=[...r,...a]}const s=Yx(r,n),o=Yx(e,n);if(dE(s,o).forEach(([a,l],d)=>{if(a&&l){const h=Yx(r,n)[d],m=Zte(h,l);ene(m)&&(nt.debug(`Detected visual changes on page: ${d}, current: ${F0(a)}, next: ${F0(l)}`,{changes:m}),m.added.length===m.dropped.length&&dE(m.added,m.dropped).forEach(([f,v])=>{if(f&&v)r=tne(f,v,r);else throw new Error(`For a swap action we need a addition and a removal one is missing: ${f}, ${v}`)}),m.added.length===0&&m.dropped.length>0&&m.dropped.forEach(f=>{r=nne(f,r)}),m.added.length>0&&m.dropped.length===0&&m.added.forEach(f=>{r=rne(f,r)}))}}),r.length>e.length){const a=rp(r,e,Dn);r=r.filter(l=>!a.map(Dn).includes(Dn(l)))}return r}function ine(t,e){return t.map(n=>e.find(s=>Dn(n)===Dn(s)||typeof n!="number"&&Wu(n)&&jn(s)&&Ite(n,s))??n)}function _r(t){return`${A5}-${t}`}function one(t){const e=B0(t),n=F5(t.participant).pipe(pn(()=>B0(t)),zs(e));return{className:_r(t.source===Y.Source.Camera||t.source===Y.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function B0(t){if(jn(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTrackPublications().find(s=>s.source===e&&s.trackName===n);if(n)return r.getTrackPublicationByName(n);if(e)return r.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function uS(t,...e){return new Cn(n=>{const r=()=>{n.next(t)};return e.forEach(s=>{t.on(s,r)}),()=>{e.forEach(s=>{t.off(s,r)})}}).pipe(zs(t))}function Zp(t,e){return new Cn(n=>{const r=(...s)=>{n.next(s)};return t.on(e,r),()=>{t.off(e,r)}})}function ane(t){return Zp(t,oe.ConnectionStateChanged).pipe(pn(([e])=>e),zs(t.state))}function lne(t,e,n=!0){const r=new Cn(o=>{Ki.getLocalDevices(t,n).then(a=>{o.next(a),o.complete()}).catch(a=>{e?.(a),o.next([]),o.complete()})}),s=new Cn(o=>{var a;const l=()=>Vs(this,null,function*(){try{const d=yield Ki.getLocalDevices(t,n);o.next(d)}catch(d){e?.(d)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(a=navigator?.mediaDevices)==null||a.addEventListener("devicechange",l)}return()=>{var d;(d=navigator?.mediaDevices)==null||d.removeEventListener("devicechange",l)}});return np(r,s)}function cne(t){return Zp(t,oe.DataReceived)}function dne(t){return uS(t,oe.AudioPlaybackStatusChanged).pipe(pn(e=>({canPlayAudio:e.canPlaybackAudio})))}function une(t){return uS(t,oe.VideoPlaybackStatusChanged).pipe(pn(e=>({canPlayVideo:e.canPlaybackVideo})))}function hne(t,e){return Zp(t,oe.ActiveDeviceChanged).pipe(Qp(([n])=>n===e),pn(([n,r])=>(nt.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)))}function mne(t,e){return Zp(t,oe.ParticipantEncryptionStatusChanged).pipe(Qp(([,n])=>e?.identity===n?.identity||!n&&e?.identity===t.localParticipant.identity),pn(([n])=>n),zs(e!=null&&e.isLocal?e.isE2EEEnabled:!!(e!=null&&e.isEncrypted)))}function hS(t,...e){return new Cn(n=>{const r=()=>{n.next(t)};return e.forEach(s=>{t.on(s,r)}),()=>{e.forEach(s=>{t.off(s,r)})}}).pipe(zs(t))}function F5(t){return hS(t,ue.TrackMuted,ue.TrackUnmuted,ue.ParticipantPermissionsChanged,ue.TrackPublished,ue.TrackUnpublished,ue.LocalTrackPublished,ue.LocalTrackUnpublished,ue.MediaDevicesError,ue.TrackSubscriptionStatusChanged).pipe(pn(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:r,isScreenShareEnabled:s}=e,o=e.getTrackPublication(Y.Source.Microphone),a=e.getTrackPublication(Y.Source.Camera);return{isCameraEnabled:r,isMicrophoneEnabled:n,isScreenShareEnabled:s,cameraTrack:a,microphoneTrack:o,participant:e}}))}function fne(t){return t?hS(t,ue.ParticipantMetadataChanged,ue.ParticipantNameChanged).pipe(pn(({name:e,identity:n,metadata:r})=>({name:e,identity:n,metadata:r})),zs({name:t.name,identity:t.identity,metadata:t.metadata})):void 0}function pne(t){return mS(t,ue.ConnectionQualityChanged).pipe(pn(([e])=>e),zs(t.connectionQuality))}function mS(t,e){return new Cn(n=>{const r=(...s)=>{n.next(s)};return t.on(e,r),()=>{t.off(e,r)}})}function V5(t){var e,n,r,s;return hS(t.participant,ue.TrackMuted,ue.TrackUnmuted,ue.TrackSubscribed,ue.TrackUnsubscribed,ue.LocalTrackPublished,ue.LocalTrackUnpublished).pipe(pn(o=>{var a,l;const d=(a=t.publication)!=null?a:o.getTrackPublication(t.source);return(l=d?.isMuted)!=null?l:!0}),zs((s=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrackPublication(t.source))==null?void 0:n.isMuted)!=null?s:!0))}function gne(t){return mS(t,ue.IsSpeakingChanged).pipe(pn(([e])=>e))}function vne(t){return mS(t,ue.ParticipantPermissionsChanged).pipe(pn(()=>t.permissions),zs(t.permissions))}function xne(t,e,n,r,s){const{localParticipant:o}=e,a=(m,f)=>{let v=!1;switch(m){case Y.Source.Camera:v=f.isCameraEnabled;break;case Y.Source.Microphone:v=f.isMicrophoneEnabled;break;case Y.Source.ScreenShare:v=f.isScreenShareEnabled;break}return v},l=F5(o).pipe(pn(m=>a(t,m.participant)),zs(a(t,o))),d=new Za,h=(m,f)=>Vs(this,null,function*(){try{switch(f??(f=n),d.next(!0),t){case Y.Source.Camera:return yield o.setCameraEnabled(m??!o.isCameraEnabled,f,r),o.isCameraEnabled;case Y.Source.Microphone:return yield o.setMicrophoneEnabled(m??!o.isMicrophoneEnabled,f,r),o.isMicrophoneEnabled;case Y.Source.ScreenShare:return yield o.setScreenShareEnabled(m??!o.isScreenShareEnabled,f,r),o.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(v){if(s&&v instanceof Error){s?.(v);return}else throw v}finally{d.next(!1)}});return{className:_r("button"),toggle:h,enabledObserver:l,pendingObserver:d.asObservable()}}function yne(){let t=!1;const e=new Za,n=new Za,r=s=>Vs(this,null,function*(){n.next(!0),t=s??!t,e.next(t),n.next(!1)});return{className:_r("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function bne(t,e,n){const r=new y5(void 0),s=hne(e,t),o=(a,...l)=>Vs(this,[a,...l],function*(d,h={}){var m,f,v;if(e){const y=Pr();if(t==="audiooutput"&&(y?.name==="Safari"||y?.os==="iOS")){nt.warn("Switching audio output device is not supported on Safari and iOS.");return}nt.debug(`Switching active device of kind "${t}" with id ${d}.`),yield e.switchActiveDevice(t,d,h.exact);const w=(m=e.getActiveDevice(t))!=null?m:d;w!==d&&d!=="default"&&nt.info(`We tried to select the device with id (${d}), but the browser decided to select the device with id (${w}) instead.`);let b;t==="audioinput"?b=(f=e.localParticipant.getTrackPublication(Y.Source.Microphone))==null?void 0:f.track:t==="videoinput"&&(b=(v=e.localParticipant.getTrackPublication(Y.Source.Camera))==null?void 0:v.track);const k=d==="default"&&!b||d==="default"&&b?.mediaStreamTrack.label.startsWith("Default");r.next(k?d:w)}});return{className:_r("media-device-select"),activeDeviceObservable:s,setActiveMediaDevice:o}}function wne(t){const e=n=>{t.disconnect(n)};return{className:_r("disconnect-button"),disconnect:e}}function Sne(t){const e=_r("connection-quality"),n=pne(t);return{className:e,connectionQualityObserver:n}}function kne(t){let e="track-muted-indicator-camera";switch(t.source){case Y.Source.Camera:e="track-muted-indicator-camera";break;case Y.Source.Microphone:e="track-muted-indicator-microphone";break}const n=_r(e),r=V5(t);return{className:n,mediaMutedObserver:r}}function jne(t){return{className:"lk-participant-name",infoObserver:fne(t)}}function Cne(){return{className:_r("participant-tile")}}var Tne={CHAT:"lk.chat"},Nne={CHAT:"lk-chat-topic"};function B5(t,e){return Vs(this,arguments,function*(n,r,s={}){const{reliable:o,destinationIdentities:a,topic:l}=s;yield n.publishData(r,{destinationIdentities:a,topic:l,reliable:o})})}function Ene(t,e,n){const r=Array.isArray(e)?e:[e],s=cne(t).pipe(Qp(([,,,l])=>e===void 0||l!==void 0&&r.includes(l)),pn(([l,d,,h])=>({payload:l,topic:h,from:d})));let o;const a=new Cn(l=>{o=l});return{messageObservable:s,isSendingObservable:a,send:(l,...d)=>Vs(this,[l,...d],function*(h,m={}){o.next(!0);try{yield B5(t.localParticipant,h,Oo({topic:r[0]},m))}finally{o.next(!1)}})}}var $m=new WeakMap;function Pne(t){return t.ignoreLegacy==!0}var _ne=t=>JSON.parse(new TextDecoder().decode(t)),Rne=t=>new TextEncoder().encode(JSON.stringify(t));function Ane(t,e){var n,r,s,o,a,l;const d=()=>{var N,_,I;return((N=t.serverInfo)==null?void 0:N.edition)===1||!!((_=t.serverInfo)!=null&&_.version)&&Ds((I=t.serverInfo)==null?void 0:I.version,"1.8.2")>0},h=new Za,m=(n=e?.channelTopic)!=null?n:Tne.CHAT,f=(r=e?.channelTopic)!=null?r:Nne.CHAT;let v=!1;$m.has(t)||(v=!0);const y=(s=$m.get(t))!=null?s:new Map,w=(o=y.get(m))!=null?o:new Za;y.set(m,w),$m.set(t,y);const b=(a=e?.messageDecoder)!=null?a:_ne;if(v){t.registerTextStreamHandler(m,(_,I)=>Vs(this,null,function*(){const{id:M,timestamp:O}=_.info;cS(_).pipe(oE((L,D)=>L+D),pn(L=>({id:M,timestamp:O,message:L,from:t.getParticipantByIdentity(I.identity)}))).subscribe({next:L=>w.next(L)})}));const{messageObservable:N}=Ene(t,[f]);N.pipe(pn(_=>{const I=b(_.payload);return Pne(I)?void 0:qd(Oo({},I),{from:_.from})}),Qp(_=>!!_),aE(h)).subscribe(w)}const k=w.pipe(oE((N,_)=>{if("id"in _&&N.find(I=>{var M,O;return((M=I.from)==null?void 0:M.identity)===((O=_.from)==null?void 0:O.identity)&&I.id===_.id})){const I=N.findIndex(M=>M.id===_.id);if(I>-1){const M=N[I];N[I]=qd(Oo({},_),{timestamp:M.timestamp,editTimestamp:_.timestamp})}return[...N]}return[...N,_]},[]),aE(h)),j=new y5(!1),T=(l=e?.messageEncoder)!=null?l:Rne,E=(N,_)=>Vs(this,null,function*(){_||(_={}),_.topic!=null||(_.topic=m),j.next(!0);try{const I={id:(yield t.localParticipant.sendText(N,_)).id,timestamp:Date.now(),message:N},M=qd(Oo({},I),{attachedFiles:_.attachments}),O=qd(Oo({},M),{from:t.localParticipant,attributes:_.attributes});w.next(O);const L=T(qd(Oo({},I),{ignoreLegacy:d()}));try{yield B5(t.localParticipant,L,{reliable:!0,topic:f})}catch(D){nt.info("could not send message in legacy chat format",D)}return O}finally{j.next(!1)}});function P(){h.next(),h.complete(),w.complete(),$m.delete(t),t.unregisterTextStreamHandler(m)}return t.once(oe.Disconnected,P),{messageObservable:k,isSendingObservable:j,send:E}}function Ine(){const t=e=>Vs(this,null,function*(){nt.info("Start Audio for room: ",e),yield e.startAudio()});return{className:_r("start-audio-button"),roomAudioPlaybackAllowedObservable:dne,handleStartAudioPlayback:t}}function One(){const t=e=>Vs(this,null,function*(){nt.info("Start Video for room: ",e),yield e.startVideo()});return{className:_r("start-audio-button"),roomVideoPlaybackAllowedObservable:une,handleStartVideoPlayback:t}}function Mne(){return{className:[_r("button"),_r("chat-toggle")].join(" ")}}function Dne(){return{className:[_r("button"),_r("focus-toggle-button")].join(" ")}}function Lne(){return{className:"lk-room-container"}}function uE(t,e,n=!0){const r=[t.localParticipant,...Array.from(t.remoteParticipants.values())],s=[];return r.forEach(o=>{e.forEach(a=>{const l=Array.from(o.trackPublications.values()).filter(d=>d.source===a&&(!n||d.track)).map(d=>({participant:o,publication:d,source:d.source}));s.push(...l)})}),{trackReferences:s,participants:r}}function Une(t,e,n){var r,s;const o=(r=n.additionalRoomEvents)!=null?r:Fte,a=(s=n.onlySubscribed)!=null?s:!0,l=Array.from(new Set([oe.ParticipantConnected,oe.ParticipantDisconnected,oe.ConnectionStateChanged,oe.LocalTrackPublished,oe.LocalTrackUnpublished,oe.TrackPublished,oe.TrackUnpublished,oe.TrackSubscriptionStatusChanged,...o]).values());return uS(t,...l).pipe(pn(d=>{const h=uE(d,e,a);return nt.debug(`TrackReference[] was updated. (length ${h.trackReferences.length})`,h),h}),zs(uE(t,e,a)))}function Fne(t,e=1e3){if(t===null)return sE(!1);const n=L0(t,"mousemove",{passive:!0}).pipe(pn(()=>!0)),r=n.pipe(ate({each:e,with:()=>np(sE(!1),r.pipe(jte(n)))}),Ste());return r}function Vne(t,e){if(typeof localStorage>"u"){nt.error("Local storage is not available.");return}try{if(e){const n=Object.fromEntries(Object.entries(e).filter(([,r])=>r!==""));localStorage.setItem(t,JSON.stringify(n))}}catch(n){nt.error(`Error setting item to local storage: ${n}`)}}function Bne(t){if(typeof localStorage>"u"){nt.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){nt.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){nt.error(`Error getting item from local storage: ${e}`);return}}function $ne(t){return{load:()=>Bne(t),save:e=>Vne(t,e)}}var zne=`${A5}-user-choices`,Wd={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:qne,save:Wne}=$ne(zne);function Hne(t,e=!1){e!==!0&&Wne(t)}function Gne(t,e=!1){var n,r,s,o,a;const l={videoEnabled:(n=t?.videoEnabled)!=null?n:Wd.videoEnabled,audioEnabled:(r=t?.audioEnabled)!=null?r:Wd.audioEnabled,videoDeviceId:(s=t?.videoDeviceId)!=null?s:Wd.videoDeviceId,audioDeviceId:(o=t?.audioDeviceId)!=null?o:Wd.audioDeviceId,username:(a=t?.username)!=null?a:Wd.username};if(e)return l;{const d=qne();return Oo(Oo({},l),d??{})}}function $5(t,e){if(e.msg==="show_chat")return{...t,showChat:!0,unreadMessages:0};if(e.msg==="hide_chat")return{...t,showChat:!1};if(e.msg==="toggle_chat"){const n={...t,showChat:!t.showChat};return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?{...t,unreadMessages:e.count}:e.msg==="toggle_settings"?{...t,showSettings:!t.showSettings}:{...t}}function z5(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:{...t}}const eg=g.createContext(void 0);function q5(){const t=g.useContext(eg);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function Kne(t){const e=lh();if(t??(t=e),!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function Jne(){const[t,e]=g.useReducer(z5,M5),[n,r]=g.useReducer($5,D5);return{pin:{dispatch:e,state:t},widget:{dispatch:r,state:n}}}function Yne(t){const[e,n]=g.useReducer(z5,M5),[r,s]=g.useReducer($5,D5);return t??{pin:{dispatch:n,state:e},widget:{dispatch:s,state:r}}}function lh(){return g.useContext(eg)}const fS=g.createContext(void 0);function tg(){return g.useContext(fS)}function ed(t){const e=tg(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const W5=g.createContext(void 0);function H5(){return g.useContext(W5)}function ch(t){const e=H5(),n=tg(),r=t??e??n?.participant;if(!r)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}const pS=g.createContext(void 0);function ng(){const t=g.useContext(pS);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function rg(){return g.useContext(pS)}function dh(t){const e=rg(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const G5=g.createContext(void 0);function Xne(t){return g.useContext(G5)}var hE={};function K5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=K5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function J5(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=K5(t))&&(r&&(r+=" "),r+=e);return r}function Qne(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(r){console.error(r)}}}function bi(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const r=t[n];for(const s in r){const o=e[s],a=r[s];typeof o=="function"&&typeof a=="function"&&s[0]==="o"&&s[1]==="n"&&s.charCodeAt(2)>=65&&s.charCodeAt(2)<=90?e[s]=Qne(o,a):(s==="className"||s==="UNSAFE_className")&&typeof o=="string"&&typeof a=="string"?e[s]=J5(o,a):e[s]=a!==void 0?a:o}}return e}function Zne(t){return t!==void 0}function to(...t){return bi(...t.filter(Zne))}function Y5(t,e,n){return g.Children.map(t,r=>g.isValidElement(r)&&g.Children.only(t)?(r.props.className&&(e??(e={}),e.className=J5(r.props.className,e.className),e.style={...r.props.style,...e.style}),g.cloneElement(r,{...e,key:n})):r)}function ere(t){var e,n;if(typeof window<"u"&&typeof process<"u"&&(((e=process==null?void 0:hE)==null?void 0:e.NODE_ENV)==="dev"||((n=process==null?void 0:hE)==null?void 0:n.NODE_ENV)==="development")){const r=document.querySelector(".lk-room-container");r&&!getComputedStyle(r).getPropertyValue("--lk-has-imported-styles")&&nt.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function tre(t,e){return t==="processor"&&e&&typeof e=="object"&&"name"in e?e.name:t==="e2ee"&&e?"e2ee-enabled":e}const nre={connect:!0,audio:!1,video:!1};function rre(t){const{token:e,serverUrl:n,options:r,room:s,connectOptions:o,connect:a,audio:l,video:d,screen:h,onConnected:m,onDisconnected:f,onError:v,onMediaDeviceFailure:y,onEncryptionError:w,simulateParticipants:b,...k}={...nre,...t};r&&s&&nt.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[j,T]=g.useState(),E=g.useRef(a);g.useEffect(()=>{T(s??new Ki(r))},[s,JSON.stringify(r,tre)]);const P=g.useMemo(()=>{const{className:N}=Lne();return bi(k,{className:N})},[k]);return g.useEffect(()=>{if(!j)return;const N=()=>{const L=j.localParticipant;nt.debug("trying to publish local tracks"),Promise.all([L.setMicrophoneEnabled(!!l,typeof l!="boolean"?l:void 0),L.setCameraEnabled(!!d,typeof d!="boolean"?d:void 0),L.setScreenShareEnabled(!!h,typeof h!="boolean"?h:void 0)]).catch(D=>{nt.warn(D),v?.(D)})},_=(L,D)=>{const A=Vu.getFailure(L);y?.(A,D)},I=L=>{w?.(L)},M=L=>{f?.(L)},O=()=>{m?.()};return j.on(oe.SignalConnected,N).on(oe.MediaDevicesError,_).on(oe.EncryptionError,I).on(oe.Disconnected,M).on(oe.Connected,O),()=>{j.off(oe.SignalConnected,N).off(oe.MediaDevicesError,_).off(oe.EncryptionError,I).off(oe.Disconnected,M).off(oe.Connected,O)}},[j,l,d,h,v,w,y,m,f]),g.useEffect(()=>{if(j){if(b){j.simulateParticipants({participants:{count:b},publish:{audio:!0,useRealTracks:!0}});return}if(a){if(E.current=!0,nt.debug("connecting"),!e){nt.debug("no token yet");return}if(!n){nt.warn("no livekit url provided"),v?.(Error("no livekit url provided"));return}j.connect(n,e,o).catch(N=>{nt.warn(N),E.current===!0&&v?.(N)})}else nt.debug("disconnecting because connect is false"),E.current=!1,j.disconnect()}},[a,e,JSON.stringify(o),j,v,n,b]),g.useEffect(()=>{if(j)return()=>{nt.info("disconnecting on onmount"),j.disconnect()}},[j]),{room:j,htmlProps:P}}const X5=g.forwardRef(function(t,e){const{room:n,htmlProps:r}=rre(t);return g.createElement("div",{ref:e,...r},n&&g.createElement(pS.Provider,{value:n},g.createElement(G5.Provider,{value:t.featureFlags},t.children)))}),sre=t=>{const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),e};function ire(t,e){const n=are(),r=sre(e);return g.useLayoutEffect(()=>{let s=!1;const o=t.current;if(!o)return;function a(l,d){s||r.current(l,d)}return n?.subscribe(o,a),()=>{s=!0,n?.unsubscribe(o,a)}},[t.current,n,r]),n?.observer}function ore(){let t=!1,e=[];const n=new Map;if(typeof window>"u")return;const r=new ResizeObserver((s,o)=>{e=e.concat(s),t||window.requestAnimationFrame(()=>{const a=new Set;for(let l=0;l<e.length;l++){if(a.has(e[l].target))continue;a.add(e[l].target);const d=n.get(e[l].target);d?.forEach(h=>h(e[l],o))}e=[],t=!1}),t=!0});return{observer:r,subscribe(s,o){r.observe(s);const a=n.get(s)??[];a.push(o),n.set(s,a)},unsubscribe(s,o){const a=n.get(s)??[];if(a.length===1){r.unobserve(s),n.delete(s);return}const l=a.indexOf(o);l!==-1&&a.splice(l,1),n.set(s,a)}}}let mE;const are=()=>mE||(mE=ore()),Q5=t=>{const[e,n]=g.useState({width:0,height:0});g.useLayoutEffect(()=>{if(t.current){const{width:s,height:o}=t.current.getBoundingClientRect();n({width:s,height:o})}},[t.current]);const r=g.useCallback(s=>n(s.contentRect),[]);return ire(t,r),e};function Rr(t,e,n=!0){const[r,s]=g.useState(e);return g.useEffect(()=>{if(n&&s(e),typeof window>"u"||!t)return;const o=t.subscribe(s);return()=>o.unsubscribe()},[t,n]),r}function lre(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=g.useState(e(t));function s(){r(e(t))}return g.useEffect(()=>{const o=window.matchMedia(t);return s(),o.addListener?o.addListener(s):o.addEventListener("change",s),()=>{o.removeListener?o.removeListener(s):o.removeEventListener("change",s)}},[t]),n}function cre(t={}){const e=ch(t.participant),{className:n,connectionQualityObserver:r}=g.useMemo(()=>Sne(e),[e]),s=Rr(r,e.connectionQuality);return{className:n,quality:s}}function gS(t){const e=dh(t),n=g.useMemo(()=>ane(e),[e]);return Rr(n,e.state)}function dre(t){const e=ng(),n=gS(e);return{buttonProps:g.useMemo(()=>{const{className:r,disconnect:s}=wne(e);return bi(t,{className:r,onClick:()=>s(t.stopTracks??!0),disabled:n===dt.Disconnected})},[e,t,n])}}function ure(t){if(t.publication instanceof Gf){const e=t.publication.track;if(e){const{facingMode:n}=DZ(e);return n}}return"undefined"}function hre({trackRef:t,props:e}){const n=ed(t),r=lh(),{className:s}=g.useMemo(()=>Dne(),[]),o=g.useMemo(()=>I5(n,r?.pin.state),[n,r?.pin.state]);return{mergedProps:g.useMemo(()=>bi(e,{className:s,onClick:a=>{var l,d,h,m,f;(l=e.onClick)==null||l.call(e,a),o?(h=r==null?void 0:(d=r.pin).dispatch)==null||h.call(d,{msg:"clear_pin"}):(f=r==null?void 0:(m=r.pin).dispatch)==null||f.call(m,{msg:"set_pin",trackReference:n})}}),[e,s,n,o,r?.pin]),inFocus:o}}function mre(t,e,n={}){const r=n.gridLayouts??Bte,{width:s,height:o}=Q5(t),a=O5(r,e,s,o);return g.useEffect(()=>{t.current&&a&&(t.current.style.setProperty("--lk-col-count",a?.columns.toString()),t.current.style.setProperty("--lk-row-count",a?.rows.toString()))},[t,a]),{layout:a,containerWidth:s,containerHeight:o}}function fE(t,e={}){var n,r;const s=typeof t=="string"?e.participant:t.participant,o=ch(s),a=typeof t=="string"?{participant:o,source:t}:t,[l,d]=g.useState(!!((n=a.publication)!=null&&n.isMuted||(r=o.getTrackPublication(a.source))!=null&&r.isMuted));return g.useEffect(()=>{const h=V5(a).subscribe(d);return()=>h.unsubscribe()},[Dn(a)]),l}function fre(t){const e=ch(t),n=g.useMemo(()=>gne(e),[e]);return Rr(n,e.isSpeaking)}function pre(){const t=ng(),e=g.useMemo(()=>vne(t.localParticipant),[t]);return Rr(e,t.localParticipant.permissions)}function gre({kind:t,room:e,track:n,requestPermissions:r,onError:s}){const o=rg(),a=g.useMemo(()=>e??o??new Ki,[e,o]),l=g.useMemo(()=>lne(t,s,r),[t,r,s]),d=Rr(l,[]),[h,m]=g.useState(a?.getActiveDevice(t)??"default"),{className:f,activeDeviceObservable:v,setActiveMediaDevice:y}=g.useMemo(()=>bne(t,a),[t,a,n]);return g.useEffect(()=>{const w=v.subscribe(b=>{b&&(nt.info("setCurrentDeviceId",b),m(b))});return()=>{w?.unsubscribe()}},[v]),{devices:d,className:f,activeDeviceId:h,setActiveMediaDevice:y}}function Z5(t,e,n={}){const r=g.useRef([]),s=g.useRef(-1),o=e!==s.current,a=typeof n.customSortFunction=="function"?n.customSortFunction(t):Jte(t);let l=[...a];if(o===!1)try{l=sne(r.current,a,e)}catch(d){nt.error("Error while running updatePages(): ",d)}return o?r.current=a:r.current=l,s.current=e,l}function vre(t,e){const[n,r]=g.useState(1),s=Math.max(Math.ceil(e.length/t),1);n>s&&r(s);const o=n*t,a=o-t,l=m=>{r(f=>m==="next"?f===s?f:f+1:f===1?f:f-1)},d=m=>{m>s?r(s):m<1?r(1):r(m)},h=Z5(e,t).slice(a,o);return{totalPageCount:s,nextPage:()=>l("next"),prevPage:()=>l("previous"),setPage:d,firstItemIndex:a,lastItemIndex:o,tracks:h,currentPage:n}}function xre({trackRef:t,onParticipantClick:e,disableSpeakingIndicator:n,htmlProps:r}){const s=ed(t),o=g.useMemo(()=>{const{className:v}=Cne();return bi(r,{className:v,onClick:y=>{var w;if((w=r.onClick)==null||w.call(r,y),typeof e=="function"){const b=s.publication??s.participant.getTrackPublication(s.source);e({participant:s.participant,track:b})}}})},[r,e,s.publication,s.source,s.participant]),a=s.participant.getTrackPublication(Y.Source.Microphone),l=g.useMemo(()=>({participant:s.participant,source:Y.Source.Microphone,publication:a}),[a,s.participant]),d=fE(s),h=fE(l),m=fre(s.participant),f=ure(s);return{elementProps:{"data-lk-audio-muted":h,"data-lk-video-muted":d,"data-lk-speaking":n===!0?!1:m,"data-lk-local-participant":s.participant.isLocal,"data-lk-source":s.source,"data-lk-facing-mode":f,...o}}}function yre(t){return t=Kne(t),g.useMemo(()=>t?.pin.state!==void 0&&t.pin.state.length>=1?t.pin.state:[],[t.pin.state])}function bre({room:t,props:e}){const n=dh(t),{className:r,roomAudioPlaybackAllowedObservable:s,handleStartAudioPlayback:o}=g.useMemo(()=>Ine(),[]),a=g.useMemo(()=>s(n),[n,s]),{canPlayAudio:l}=Rr(a,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:g.useMemo(()=>bi(e,{className:r,onClick:()=>{o(n)},style:{display:l?"none":"block"}}),[e,r,l,o,n]),canPlayAudio:l}}function wre({room:t,props:e}){const n=dh(t),{className:r,roomVideoPlaybackAllowedObservable:s,handleStartVideoPlayback:o}=g.useMemo(()=>One(),[]),a=g.useMemo(()=>s(n),[n,s]),{canPlayVideo:l}=Rr(a,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:g.useMemo(()=>bi(e,{className:r,onClick:()=>{o(n)},style:{display:l?"none":"block"}}),[e,r,l,o,n]),canPlayVideo:l}}function Sre(t,e={}){const n=g.useRef(null),r=g.useRef(null),s=e.minSwipeDistance??50,o=d=>{r.current=null,n.current=d.targetTouches[0].clientX},a=d=>{r.current=d.targetTouches[0].clientX},l=g.useCallback(()=>{if(!n.current||!r.current)return;const d=n.current-r.current,h=d>s,m=d<-s;h&&e.onLeftSwipe&&e.onLeftSwipe(),m&&e.onRightSwipe&&e.onRightSwipe()},[s,e]);g.useEffect(()=>{const d=t.current;return d&&(d.addEventListener("touchstart",o,{passive:!0}),d.addEventListener("touchmove",a,{passive:!0}),d.addEventListener("touchend",l,{passive:!0})),()=>{d&&(d.removeEventListener("touchstart",o),d.removeEventListener("touchmove",a),d.removeEventListener("touchend",l))}},[t,l])}function kre({props:t}){const{dispatch:e,state:n}=q5().widget,{className:r}=g.useMemo(()=>Mne(),[]);return{mergedProps:g.useMemo(()=>bi(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function jre(t){var e,n;const r=ed(t),{className:s,mediaMutedObserver:o}=g.useMemo(()=>kne(r),[Dn(r)]);return{isMuted:Rr(o,!!((e=r.publication)!=null&&e.isMuted||(n=r.participant.getTrackPublication(r.source))!=null&&n.isMuted)),className:s}}function Cre({source:t,onChange:e,initialState:n,captureOptions:r,publishOptions:s,onDeviceError:o,...a}){var l;const d=rg(),h=(l=d?.localParticipant)==null?void 0:l.getTrackPublication(t),m=g.useRef(!1),{toggle:f,className:v,pendingObserver:y,enabledObserver:w}=g.useMemo(()=>d?xne(t,d,r,s,o):yne(),[d,t,JSON.stringify(r),s]),b=Rr(y,!1),k=Rr(w,n??!!(h!=null&&h.isEnabled));g.useEffect(()=>{e?.(k,m.current),m.current=!1},[k,e]),g.useEffect(()=>{n!==void 0&&(nt.debug("forcing initial toggle state",t,n),f(n))},[]);const j=g.useMemo(()=>bi(a,{className:v}),[a,v]),T=g.useCallback(E=>{var P;m.current=!0,f().catch(()=>m.current=!1),(P=a.onClick)==null||P.call(a,E)},[a,f]);return{toggle:f,enabled:k,pending:b,track:h,buttonProps:{...j,"aria-pressed":k,"data-lk-source":t,"data-lk-enabled":k,disabled:b,onClick:T}}}function eM(t=[Y.Source.Camera,Y.Source.Microphone,Y.Source.ScreenShare,Y.Source.ScreenShareAudio,Y.Source.Unknown],e={}){const n=dh(e.room),[r,s]=g.useState([]),[o,a]=g.useState([]),l=g.useMemo(()=>t.map(d=>L5(d)?d.source:d),[JSON.stringify(t)]);return g.useEffect(()=>{const d=Une(n,l,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:h,participants:m})=>{nt.debug("setting track bundles",h,m),s(h),a(m)});return()=>d.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),g.useMemo(()=>{if(U5(t)){const d=Nre(t,o),h=Array.from(r);return o.forEach(m=>{d.has(m.identity)&&(d.get(m.identity)??[]).forEach(f=>{if(r.find(({participant:y,publication:w})=>m.identity===y.identity&&w.source===f))return;nt.debug(`Add ${f} placeholder for participant ${m.identity}.`);const v={participant:m,source:f};h.push(v)})}),h}else return r},[r,o,t])}function Tre(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function Nre(t,e){const n=new Map;if(U5(t)){const r=t.filter(s=>s.withPlaceholder).map(s=>s.source);e.forEach(s=>{const o=s.getTrackPublications().map(l=>{var d;return(d=l.track)==null?void 0:d.source}).filter(l=>l!==void 0),a=Array.from(Tre(new Set(r),new Set(o)));a.length>0&&n.set(s.identity,a)})}return n}function Ere(t){const e=ng(),n=gS(e),r=g.useMemo(()=>n===dt.Disconnected,[n]),s=g.useMemo(()=>Ane(e,t),[e,t,r]),o=Rr(s.isSendingObservable,!1),a=Rr(s.messageObservable,[]);return{send:s.send,chatMessages:a,isSending:o}}function Pre(t={}){const[e,n]=g.useState(Gne(t.defaults,t.preventLoad??!1)),r=g.useCallback(d=>{n(h=>({...h,audioEnabled:d}))},[]),s=g.useCallback(d=>{n(h=>({...h,videoEnabled:d}))},[]),o=g.useCallback(d=>{n(h=>({...h,audioDeviceId:d}))},[]),a=g.useCallback(d=>{n(h=>({...h,videoDeviceId:d}))},[]),l=g.useCallback(d=>{n(h=>({...h,username:d}))},[]);return g.useEffect(()=>{Hne(e,t.preventSave??!1)},[e,t.preventSave]),{userChoices:e,saveAudioInputEnabled:r,saveVideoInputEnabled:s,saveAudioInputDeviceId:o,saveVideoInputDeviceId:a,saveUsername:l}}function _re(t,e={}){const n=ch(t),r=dh(e.room),s=g.useMemo(()=>mne(r,n),[r,n]);return Rr(s,n.isLocal?n.isE2EEEnabled:!!(n!=null&&n.isEncrypted))}const tM=g.forwardRef(function(t,e){const{mergedProps:n}=kre({props:t});return g.createElement("button",{ref:e,...n},t.children)}),Rre=g.forwardRef(function(t,e){const{buttonProps:n}=dre(t);return g.createElement("button",{ref:e,...n},t.children)}),Are=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},g.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),g.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),Ire=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},g.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),Ore=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...t},g.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),Mre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...t},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),pE=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),Dre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),Lre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),Ure=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),Fre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},g.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),Vre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},g.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),g.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),Bre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},g.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),g.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),$re=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),zre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),qre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...t},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("g",{opacity:.25},g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),g.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),Wre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...t},g.createElement("g",{opacity:.25},g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),g.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),nM=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),Hre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...t},g.createElement("g",{fill:"currentColor"},g.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),g.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),gE=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),Gre=t=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t},g.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},g.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),Kre=g.forwardRef(function({trackRef:t,...e},n){const r=tg(),{mergedProps:s,inFocus:o}=hre({trackRef:t??r,props:e});return g.createElement(eg.Consumer,null,a=>a!==void 0&&g.createElement("button",{ref:n,...s},e.children?e.children:o?g.createElement(Gre,null):g.createElement(Dre,null)))}),Xx=g.forwardRef(function({kind:t,initialSelection:e,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:s,exactMatch:o,track:a,requestPermissions:l,onError:d,...h},m){const f=rg(),v=g.useRef("default"),y=g.useCallback(_=>{f&&f.emit(oe.MediaDevicesError,_),d?.(_)},[f,d]),{devices:w,activeDeviceId:b,setActiveMediaDevice:k,className:j}=gre({kind:t,room:f,track:a,requestPermissions:l,onError:y});g.useEffect(()=>{e!==void 0&&k(e)},[k]),g.useEffect(()=>{typeof r=="function"&&r(w)},[r,w]),g.useEffect(()=>{b!==v.current&&n?.(b),v.current=b},[b]);const T=async _=>{try{await k(_,{exact:o??!0})}catch(I){if(I instanceof Error)s?.(I);else throw I}},E=g.useMemo(()=>to(h,{className:j},{className:"lk-list"}),[j,h]),P=!!w.find(_=>_.label.toLowerCase().startsWith("default"));function N(_,I,M){return _===I||!P&&M===0&&I==="default"}return g.createElement("ul",{ref:m,...E},w.map((_,I)=>g.createElement("li",{key:_.deviceId,id:_.deviceId,"data-lk-active":N(_.deviceId,b,I),"aria-selected":N(_.deviceId,b,I),role:"option"},g.createElement("button",{className:"lk-button",onClick:()=>T(_.deviceId)},_.label))))}),Jre=g.forwardRef(function({label:t,...e},n){const r=ng(),{mergedProps:s,canPlayAudio:o}=bre({room:r,props:e}),{mergedProps:a,canPlayVideo:l}=wre({room:r,props:s}),{style:d,...h}=a;return d.display=o&&l?"none":"block",g.createElement("button",{ref:n,style:d,...h},t??`Start ${o?"Video":"Audio"}`)});function rM(t,e){switch(t){case Y.Source.Microphone:return e?g.createElement(Bre,null):g.createElement(Vre,null);case Y.Source.Camera:return e?g.createElement(Ire,null):g.createElement(Are,null);case Y.Source.ScreenShare:return e?g.createElement(Hre,null):g.createElement(nM,null);default:return}}function Yre(t){switch(t){case Ns.Excellent:return g.createElement($re,null);case Ns.Good:return g.createElement(zre,null);case Ns.Poor:return g.createElement(qre,null);default:return g.createElement(Wre,null)}}const Qx=g.forwardRef(function({showIcon:t,...e},n){const{buttonProps:r,enabled:s}=Cre(e),[o,a]=g.useState(!1);return g.useEffect(()=>{a(!0)},[]),o&&g.createElement("button",{ref:n,...r},(t??!0)&&rM(e.source,s),e.children)}),Xre=g.forwardRef(function(t,e){const{className:n,quality:r}=cre(t),s=g.useMemo(()=>({...to(t,{className:n}),"data-lk-quality":r}),[r,t,n]);return g.createElement("div",{ref:e,...s},t.children??Yre(r))}),vE=g.forwardRef(function({participant:t,...e},n){const r=ch(t),{className:s,infoObserver:o}=g.useMemo(()=>jne(r),[r]),{identity:a,name:l}=Rr(o,{name:r.name,identity:r.identity,metadata:r.metadata}),d=g.useMemo(()=>to(e,{className:s,"data-lk-participant-name":l}),[e,s,l]);return g.createElement("span",{ref:n,...d},l!==""?l:a,e.children)}),Qre=g.forwardRef(function({trackRef:t,show:e="always",...n},r){const{className:s,isMuted:o}=jre(t),a=e==="always"||e==="muted"&&o||e==="unmuted"&&!o,l=g.useMemo(()=>to(n,{className:s}),[s,n]);return a?g.createElement("div",{ref:r,...l,"data-lk-muted":o},n.children??rM(t.source,!o)):null}),Zre=t=>g.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},g.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),g.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function sM(t,e={}){const[n,r]=g.useState(B0(t)),[s,o]=g.useState(n?.isMuted),[a,l]=g.useState(n?.isSubscribed),[d,h]=g.useState(n?.track),[m,f]=g.useState("landscape"),v=g.useRef(),{className:y,trackObserver:w}=g.useMemo(()=>one(t),[t.participant.sid??t.participant.identity,t.source,jn(t)&&t.publication.trackSid]);return g.useEffect(()=>{const b=w.subscribe(k=>{nt.debug("update track",k),r(k),o(k?.isMuted),l(k?.isSubscribed),h(k?.track)});return()=>b?.unsubscribe()},[w]),g.useEffect(()=>{var b,k;return d&&(v.current&&d.detach(v.current),(b=e.element)!=null&&b.current&&!(t.participant.isLocal&&d?.kind==="audio")&&d.attach(e.element.current)),v.current=(k=e.element)==null?void 0:k.current,()=>{v.current&&d?.detach(v.current)}},[d,e.element]),g.useEffect(()=>{var b,k;if(typeof((b=n?.dimensions)==null?void 0:b.width)=="number"&&typeof((k=n?.dimensions)==null?void 0:k.height)=="number"){const j=n.dimensions.width>n.dimensions.height?"landscape":"portrait";f(j)}},[n]),{publication:n,isMuted:s,isSubscribed:a,track:d,elementProps:to(e.props,{className:y,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":m}})}}var Zx,xE;function ese(){if(xE)return Zx;xE=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,d=typeof Vm=="object"&&Vm&&Vm.Object===Object&&Vm,h=typeof self=="object"&&self&&self.Object===Object&&self,m=d||h||Function("return this")(),f=Object.prototype,v=f.toString,y=Math.max,w=Math.min,b=function(){return m.Date.now()};function k(N,_,I){var M,O,L,D,A,Z,se=0,fe=!1,ae=!1,de=!0;if(typeof N!="function")throw new TypeError(t);_=P(_)||0,j(I)&&(fe=!!I.leading,ae="maxWait"in I,L=ae?y(P(I.maxWait)||0,_):L,de="trailing"in I?!!I.trailing:de);function U(re){var ge=M,_e=O;return M=O=void 0,se=re,D=N.apply(_e,ge),D}function G(re){return se=re,A=setTimeout(ee,_),fe?U(re):D}function le(re){var ge=re-Z,_e=re-se,ve=_-ge;return ae?w(ve,L-_e):ve}function $(re){var ge=re-Z,_e=re-se;return Z===void 0||ge>=_||ge<0||ae&&_e>=L}function ee(){var re=b();if($(re))return he(re);A=setTimeout(ee,le(re))}function he(re){return A=void 0,de&&M?U(re):(M=O=void 0,D)}function B(){A!==void 0&&clearTimeout(A),se=0,M=Z=O=A=void 0}function te(){return A===void 0?D:he(b())}function Te(){var re=b(),ge=$(re);if(M=arguments,O=this,Z=re,ge){if(A===void 0)return G(Z);if(ae)return A=setTimeout(ee,_),U(Z)}return A===void 0&&(A=setTimeout(ee,_)),D}return Te.cancel=B,Te.flush=te,Te}function j(N){var _=typeof N;return!!N&&(_=="object"||_=="function")}function T(N){return!!N&&typeof N=="object"}function E(N){return typeof N=="symbol"||T(N)&&v.call(N)==n}function P(N){if(typeof N=="number")return N;if(E(N))return e;if(j(N)){var _=typeof N.valueOf=="function"?N.valueOf():N;N=j(_)?_+"":_}if(typeof N!="string")return N===0?N:+N;N=N.replace(r,"");var I=o.test(N);return I||a.test(N)?l(N.slice(2),I?2:8):s.test(N)?e:+N}return Zx=k,Zx}var tse=ese();const yE=f5(tse);function nse(t){const e=g.useRef(t);e.current=t,g.useEffect(()=>()=>{e.current()},[])}function rse(t,e=500,n){const r=g.useRef();nse(()=>{r.current&&r.current.cancel()});const s=g.useMemo(()=>{const o=yE(t,e,n),a=(...l)=>o(...l);return a.cancel=()=>{o.cancel()},a.isPending=()=>!!r.current,a.flush=()=>o.flush(),a},[t,e,n]);return g.useEffect(()=>{r.current=yE(t,e,n)},[t,e,n]),s}function sse(t,e,n){const r=((h,m)=>h===m),s=t instanceof Function?t():t,[o,a]=g.useState(s),l=g.useRef(s),d=rse(a,e,n);return r(l.current,s)||(d(s),l.current=s),[o,d]}function ise({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:o}={}){var a;const[l,d]=g.useState(null),[h,m]=g.useState(()=>({isIntersecting:s,entry:void 0})),f=g.useRef();f.current=o;const v=((a=h.entry)==null?void 0:a.isIntersecting)&&r;g.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||v)return;const b=new IntersectionObserver(k=>{const j=Array.isArray(b.thresholds)?b.thresholds:[b.thresholds];k.forEach(T=>{const E=T.isIntersecting&&j.some(P=>T.intersectionRatio>=P);m({isIntersecting:E,entry:T}),f.current&&f.current(E,T)})},{threshold:t,root:e,rootMargin:n});return b.observe(l),()=>{b.disconnect()}},[l,JSON.stringify(t),e,n,v,r]);const y=g.useRef(null);g.useEffect(()=>{var b;!l&&(b=h.entry)!=null&&b.target&&!r&&!v&&y.current!==h.entry.target&&(y.current=h.entry.target,m({isIntersecting:s,entry:void 0}))},[l,h.entry,r,v,s]);const w=[d,!!h.isIntersecting,h.entry];return w.ref=w[0],w.isIntersecting=w[1],w.entry=w[2],w}const ose=g.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:r,manageSubscription:s,...o},a){const l=ed(r),d=g.useRef(null);g.useImperativeHandle(a,()=>d.current);const h=ise({root:d.current}),[m]=sse(h,3e3);g.useEffect(()=>{s&&l.publication instanceof Kf&&m?.isIntersecting===!1&&h?.isIntersecting===!1&&l.publication.setSubscribed(!1)},[m,l,s]),g.useEffect(()=>{s&&l.publication instanceof Kf&&h?.isIntersecting===!0&&l.publication.setSubscribed(!0)},[h,l,s]);const{elementProps:f,publication:v,isSubscribed:y}=sM(l,{element:d,props:o});g.useEffect(()=>{n?.(!!y)},[y,n]);const w=b=>{e?.(b),t?.({participant:l?.participant,track:v})};return g.createElement("video",{ref:d,...f,muted:!0,onClick:w})}),iM=g.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...r},s){const o=ed(t),a=g.useRef(null);g.useImperativeHandle(s,()=>a.current);const{elementProps:l,isSubscribed:d,track:h,publication:m}=sM(o,{element:a,props:r});return g.useEffect(()=>{e?.(!!d)},[d,e]),g.useEffect(()=>{h===void 0||n===void 0||(h instanceof ZO?h.setVolume(n):nt.warn("Volume can only be set on remote audio tracks."))},[n,h]),g.useEffect(()=>{m===void 0||r.muted===void 0||(m instanceof Kf?m.setEnabled(!r.muted):nt.warn("Can only call setEnabled on remote track publications."))},[r.muted,m,h]),g.createElement("audio",{ref:a,...l})});function ase(t){const e=!!H5();return t.participant&&!e?g.createElement(W5.Provider,{value:t.participant},t.children):g.createElement(g.Fragment,null,t.children)}function lse(t){const e=!!tg();return t.trackRef&&!e?g.createElement(fS.Provider,{value:t.trackRef},t.children):g.createElement(g.Fragment,null,t.children)}const $0=g.forwardRef(function({trackRef:t,children:e,onParticipantClick:n,disableSpeakingIndicator:r,...s},o){var a,l;const d=ed(t),{elementProps:h}=xre({htmlProps:s,disableSpeakingIndicator:r,onParticipantClick:n,trackRef:d}),m=_re(d.participant),f=lh(),v=(a=Xne())==null?void 0:a.autoSubscription,y=g.useCallback(w=>{d.source&&!w&&f&&f.pin.dispatch&&I5(d,f.pin.state)&&f.pin.dispatch({msg:"clear_pin"})},[d,f]);return g.createElement("div",{ref:o,style:{position:"relative"},...h},g.createElement(lse,{trackRef:d},g.createElement(ase,{participant:d.participant},e??g.createElement(g.Fragment,null,jn(d)&&(((l=d.publication)==null?void 0:l.kind)==="video"||d.source===Y.Source.Camera||d.source===Y.Source.ScreenShare)?g.createElement(ose,{trackRef:d,onSubscriptionStatusChanged:y,manageSubscription:v}):jn(d)&&g.createElement(iM,{trackRef:d,onSubscriptionStatusChanged:y}),g.createElement("div",{className:"lk-participant-placeholder"},g.createElement(Zre,null)),g.createElement("div",{className:"lk-participant-metadata"},g.createElement("div",{className:"lk-participant-metadata-item"},d.source===Y.Source.Camera?g.createElement(g.Fragment,null,m&&g.createElement(Fre,{style:{marginRight:"0.25rem"}}),g.createElement(Qre,{trackRef:{participant:d.participant,source:Y.Source.Microphone},show:"muted"}),g.createElement(vE,null)):g.createElement(g.Fragment,null,g.createElement(nM,{style:{marginRight:"0.25rem"}}),g.createElement(vE,null,"'s screen"))),g.createElement(Xre,{className:"lk-participant-metadata-item"}))),g.createElement(Kre,{trackRef:d}))))});function cse(t){const e=to(t,{className:"lk-focus-layout"});return g.createElement("div",{...e},t.children)}function dse({trackRef:t,...e}){return g.createElement($0,{trackRef:t,...e})}function oM({tracks:t,...e}){return g.createElement(g.Fragment,null,t.map(n=>g.createElement(fS.Provider,{value:n,key:Dn(n)},Y5(e.children))))}function use({totalPageCount:t,nextPage:e,prevPage:n,currentPage:r,pagesContainer:s}){const[o,a]=g.useState(!1);return g.useEffect(()=>{let l;return s&&(l=Fne(s.current,2e3).subscribe(a)),()=>{l&&l.unsubscribe()}},[s]),g.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":o},g.createElement("button",{className:"lk-button",onClick:n},g.createElement(pE,null)),g.createElement("span",{className:"lk-pagination-count"},`${r} of ${t}`),g.createElement("button",{className:"lk-button",onClick:e},g.createElement(pE,null)))}const hse=g.forwardRef(function({totalPageCount:t,currentPage:e},n){const r=new Array(t).fill("").map((s,o)=>o+1===e?g.createElement("span",{"data-lk-active":!0,key:o}):g.createElement("span",{key:o}));return g.createElement("div",{ref:n,className:"lk-pagination-indicator"},r)});function mse({tracks:t,...e}){const n=g.createRef(),r=g.useMemo(()=>to(e,{className:"lk-grid-layout"}),[e]),{layout:s}=mre(n,t.length),o=vre(s.maxTiles,t);return Sre(n,{onLeftSwipe:o.nextPage,onRightSwipe:o.prevPage}),g.createElement("div",{ref:n,"data-lk-pagination":o.totalPageCount>1,...r},g.createElement(oM,{tracks:o.tracks},e.children),t.length>s.maxTiles&&g.createElement(g.Fragment,null,g.createElement(hse,{totalPageCount:o.totalPageCount,currentPage:o.currentPage}),g.createElement(use,{pagesContainer:n,...o})))}const fse=130,pse=140,gse=1,aM=16/10,vse=(1-aM)*-1;function xse({tracks:t,orientation:e,...n}){const r=g.useRef(null),[s,o]=g.useState(0),{width:a,height:l}=Q5(r),d=e||(l>=a?"vertical":"horizontal"),h=d==="vertical"?Math.max(a*vse,fse):Math.max(l*aM,pse),m=Ote(),f=Math.max(d==="vertical"?(l-m)/h:(a-m)/h,gse);let v=Math.round(f);Math.abs(f-s)<.5?v=Math.round(s):s!==f&&o(f);const y=Z5(t,v);return g.useLayoutEffect(()=>{r.current&&(r.current.dataset.lkOrientation=d,r.current.style.setProperty("--lk-max-visible-tiles",v.toString()))},[v,d]),g.createElement("aside",{key:d,className:"lk-carousel",ref:r,...n},g.createElement(oM,{tracks:y},n.children))}function yse({value:t,onPinChange:e,onWidgetChange:n,children:r}){const s=Yne(t);return g.useEffect(()=>{nt.debug("PinState Updated",{state:s.pin.state}),e&&s.pin.state&&e(s.pin.state)},[s.pin.state,e]),g.useEffect(()=>{nt.debug("Widget Updated",{widgetState:s.widget.state}),n&&s.widget.state&&n(s.widget.state)},[n,s.widget.state]),g.createElement(eg.Provider,{value:s},r)}function vS({volume:t,muted:e}){const n=eM([Y.Source.Microphone,Y.Source.ScreenShareAudio,Y.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(r=>!r.participant.isLocal&&r.publication.kind===Y.Kind.Audio);return g.createElement("div",{style:{display:"none"}},n.map(r=>g.createElement(iM,{key:Dn(r),trackRef:r,volume:t,muted:e})))}function bse(t){const e=g.useMemo(()=>to(t,{className:"lk-toast"}),[t]);return g.createElement("div",{...e},t.children)}function wse(t){const[e,n]=g.useState(void 0),r=gS(t.room);return g.useEffect(()=>{switch(r){case dt.Reconnecting:n(g.createElement(g.Fragment,null,g.createElement(gE,{className:"lk-spinner"})," Reconnecting"));break;case dt.Connecting:n(g.createElement(g.Fragment,null,g.createElement(gE,{className:"lk-spinner"})," Connecting"));break;case dt.Disconnected:n(g.createElement(g.Fragment,null,"Disconnected"));break;default:n(void 0);break}},[r]),e?g.createElement(bse,{className:"lk-toast-connection-state"},e):g.createElement(g.Fragment,null)}const Sse=g.forwardRef(function({entry:t,hideName:e=!1,hideTimestamp:n=!1,messageFormatter:r,...s},o){var a,l,d,h;const m=g.useMemo(()=>r?r(t.message):t.message,[t.message,r]),f=!!t.editTimestamp,v=new Date(t.timestamp),y=typeof navigator<"u"?navigator.language:"en-US",w=((a=t.from)==null?void 0:a.name)??((l=t.from)==null?void 0:l.identity);return g.createElement("li",{ref:o,className:"lk-chat-entry",title:v.toLocaleTimeString(y,{timeStyle:"full"}),"data-lk-message-origin":(d=t.from)!=null&&d.isLocal?"local":"remote",...s},(!n||!e||f)&&g.createElement("span",{className:"lk-meta-data"},!e&&g.createElement("strong",{className:"lk-participant-name"},w),(!n||f)&&g.createElement("span",{className:"lk-timestamp"},f&&"edited ",v.toLocaleTimeString(y,{timeStyle:"short"}))),g.createElement("span",{className:"lk-message-body"},m),g.createElement("span",{className:"lk-message-attachements"},(h=t.attachedFiles)==null?void 0:h.map(b=>b.type.startsWith("image/")&&g.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:b.name,src:URL.createObjectURL(b),alt:b.name}))))});function kse({messageFormatter:t,messageDecoder:e,messageEncoder:n,channelTopic:r,...s}){const o=g.useRef(null),a=g.useRef(null),l=g.useMemo(()=>({messageDecoder:e,messageEncoder:n,channelTopic:r}),[e,n,r]),{chatMessages:d,send:h,isSending:m}=Ere(l),f=lh(),v=g.useRef(0);async function y(w){w.preventDefault(),a.current&&a.current.value.trim()!==""&&(await h(a.current.value),a.current.value="",a.current.focus())}return g.useEffect(()=>{var w;o&&((w=o.current)==null||w.scrollTo({top:o.current.scrollHeight}))},[o,d]),g.useEffect(()=>{var w,b,k,j,T;if(!f||d.length===0)return;if((w=f.widget.state)!=null&&w.showChat&&d.length>0&&v.current!==((b=d[d.length-1])==null?void 0:b.timestamp)){v.current=(k=d[d.length-1])==null?void 0:k.timestamp;return}const E=d.filter(N=>!v.current||N.timestamp>v.current).length,{widget:P}=f;E>0&&((j=P.state)==null?void 0:j.unreadMessages)!==E&&((T=P.dispatch)==null||T.call(P,{msg:"unread_msg",count:E}))},[d,f?.widget]),g.createElement("div",{...s,className:"lk-chat"},g.createElement("div",{className:"lk-chat-header"},"Messages",f&&g.createElement(tM,{className:"lk-close-button"},g.createElement(Ore,null))),g.createElement("ul",{className:"lk-list lk-chat-messages",ref:o},s.children?d.map((w,b)=>Y5(s.children,{entry:w,key:w.id??b,messageFormatter:t})):d.map((w,b,k)=>{const j=b>=1&&k[b-1].from===w.from,T=b>=1&&w.timestamp-k[b-1].timestamp<6e4;return g.createElement(Sse,{key:w.id??b,hideName:j,hideTimestamp:j===!1?!1:T,entry:w,messageFormatter:t})})),g.createElement("form",{className:"lk-chat-form",onSubmit:y},g.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:m,ref:a,type:"text",placeholder:"Enter a message...",onInput:w=>w.stopPropagation(),onKeyDown:w=>w.stopPropagation(),onKeyUp:w=>w.stopPropagation()}),g.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:m},"Send")))}function bE({kind:t,initialSelection:e,onActiveDeviceChange:n,tracks:r,requestPermissions:s=!1,...o}){const[a,l]=g.useState(!1),[d,h]=g.useState([]),[m,f]=g.useState(!0),[v,y]=g.useState(s),w=(T,E)=>{nt.debug("handle device change"),l(!1),n?.(T,E)},b=g.useRef(null),k=g.useRef(null);g.useLayoutEffect(()=>{a&&y(!0)},[a]),g.useLayoutEffect(()=>{let T;return b.current&&k.current&&(d||m)&&(T=Dte(b.current,k.current,(E,P)=>{k.current&&Object.assign(k.current.style,{left:`${E}px`,top:`${P}px`})})),f(!1),()=>{T?.()}},[b,k,d,m]);const j=g.useCallback(T=>{k.current&&T.target!==b.current&&a&&Lte(k.current,T)&&l(!1)},[a,k,b]);return g.useEffect(()=>(document.addEventListener("click",j),()=>{document.removeEventListener("click",j)}),[j]),g.createElement(g.Fragment,null,g.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":a,...o,onClick:()=>l(!a),ref:b},o.children),!o.disabled&&g.createElement("div",{className:"lk-device-menu",ref:k,style:{visibility:a?"visible":"hidden"}},t?g.createElement(Xx,{initialSelection:e,onActiveDeviceChange:T=>w(t,T),onDeviceListChange:h,kind:t,track:r?.[t],requestPermissions:v}):g.createElement(g.Fragment,null,g.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),g.createElement(Xx,{kind:"audioinput",onActiveDeviceChange:T=>w("audioinput",T),onDeviceListChange:h,track:r?.audioinput,requestPermissions:v}),g.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),g.createElement(Xx,{kind:"videoinput",onActiveDeviceChange:T=>w("videoinput",T),onDeviceListChange:h,track:r?.videoinput,requestPermissions:v}))))}function jse(){g.useEffect(()=>{ere()},[])}function Cse({props:t}){const{dispatch:e,state:n}=q5().widget,r="lk-button lk-settings-toggle";return{mergedProps:g.useMemo(()=>bi(t,{className:r,onClick:()=>{e&&e({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[t,r,e,n])}}const Tse=g.forwardRef(function(t,e){const{mergedProps:n}=Cse({props:t});return g.createElement("button",{ref:e,...n},t.children)}),Nse=t=>{switch(t){case Y.Source.Camera:return 1;case Y.Source.Microphone:return 2;case Y.Source.ScreenShare:return 3;default:return 0}};function Ese({variation:t,controls:e,saveUserChoices:n=!0,onDeviceError:r,...s}){var o;const[a,l]=g.useState(!1),d=lh();g.useEffect(()=>{var O,L;((O=d?.widget.state)==null?void 0:O.showChat)!==void 0&&l((L=d?.widget.state)==null?void 0:L.showChat)},[(o=d?.widget.state)==null?void 0:o.showChat]);const h=lre(`(max-width: ${a?1e3:760}px)`)?"minimal":"verbose";t??(t=h);const m={leave:!0,...e},f=pre();if(!f)m.camera=!1,m.chat=!1,m.microphone=!1,m.screenShare=!1;else{const O=L=>f.canPublish&&(f.canPublishSources.length===0||f.canPublishSources.includes(Nse(L)));m.camera??(m.camera=O(Y.Source.Camera)),m.microphone??(m.microphone=O(Y.Source.Microphone)),m.screenShare??(m.screenShare=O(Y.Source.ScreenShare)),m.chat??(m.chat=f.canPublishData&&e?.chat)}const v=g.useMemo(()=>t==="minimal"||t==="verbose",[t]),y=g.useMemo(()=>t==="textOnly"||t==="verbose",[t]),w=zte(),[b,k]=g.useState(!1),j=g.useCallback(O=>{k(O)},[k]),T=to({className:"lk-control-bar"},s),{saveAudioInputEnabled:E,saveVideoInputEnabled:P,saveAudioInputDeviceId:N,saveVideoInputDeviceId:_}=Pre({preventSave:!n}),I=g.useCallback((O,L)=>L?E(O):null,[E]),M=g.useCallback((O,L)=>L?P(O):null,[P]);return g.createElement("div",{...T},m.microphone&&g.createElement("div",{className:"lk-button-group"},g.createElement(Qx,{source:Y.Source.Microphone,showIcon:v,onChange:I,onDeviceError:O=>r?.({source:Y.Source.Microphone,error:O})},y&&"Microphone"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(bE,{kind:"audioinput",onActiveDeviceChange:(O,L)=>N(L??"default")}))),m.camera&&g.createElement("div",{className:"lk-button-group"},g.createElement(Qx,{source:Y.Source.Camera,showIcon:v,onChange:M,onDeviceError:O=>r?.({source:Y.Source.Camera,error:O})},y&&"Camera"),g.createElement("div",{className:"lk-button-group-menu"},g.createElement(bE,{kind:"videoinput",onActiveDeviceChange:(O,L)=>_(L??"default")}))),m.screenShare&&w&&g.createElement(Qx,{source:Y.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:j,onDeviceError:O=>r?.({source:Y.Source.ScreenShare,error:O})},y&&(b?"Stop screen share":"Share screen")),m.chat&&g.createElement(tM,null,v&&g.createElement(Mre,null),y&&"Chat"),m.settings&&g.createElement(Tse,null,v&&g.createElement(Lre,null),y&&"Settings"),m.leave&&g.createElement(Rre,null,v&&g.createElement(Ure,null),y&&"Leave"),g.createElement(Jre,null))}function lM({chatMessageFormatter:t,chatMessageDecoder:e,chatMessageEncoder:n,SettingsComponent:r,...s}){var o,a;const[l,d]=g.useState({showChat:!1,unreadMessages:0,showSettings:!1}),h=g.useRef(null),m=eM([{source:Y.Source.Camera,withPlaceholder:!0},{source:Y.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[oe.ActiveSpeakersChanged],onlySubscribed:!1}),f=k=>{nt.debug("updating widget state",k),d(k)},v=Jne(),y=m.filter(jn).filter(k=>k.publication.source===Y.Source.ScreenShare),w=(o=yre(v))==null?void 0:o[0],b=m.filter(k=>!Ate(k,w));return g.useEffect(()=>{var k,j,T,E,P,N;if(y.some(_=>_.publication.isSubscribed)&&h.current===null?(nt.debug("Auto set screen share focus:",{newScreenShareTrack:y[0]}),(j=(k=v.pin).dispatch)==null||j.call(k,{msg:"set_pin",trackReference:y[0]}),h.current=y[0]):h.current&&!y.some(_=>{var I,M;return _.publication.trackSid===((M=(I=h.current)==null?void 0:I.publication)==null?void 0:M.trackSid)})&&(nt.debug("Auto clearing screen share focus."),(E=(T=v.pin).dispatch)==null||E.call(T,{msg:"clear_pin"}),h.current=null),w&&!jn(w)){const _=m.find(I=>I.participant.identity===w.participant.identity&&I.source===w.source);_!==w&&jn(_)&&((N=(P=v.pin).dispatch)==null||N.call(P,{msg:"set_pin",trackReference:_}))}},[y.map(k=>`${k.publication.trackSid}_${k.publication.isSubscribed}`).join(),(a=w?.publication)==null?void 0:a.trackSid,m]),jse(),g.createElement("div",{className:"lk-video-conference",...s},Mte()&&g.createElement(yse,{value:v,onWidgetChange:f},g.createElement("div",{className:"lk-video-conference-inner"},w?g.createElement("div",{className:"lk-focus-layout-wrapper"},g.createElement(cse,null,g.createElement(xse,{tracks:b},g.createElement($0,null)),w&&g.createElement(dse,{trackRef:w}))):g.createElement("div",{className:"lk-grid-layout-wrapper"},g.createElement(mse,{tracks:m},g.createElement($0,null))),g.createElement(Ese,{controls:{chat:!0,settings:!!r}})),g.createElement(kse,{style:{display:l.showChat?"grid":"none"},messageFormatter:t,messageEncoder:n,messageDecoder:e}),r&&g.createElement("div",{className:"lk-settings-menu-modal",style:{display:l.showSettings?"block":"none"}},g.createElement(r,null))),g.createElement(vS,null),g.createElement(wse,null))}function Pse({liveId:t,userId:e,userName:n,onDisconnect:r}){const[s,o]=g.useState(null),[a,l]=g.useState(null),[d,h]=g.useState(!0),[m,f]=g.useState(null),[v,y]=g.useState(null);g.useEffect(()=>{w()},[t,e]);async function w(){const k=await ww();k.success&&k.stream?(Sw(k.stream),console.log("✅ Permissão da câmera concedida!"),b()):(y(k.error||"Erro ao acessar câmera"),h(!1),K.error("Permissão da câmera necessária",{description:k.error}))}async function b(){try{h(!0),f(null),console.log("🎥 Solicitando token de broadcaster...",{liveId:t,userId:e,userName:n});const k=await fetch(`https://${el}.supabase.co/functions/v1/make-server-0ea22bba/livekit/broadcaster-token`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Gc}`},body:JSON.stringify({liveId:t,userId:e,userName:n})}),j=await k.json();if(!k.ok||!j.configured)throw new Error(j.error||"Failed to get broadcaster token");console.log("✅ Token de broadcaster recebido!"),o(j.token),l(j.wsUrl),K.success("Conectado ao LiveKit! 🎥",{description:"Iniciando transmissão profissional HD..."})}catch(k){console.error("❌ Error fetching token:",k),f(k.message),K.error("Erro ao conectar ao LiveKit",{description:k.message})}finally{h(!1)}}return v?i.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-900 to-black rounded-lg relative",children:i.jsx(bw,{error:v,onRetry:w})}):d?i.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-900 to-black rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx(or,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),i.jsx("p",{className:"text-lg mb-2",children:"Conectando ao servidor LiveKit..."}),i.jsx("p",{className:"text-sm text-white/60",children:"Preparando transmissão profissional"})]})}):m||!s||!a?i.jsx("div",{className:"aspect-video bg-gradient-to-br from-red-900 to-black rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white px-6 max-w-md",children:[i.jsx(Jt,{className:"h-16 w-16 mx-auto mb-4 text-red-400"}),i.jsx("h3",{className:"text-xl mb-2",children:"Erro na conexão com LiveKit"}),i.jsx("p",{className:"text-sm text-white/70 mb-4",children:m||"Token inválido. Verifique se o LiveKit está configurado."}),i.jsxs("div",{className:"bg-black/40 rounded-lg p-4 mb-4 text-left",children:[i.jsx("p",{className:"text-xs text-white/50 mb-2",children:"Para configurar o LiveKit:"}),i.jsxs("ol",{className:"text-xs text-white/70 space-y-1 list-decimal list-inside",children:[i.jsx("li",{children:"Crie conta em cloud.livekit.io"}),i.jsx("li",{children:"Gere API keys no dashboard"}),i.jsx("li",{children:"Configure os secrets no Supabase"})]})]}),i.jsx(q,{onClick:b,variant:"outline",className:"bg-white/10 border-white/20",children:"Tentar Novamente"})]})}):i.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[i.jsx("div",{className:"absolute top-4 left-4 z-50",children:i.jsxs(Se,{className:"bg-red-500 text-white px-4 py-2 shadow-2xl shadow-red-500/50 border-0",children:[i.jsx(In,{className:"h-4 w-4 mr-2 animate-pulse"}),i.jsx("span",{className:"font-bold",children:"TRANSMITINDO AO VIVO HD"})]})}),i.jsxs(X5,{token:s,serverUrl:a,connect:!0,audio:!0,video:!0,onDisconnected:r,onError:k=>{console.error("❌ Erro no LiveKit Room:",k),k.message&&(k.message.includes("permission")||k.message.includes("NotAllowed")||k.message.includes("denied"))?y("Permissão negada. Permita o acesso à câmera e microfone."):K.error("Erro na transmissão",{description:k.message||"Tente reconectar"})},className:"livekit-room-broadcaster","data-lk-theme":"default",children:[i.jsx(lM,{}),i.jsx(vS,{})]})]})}function _se({liveId:t,userId:e,userName:n}){const[r,s]=g.useState(null),[o,a]=g.useState(null),[l,d]=g.useState(!0),[h,m]=g.useState(null);g.useEffect(()=>{f()},[t,e]);async function f(){try{d(!0),m(null),console.log("👁️ Solicitando token de viewer...",{liveId:t,userId:e,userName:n});const v=await fetch(`https://${el}.supabase.co/functions/v1/make-server-0ea22bba/livekit/viewer-token`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Gc}`},body:JSON.stringify({liveId:t,userId:e,userName:n})}),y=await v.json();if(!v.ok||!y.configured)throw new Error(y.error||"Failed to get viewer token");console.log("✅ Token de viewer recebido!"),s(y.token),a(y.wsUrl),K.success("Conectado! 📺",{description:"Assistindo transmissão ao vivo em HD"})}catch(v){console.error("❌ Error fetching token:",v),m(v.message),K.error("Erro ao conectar")}finally{d(!1)}}return l?i.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-900 via-blue-900/30 to-black rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx(or,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),i.jsx("p",{className:"text-lg mb-2",children:"Conectando à transmissão..."}),i.jsx("p",{className:"text-sm text-white/60",children:"Aguarde alguns instantes"})]})}):h||!r||!o?i.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-900 to-black rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white px-6 max-w-md",children:[i.jsx(Jt,{className:"h-16 w-16 mx-auto mb-4 text-yellow-400"}),i.jsx("h3",{className:"text-xl mb-2",children:"Erro na conexão"}),i.jsx("p",{className:"text-sm text-white/70 mb-4",children:h||"Não foi possível conectar à transmissão."}),i.jsx(q,{onClick:f,variant:"outline",className:"bg-white/10 border-white/20",children:"Tentar Novamente"})]})}):i.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[i.jsx("div",{className:"absolute top-4 left-4 z-50",children:i.jsxs(Se,{className:"bg-primary text-white px-4 py-2 shadow-2xl shadow-primary/50 border-0",children:[i.jsx(is,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"font-bold",children:"ASSISTINDO AO VIVO HD"})]})}),i.jsxs(X5,{token:r,serverUrl:o,connect:!0,audio:!0,video:!0,className:"livekit-room-viewer","data-lk-theme":"default",children:[i.jsx(lM,{}),i.jsx(vS,{})]})]})}function Rse({live:t,isCreator:e,onStreamStart:n,onStreamStop:r}){const[s,o]=g.useState(!0),[a,l]=g.useState(!1),[d,h]=g.useState(!0),[m,f]=g.useState(null),[v,y]=g.useState(null),[w,b]=g.useState(null);g.useEffect(()=>{k(),j()},[]);async function k(){try{console.log("🔍 Verificando streaming...");const P=await(await fetch(`https://${el}.supabase.co/functions/v1/make-server-0ea22bba/livekit/status`,{headers:{Authorization:`Bearer ${Gc}`}})).json();y(P.configured),P.configured?console.log("✅ Streaming profissional ativado (LiveKit HD 60 FPS)"):console.log("ℹ️ Streaming básico ativado")}catch(E){console.error("❌ Erro ao verificar streaming:",E),y(!1)}}async function j(){try{const E=await Rt.getSession();E?.user&&b({id:E.user.id,name:E.user.user_metadata?.name||E.user.email,email:E.user.email})}catch(E){E.message?.includes("Failed to fetch")||E.name==="TypeError"||console.error("❌ Erro ao carregar usuário:",E)}}g.useEffect(()=>{console.log("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"),console.log("🎬 LIVE VIDEO PLAYER"),console.log("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"),console.log("📊 Dados da Live:"),console.log("   • ID:",t?.id||"❌ Sem ID"),console.log("   • Título:",t?.title||"❌ Sem título"),console.log("   • Status:",t?.status||"❌ Sem status"),console.log("   • Você é criador?",e?"✅ SIM":"❌ NÃO"),console.log("   • Viewers:",t?.viewers||0),console.log("📡 Modo de Streaming:"),console.log("   • Qualidade:",v?"✅ HD 60 FPS (LiveKit)":"✅ Padrão (WebRTC)"),console.log("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")},[t,e,v]),g.useEffect(()=>{const E=setTimeout(()=>{h(!1)},3e3);return f(E),()=>clearTimeout(E)},[d]);function T(){h(!0),m&&clearTimeout(m)}return v===null||!w?i.jsx("div",{className:"relative w-full h-full min-h-[400px] lg:min-h-[600px] bg-gradient-to-br from-gray-900 to-black flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-white",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center mx-auto mb-4 animate-pulse",children:i.jsx(In,{className:"h-8 w-8 text-primary"})}),i.jsx("p",{className:"text-white/80",children:"Inicializando player..."})]})}):v&&t?.status==="live"?(console.log("🎥 Modo HD ativado (LiveKit)"),i.jsx("div",{className:"relative w-full h-full min-h-[400px] lg:min-h-[600px] bg-black",onMouseMove:T,children:e?i.jsx(Pse,{liveId:t.id,userId:w.id,userName:w.name,onDisconnect:r}):i.jsx(_se,{liveId:t.id,userId:w.id,userName:w.name})})):(console.log("📹 Modo padrão ativado (WebRTC)"),i.jsx("div",{className:"relative w-full h-full min-h-[400px] lg:min-h-[600px] bg-black",onMouseMove:T,children:i.jsx(kJ,{liveId:t?.id,isCreator:e,isLive:t?.status==="live",onStreamStart:n,onStreamStop:r})}))}function Ase({live:t,isCreator:e}){const[n,r]=g.useState(!1),[s,o]=g.useState(!1),a={"🆔 ID da Live":t?.id||"❌ Não disponível","📝 Título":t?.title||"❌ Não disponível","🎬 Status":t?.status||"❌ Não disponível","👤 Você é criador?":e?"✅ SIM":"❌ NÃO (espectador)","🖼️ Thumbnail URL":t?.thumbnailUrl||"❌ Sem thumbnail","👥 Criador Nome":t?.creator?.name||"❌ Não disponível","📧 Criador Email":t?.creator?.email||"❌ Não disponível","👁️ Viewers":t?.viewers?.toString()||"0","💬 Chat habilitado?":t?.chatEnabled?"✅ SIM":"❌ NÃO","📝 Descrição":t?.description||"❌ Sem descrição","📅 Criado em":t?.createdAt?new Date(t.createdAt).toLocaleString("pt-BR"):"❌ Não disponível","🕐 Agendado para":t?.scheduledFor?new Date(t.scheduledFor).toLocaleString("pt-BR"):"❌ Não agendada"};function l(){const d=JSON.stringify(t,null,2);navigator.clipboard.writeText(d),o(!0),K.success("Dados copiados!",{description:"JSON completo da live copiado para área de transferência"}),setTimeout(()=>o(!1),2e3)}return n?i.jsxs(ie,{className:"fixed bottom-4 left-4 z-50 p-4 max-w-md bg-black/95 text-white border-yellow-500 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u1,{className:"h-5 w-5 text-yellow-500"}),i.jsx("h3",{className:"font-bold",children:"Debug da Live"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(q,{variant:"ghost",size:"icon",onClick:l,className:"h-8 w-8 text-white hover:bg-white/10",children:s?i.jsx($e,{className:"h-4 w-4 text-green-500"}):i.jsx(tc,{className:"h-4 w-4"})}),i.jsx(q,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"h-8 w-8 text-white hover:bg-white/10",children:i.jsx(cp,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Object.entries(a).map(([d,h])=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsxs("span",{className:"text-yellow-500 font-mono shrink-0",children:[d,":"]}),i.jsx("span",{className:"text-white/80 break-all font-mono text-xs",children:h})]},d))}),i.jsx("div",{className:"mt-4 pt-3 border-t border-white/10",children:i.jsxs("div",{className:"text-xs text-white/60 space-y-1",children:[i.jsxs("p",{children:["💡 ",i.jsx("strong",{children:"Dica:"})," Abra o Console do navegador (F12) para ver logs detalhados"]}),i.jsxs("p",{children:["🐛 Status esperado para assistir: ",i.jsx(Se,{className:"ml-1 bg-red-500",children:"live"})]}),i.jsx("p",{children:"👥 Como espectador, você deve ver o player visual"})]})})]}):i.jsxs(q,{variant:"outline",size:"sm",onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-50 bg-yellow-500/90 hover:bg-yellow-600 text-black border-yellow-600 shadow-lg",children:[i.jsx(u1,{className:"h-4 w-4 mr-2"}),"Debug Live"]})}function Ise({liveId:t,open:e,onClose:n,onLiveEnded:r}){const[s,o]=g.useState(null),[a,l]=g.useState([]),[d,h]=g.useState(""),[m,f]=g.useState(!1),[v,y]=g.useState(!0),[w,b]=g.useState(!1),[k,j]=g.useState(!1),T=g.useRef(null),E=g.useRef(null);g.useEffect(()=>{if(e&&t)return P(),N(),_(),E.current=setInterval(N,3e3),Sr.updateViewerCount(t,"join").catch(console.error),()=>{E.current&&clearInterval(E.current),Sr.updateViewerCount(t,"leave").catch(console.error)}},[e,t]),g.useEffect(()=>{D()},[a]);async function P(){y(!0);try{const{live:A}=await Sr.getLive(t);o(A);const Z=Rt.getCurrentUserId();j(A.creatorId===Z)}catch(A){console.error("❌ Erro ao carregar live:",A),K.error("Erro ao carregar live")}finally{y(!1)}}async function N(){try{const{messages:A}=await Sr.getChatMessages(t,100);l(A)}catch(A){console.error("❌ Erro ao carregar mensagens:",A)}}async function _(){try{const{isMaster:A}=await Wo.checkMasterStatus();b(A)}catch{b(!1)}}async function I(A){if(A.preventDefault(),!!d.trim())try{await Sr.sendChatMessage(t,d.trim()),h(""),await N()}catch(Z){console.error("❌ Erro ao enviar mensagem:",Z),K.error("Erro ao enviar mensagem")}}async function M(){if(confirm("Tem certeza que deseja encerrar esta live?"))try{await Sr.endLive(t),K.success("Live encerrada com sucesso!"),r?.(),n()}catch(A){console.error("❌ Erro ao encerrar live:",A),K.error("Erro ao encerrar live")}}async function O(){if(confirm("Tem certeza que deseja deletar esta live? Esta ação não pode ser desfeita."))try{await Sr.deleteLive(t),K.success("Live deletada com sucesso!"),r?.(),n()}catch(A){console.error("❌ Erro ao deletar live:",A),K.error("Erro ao deletar live")}}function L(){const A=window.location.href;navigator.clipboard.writeText(A),K.success("Link copiado!",{description:"Compartilhe esta live com seus amigos"})}function D(){T.current?.scrollIntoView({behavior:"smooth"})}return e?i.jsxs(sn,{open:e,onOpenChange:n,children:[i.jsxs(Yt,{className:`
          ${m?"max-w-full h-screen m-0 rounded-none":"max-w-6xl"}
          p-0 gap-0 overflow-hidden
        `,children:[i.jsx(on,{className:"sr-only",children:s?.title||"Live Player"}),i.jsx(Ln,{className:"sr-only",children:s?.status==="live"?`Assistindo transmissão ao vivo: ${s?.title}`:`Visualizando: ${s?.title}`}),v?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center",children:[i.jsx(In,{className:"h-12 w-12 animate-pulse text-red-500 mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando live..."})]})}):i.jsxs("div",{className:"flex flex-col lg:flex-row h-full",children:[i.jsxs("div",{className:"flex-1 bg-black relative",children:[i.jsx(q,{variant:"ghost",size:"icon",onClick:n,className:"absolute top-4 left-4 z-10 bg-black/50 hover:bg-black/70 text-white",children:i.jsx(cr,{className:"h-5 w-5"})}),s?.status==="live"&&i.jsxs(Se,{className:"absolute top-4 left-16 z-10 bg-red-500",children:[i.jsx(In,{className:"h-3 w-3 mr-1 animate-pulse"}),"AO VIVO"]}),i.jsxs("div",{className:"absolute top-4 right-4 z-10 bg-black/70 text-white px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[i.jsx(is,{className:"h-4 w-4"}),s?.viewers?.toLocaleString()||0]}),i.jsxs("div",{className:"absolute bottom-4 right-4 z-10 flex items-center gap-2",children:[i.jsx(q,{variant:"ghost",size:"icon",onClick:()=>f(!m),className:"bg-black/50 hover:bg-black/70 text-white",children:m?i.jsx(FL,{className:"h-5 w-5"}):i.jsx(PL,{className:"h-5 w-5"})}),i.jsx(q,{variant:"ghost",size:"icon",onClick:L,className:"bg-black/50 hover:bg-black/70 text-white",children:i.jsx(Uo,{className:"h-5 w-5"})}),(k||w)&&i.jsxs(gw,{children:[i.jsx(vw,{asChild:!0,children:i.jsx(q,{variant:"ghost",size:"icon",className:"bg-black/50 hover:bg-black/70 text-white",children:i.jsx(X4,{className:"h-5 w-5"})})}),i.jsxs(xw,{align:"end",children:[k&&s?.status==="live"&&i.jsxs(bc,{onClick:M,children:[i.jsx(In,{className:"h-4 w-4 mr-2"}),"Encerrar Live"]}),(k||w)&&i.jsxs(bc,{onClick:O,className:"text-destructive",children:[i.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Deletar Live"]})]})]})]}),i.jsx(Rse,{live:s,isCreator:k,onStreamStart:A=>{console.log("📹 Stream iniciado:",A)},onStreamStop:()=>{console.log("🛑 Stream parado")}}),i.jsx("div",{className:"bg-gray-900 p-4 text-white",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs(Gt,{className:"h-10 w-10 border-2 border-primary",children:[i.jsx(rn,{src:s?.creator?.photoUrl}),i.jsx(Kt,{className:"bg-primary text-primary-foreground",children:s?.creator?.name?.charAt(0)})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold",children:s?.creator?.name}),s?.description&&i.jsx("p",{className:"text-sm text-white/70 mt-1",children:s.description})]})]})})]}),i.jsxs("div",{className:"w-full lg:w-96 bg-card border-l flex flex-col h-[400px] lg:h-auto",children:[i.jsx("div",{className:"p-4 border-b",children:i.jsxs("h3",{className:"flex items-center gap-2",children:[i.jsx(du,{className:"h-5 w-5"}),"Chat ao Vivo"]})}),i.jsx(lc,{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-3",children:[a.length===0?i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(du,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Nenhuma mensagem ainda"}),i.jsx("p",{className:"text-xs",children:"Seja o primeiro a comentar!"})]}):a.map(A=>i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs(Gt,{className:"h-8 w-8",children:[i.jsx(rn,{src:A.userPhotoUrl}),i.jsx(Kt,{className:"text-xs",children:A.userName.charAt(0)})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium",children:A.userName}),i.jsx("p",{className:"text-sm text-muted-foreground break-words",children:A.message})]})]},A.id)),i.jsx("div",{ref:T})]})}),s?.chatEnabled&&s?.status==="live"?i.jsx("form",{onSubmit:I,className:"p-4 border-t",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ht,{placeholder:"Digite sua mensagem...",value:d,onChange:A=>h(A.target.value),maxLength:200}),i.jsx(q,{type:"submit",size:"icon",disabled:!d.trim(),children:i.jsx(ZL,{className:"h-4 w-4"})})]})}):i.jsx("div",{className:"p-4 border-t text-center text-sm text-muted-foreground",children:"Chat desabilitado"})]})]})]}),e&&s&&i.jsx(Ase,{live:s,isCreator:k})]}):null}const Ose="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Mse(t){const[e,n]=g.useState(!1),r=()=>{n(!0)},{src:s,alt:o,style:a,className:l,...d}=t;return e?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${l??""}`,style:a,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:Ose,alt:"Error loading image",...d,"data-original-url":s})})}):i.jsx("img",{src:s,alt:o,className:l,style:a,...d,onError:r})}function Dse(){const[t,e]=g.useState(!1),[n,r]=g.useState(null);async function s(){e(!0);const o={timestamp:new Date().toISOString(),tests:[]};try{console.log("🔍 Test 1: Verificando conectividade com API...");const{lives:a}=await Sr.getLives();o.tests.push({name:"Conectividade API",status:"success",message:`✅ API respondeu! ${a?.length||0} lives encontradas`,data:a}),console.log("✅ API OK -",a?.length||0,"lives")}catch(a){o.tests.push({name:"Conectividade API",status:"error",message:`❌ Erro: ${a.message}`,error:a}),console.error("❌ Erro na API:",a)}try{console.log("🔍 Test 2: Verificando autenticação...");const a=localStorage.getItem("volleypro_token"),l=localStorage.getItem("volleypro_user_id");a&&l?(o.tests.push({name:"Autenticação",status:"success",message:`✅ Token presente (${l.substring(0,8)}...)`,data:{hasToken:!0,userId:l.substring(0,12)+"..."}}),console.log("✅ Auth OK")):(o.tests.push({name:"Autenticação",status:"warning",message:"⚠️ Sem token no localStorage",data:{hasToken:!1}}),console.warn("⚠️ Sem token"))}catch(a){o.tests.push({name:"Autenticação",status:"error",message:`❌ Erro: ${a.message}`,error:a})}try{console.log("🔍 Test 3: Tentando criar live de teste...");const a=await Sr.createLive({title:"🧪 Live de Teste - Diagnóstico",description:"Esta é uma live automática criada para testar o sistema",thumbnailUrl:null});o.tests.push({name:"Criar Live",status:"success",message:`✅ Live criada com sucesso! ID: ${a.live.id}`,data:a.live}),console.log("✅ Live criada:",a.live.id);try{console.log("🔍 Test 4: Buscando live criada...");const l=await Sr.getLive(a.live.id.replace("live:",""));o.tests.push({name:"Buscar Live",status:"success",message:`✅ Live recuperada! Título: ${l.live.title}`,data:l.live}),console.log("✅ Live recuperada")}catch(l){o.tests.push({name:"Buscar Live",status:"error",message:`❌ Erro ao buscar: ${l.message}`,error:l}),console.error("❌ Erro ao buscar live")}}catch(a){o.tests.push({name:"Criar Live",status:"error",message:`❌ Erro ao criar: ${a.message}`,error:a}),console.error("❌ Erro ao criar live:",a)}try{console.log("🔍 Test 5: Verificando Supabase...");const{projectId:a,publicAnonKey:l}=await Xn(async()=>{const{projectId:d,publicAnonKey:h}=await Promise.resolve().then(()=>m_);return{projectId:d,publicAnonKey:h}},void 0);o.tests.push({name:"Configuração Supabase",status:"success",message:`✅ Project ID: ${a.substring(0,15)}...`,data:{projectId:a.substring(0,20)+"...",hasAnonKey:!!l}}),console.log("✅ Supabase OK")}catch(a){o.tests.push({name:"Configuração Supabase",status:"error",message:`❌ Erro: ${a.message}`,error:a})}r(o),e(!1)}return i.jsx("div",{className:"container mx-auto py-6 max-w-4xl",children:i.jsxs(ie,{className:"p-6",children:[i.jsx("h2",{className:"mb-4",children:"🔧 Diagnóstico do Sistema de Lives"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Este painel executa testes automáticos para identificar problemas no sistema de transmissões ao vivo."}),i.jsxs(q,{onClick:s,disabled:t,className:"mb-6",children:[t&&i.jsx(or,{className:"h-4 w-4 mr-2 animate-spin"}),t?"Executando testes...":"🧪 Executar Diagnóstico"]}),n&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:i.jsxs("span",{children:["Executado em: ",new Date(n.timestamp).toLocaleString()]})}),i.jsx("div",{className:"space-y-3",children:n.tests.map((o,a)=>i.jsx("div",{className:`
                    p-4 rounded-lg border-2
                    ${o.status==="success"?"border-green-500/20 bg-green-500/5":""}
                    ${o.status==="error"?"border-red-500/20 bg-red-500/5":""}
                    ${o.status==="warning"?"border-yellow-500/20 bg-yellow-500/5":""}
                  `,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"shrink-0 mt-0.5",children:[o.status==="success"&&i.jsx($4,{className:"h-5 w-5 text-green-500"}),o.status==="error"&&i.jsx(fc,{className:"h-5 w-5 text-red-500"}),o.status==="warning"&&i.jsx(Jt,{className:"h-5 w-5 text-yellow-500"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium mb-1",children:o.name}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.message}),o.data&&i.jsxs("details",{className:"text-xs",children:[i.jsx("summary",{className:"cursor-pointer text-primary hover:underline",children:"Ver detalhes técnicos"}),i.jsx("pre",{className:"mt-2 p-2 bg-muted rounded overflow-x-auto",children:JSON.stringify(o.data,null,2)})]}),o.error&&i.jsxs("details",{className:"text-xs",children:[i.jsx("summary",{className:"cursor-pointer text-destructive hover:underline",children:"Ver erro completo"}),i.jsx("pre",{className:"mt-2 p-2 bg-destructive/10 rounded overflow-x-auto text-destructive",children:JSON.stringify(o.error,null,2)})]})]})]})},a))}),i.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[i.jsx("h3",{className:"font-medium mb-2",children:"📊 Resumo"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-green-500",children:n.tests.filter(o=>o.status==="success").length}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Sucesso"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:n.tests.filter(o=>o.status==="warning").length}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Avisos"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-red-500",children:n.tests.filter(o=>o.status==="error").length}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Erros"})]})]})]})]})]})})}function Lse({isAuthenticated:t=!1,onLoginPrompt:e}){const[n,r]=g.useState([]),[s,o]=g.useState(!0),[a,l]=g.useState(!1),[d,h]=g.useState(null),[m,f]=g.useState(null),[v,y]=g.useState(!1),[w,b]=g.useState(!1);g.useEffect(()=>{k(),t&&(f(Rt.getCurrentUserId()),j())},[t]);async function k(){o(!0);try{const{lives:A}=await Sr.getLives();console.log("📺 Lives carregadas:",A?.length||0),r(A||[])}catch(A){console.error("❌ Erro ao carregar lives:",A),r([])}finally{o(!1)}}async function j(){try{const{isMaster:A}=await Wo.checkMasterStatus();y(A)}catch{y(!1)}}async function T(A,Z){if(confirm(`Tem certeza que deseja deletar a live "${Z}"?`))try{await Sr.deleteLive(A),K.success("Live deletada com sucesso!"),await k()}catch(se){console.error("❌ Erro ao deletar live:",se),K.error("Erro ao deletar live")}}function E(A){const Z=`${window.location.origin}?live=${A.id}`;navigator.clipboard.writeText(Z),K.success("Link copiado!",{description:`Compartilhe: ${A.title}`})}const P=n.filter(A=>A.status==="live"),N=n.filter(A=>A.status==="scheduled"),_=n.filter(A=>A.status==="ended"),I=["from-blue-600 via-blue-500 to-primary","from-orange-600 via-orange-500 to-secondary","from-purple-600 via-purple-500 to-pink-500","from-green-600 via-green-500 to-emerald-500"],M=["https://images.unsplash.com/photo-1664106588879-5480437fb30f?w=800&q=80","https://images.unsplash.com/photo-1758634025517-782312745372?w=800&q=80","https://images.unsplash.com/photo-1686753767878-2f5fb25e43ac?w=800&q=80","https://images.unsplash.com/photo-1760037028485-d00dd2b8f6f0?w=800&q=80"];function O(A){const Z=A.split("").reduce((se,fe)=>se+fe.charCodeAt(0),0);return M[Z%M.length]}function L(A){const Z=A.split("").reduce((se,fe)=>se+fe.charCodeAt(0),0);return I[Z%I.length]}function D({live:A}){const se=m===A.creatorId||v,fe=A.thumbnailUrl||O(A.id),ae=L(A.id);return i.jsxs(ie,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:"relative aspect-video cursor-pointer overflow-hidden",onClick:()=>h(A.id),children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${ae}`}),fe&&i.jsx("div",{className:"absolute inset-0",children:i.jsx(Mse,{src:fe,alt:A.title,className:"w-full h-full object-cover"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(In,{className:"h-20 w-20 text-white/20"})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),A.status==="live"&&i.jsxs(Se,{className:"absolute top-4 left-4 bg-red-500",children:[i.jsx(In,{className:"h-3 w-3 mr-1 animate-pulse"}),"AO VIVO"]}),A.status==="scheduled"&&i.jsxs(Se,{className:"absolute top-4 left-4",variant:"secondary",children:[i.jsx(jr,{className:"h-3 w-3 mr-1"}),"Programada"]}),A.status==="ended"&&i.jsx(Se,{className:"absolute top-4 left-4",variant:"outline",children:"Encerrada"}),A.status==="live"&&i.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-2 py-1 rounded text-sm flex items-center gap-1",children:[i.jsx(is,{className:"h-3 w-3"}),A.viewers?.toLocaleString()||0]})]}),i.jsxs(ce,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsxs(Gt,{className:"h-8 w-8 border border-primary",children:[i.jsx(rn,{src:A.creator?.photoUrl}),i.jsx(Kt,{className:"bg-primary text-primary-foreground text-xs",children:A.creator?.name?.charAt(0)})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:A.creator?.name}),A.creator?.verified&&i.jsx(Se,{variant:"outline",className:"text-xs",children:"Verificado"})]})]}),i.jsx("h3",{className:"mb-1 line-clamp-2",children:A.title}),A.description&&i.jsx("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:A.description}),A.status==="scheduled"&&A.scheduledFor&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-3",children:[i.jsx(jr,{className:"h-4 w-4"}),new Date(A.scheduledFor).toLocaleString("pt-BR")]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{className:"flex-1",onClick:()=>h(A.id),children:[i.jsx(ff,{className:"h-4 w-4 mr-2"}),A.status==="live"?"Assistir":"Ver Detalhes"]}),i.jsx(q,{variant:"outline",size:"icon",onClick:()=>E(A),children:i.jsx(Uo,{className:"h-4 w-4"})}),se&&i.jsxs(gw,{children:[i.jsx(vw,{asChild:!0,children:i.jsx(q,{variant:"outline",size:"icon",children:i.jsx(Bi,{className:"h-4 w-4"})})}),i.jsx(xw,{align:"end",children:i.jsxs(bc,{onClick:()=>T(A.id,A.title),className:"text-destructive",children:[i.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Deletar Live"]})})]})]})]})]})}return t?w?i.jsxs("div",{className:"space-y-4",children:[i.jsx(q,{variant:"outline",onClick:()=>b(!1),className:"ml-6 mt-4",children:"← Voltar para Lives"}),i.jsx(Dse,{})]}):i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h1",{className:"bg-gradient-to-r from-red-500 via-red-600 to-primary bg-clip-text text-transparent",children:"Lives"}),i.jsxs(Se,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white border-0 shadow-lg shadow-red-500/20",children:[i.jsx(In,{className:"h-3 w-3 mr-1 animate-pulse"}),"AO VIVO"]})]}),i.jsx("p",{className:"text-muted-foreground",children:"Transmissões profissionais de jogos, treinos e eventos de vôlei"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{variant:"outline",size:"sm",onClick:()=>b(!0),className:"gap-2 hidden md:flex",children:[i.jsx(L3,{className:"h-4 w-4"}),"Diagnóstico"]}),i.jsxs(q,{onClick:()=>l(!0),className:"bg-gradient-to-r from-red-500 to-red-600 hover:opacity-90 shadow-lg shadow-red-500/30",children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Iniciar Transmissão"}),i.jsx("span",{className:"sm:hidden",children:"Criar Live"})]})]})]}),i.jsxs(Ji,{defaultValue:"live",className:"space-y-6",children:[i.jsxs(Yi,{children:[i.jsxs(mt,{value:"live",children:[i.jsx(In,{className:"h-4 w-4 mr-2"}),"Ao Vivo (",P.length,")"]}),i.jsxs(mt,{value:"upcoming",children:[i.jsx(jr,{className:"h-4 w-4 mr-2"}),"Programadas (",N.length,")"]}),i.jsxs(mt,{value:"recordings",children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),"Gravações (",_.length,")"]})]}),i.jsx(ft,{value:"live",className:"space-y-4",children:s?i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(or,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando lives..."})]})}):P.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(In,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"mb-2",children:"Nenhuma live ao vivo agora"}),i.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Seja o primeiro a transmitir!"}),i.jsxs(q,{onClick:()=>l(!0),children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),"Iniciar Transmissão"]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:P.map(A=>i.jsx(D,{live:A},A.id))})}),i.jsx(ft,{value:"upcoming",className:"space-y-4",children:s?i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(or,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})}):N.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(jr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"mb-2",children:"Nenhuma live programada"}),i.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Agende uma transmissão para o futuro"}),i.jsxs(q,{onClick:()=>l(!0),children:[i.jsx(jr,{className:"h-4 w-4 mr-2"}),"Agendar Live"]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(A=>i.jsx(D,{live:A},A.id))})}),i.jsx(ft,{value:"recordings",className:"space-y-4",children:s?i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(or,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})}):_.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(js,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"mb-2",children:"Nenhuma gravação disponível"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"As transmissões encerradas aparecerão aqui"})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map(A=>i.jsx(D,{live:A},A.id))})})]}),i.jsx(ie,{className:"bg-gradient-to-br from-red-500/10 via-primary/5 to-primary/10 border-red-500/20",children:i.jsx(ce,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-red-500 to-red-600",children:i.jsx(js,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h3",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"Streaming Profissional"}),i.jsx(Se,{variant:"secondary",className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0",children:"✨ Disponível Agora"})]}),i.jsxs("p",{className:"text-muted-foreground text-sm mb-3",children:[i.jsx("strong",{children:"Transmissões em alta qualidade"})," para Fãs, Atletas e Times. Compartilhe jogos, treinos, bastidores e eventos ao vivo com qualidade profissional."]}),i.jsxs("ul",{className:"text-sm space-y-1 mb-4 text-muted-foreground",children:[i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Qualidade HD adaptativa"})," - melhor vídeo para cada conexão"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Chat ao vivo"})," - interaja com espectadores em tempo real"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Contador de visualizações"})," - veja quantas pessoas assistem"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Transmissão imediata ou agendada"})," - você escolhe quando"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Compartilhamento fácil"})," - envie para redes sociais"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs(q,{onClick:()=>l(!0),className:"bg-gradient-to-r from-red-500 to-red-600 hover:opacity-90 shadow-lg shadow-red-500/20",children:[i.jsx(In,{className:"h-4 w-4 mr-2"}),"Criar Transmissão"]}),i.jsx(Se,{variant:"outline",className:"text-xs bg-green-500/10 text-green-700 border-green-500/20",children:"🎥 Aberto para todos"}),i.jsx(Se,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-700 border-blue-500/20",children:"⚡ Streaming em tempo real"})]})]})]})})}),i.jsx(rG,{open:a,onClose:()=>l(!1),onSuccess:async()=>{await k()}}),d&&i.jsx(Ise,{liveId:d,open:!!d,onClose:()=>h(null),onLiveEnded:async()=>{await k()}})]}):i.jsx("div",{className:"container mx-auto py-12",children:i.jsx(GA,{title:"Lives ao Vivo",description:"Assista e transmita jogos, treinos e eventos de vôlei ao vivo. Crie sua própria live e compartilhe com o mundo!",onLoginClick:e})})}function Use(){const[t,e]=g.useState([]),[n,r]=g.useState(!1),[s,o]=g.useState(!1);g.useEffect(()=>{a()},[]);async function a(){try{await Rt.getSession()&&(o(!0),l())}catch{o(!1)}}async function l(){r(!0);try{const{invitations:m}=await kf.getInvitations();e(m||[])}catch(m){console.error("Error loading invitations:",m),K.error("Erro ao carregar convites")}finally{r(!1)}}async function d(m,f){try{await kf.respondToInvitation(m,f),K.success(f==="accepted"?"Convite aceito!":"Convite recusado"),l()}catch(v){console.error("Error responding to invitation:",v),K.error(v.message||"Erro ao responder convite")}}if(!s)return i.jsx("div",{className:"container mx-auto py-6",children:i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(ty,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"mb-2",children:"Convites"}),i.jsx("p",{className:"text-muted-foreground",children:"Faça login para ver seus convites"})]})})});const h=t.filter(m=>m.status==="pending");return i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{children:"Convites"}),i.jsx("p",{className:"text-muted-foreground",children:"Convites recebidos de times"})]}),i.jsxs(Se,{variant:"secondary",children:[h.length," pendentes"]})]}),n?i.jsx(ie,{children:i.jsx(ce,{className:"p-12 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"Carregando convites..."})})}):t.length===0?i.jsx(ie,{children:i.jsxs(ce,{className:"p-12 text-center",children:[i.jsx(ty,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"mb-2",children:"Nenhum convite"}),i.jsx("p",{className:"text-muted-foreground",children:"Você ainda não recebeu convites de times"})]})}):i.jsx("div",{className:"space-y-4",children:t.map(m=>i.jsxs(ie,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{children:m.teamName}),i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Enviado em ",new Date(m.createdAt).toLocaleDateString()]})]}),i.jsxs(Se,{variant:m.status==="pending"?"secondary":m.status==="accepted"?"default":"destructive",children:[m.status==="pending"&&"Pendente",m.status==="accepted"&&"Aceito",m.status==="rejected"&&"Recusado"]})]})}),m.message&&i.jsx(ce,{children:i.jsx("p",{className:"text-sm bg-muted/50 p-4 rounded-lg",children:m.message})}),m.status==="pending"&&i.jsx(ce,{className:"pt-0",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{variant:"default",className:"flex-1",onClick:()=>d(m.id,"accepted"),children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Aceitar"]}),i.jsxs(q,{variant:"outline",className:"flex-1",onClick:()=>d(m.id,"rejected"),children:[i.jsx(cr,{className:"h-4 w-4 mr-2"}),"Recusar"]})]})})]},m.id))})]})}var xS="Progress",yS=100,[Fse]=zr(xS),[Vse,Bse]=Fse(xS),cM=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=$se,...a}=t;(s||s===0)&&!wE(s)&&console.error(zse(`${s}`,"Progress"));const l=wE(s)?s:yS;r!==null&&!SE(r,l)&&console.error(qse(`${r}`,"Progress"));const d=SE(r,l)?r:null,h=sp(d)?o(d,l):void 0;return i.jsx(Vse,{scope:n,value:d,max:l,children:i.jsx(Je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":sp(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":hM(d,l),"data-value":d??void 0,"data-max":l,...a,ref:e})})});cM.displayName=xS;var dM="ProgressIndicator",uM=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Bse(dM,n);return i.jsx(Je.div,{"data-state":hM(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});uM.displayName=dM;function $se(t,e){return`${Math.round(t/e*100)}%`}function hM(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function sp(t){return typeof t=="number"}function wE(t){return sp(t)&&!isNaN(t)&&t>0}function SE(t,e){return sp(t)&&!isNaN(t)&&t<=e&&t>=0}function zse(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${yS}\`.`}function qse(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${yS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Wse=cM,Hse=uM;function ec({className:t,value:e,...n}){return i.jsx(Wse,{"data-slot":"progress",className:Pe("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:i.jsx(Hse,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}const Gse=[{id:1,question:"Qual foi o melhor jogador da última partida?",options:[{id:1,text:"João Silva - Ponteiro",votes:45},{id:2,text:"Maria Santos - Levantadora",votes:32},{id:3,text:"Pedro Costa - Líbero",votes:18},{id:4,text:"Ana Lima - Oposta",votes:25}],totalVotes:120,createdBy:"Time Vôlei SP",createdAt:"2 horas atrás",expiresAt:"em 22 horas",hasVoted:!1},{id:2,question:"Qual técnica você mais gosta de treinar?",options:[{id:1,text:"Saque",votes:67},{id:2,text:"Ataque",votes:89},{id:3,text:"Bloqueio",votes:34},{id:4,text:"Defesa",votes:45}],totalVotes:235,createdBy:"Carlos Técnico",createdAt:"1 dia atrás",expiresAt:"em 5 dias",hasVoted:!0,userVote:2},{id:3,question:"Melhor horário para treinos?",options:[{id:1,text:"Manhã (6h-9h)",votes:42},{id:2,text:"Tarde (14h-17h)",votes:58},{id:3,text:"Noite (18h-21h)",votes:91}],totalVotes:191,createdBy:"Vôlei Pro Community",createdAt:"3 dias atrás",expiresAt:"em 4 dias",hasVoted:!1}];function Kse(){const[t,e]=g.useState(Gse),[n,r]=g.useState(!1),[s,o]=g.useState(""),[a,l]=g.useState(["","","",""]),d=(m,f)=>{e(t.map(v=>v.id===m&&!v.hasVoted?{...v,hasVoted:!0,userVote:f,totalVotes:v.totalVotes+1,options:v.options.map(y=>y.id===f?{...y,votes:y.votes+1}:y)}:v))},h=()=>{if(!s.trim())return;const m=a.filter(v=>v.trim()!=="");if(m.length<2){alert("Adicione pelo menos 2 opções!");return}const f={id:t.length+1,question:s,options:m.map((v,y)=>({id:y+1,text:v,votes:0})),totalVotes:0,createdBy:"Você",createdAt:"agora",expiresAt:"em 7 dias",hasVoted:!1};e([f,...t]),r(!1),o(""),l(["","","",""])};return i.jsxs("div",{className:"container mx-auto max-w-4xl p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"flex items-center gap-2",children:[i.jsx(mc,{className:"h-8 w-8 text-primary"}),"Enquetes"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Vote e participe das discussões da comunidade"})]}),i.jsxs(sn,{open:n,onOpenChange:r,children:[i.jsx(i7,{asChild:!0,children:i.jsxs(q,{className:"bg-gradient-to-r from-primary to-[#0052cc]",children:[i.jsx(pf,{className:"h-4 w-4 mr-2"}),"Criar Enquete"]})}),i.jsxs(Yt,{className:"max-w-lg",children:[i.jsxs(fn,{children:[i.jsx(on,{children:"Criar Nova Enquete"}),i.jsx(Ln,{children:"Crie uma enquete para coletar a opinião da comunidade"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ze,{htmlFor:"question",children:"Pergunta"}),i.jsx(os,{id:"question",placeholder:"Ex: Qual foi o melhor jogador da partida?",value:s,onChange:m=>o(m.target.value),className:"mt-2"})]}),i.jsxs("div",{children:[i.jsx(ze,{children:"Opções"}),a.map((m,f)=>i.jsx(ht,{placeholder:`Opção ${f+1}`,value:m,onChange:v=>{const y=[...a];y[f]=v.target.value,l(y)},className:"mt-2"},f))]})]}),i.jsxs(Hi,{children:[i.jsx(q,{variant:"outline",onClick:()=>r(!1),children:"Cancelar"}),i.jsx(q,{onClick:h,children:"Criar Enquete"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(mc,{className:"h-8 w-8 mx-auto text-primary mb-2"}),i.jsx("div",{className:"text-2xl font-bold",children:t.length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Enquetes Ativas"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(wt,{className:"h-8 w-8 mx-auto text-secondary mb-2"}),i.jsx("div",{className:"text-2xl font-bold",children:t.reduce((m,f)=>m+f.totalVotes,0)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total de Votos"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx($e,{className:"h-8 w-8 mx-auto text-green-500 mb-2"}),i.jsx("div",{className:"text-2xl font-bold",children:t.filter(m=>m.hasVoted).length}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Você Votou"})]})})]}),i.jsx("div",{className:"space-y-4",children:t.map(m=>i.jsxs(ie,{className:"overflow-hidden",children:[i.jsx(et,{className:"bg-gradient-to-r from-primary/5 to-secondary/5",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Vt,{className:"text-lg",children:m.question}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(wt,{className:"h-4 w-4"}),m.totalVotes," votos"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Vr,{className:"h-4 w-4"}),m.createdAt]})]})]}),m.hasVoted&&i.jsxs(Se,{variant:"secondary",className:"bg-green-500",children:[i.jsx($e,{className:"h-3 w-3 mr-1"}),"Votado"]})]})}),i.jsxs(ce,{className:"p-6 space-y-3",children:[m.options.map(f=>{const v=m.totalVotes>0?Math.round(f.votes/m.totalVotes*100):0,y=m.hasVoted&&m.userVote===f.id;return i.jsx("div",{children:m.hasVoted?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:y?"font-semibold text-primary":"",children:[f.text,y&&" ✓"]}),i.jsxs("span",{className:"text-muted-foreground",children:[v,"% (",f.votes,")"]})]}),i.jsx(ec,{value:v,className:"h-2"})]}):i.jsx(q,{variant:"outline",className:"w-full justify-start hover:bg-primary/10 hover:border-primary",onClick:()=>d(m.id,f.id),children:f.text})},f.id)}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t text-sm text-muted-foreground",children:[i.jsxs("span",{children:["Por ",m.createdBy]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Vr,{className:"h-4 w-4"}),"Expira ",m.expiresAt]})]})]})]},m.id))}),t.length===0&&i.jsxs(ie,{className:"p-12 text-center",children:[i.jsx(mc,{className:"h-16 w-16 mx-auto text-muted-foreground/50 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma enquete ativa"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Seja o primeiro a criar uma enquete!"}),i.jsxs(q,{onClick:()=>r(!0),children:[i.jsx(pf,{className:"h-4 w-4 mr-2"}),"Criar Primeira Enquete"]})]})]})}const Jse=[{id:1,url:"https://images.unsplash.com/photo-1612872087720-bb876e2e67d1?w=800",caption:"Treino intenso de hoje! 💪🏐 #voleipro #treino",author:{name:"João Silva",avatar:"https://i.pravatar.cc/150?img=12",type:"athlete"},likes:234,comments:45,views:1205,createdAt:"2 horas atrás",tags:["treino","voleipro"]},{id:2,url:"https://images.unsplash.com/photo-1593766827228-8737b4534aa6?w=800",caption:"Momento épico da final! 🏆",author:{name:"Time Vôlei SP",avatar:"https://i.pravatar.cc/150?img=20",type:"team"},likes:567,comments:89,views:3420,createdAt:"5 horas atrás",tags:["final","campeonato"]},{id:3,url:"https://images.unsplash.com/photo-1587280501635-68a0e82cd5ff?w=800",caption:"Bloqueio perfeito! 🙌",author:{name:"Maria Santos",avatar:"https://i.pravatar.cc/150?img=25",type:"athlete"},likes:189,comments:23,views:890,createdAt:"1 dia atrás",tags:["bloqueio","jogada"]},{id:4,url:"https://images.unsplash.com/photo-1609710228159-0fa9bd7c0827?w=800",caption:"Time unido, time forte! 💙🧡",author:{name:"Vôlei RJ",avatar:"https://i.pravatar.cc/150?img=30",type:"team"},likes:423,comments:67,views:2100,createdAt:"2 dias atrás",tags:["time","união"]},{id:5,url:"https://images.unsplash.com/photo-1517649763962-0c623066013b?w=800",caption:"Aquecimento antes do jogo 🔥",author:{name:"Pedro Costa",avatar:"https://i.pravatar.cc/150?img=15",type:"athlete"},likes:156,comments:12,views:720,createdAt:"3 dias atrás",tags:["aquecimento","preparação"]},{id:6,url:"https://images.unsplash.com/photo-1612872087720-bb876e2e67d1?w=800&q=50",caption:"Saque potente! ⚡",author:{name:"Ana Lima",avatar:"https://i.pravatar.cc/150?img=35",type:"athlete"},likes:298,comments:34,views:1450,createdAt:"4 dias atrás",tags:["saque","potência"]}];function Yse(){const[t]=g.useState(Jse),[e,n]=g.useState(null),[r,s]=g.useState("grid"),[o,a]=g.useState("all"),l=t.filter(h=>o==="all"?!0:o==="athletes"?h.author.type==="athlete":o==="teams"?h.author.type==="team":!0),d=h=>{console.log("Curtir foto:",h)};return i.jsxs("div",{className:"container mx-auto max-w-7xl p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"flex items-center gap-2",children:[i.jsx(Nr,{className:"h-8 w-8 text-primary"}),"Fotos"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Galeria de fotos da comunidade VolleyPro"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(q,{variant:"outline",size:"sm",children:[i.jsx(dp,{className:"h-4 w-4 mr-2"}),"Upload"]}),i.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[i.jsx(q,{variant:r==="grid"?"default":"ghost",size:"sm",onClick:()=>s("grid"),className:"rounded-none",children:i.jsx(uL,{className:"h-4 w-4"})}),i.jsx(q,{variant:r==="list"?"default":"ghost",size:"sm",onClick:()=>s("list"),className:"rounded-none",children:i.jsx(wL,{className:"h-4 w-4"})})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{variant:o==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:["Todas (",t.length,")"]}),i.jsxs(q,{variant:o==="athletes"?"default":"outline",size:"sm",onClick:()=>a("athletes"),children:["Atletas (",t.filter(h=>h.author.type==="athlete").length,")"]}),i.jsxs(q,{variant:o==="teams"?"default":"outline",size:"sm",onClick:()=>a("teams"),children:["Times (",t.filter(h=>h.author.type==="team").length,")"]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(Nr,{className:"h-6 w-6 mx-auto text-primary mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.length}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Fotos"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(Es,{className:"h-6 w-6 mx-auto text-red-500 mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.reduce((h,m)=>h+m.likes,0).toLocaleString()}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Curtidas"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(Mo,{className:"h-6 w-6 mx-auto text-blue-500 mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.reduce((h,m)=>h+m.comments,0)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Comentários"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(is,{className:"h-6 w-6 mx-auto text-green-500 mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.reduce((h,m)=>h+m.views,0).toLocaleString()}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Visualizações"})]})})]}),r==="grid"?i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.map(h=>i.jsx(ie,{className:"overflow-hidden cursor-pointer group hover:shadow-xl transition-all",onClick:()=>n(h),children:i.jsxs("div",{className:"relative aspect-square",children:[i.jsx("img",{src:h.url,alt:h.caption,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 text-white",children:i.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Es,{className:"h-4 w-4"}),h.likes]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Mo,{className:"h-4 w-4"}),h.comments]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(is,{className:"h-4 w-4"}),h.views]})]})})})]})},h.id))}):i.jsx("div",{className:"space-y-4",children:l.map(h=>i.jsx(ie,{className:"overflow-hidden",children:i.jsx(ce,{className:"p-4",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("img",{src:h.url,alt:h.caption,className:"w-32 h-32 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>n(h)}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Gt,{className:"h-8 w-8",children:[i.jsx(rn,{src:h.author.avatar}),i.jsx(Kt,{children:h.author.name.substring(0,2).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:h.author.name}),i.jsx("div",{className:"text-xs text-muted-foreground",children:h.createdAt})]})]}),i.jsx(Se,{variant:"secondary",children:h.author.type==="athlete"?"🏐 Atleta":"⚡ Time"})]}),i.jsx("p",{className:"text-sm",children:h.caption}),i.jsx("div",{className:"flex gap-2",children:h.tags.map(m=>i.jsxs(Se,{variant:"outline",className:"text-xs",children:["#",m]},m))}),i.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[i.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>d(h.id),children:[i.jsx(Es,{className:"h-4 w-4 mr-1"}),h.likes]}),i.jsxs(q,{variant:"ghost",size:"sm",children:[i.jsx(Mo,{className:"h-4 w-4 mr-1"}),h.comments]}),i.jsxs(q,{variant:"ghost",size:"sm",children:[i.jsx(is,{className:"h-4 w-4 mr-1"}),h.views]}),i.jsxs(q,{variant:"ghost",size:"sm",children:[i.jsx(Uo,{className:"h-4 w-4 mr-1"}),"Compartilhar"]})]})]})]})})},h.id))}),i.jsx(sn,{open:!!e,onOpenChange:()=>n(null),children:i.jsx(Yt,{className:"max-w-4xl p-0",children:e&&i.jsxs("div",{className:"grid md:grid-cols-2",children:[i.jsx("div",{className:"bg-black flex items-center justify-center",children:i.jsx("img",{src:e.url,alt:e.caption,className:"w-full h-auto max-h-[80vh] object-contain"})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx(fn,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Gt,{children:[i.jsx(rn,{src:e.author.avatar}),i.jsx(Kt,{children:e.author.name.substring(0,2).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx(on,{children:e.author.name}),i.jsxs(DialogDescription,{className:"sr-only",children:["Foto publicada em ",e.createdAt]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.createdAt})]})]})}),i.jsx("p",{children:e.caption}),i.jsx("div",{className:"flex gap-2",children:e.tags.map(h=>i.jsxs(Se,{variant:"outline",children:["#",h]},h))}),i.jsxs("div",{className:"flex items-center justify-around py-4 border-y",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-bold",children:e.likes}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Curtidas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-bold",children:e.comments}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Comentários"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-bold",children:e.views}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Visualizações"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{className:"flex-1",onClick:()=>d(e.id),children:[i.jsx(Es,{className:"h-4 w-4 mr-2"}),"Curtir"]}),i.jsxs(q,{variant:"outline",className:"flex-1",children:[i.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Comentar"]}),i.jsx(q,{variant:"outline",children:i.jsx(Lo,{className:"h-4 w-4"})}),i.jsx(q,{variant:"outline",children:i.jsx(Uo,{className:"h-4 w-4"})})]})]})]})})})]})}const Xse=[{id:1,thumbnail:"https://images.unsplash.com/photo-1612872087720-bb876e2e67d1?w=800",title:"Melhores Saques do Campeonato 2024",description:"Compilação dos saques mais potentes e efetivos da temporada",duration:"8:45",author:{name:"VolleyPro Oficial",avatar:"https://i.pravatar.cc/150?img=50",type:"team"},views:12543,likes:892,comments:143,uploadedAt:"2 horas atrás",category:"Highlights"},{id:2,thumbnail:"https://images.unsplash.com/photo-1593766827228-8737b4534aa6?w=800",title:"Tutorial: Como Melhorar o Bloqueio",description:"Técnicas avançadas para aperfeiçoar seu bloqueio no vôlei",duration:"12:30",author:{name:"João Silva",avatar:"https://i.pravatar.cc/150?img=12",type:"athlete"},views:8234,likes:654,comments:89,uploadedAt:"1 dia atrás",category:"Tutorial"},{id:3,thumbnail:"https://images.unsplash.com/photo-1587280501635-68a0e82cd5ff?w=800",title:"Final Emocionante - Time A vs Time B",description:"Reviva todos os momentos da grande final do campeonato estadual",duration:"45:20",author:{name:"Time Vôlei SP",avatar:"https://i.pravatar.cc/150?img=20",type:"team"},views:25678,likes:2134,comments:567,uploadedAt:"3 dias atrás",category:"Partidas"},{id:4,thumbnail:"https://images.unsplash.com/photo-1609710228159-0fa9bd7c0827?w=800",title:"Treino de Defesa - Exercícios Práticos",description:"Rotina completa de treino focada em defesa e recepção",duration:"15:00",author:{name:"Maria Santos",avatar:"https://i.pravatar.cc/150?img=25",type:"athlete"},views:5432,likes:423,comments:67,uploadedAt:"5 dias atrás",category:"Treino"},{id:5,thumbnail:"https://images.unsplash.com/photo-1517649763962-0c623066013b?w=800",title:"Análise Tática: Sistemas de Jogo",description:"Entenda os principais sistemas táticos utilizados no vôlei profissional",duration:"20:15",author:{name:"Carlos Técnico",avatar:"https://i.pravatar.cc/150?img=35",type:"team"},views:3456,likes:289,comments:45,uploadedAt:"1 semana atrás",category:"Análise"},{id:6,thumbnail:"https://images.unsplash.com/photo-1612872087720-bb876e2e67d1?w=800&q=60",title:"Aquecimento Pré-Jogo Completo",description:"Sequência ideal de aquecimento antes das partidas",duration:"10:00",author:{name:"Pedro Costa",avatar:"https://i.pravatar.cc/150?img=15",type:"athlete"},views:4567,likes:345,comments:34,uploadedAt:"1 semana atrás",category:"Treino"}],Qse=["Todos","Highlights","Tutorial","Partidas","Treino","Análise"];function Zse(){const[t]=g.useState(Xse),[e,n]=g.useState("Todos"),r=e==="Todos"?t:t.filter(s=>s.category===e);return i.jsxs("div",{className:"container mx-auto max-w-7xl p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"flex items-center gap-2",children:[i.jsx(js,{className:"h-8 w-8 text-primary"}),"Vídeos"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Aprenda, reviva e compartilhe os melhores momentos do vôlei"})]}),i.jsxs(q,{className:"bg-gradient-to-r from-primary to-[#0052cc]",children:[i.jsx(dp,{className:"h-4 w-4 mr-2"}),"Upload Vídeo"]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(js,{className:"h-6 w-6 mx-auto text-primary mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.length}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Vídeos"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(is,{className:"h-6 w-6 mx-auto text-blue-500 mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.reduce((s,o)=>s+o.views,0).toLocaleString()}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Visualizações"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(Es,{className:"h-6 w-6 mx-auto text-red-500 mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.reduce((s,o)=>s+o.likes,0).toLocaleString()}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Curtidas"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(Mo,{className:"h-6 w-6 mx-auto text-green-500 mb-1"}),i.jsx("div",{className:"text-xl font-bold",children:t.reduce((s,o)=>s+o.comments,0)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Comentários"})]})})]}),i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Qse.map(s=>i.jsx(q,{variant:e===s?"default":"outline",size:"sm",onClick:()=>n(s),className:"whitespace-nowrap",children:s},s))}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(s=>i.jsx(ie,{className:"overflow-hidden group hover:shadow-xl transition-all cursor-pointer",children:i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"relative aspect-video bg-black",children:[i.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover group-hover:opacity-75 transition-opacity"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"bg-primary/90 rounded-full p-4 group-hover:scale-110 transition-transform",children:i.jsx(ff,{className:"h-8 w-8 text-white fill-white"})})}),i.jsx("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded",children:s.duration}),i.jsx("div",{className:"absolute top-2 left-2",children:i.jsx(Se,{variant:"secondary",children:s.category})})]}),i.jsxs(ce,{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Gt,{className:"h-8 w-8",children:[i.jsx(rn,{src:s.author.avatar}),i.jsx(Kt,{children:s.author.name.substring(0,2).toUpperCase()})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-sm truncate",children:s.author.name}),i.jsx("div",{className:"text-xs text-muted-foreground",children:s.uploadedAt})]})]}),i.jsx("h3",{className:"font-semibold line-clamp-2 group-hover:text-primary transition-colors",children:s.title}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground pt-2 border-t",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(is,{className:"h-4 w-4"}),s.views.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Es,{className:"h-4 w-4"}),s.likes]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Mo,{className:"h-4 w-4"}),s.comments]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{variant:"outline",size:"sm",className:"flex-1",children:[i.jsx(Es,{className:"h-4 w-4 mr-1"}),"Curtir"]}),i.jsx(q,{variant:"outline",size:"sm",children:i.jsx(Uo,{className:"h-4 w-4"})})]})]})]})},s.id))}),i.jsxs("div",{className:"mt-12",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(_c,{className:"h-6 w-6 text-secondary"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Em Alta"})]}),i.jsx("div",{className:"space-y-4",children:t.sort((s,o)=>o.views-s.views).slice(0,3).map((s,o)=>i.jsx(ie,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",children:i.jsx(ce,{className:"p-4",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-br from-primary to-secondary text-white text-xl font-bold flex-shrink-0",children:["#",o+1]}),i.jsxs("div",{className:"relative w-40 aspect-video rounded-lg overflow-hidden flex-shrink-0",children:[i.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"bg-primary/80 rounded-full p-2",children:i.jsx(ff,{className:"h-4 w-4 text-white fill-white"})})}),i.jsx("div",{className:"absolute bottom-1 right-1 bg-black/80 text-white text-xs px-1 rounded",children:s.duration})]}),i.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[i.jsx("h3",{className:"font-semibold line-clamp-1",children:s.title}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Gt,{className:"h-6 w-6",children:[i.jsx(rn,{src:s.author.avatar}),i.jsx(Kt,{className:"text-xs",children:s.author.name.substring(0,2).toUpperCase()})]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:s.author.name})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(is,{className:"h-4 w-4"}),s.views.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Es,{className:"h-4 w-4"}),s.likes]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Vr,{className:"h-4 w-4"}),s.uploadedAt]})]})]})]})})},s.id))})]})]})}function eie(){const[t,e]=g.useState(!1),[n,r]=g.useState(null),[s,o]=g.useState({fullName:"",documentType:"cpf",documentNumber:"",phone:"",achievements:"",socialProof:""}),a=()=>{const h={id:1,status:"pending",submittedAt:new Date().toISOString()};r(h),e(!0)},l=[{icon:$e,title:"Selo de Verificado",description:"Badge azul ao lado do seu nome em todo o site"},{icon:Qn,title:"Maior Credibilidade",description:"Autenticidade confirmada pela plataforma"},{icon:Ia,title:"Destaque no Feed",description:"Suas publicações terão mais visibilidade"},{icon:sL,title:"Prioridade em Convites",description:"Times priorizam atletas verificados"}],d=["Ser atleta profissional ou semi-profissional","Ter participado de competições oficiais","Documento de identidade válido","Comprovação de vínculo com times ou federações","Perfil completo e ativo na plataforma"];return t&&n?i.jsxs("div",{className:"container mx-auto max-w-4xl p-6 space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("h1",{className:"flex items-center justify-center gap-2",children:[i.jsx(Qn,{className:"h-8 w-8 text-primary"}),"Verificação de Perfil"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Status da sua solicitação de verificação"})]}),i.jsxs(ie,{className:"border-2 border-primary",children:[i.jsx(et,{className:"bg-gradient-to-r from-primary/10 to-secondary/10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(Vt,{className:"flex items-center gap-2",children:[n.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx(Vr,{className:"h-6 w-6 text-yellow-500"}),"Solicitação em Análise"]}),n.status==="approved"&&i.jsxs(i.Fragment,{children:[i.jsx($e,{className:"h-6 w-6 text-green-500"}),"Perfil Verificado!"]}),n.status==="rejected"&&i.jsxs(i.Fragment,{children:[i.jsx(Jt,{className:"h-6 w-6 text-red-500"}),"Solicitação Rejeitada"]})]}),i.jsxs(Se,{variant:n.status==="pending"?"secondary":n.status==="approved"?"default":"destructive",className:"text-sm",children:[n.status==="pending"&&"Pendente",n.status==="approved"&&"Aprovado",n.status==="rejected"&&"Rejeitado"]})]})}),i.jsxs(ce,{className:"p-6 space-y-4",children:[n.status==="pending"&&i.jsxs(Fi,{children:[i.jsx(Vr,{className:"h-4 w-4"}),i.jsx(Vi,{children:"Sua solicitação está sendo analisada pela nossa equipe. O processo pode levar até 3-5 dias úteis. Você receberá uma notificação assim que houver uma atualização."})]}),n.status==="approved"&&i.jsxs(Fi,{className:"border-green-500 bg-green-50 dark:bg-green-950",children:[i.jsx($e,{className:"h-4 w-4 text-green-600"}),i.jsx(Vi,{className:"text-green-900 dark:text-green-100",children:"Parabéns! Seu perfil foi verificado com sucesso. Agora você possui o selo de verificação em todo o site."})]}),n.status==="rejected"&&i.jsxs(Fi,{variant:"destructive",children:[i.jsx(Jt,{className:"h-4 w-4"}),i.jsxs(Vi,{children:["Infelizmente sua solicitação foi rejeitada. Motivo: ",n.reason||"Documentação incompleta ou inválida.",i.jsx("br",{}),"Você pode enviar uma nova solicitação após corrigir as pendências."]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Enviado em"}),i.jsx("p",{className:"font-semibold",children:new Date(n.submittedAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.reviewedAt&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Revisado em"}),i.jsx("p",{className:"font-semibold",children:new Date(n.reviewedAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),n.status==="rejected"&&i.jsx("div",{className:"pt-4",children:i.jsx(q,{className:"w-full",onClick:()=>{e(!1),r(null)},children:"Enviar Nova Solicitação"})})]})]}),i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx(Vt,{children:"Benefícios da Verificação"})}),i.jsx(ce,{children:i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:l.map((h,m)=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"bg-primary/10 rounded-lg p-2 h-fit",children:i.jsx(h.icon,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm",children:h.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:h.description})]})]},m))})})]})]}):i.jsxs("div",{className:"container mx-auto max-w-4xl p-6 space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("h1",{className:"flex items-center justify-center gap-2",children:[i.jsx(Qn,{className:"h-8 w-8 text-primary"}),"Verificação de Perfil"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Obtenha o selo de verificação oficial do VolleyPro"})]}),i.jsxs(ie,{className:"border-2 border-primary/20",children:[i.jsx(et,{className:"bg-gradient-to-r from-primary/10 to-secondary/10",children:i.jsxs(Vt,{className:"flex items-center gap-2",children:[i.jsx(Ia,{className:"h-6 w-6"}),"Por que verificar seu perfil?"]})}),i.jsx(ce,{className:"p-6",children:i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:l.map((h,m)=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"bg-gradient-to-br from-primary to-secondary rounded-lg p-3 h-fit",children:i.jsx(h.icon,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-1",children:h.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:h.description})]})]},m))})})]}),i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx(Vt,{children:"Requisitos para Verificação"})}),i.jsx(ce,{children:i.jsx("ul",{className:"space-y-3",children:d.map((h,m)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:h})]},m))})})]}),i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx(Vt,{children:"Solicitar Verificação"})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"fullName",children:"Nome Completo"}),i.jsx(ht,{id:"fullName",placeholder:"Seu nome completo",value:s.fullName,onChange:h=>o({...s,fullName:h.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"phone",children:"Telefone"}),i.jsx(ht,{id:"phone",placeholder:"(11) 99999-9999",value:s.phone,onChange:h=>o({...s,phone:h.target.value})})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"documentType",children:"Tipo de Documento"}),i.jsxs("select",{id:"documentType",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",value:s.documentType,onChange:h=>o({...s,documentType:h.target.value}),children:[i.jsx("option",{value:"cpf",children:"CPF"}),i.jsx("option",{value:"rg",children:"RG"}),i.jsx("option",{value:"cnh",children:"CNH"}),i.jsx("option",{value:"passport",children:"Passaporte"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"documentNumber",children:"Número do Documento"}),i.jsx(ht,{id:"documentNumber",placeholder:"000.000.000-00",value:s.documentNumber,onChange:h=>o({...s,documentNumber:h.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"achievements",children:"Principais Conquistas"}),i.jsx(os,{id:"achievements",placeholder:"Liste suas principais conquistas, títulos, times que jogou, competições que participou...",rows:4,value:s.achievements,onChange:h=>o({...s,achievements:h.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"socialProof",children:"Links de Comprovação"}),i.jsx(os,{id:"socialProof",placeholder:"Links para matérias, redes sociais oficiais, registro em federações, etc.",rows:3,value:s.socialProof,onChange:h=>o({...s,socialProof:h.target.value})}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Adicione links que comprovem sua identidade e carreira (Instagram verificado, site oficial, matérias, etc.)"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{children:"Documentos (Opcional)"}),i.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center hover:bg-muted/50 transition-colors cursor-pointer",children:[i.jsx(dp,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),i.jsx("p",{className:"text-sm font-medium mb-1",children:"Click para fazer upload"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Documento de identidade, comprovante de vínculo com times, certificados, etc."})]})]}),i.jsxs(Fi,{children:[i.jsx(Jt,{className:"h-4 w-4"}),i.jsx(Vi,{children:"Todas as informações fornecidas serão mantidas em sigilo e utilizadas apenas para o processo de verificação. O prazo de análise é de 3-5 dias úteis."})]}),i.jsxs(q,{className:"w-full bg-gradient-to-r from-primary to-[#0052cc]",size:"lg",onClick:a,children:[i.jsx(Qn,{className:"h-5 w-5 mr-2"}),"Enviar Solicitação de Verificação"]})]})]}),i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx(Vt,{children:"Dúvidas Frequentes"})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-1",children:"Quanto tempo leva a verificação?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"O processo de análise geralmente leva de 3 a 5 dias úteis."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-1",children:"A verificação é paga?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Não! A verificação no VolleyPro é 100% gratuita."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-1",children:"Posso perder o selo de verificado?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sim, se violarmos as regras da comunidade ou fornecermos informações falsas, o selo pode ser removido."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-1",children:"Fãs e torcedores podem ser verificados?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"A verificação é destinada principalmente a atletas profissionais e times. Fãs influentes podem se qualificar em casos especiais."})]})]})]})]})}const tie=[{name:"Posts por mês",free:"10",pro:"∞",premium:"∞",elite:"∞"},{name:"Fotos",free:"5/sem",pro:"∞",premium:"∞",elite:"∞"},{name:"Vídeos",free:"1/sem",pro:"10/sem",premium:"∞",elite:"∞"},{name:"Lives",free:!1,pro:"2/sem",premium:"∞",elite:"∞"},{name:"Armazenamento",free:"500MB",pro:"5GB",premium:"20GB",elite:"∞"},{name:"Analytics",free:!1,pro:!0,premium:!0,elite:!0},{name:"Sem anúncios",free:!1,pro:!0,premium:!0,elite:!0},{name:"Badge verificado",free:!1,pro:!1,premium:!0,elite:!0},{name:"Monetização",free:!1,pro:!1,premium:"70%",elite:"80%"},{name:"Patrocínios",free:!1,pro:!1,premium:!0,elite:!0},{name:"Transmissão HD",free:!1,pro:!1,premium:!0,elite:"4K"},{name:"Suporte prioritário",free:!1,pro:!0,premium:!0,elite:"24/7"},{name:"API de integração",free:!1,pro:!1,premium:!1,elite:!0},{name:"Gerente de conta",free:!1,pro:!1,premium:!1,elite:!0}];function nie({onSelectPlan:t}){const e=n=>typeof n=="boolean"?n?i.jsx(ns,{className:"h-5 w-5 text-green-500 mx-auto"}):i.jsx(cr,{className:"h-5 w-5 text-muted-foreground/30 mx-auto"}):i.jsx("span",{className:"text-sm font-semibold",children:n});return i.jsxs(ie,{className:"overflow-hidden",children:[i.jsx(et,{children:i.jsxs(Vt,{className:"flex items-center gap-2",children:[i.jsx(Rs,{className:"h-5 w-5 text-primary"}),"Compare os Planos"]})}),i.jsxs(ce,{className:"p-0",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b bg-muted/30",children:[i.jsx("th",{className:"text-left p-4 font-semibold min-w-[200px]",children:"Recurso"}),i.jsx("th",{className:"text-center p-4 min-w-[120px]",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Se,{variant:"outline",className:"text-slate-600 border-slate-300",children:"Free"}),i.jsx("div",{className:"text-2xl",children:"R$ 0"}),i.jsx(q,{variant:"outline",size:"sm",onClick:()=>t("free"),children:"Atual"})]})}),i.jsx("th",{className:"text-center p-4 min-w-[120px] bg-blue-50/50",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Se,{className:"bg-primary text-white",children:"Pro"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl",children:"R$ 19,90"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"/mês"})]}),i.jsx(q,{size:"sm",onClick:()=>t("pro"),className:"bg-primary",children:"Escolher"})]})}),i.jsx("th",{className:"text-center p-4 min-w-[120px] bg-purple-50/50 border-x-2 border-purple-300",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Se,{className:"bg-purple-600 text-white",children:[i.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Premium"]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl",children:"R$ 49,90"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"/mês"})]}),i.jsx(q,{size:"sm",onClick:()=>t("premium"),className:"bg-purple-600",children:"Escolher"}),i.jsx("div",{className:"text-xs font-semibold text-purple-600",children:"Mais Popular"})]})}),i.jsx("th",{className:"text-center p-4 min-w-[120px] bg-amber-50/50",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Se,{className:"bg-amber-500 text-white",children:"Elite"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl",children:"R$ 99,90"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"/mês"})]}),i.jsx(q,{size:"sm",onClick:()=>t("elite"),className:"bg-amber-500",children:"Escolher"})]})})]})}),i.jsx("tbody",{children:tie.map((n,r)=>i.jsxs("tr",{className:`
                    border-b transition-colors hover:bg-muted/20
                    ${r%2===0?"":"bg-muted/10"}
                  `,children:[i.jsx("td",{className:"p-4 text-sm font-medium",children:n.name}),i.jsx("td",{className:"p-4 text-center",children:e(n.free)}),i.jsx("td",{className:"p-4 text-center bg-blue-50/20",children:e(n.pro)}),i.jsx("td",{className:"p-4 text-center bg-purple-50/20 border-x-2 border-purple-100",children:e(n.premium)}),i.jsx("td",{className:"p-4 text-center bg-amber-50/20",children:e(n.elite)})]},r))})]})}),i.jsxs("div",{className:"p-6 bg-gradient-to-r from-primary/10 via-purple-500/10 to-amber-500/10 text-center space-y-3",children:[i.jsx("p",{className:"font-semibold",children:"Escolha o plano ideal para você e comece a monetizar hoje mesmo!"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Todos os planos incluem 7 dias de teste grátis. Cancele quando quiser."}),i.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap",children:[i.jsxs(q,{size:"lg",onClick:()=>t("premium"),className:"gap-2 bg-purple-600",children:[i.jsx(Rs,{className:"h-4 w-4"}),"Começar com Premium"]}),i.jsx(q,{variant:"outline",size:"lg",onClick:()=>t("pro"),children:"Começar com Pro"})]})]})]})]})}const kE=[{id:"free",name:"Free",description:"Para iniciantes que querem explorar o VolleyPro",price:0,billing:"monthly",color:"#64748b",icon:"🆓",features:["Perfil básico","Feed de notícias","Seguir atletas e times","10 posts por mês","5 fotos por semana","1 vídeo por semana","Participar de torneios","Comentar e reagir","Mensagens básicas","500MB de armazenamento"],limits:{posts:10,photos:5,videos:1,lives:0,storage:"500MB",analytics:!1,verification:!1,sponsorships:!1,monetization:!1,adsRemoval:!1,customProfile:!1,prioritySupport:!1}},{id:"pro",name:"Pro",description:"Para atletas e times que levam o vôlei a sério",price:19.9,billing:"monthly",yearlyDiscount:20,color:"#0066ff",icon:"⭐",popular:!0,features:["Tudo do plano Free","Badge PRO no perfil","Posts ilimitados","Fotos ilimitadas","10 vídeos por semana","2 lives por semana","Analytics básico","Perfil personalizado","Sem anúncios","5GB de armazenamento","Destaque em buscas","Suporte prioritário"],athleteFeatures:["Vitrine de jogadores destacada","Estatísticas detalhadas","Histórico de conquistas","Certificado digital"],teamFeatures:["Gestão de elenco completa","Convocações ilimitadas","Torneios destacados","Logo personalizado"],limits:{posts:"unlimited",photos:"unlimited",videos:10,lives:2,storage:"5GB",analytics:!0,verification:!1,sponsorships:!1,monetization:!1,adsRemoval:!0,customProfile:!0,prioritySupport:!0}},{id:"premium",name:"Premium",description:"Para profissionais que querem se destacar",price:49.9,billing:"monthly",yearlyDiscount:25,color:"#8b5cf6",icon:"💎",features:["Tudo do plano Pro","Badge PREMIUM verificado","Vídeos ilimitados","Lives ilimitadas","Analytics avançado","Monetização habilitada","Ganhe com patrocínios","Página de patrocinadores","20GB de armazenamento","Transmissão em HD","Chat exclusivo VIP","Suporte 24/7"],athleteFeatures:["Selo de verificação","Monetização por lives","Patrocínios destacados","Comissão de 70% em vendas","Loja virtual integrada","Consultoria de carreira"],teamFeatures:["Patrocínios gerenciados","Dashboard de receitas","Sistema de sócios-torcedores","Bilheteria digital","Transmissões profissionais","Marketing automatizado"],limits:{posts:"unlimited",photos:"unlimited",videos:"unlimited",lives:"unlimited",storage:"20GB",analytics:!0,verification:!0,sponsorships:!0,monetization:!0,adsRemoval:!0,customProfile:!0,prioritySupport:!0}},{id:"elite",name:"Elite",description:"Para organizações e atletas de alto nível",price:99.9,billing:"monthly",yearlyDiscount:30,color:"#f59e0b",icon:"👑",features:["Tudo do plano Premium","Badge ELITE exclusivo","Armazenamento ilimitado","Transmissão 4K","Analytics em tempo real","API de integração","White label opcional","Gerente de conta dedicado","Consultoria estratégica","Marketing personalizado","Eventos exclusivos","Networking VIP"],athleteFeatures:["Selo dourado verificado","Comissão de 80% em vendas","Agente digital IA","Análise de performance IA","Networking com marcas","Contratos facilitados","Assessoria jurídica","Planejamento financeiro"],teamFeatures:["Sistema completo de gestão","CRM de torcedores","E-commerce profissional","App personalizado","Múltiplas transmissões simultâneas","Sistema de ingressos","Dashboard executivo","Inteligência de mercado"],limits:{posts:"unlimited",photos:"unlimited",videos:"unlimited",lives:"unlimited",storage:"Ilimitado",analytics:!0,verification:!0,sponsorships:!0,monetization:!0,adsRemoval:!0,customProfile:!0,prioritySupport:!0}}],rie=[{id:"starter",name:"Starter",description:"Ideal para pequenas empresas e marcas locais",price:299,duration:30,color:"#10b981",icon:"🚀",features:["Banner lateral 300x250px","Até 50.000 impressões/mês","1 post patrocinado no feed","Segmentação por região","Relatório mensal básico","Link direto para seu site","Suporte por email"],placements:{feedBanner:!1,sidebarBanner:!0,storiesSponsored:!1,liveStreamAds:!1,tournamentSponsorship:!1,athleteSponsorship:!1,highlightPost:!0,emailNewsletter:!1},impressions:{min:3e4,max:5e4},ctr:"1.5-2.5%",roi:"150-250%"},{id:"growth",name:"Growth",description:"Para marcas em crescimento no mercado esportivo",price:799,duration:30,color:"#0066ff",icon:"📈",popular:!0,features:["Banner lateral + Feed","Até 150.000 impressões/mês","5 posts patrocinados","Stories patrocinados (3/semana)","Segmentação avançada","Relatórios semanais","Dashboard em tempo real","Suporte prioritário","Logo em torneios (1/mês)"],placements:{feedBanner:!0,sidebarBanner:!0,storiesSponsored:!0,liveStreamAds:!1,tournamentSponsorship:!0,athleteSponsorship:!1,highlightPost:!0,emailNewsletter:!1},impressions:{min:1e5,max:15e4},ctr:"2.5-4%",roi:"250-400%"},{id:"professional",name:"Professional",description:"Para empresas que querem dominar o mercado",price:1999,duration:30,color:"#8b5cf6",icon:"💼",features:["Todos os formatos de banner","Até 500.000 impressões/mês","15 posts patrocinados","Stories ilimitados","Anúncios em lives","Patrocínio de 3 torneios","Patrocínio de 5 atletas","Email marketing (newsletter)","Conteúdo criativo incluso","Gerente de conta dedicado","Relatórios personalizados","A/B testing"],placements:{feedBanner:!0,sidebarBanner:!0,storiesSponsored:!0,liveStreamAds:!0,tournamentSponsorship:!0,athleteSponsorship:!0,highlightPost:!0,emailNewsletter:!0},impressions:{min:4e5,max:5e5},ctr:"3.5-5.5%",roi:"350-550%"},{id:"enterprise",name:"Enterprise",description:"Soluções completas para grandes marcas",price:4999,duration:30,color:"#f59e0b",icon:"🏆",features:["Presença total na plataforma","Impressões ilimitadas","Posts patrocinados ilimitados","Naming rights de torneios","Patrocínio master de ligas","Patrocínio de até 20 atletas","Campanhas personalizadas","Conteúdo exclusivo produzido","Lives exclusivas da marca","Eventos patrocinados","Integração com CRM","API personalizada","Equipe dedicada","Consultoria estratégica","Relatórios executivos"],placements:{feedBanner:!0,sidebarBanner:!0,storiesSponsored:!0,liveStreamAds:!0,tournamentSponsorship:!0,athleteSponsorship:!0,highlightPost:!0,emailNewsletter:!0},impressions:{min:1e6,max:5e6},ctr:"5-8%",roi:"500-800%"},{id:"flash",name:"Flash",description:"Campanha rápida de 7 dias para eventos pontuais",price:499,duration:7,color:"#ec4899",icon:"⚡",features:["Banner no feed por 7 dias","Até 100.000 impressões","3 posts em destaque","Stories diários","Segmentação específica","Ideal para eventos","Ativação rápida (24h)","Relatório final completo"],placements:{feedBanner:!0,sidebarBanner:!0,storiesSponsored:!0,liveStreamAds:!1,tournamentSponsorship:!1,athleteSponsorship:!1,highlightPost:!0,emailNewsletter:!1},impressions:{min:5e4,max:1e5},ctr:"2-3.5%",roi:"200-350%"}],sie=[{id:"lives",name:"Monetização de Lives",description:"Ganhe com transmissões ao vivo",icon:"📹",color:"#ef4444",commission:70,minimumPlan:"premium",features:["Doações durante lives","Assinaturas de espectadores","Super chats destacados","Acesso VIP pago","Replays pagos"]},{id:"content",name:"Conteúdo Exclusivo",description:"Venda conteúdo premium para fãs",icon:"🎬",color:"#8b5cf6",commission:75,minimumPlan:"premium",features:["Posts exclusivos pagos","Tutoriais e dicas","Bastidores VIP","Treinos personalizados","Ebooks e guias"]},{id:"sponsorships",name:"Patrocínios",description:"Conecte-se com marcas e empresas",icon:"🤝",color:"#0066ff",commission:80,minimumPlan:"premium",features:["Marketplace de patrocínio","Propostas de marcas","Contratos facilitados","Pagamentos seguros","Gestão de campanhas"]},{id:"coaching",name:"Coaching & Mentorias",description:"Ofereça sessões de treino e consultoria",icon:"🎓",color:"#10b981",commission:85,minimumPlan:"premium",features:["Agendamento integrado","Chamadas de vídeo","Planos de treino","Análise de performance","Certificados"]},{id:"merchandise",name:"Loja de Produtos",description:"Venda produtos personalizados",icon:"🛍️",color:"#f59e0b",commission:70,minimumPlan:"premium",features:["Loja integrada","Print on demand","Gestão de estoque","Envio automatizado","Branding personalizado"]},{id:"subscriptions",name:"Clube de Fãs",description:"Crie um clube com benefícios mensais",icon:"⭐",color:"#ec4899",commission:80,minimumPlan:"premium",features:["Assinaturas mensais","Conteúdo exclusivo","Eventos privados","Interação direta","Descontos em produtos"]}];function z0(t){if(t.price===0)return 0;const e=t.price*12,n=t.yearlyDiscount||0;return e*(1-n/100)}function iie(t){if(t.price===0)return 0;const e=t.price*12,n=z0(t);return e-n}function zm(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}function jE(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(0)}K`:t.toString()}function oie(){const[t,e]=g.useState("monthly"),[n,r]=g.useState("plans"),s=a=>{K.info("Em breve! 🚀",{description:"Sistema de pagamentos será implementado em breve. Entre em contato para mais informações."})},o=a=>{K.info("Interesse registrado! 📊",{description:"Nossa equipe comercial entrará em contato em breve para apresentar a proposta."})};return i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[i.jsx(H0,{className:"h-10 w-10 text-primary"}),i.jsx("h1",{className:"text-4xl",children:"Monetização VolleyPro"})]}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Cresça sua presença, monetize seu talento e conecte-se com oportunidades no mundo do vôlei! 🏐✨"})]}),i.jsxs(Ji,{value:n,onValueChange:r,className:"w-full",children:[i.jsxs(Yi,{className:"grid w-full grid-cols-3 mb-8",children:[i.jsxs(mt,{value:"plans",className:"gap-2",children:[i.jsx(uu,{className:"h-4 w-4"}),"Planos de Assinatura"]}),i.jsxs(mt,{value:"advertising",className:"gap-2",children:[i.jsx(gf,{className:"h-4 w-4"}),"Publicidade"]}),i.jsxs(mt,{value:"athletes",className:"gap-2",children:[i.jsx(FE,{className:"h-4 w-4"}),"Ganhe como Atleta"]})]}),i.jsxs(ft,{value:"plans",className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[i.jsx(q,{variant:t==="monthly"?"default":"outline",onClick:()=>e("monthly"),children:"Mensal"}),i.jsxs(q,{variant:t==="yearly"?"default":"outline",onClick:()=>e("yearly"),className:"gap-2",children:["Anual",i.jsx(Se,{variant:"secondary",className:"bg-green-500 text-white",children:"Economize até 30%"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:kE.map(a=>{const l=t==="yearly"?z0(a)/12:a.price,d=t==="yearly"?iie(a):0;return i.jsxs(ie,{className:`
                    relative transition-all hover:shadow-xl
                    ${a.popular?"border-primary border-2 shadow-lg scale-105":""}
                  `,style:{background:`linear-gradient(135deg, ${a.color}10 0%, ${a.color}05 100%)`,borderColor:a.popular?a.color:void 0},children:[a.popular&&i.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:i.jsxs(Se,{className:"bg-primary text-white shadow-lg px-4 py-1",children:[i.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Mais Popular"]})}),i.jsxs(et,{className:"text-center pb-4",children:[i.jsx("div",{className:"text-4xl mb-2",children:a.icon}),i.jsx(Vt,{className:"text-2xl",children:a.name}),i.jsx(xc,{className:"min-h-[40px]",children:a.description}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-3xl",children:zm(l)}),i.jsx("span",{className:"text-muted-foreground",children:"/mês"})]}),t==="yearly"&&a.price>0&&i.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Economize ",zm(d),"/ano"]}),t==="yearly"&&a.price>0&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Cobrado ",zm(z0(a))," anualmente"]})]})]}),i.jsxs(ce,{className:"space-y-4",children:[i.jsx(q,{className:"w-full",variant:a.popular?"default":"outline",onClick:()=>s(a.id),style:{backgroundColor:a.popular?a.color:void 0,borderColor:a.color,color:a.popular?"#ffffff":a.color},children:a.price===0?"Começar Grátis":"Assinar Agora"}),i.jsx(Jn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Recursos:"}),a.features.map((h,m)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(ns,{className:"h-4 w-4 text-green-500 mt-0.5 shrink-0"}),i.jsx("span",{children:h})]},m))]}),a.athleteFeatures&&a.athleteFeatures.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(Jn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-semibold flex items-center gap-1",children:[i.jsx(wt,{className:"h-4 w-4"}),"Para Atletas:"]}),a.athleteFeatures.map((h,m)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(ns,{className:"h-4 w-4 text-blue-500 mt-0.5 shrink-0"}),i.jsx("span",{children:h})]},m))]})]}),a.teamFeatures&&a.teamFeatures.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(Jn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm font-semibold flex items-center gap-1",children:[i.jsx(Qn,{className:"h-4 w-4"}),"Para Times:"]}),a.teamFeatures.map((h,m)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(ns,{className:"h-4 w-4 text-purple-500 mt-0.5 shrink-0"}),i.jsx("span",{children:h})]},m))]})]})]})]},a.id)})}),i.jsx("div",{className:"mt-12",children:i.jsx(nie,{onSelectPlan:s})}),i.jsx(ie,{className:"mt-8 bg-gradient-to-r from-blue-50 to-purple-50 border-primary/20",children:i.jsx(ce,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-primary/10 shrink-0",children:i.jsx(xL,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-semibold",children:"Por que fazer upgrade?"}),i.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Monetize"})," seu conteúdo e ganhe 70-80% de comissão"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Sem limites"})," de posts, fotos e vídeos"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Lives ilimitadas"})," com doações e super chats"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Patrocínios"})," de marcas através do nosso marketplace"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Analytics avançado"})," para acompanhar seu crescimento"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Badge verificado"})," para ganhar credibilidade"]}),i.jsxs("li",{children:["✅ ",i.jsx("strong",{children:"Suporte prioritário"})," para resolver qualquer dúvida"]})]})]})]})})})]}),i.jsxs(ft,{value:"advertising",className:"space-y-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl mb-2",children:"Anuncie no VolleyPro"}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Conecte sua marca com milhares de atletas, times e fãs apaixonados por vôlei. Escolha a cota ideal para seu investimento! 📊"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:rie.map(a=>i.jsxs(ie,{className:`
                  relative transition-all hover:shadow-xl
                  ${a.popular?"border-primary border-2 shadow-lg":""}
                `,style:{background:`linear-gradient(135deg, ${a.color}15 0%, ${a.color}05 100%)`},children:[a.popular&&i.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:i.jsxs(Se,{className:"bg-primary text-white shadow-lg px-4 py-1",children:[i.jsx(_c,{className:"h-3 w-3 mr-1"}),"Melhor Custo-Benefício"]})}),i.jsxs(et,{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-2",children:a.icon}),i.jsx(Vt,{className:"text-2xl",children:a.name}),i.jsx(xc,{className:"min-h-[40px]",children:a.description}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"flex items-baseline justify-center gap-1",children:i.jsx("span",{className:"text-3xl",children:zm(a.price)})}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["por ",a.duration," dias"]})]})]}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs(q,{className:"w-full gap-2",style:{backgroundColor:a.color,color:"#ffffff"},onClick:()=>o(a.id),children:[i.jsx(GL,{className:"h-4 w-4"}),"Contratar Agora"]}),i.jsx(Jn,{}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Impressões"}),i.jsxs("p",{className:"font-semibold",children:[jE(a.impressions.min),"-",jE(a.impressions.max)]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"CTR Médio"}),i.jsx("p",{className:"font-semibold text-green-600",children:a.ctr})]}),i.jsxs("div",{className:"text-center col-span-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"ROI Estimado"}),i.jsx("p",{className:"font-semibold text-blue-600",children:a.roi})]})]}),i.jsx(Jn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"O que está incluso:"}),a.features.map((l,d)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(ns,{className:"h-4 w-4 text-green-500 mt-0.5 shrink-0"}),i.jsx("span",{children:l})]},d))]})]})]},a.id))}),i.jsx(ie,{className:"mt-12 bg-gradient-to-r from-primary to-secondary text-white",children:i.jsxs(ce,{className:"p-8 text-center",children:[i.jsx(gf,{className:"h-12 w-12 mx-auto mb-4"}),i.jsx("h3",{className:"text-2xl mb-2",children:"Precisa de uma solução personalizada?"}),i.jsx("p",{className:"mb-6 opacity-90",children:"Entre em contato com nossa equipe comercial para criar um plano sob medida para sua empresa."}),i.jsx(q,{size:"lg",variant:"secondary",onClick:()=>K.info("Contato registrado!",{description:"Nossa equipe comercial entrará em contato em até 24 horas."}),children:"Falar com Consultor"})]})})]}),i.jsxs(ft,{value:"athletes",className:"space-y-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl mb-2",children:"Transforme sua Paixão em Renda"}),i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Atletas Premium e Elite podem monetizar seu conteúdo de diversas formas. Ganhe enquanto faz o que ama! 💪✨"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:sie.map(a=>{const l=kE.find(d=>d.id===a.minimumPlan);return i.jsxs(ie,{className:"transition-all hover:shadow-xl",style:{background:`linear-gradient(135deg, ${a.color}15 0%, ${a.color}05 100%)`},children:[i.jsxs(et,{children:[i.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl mb-3",style:{backgroundColor:a.color+"20",border:`2px solid ${a.color}40`},children:a.icon}),i.jsx(Vt,{children:a.name}),i.jsx(xc,{children:a.description})]}),i.jsxs(ce,{className:"space-y-4",children:[i.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("p",{className:"text-sm text-green-700 text-center",children:["Você recebe ",i.jsxs("span",{className:"font-bold text-lg",children:[a.commission,"%"]})," de comissão"]})}),i.jsx("div",{className:"flex items-center justify-center gap-2",children:i.jsxs(Se,{className:"text-white",style:{backgroundColor:l?.color},children:["Requer ",l?.name]})}),i.jsx(Jn,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Recursos:"}),a.features.map((d,h)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(ns,{className:"h-4 w-4 mt-0.5 shrink-0",style:{color:a.color}}),i.jsx("span",{children:d})]},h))]}),i.jsxs(q,{className:"w-full mt-4",style:{backgroundColor:a.color,color:"#ffffff"},onClick:()=>s(a.minimumPlan),children:[i.jsx(fu,{className:"h-4 w-4 mr-2"}),"Começar a Ganhar"]})]})]},a.id)})}),i.jsxs(ie,{className:"mt-12 bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[i.jsx(et,{children:i.jsxs(Vt,{className:"flex items-center gap-2 text-green-700",children:[i.jsx(lL,{className:"h-6 w-6"}),"Potencial de Ganhos"]})}),i.jsxs(ce,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Atleta Iniciante"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:"R$ 500-2K"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"por mês"})]}),i.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm border-2 border-green-500",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Atleta Estabelecido"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:"R$ 2K-10K"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"por mês"})]}),i.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Atleta Top"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:"R$ 10K+"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"por mês"})]})]}),i.jsx("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"*Valores estimados baseados em engajamento médio. Resultados podem variar."})]})]})]})]}),i.jsxs(ie,{className:"mt-12",children:[i.jsx(et,{children:i.jsx(Vt,{children:"Perguntas Frequentes"})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold mb-1",children:"Posso cancelar minha assinatura a qualquer momento?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sim! Você pode cancelar a qualquer momento. Assinaturas mensais param no final do período pago, e anuais podem ser reembolsadas proporcionalmente."})]}),i.jsx(Jn,{}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold mb-1",children:"Como funciona o pagamento de comissões para atletas?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pagamentos são processados mensalmente via PIX ou transferência bancária. Você acompanha seus ganhos em tempo real no dashboard."})]}),i.jsx(Jn,{}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold mb-1",children:"As empresas podem segmentar seus anúncios?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sim! Oferecemos segmentação por localização, idade, tipo de esporte, nível de atleta e muito mais."})]}),i.jsx(Jn,{}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold mb-1",children:"Qual a diferença entre Premium e Elite?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Elite inclui tudo do Premium mais recursos profissionais como armazenamento ilimitado, transmissão 4K, API de integração e gerente de conta dedicado."})]})]})]})]})}function aie({athleteId:t,onBack:e}){const[n,r]=g.useState(null),[s,o]=g.useState(!1),[a,l]=g.useState(!1),[d,h]=g.useState(!0),[m,f]=g.useState(!1);g.useEffect(()=>{v(),y()},[t]);async function v(){h(!0);try{console.log("🔍 Buscando perfil do atleta ID:",t);const j=await ar.getUser(t.toString());console.log("✅ Dados do atleta carregados:",j),console.log("📊 Followers recebidos da API:",j.followers);const T={id:j.id,name:j.name||j.full_name||"Atleta",nickname:j.nickname||j.name,position:j.position||"Não informado",age:j.age,height:j.height?String(j.height):void 0,currentTeam:j.current_team||j.team,verified:j.verified||!1,followers:j.followers!==void 0?j.followers:0,photoUrl:j.photo_url||j.photoUrl,bio:j.bio||j.description,achievements:Array.isArray(j.achievements)?j.achievements:[],userType:j.user_type||j.userType||"athlete"};console.log("📊 Followers no perfil mapeado:",T.followers),r(T)}catch(j){console.error("❌ Erro ao carregar perfil do atleta:",j),K.error("Erro ao carregar perfil do atleta"),r(null)}finally{h(!1)}}async function y(){try{const j=JSON.parse(localStorage.getItem("volleypro_following")||"[]");o(j.includes(t))}catch(j){console.error("Erro ao verificar seguindo:",j)}}async function w(){if(s){f(!0);return}await k()}async function b(){l(!0);try{const T=JSON.parse(localStorage.getItem("volleypro_following")||"[]").filter(E=>E!==t);localStorage.setItem("volleypro_following",JSON.stringify(T)),o(!1),K.success(`Você deixou de seguir ${n?.name}`)}catch(j){console.error("Erro ao deixar de seguir:",j),K.error("Erro ao atualizar status de seguidor")}finally{l(!1),f(!1)}}async function k(){l(!0);try{const j=JSON.parse(localStorage.getItem("volleypro_following")||"[]");j.push(t),localStorage.setItem("volleypro_following",JSON.stringify(j)),o(!0),K.success(`Agora você está seguindo ${n?.name}! 🎉`)}catch(j){console.error("Erro ao seguir:",j),K.error("Erro ao atualizar status de seguidor")}finally{l(!1)}}return d?i.jsx("div",{className:"container mx-auto py-12 text-center",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-40 w-40 bg-muted rounded-full mx-auto"}),i.jsx("div",{className:"h-8 bg-muted rounded w-48 mx-auto"}),i.jsx("div",{className:"h-4 bg-muted rounded w-32 mx-auto"})]})}):n?i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[i.jsxs("div",{className:"bg-gradient-to-br from-primary via-primary to-secondary pb-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDE0YzMuMzEgMCA2IDIuNjkgNiA2cy0yLjY5IDYtNiA2LTYtMi42OS02LTYgMi42OS02IDYtNnpNNiAzNGMzLjMxIDAgNiAyLjY5IDYgNnMtMi42OSA2LTYgNi02LTIuNjktNi02IDIuNjktNiA2LTZ6TTM2IDM0YzMuMzEgMCA2IDIuNjkgNiA2cy0yLjY5IDYtNiA2LTYtMi42OS02LTYgMi42OS02IDYtNnoiLz48L2c+PC9nPjwvc3ZnPg==')] opacity-30"}),i.jsxs("div",{className:"container mx-auto py-6 relative z-10",children:[i.jsxs(q,{variant:"ghost",onClick:e,className:"mb-6 text-white hover:bg-white/20 hover:text-white",children:[i.jsx(W0,{className:"h-4 w-4 mr-2"}),"Voltar"]}),i.jsxs("div",{className:"flex items-start gap-8",children:[i.jsxs(Gt,{className:"h-40 w-40 border-4 border-white shadow-2xl ring-4 ring-white/20",children:[n.photoUrl?i.jsx(rn,{src:n.photoUrl,alt:n.name,className:"object-cover"}):null,i.jsx(Kt,{className:"text-4xl bg-gradient-to-br from-white to-gray-100 text-primary",children:n.name.split(" ").map(j=>j[0]).join("")})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h1",{className:"text-white",children:n.name}),n.verified&&i.jsx($e,{className:"h-6 w-6 text-white"})]}),i.jsx("p",{className:"text-white/90 text-xl",children:n.position})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{onClick:w,disabled:a,className:s?"bg-muted text-foreground hover:bg-muted/80":"bg-white text-primary hover:bg-white/90",children:[i.jsx(Es,{className:`h-4 w-4 mr-2 ${s?"fill-current":""}`}),a?"Aguarde...":s?"Seguindo":"Seguir"]}),i.jsx(q,{className:"bg-secondary hover:bg-secondary/90",children:"Enviar Mensagem"})]})]}),!n.currentTeam&&i.jsxs(Se,{variant:"secondary",className:"mb-4",children:[i.jsx(_s,{className:"h-3 w-3 mr-1"}),"Livre no mercado"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"Seguidores"}),i.jsx("p",{className:"text-2xl",children:(n.followers||0).toLocaleString("pt-BR")})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"Idade"}),i.jsx("p",{className:"text-2xl",children:n.age||"-"})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"Altura"}),i.jsx("p",{className:"text-2xl",children:Ou(n.height)})]})})]})]})]})]})]}),i.jsx("div",{className:"container mx-auto -mt-24",children:i.jsxs(Ji,{defaultValue:"posts",className:"space-y-6",children:[i.jsxs(Yi,{children:[i.jsx(mt,{value:"posts",children:"Postagens"}),i.jsx(mt,{value:"panel",children:"Painel"}),i.jsx(mt,{value:"stats",children:"Estatísticas"}),i.jsx(mt,{value:"achievements",children:"Conquistas"}),i.jsx(mt,{value:"gallery",children:"Galeria"})]}),i.jsx(ft,{value:"posts",className:"space-y-6",children:i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:i.jsx(du,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h3",{className:"mb-2",children:"Nenhuma postagem ainda"}),i.jsx("p",{className:"text-muted-foreground",children:"Este atleta ainda não fez nenhuma publicação"})]})})}),i.jsxs(ft,{value:"panel",className:"space-y-6",children:[i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx("h3",{children:"Informações Pessoais"})}),i.jsxs(ce,{className:"space-y-3",children:[n.age&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Idade:"}),i.jsxs("span",{children:[n.age," anos"]})]}),n.height&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Altura:"}),i.jsx("span",{children:Ou(n.height)})]}),n.position&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Posição:"}),i.jsx("span",{children:n.position})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Time Atual:"}),i.jsx("span",{children:n.currentTeam||"Sem time"})]}),n.bio&&i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("span",{className:"text-muted-foreground block mb-2",children:"Sobre:"}),i.jsx("p",{className:"text-sm",children:n.bio})]}),!n.age&&!n.height&&!n.position&&!n.bio&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Nenhuma informação adicional disponível"})]})]}),n.achievements&&n.achievements.length>0&&i.jsxs(ie,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nt,{className:"h-5 w-5 text-amber-500"}),i.jsx("h3",{children:"Principais Conquistas"})]})}),i.jsx(ce,{children:i.jsx("ul",{className:"space-y-2",children:n.achievements.map((j,T)=>i.jsxs("li",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[i.jsx(Nt,{className:"h-5 w-5 text-amber-500"}),i.jsx("span",{children:j})]},T))})})]})]}),i.jsx(ft,{value:"stats",children:i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:i.jsx(_c,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h3",{className:"mb-2",children:"Estatísticas não disponíveis"}),i.jsx("p",{className:"text-muted-foreground",children:"As estatísticas do atleta serão exibidas quando houver dados registrados"})]})})}),i.jsx(ft,{value:"achievements",children:i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx("h3",{children:"Histórico de Conquistas"})}),i.jsx(ce,{children:n.achievements&&n.achievements.length>0?i.jsx("div",{className:"space-y-4",children:n.achievements.map((j,T)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-amber-500/10",children:i.jsx(Nt,{className:"h-6 w-6 text-amber-500"})}),i.jsx("div",{children:i.jsx("h4",{children:j})})]},T))}):i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(Nt,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),i.jsx("p",{children:"Nenhuma conquista registrada ainda"})]})})]})}),i.jsx(ft,{value:"gallery",children:i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📸"}),i.jsx("h3",{className:"mb-2",children:"Galeria vazia"}),i.jsx("p",{className:"text-muted-foreground",children:"Nenhuma foto foi adicionada ainda"})]})})})]})}),i.jsx(Tu,{open:m,onOpenChange:f,children:i.jsxs(Nu,{children:[i.jsxs(Eu,{children:[i.jsxs(_u,{children:["Deixar de seguir ",n.name,"?"]}),i.jsx(Ru,{children:"Tem certeza que deseja deixar de seguir este atleta? Você não verá mais as atualizações no seu feed."})]}),i.jsxs(Pu,{children:[i.jsx(Iu,{children:"Cancelar"}),i.jsx(Au,{onClick:b,children:"Sim, deixar de seguir"})]})]})})]}):i.jsxs("div",{className:"container mx-auto py-6 text-center",children:[i.jsx("p",{className:"text-muted-foreground",children:"Atleta não encontrado"}),i.jsx(q,{onClick:e,className:"mt-4",children:"Voltar"})]})}function lie({teamId:t,onBack:e}){const[n,r]=g.useState(null),[s,o]=g.useState(!0),[a,l]=g.useState(!1),[d,h]=g.useState(!1),[m,f]=g.useState(!1),[v,y]=g.useState(!1),[w,b]=g.useState(!1),[k,j]=g.useState(null),[T,E]=g.useState(null),[P,N]=g.useState([]),[_,I]=g.useState({attack:50,defense:50,serve:50,block:50,notes:""});g.useEffect(()=>{O(),fe(),M()},[t]);async function M(){try{const B=Rt.getCurrentUserId();E(B)}catch(B){console.error("Erro ao verificar usuário atual:",B)}}async function O(){o(!0);try{console.log("🔍 Buscando perfil do time ID:",t);const{userApi:B}=await Xn(async()=>{const{userApi:_e}=await Promise.resolve().then(()=>l8);return{userApi:_e}},void 0),te=await B.getUser(t.toString());console.log("✅ Dados do time carregados:",te);const re=Rt.getCurrentUserId()===te.id.toString(),ge={id:te.id,name:te.name||te.team_name||"Time",city:te.city||te.location,founded:te.founded||te.founded_year,verified:te.verified||!1,followers:te.followers||0,championships:te.championships||0,players:L(te.players||te.teamMembers||te.team_members),formerPlayers:D(te.former_players),tournaments:A(te.tournaments),photoUrl:te.photo_url||te.photoUrl,bio:te.bio||te.description,isOwner:re};r(ge)}catch(B){console.error("❌ Erro ao carregar time:",B),K.error("Erro ao carregar dados do time"),r(null)}finally{o(!1)}}function L(B){return B?Array.isArray(B)?B.map(te=>({id:te.id||te.user_id||String(Math.random()),name:te.name||"Jogador",position:te.position||"Não definida",number:te.number||te.jersey_number||0,age:te.age,height:te.height,photoUrl:te.photo_url||te.photoUrl,verified:te.verified||!1,ratings:te.ratings||{attack:50,defense:50,serve:50,block:50,overall:50},lastEvaluated:te.last_evaluated||te.lastEvaluated,needsEvaluation:se(te.last_evaluated||te.lastEvaluated),joinedAt:te.joined_at||te.joinedAt})):[]:[]}function D(B){return B?Array.isArray(B)?B.map(te=>({id:te.id||String(Math.random()),name:te.name||"Ex-Jogador",position:te.position||"Não definida",years:te.years||"Período não informado",photoUrl:te.photo_url||te.photoUrl})):[]:[]}function A(B){return B?Array.isArray(B)?B.map(te=>({id:te.id||String(Math.random()),name:te.name||"Torneio",year:te.year||new Date().getFullYear(),position:te.position||"Participante",trophy:Z(te.position)})):[]:[]}function Z(B){return B==="Campeão"||B==="1º lugar"?"🥇":B==="Vice-campeão"||B==="2º lugar"?"🥈":B==="3º lugar"?"🥉":"🏆"}function se(B){if(!B)return!0;const te=new Date(B);return Math.floor((new Date().getTime()-te.getTime())/(1e3*60*60*24))>30}async function fe(){try{const B=JSON.parse(localStorage.getItem("volleypro_following_teams")||"[]");l(B.includes(t))}catch(B){console.error("Erro ao verificar seguindo:",B)}}async function ae(){if(a){h(!0);return}await de()}async function de(){try{const B=JSON.parse(localStorage.getItem("volleypro_following_teams")||"[]");B.push(t),localStorage.setItem("volleypro_following_teams",JSON.stringify(B)),l(!0),K.success(`Agora você está seguindo ${n?.name}! 🎉`)}catch(B){console.error("Erro ao seguir:",B),K.error("Erro ao seguir time")}}async function U(){try{const te=JSON.parse(localStorage.getItem("volleypro_following_teams")||"[]").filter(Te=>Te!==t);localStorage.setItem("volleypro_following_teams",JSON.stringify(te)),l(!1),K.success(`Você deixou de seguir ${n?.name}`)}catch(B){console.error("Erro ao deixar de seguir:",B),K.error("Erro ao atualizar status")}finally{h(!1)}}function G(B){j(B),I({attack:B.ratings?.attack||50,defense:B.ratings?.defense||50,serve:B.ratings?.serve||50,block:B.ratings?.block||50,notes:""}),y(!0)}async function le(){if(k)try{const B=Math.round((_.attack+_.defense+_.serve+_.block)/4);K.success(`Avaliação de ${k.name} salva!`,{description:`Nota geral: ${B}/100`}),y(!1),O()}catch(B){console.error("Erro ao salvar avaliação:",B),K.error("Erro ao salvar avaliação")}}function $(B){j(B),b(!0)}async function ee(){if(k)try{K.success(`${k.name} foi removido do elenco`),b(!1),O()}catch(B){console.error("Erro ao remover jogador:",B),K.error("Erro ao remover jogador")}}if(s)return i.jsx("div",{className:"container mx-auto py-12 text-center",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-40 w-40 bg-muted rounded-full mx-auto"}),i.jsx("div",{className:"h-8 bg-muted rounded w-48 mx-auto"}),i.jsx("div",{className:"h-4 bg-muted rounded w-32 mx-auto"})]})});if(!n)return i.jsxs("div",{className:"container mx-auto py-6 text-center",children:[i.jsx("p",{className:"text-muted-foreground",children:"Time não encontrado"}),i.jsx(q,{onClick:e,className:"mt-4",children:"Voltar"})]});const he=n.players?.filter(B=>B.needsEvaluation)||[];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[i.jsxs("div",{className:"bg-gradient-to-br from-primary via-primary to-secondary pb-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDE0YzMuMzEgMCA2IDIuNjkgNiA2cy0yLjY5IDYtNiA2LTYtMi42OS02LTYgMi42OS02IDYtNnpNNiAzNGMzLjMxIDAgNiAyLjY5IDYgNnMtMi42OSA2LTYgNi02LTIuNjktNi02IDIuNjktNiA2LTZ6TTM2IDM0YzMuMzEgMCA2IDIuNjkgNiA2cy0yLjY5IDYtNiA2LTYtMi42OS02LTYgMi42OS02IDYtNnoiLz48L2c+PC9nPjwvc3ZnPg==')] opacity-30"}),i.jsxs("div",{className:"container mx-auto py-6 relative z-10",children:[i.jsxs(q,{variant:"ghost",onClick:e,className:"mb-6 text-white hover:bg-white/20 hover:text-white",children:[i.jsx(W0,{className:"h-4 w-4 mr-2"}),"Voltar"]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-8",children:[i.jsxs(Gt,{className:"h-40 w-40 border-4 border-white shadow-2xl ring-4 ring-white/20",children:[n.photoUrl?i.jsx(rn,{src:n.photoUrl,alt:n.name,className:"object-cover"}):null,i.jsx(Kt,{className:"text-4xl bg-gradient-to-br from-white to-gray-100 text-primary",children:n.name[0]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h1",{className:"text-white",children:n.name}),n.verified&&i.jsx($e,{className:"h-6 w-6 text-white"}),n.isOwner&&i.jsxs(Se,{className:"bg-amber-500 text-white",children:[i.jsx(Qn,{className:"h-3 w-3 mr-1"}),"Administrador"]})]}),n.city&&i.jsxs("div",{className:"flex items-center gap-2 text-white/90 mb-2",children:[i.jsx(_s,{className:"h-4 w-4"}),i.jsx("span",{children:n.city})]}),n.founded&&i.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[i.jsx(jr,{className:"h-4 w-4"}),i.jsxs("span",{children:["Fundado em ",n.founded]})]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(q,{onClick:ae,className:a?"bg-muted text-foreground hover:bg-muted/80":"bg-white text-primary hover:bg-white/90",children:[i.jsx(Es,{className:`h-4 w-4 mr-2 ${a?"fill-current":""}`}),a?"Seguindo":"Seguir"]})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"Seguidores"}),i.jsx("p",{className:"text-2xl",children:(n.followers||0).toLocaleString("pt-BR")})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"Jogadores"}),i.jsx("p",{className:"text-2xl",children:n.players?.length||0})]})}),i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx("p",{className:"text-muted-foreground text-sm",children:"Títulos"}),i.jsx("p",{className:"text-2xl",children:n.championships||0})]})})]})]})]})]})]}),n.isOwner&&he.length>0&&i.jsx("div",{className:"container mx-auto -mt-28 mb-6 relative z-20",children:i.jsx(ie,{className:"border-orange-500 bg-orange-50",children:i.jsx(ce,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Jt,{className:"h-5 w-5 text-orange-500 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-medium text-orange-900 mb-1",children:[he.length," jogador(es) precisam de avaliação"]}),i.jsx("p",{className:"text-sm text-orange-700",children:"Avalie o desempenho dos atletas para manter o acompanhamento atualizado"})]})]})})})}),i.jsx("div",{className:"container mx-auto -mt-24 relative z-10",children:i.jsxs(Ji,{defaultValue:"roster",className:"space-y-6",children:[i.jsxs(Yi,{children:[i.jsxs(mt,{value:"roster",children:[i.jsx(wt,{className:"h-4 w-4 mr-2"}),"Elenco"]}),i.jsxs(mt,{value:"lineup",children:[i.jsx(gf,{className:"h-4 w-4 mr-2"}),"Escalação"]}),i.jsxs(mt,{value:"tournaments",children:[i.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Torneios"]}),i.jsxs(mt,{value:"former",children:[i.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Ex-Jogadores"]}),n.isOwner&&i.jsxs(mt,{value:"evaluations",children:[i.jsx(mc,{className:"h-4 w-4 mr-2"}),"Avaliações"]}),i.jsxs(mt,{value:"info",children:[i.jsx(oL,{className:"h-4 w-4 mr-2"}),"Informações"]})]}),i.jsxs(ft,{value:"roster",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{children:["Elenco Atual (",n.players?.length||0," jogadores)"]}),n.isOwner&&i.jsxs(q,{children:[i.jsx(pf,{className:"h-4 w-4 mr-2"}),"Adicionar Jogador"]})]}),n.players&&n.players.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.players.map(B=>i.jsx(ie,{className:"hover:shadow-lg transition-shadow",children:i.jsxs(ce,{className:"p-4",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[i.jsxs(Gt,{className:"h-16 w-16",children:[B.photoUrl?i.jsx(rn,{src:B.photoUrl,alt:B.name}):null,i.jsx(Kt,{children:B.name[0]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-medium",children:B.name}),B.verified&&i.jsx($e,{className:"h-4 w-4 text-blue-500"}),B.needsEvaluation&&i.jsx(Se,{variant:"destructive",className:"text-xs",children:"Avaliar"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:B.position}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs(Se,{variant:"secondary",className:"text-xs",children:["#",B.number]}),B.age&&i.jsxs("span",{className:"text-xs text-muted-foreground",children:[B.age," anos"]})]})]})]}),B.ratings&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-muted-foreground",children:"Desempenho"}),i.jsxs("span",{className:"font-medium",children:[B.ratings.overall,"/100"]})]}),i.jsx(ec,{value:B.ratings.overall,className:"h-2"})]}),n.isOwner&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>G(B),children:[i.jsx(uu,{className:"h-4 w-4 mr-1"}),"Avaliar"]}),i.jsx(q,{size:"sm",variant:"ghost",onClick:()=>$(B),children:i.jsx(Bi,{className:"h-4 w-4 text-destructive"})})]})]})},B.id))}):i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(wt,{className:"h-12 w-12 text-muted-foreground mb-3"}),i.jsx("h3",{className:"mb-2",children:"Nenhum jogador cadastrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Adicione jogadores ao elenco do time"})]})})]}),i.jsxs(ft,{value:"lineup",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{children:"Escalação Titular"}),n.isOwner&&i.jsxs(q,{onClick:()=>f(!0),children:[i.jsx(zE,{className:"h-4 w-4 mr-2"}),"Editar Escalação"]})]}),i.jsx(ie,{children:i.jsx(ce,{className:"p-6",children:i.jsxs("div",{className:"relative aspect-[2/3] bg-gradient-to-b from-orange-100 to-orange-50 rounded-lg border-4 border-orange-300",children:[i.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-1 bg-orange-400 -translate-y-1/2"}),i.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-2 bg-orange-500 -translate-y-1/2 opacity-50"}),i.jsxs("div",{className:"absolute inset-0 p-8",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[i.jsx(Xl,{position:"1",label:"Líbero"}),i.jsx(Xl,{position:"6",label:"Central"}),i.jsx(Xl,{position:"5",label:"Oposto"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 absolute bottom-8 left-8 right-8",children:[i.jsx(Xl,{position:"2",label:"Levantador"}),i.jsx(Xl,{position:"3",label:"Central"}),i.jsx(Xl,{position:"4",label:"Ponteiro"})]})]})]})})}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Sistema 5-1 | Rodízio completo"})]}),i.jsxs(ft,{value:"tournaments",className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{children:"Torneios e Conquistas"})}),n.tournaments&&n.tournaments.length>0?i.jsx("div",{className:"space-y-3",children:n.tournaments.map(B=>i.jsx(ie,{children:i.jsx(ce,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"text-4xl",children:B.trophy}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium",children:B.name}),i.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[i.jsx(Se,{variant:"secondary",children:B.year}),i.jsx("span",{className:"text-sm text-muted-foreground",children:B.position})]})]}),i.jsx(RL,{className:"h-8 w-8 text-amber-500"})]})})},B.id))}):i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Nt,{className:"h-12 w-12 text-muted-foreground mb-3"}),i.jsx("h3",{className:"mb-2",children:"Nenhum torneio registrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Os torneios e conquistas do time aparecerão aqui"})]})})]}),i.jsxs(ft,{value:"former",className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{children:"Mural de Ex-Jogadores"})}),n.formerPlayers&&n.formerPlayers.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.formerPlayers.map(B=>i.jsx(ie,{className:"hover:shadow-lg transition-shadow bg-muted/30",children:i.jsx(ce,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Gt,{className:"h-12 w-12 grayscale",children:[B.photoUrl?i.jsx(rn,{src:B.photoUrl,alt:B.name}):null,i.jsx(Kt,{children:B.name[0]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:B.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:B.position}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.jsx(Vr,{className:"h-3 w-3 inline mr-1"}),B.years]})]})]})})},B.id))}):i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(Vr,{className:"h-12 w-12 text-muted-foreground mb-3"}),i.jsx("h3",{className:"mb-2",children:"Nenhum ex-jogador cadastrado"}),i.jsx("p",{className:"text-muted-foreground",children:"O mural de ex-jogadores do time aparecerá aqui"})]})})]}),n.isOwner&&i.jsxs(ft,{value:"evaluations",className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{children:"Sistema de Avaliação de Atletas"})}),n.players&&n.players.length>0?i.jsx("div",{className:"space-y-4",children:n.players.map(B=>i.jsx(ie,{children:i.jsx(ce,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs(Gt,{className:"h-16 w-16",children:[B.photoUrl?i.jsx(rn,{src:B.photoUrl,alt:B.name}):null,i.jsx(Kt,{children:B.name[0]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:B.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:B.position})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[B.needsEvaluation&&i.jsxs(Se,{variant:"destructive",children:[i.jsx(Jt,{className:"h-3 w-3 mr-1"}),"Precisa avaliar"]}),i.jsxs(q,{size:"sm",onClick:()=>G(B),children:[i.jsx(uu,{className:"h-4 w-4 mr-1"}),"Avaliar"]})]})]}),B.ratings&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{children:"Ataque"}),i.jsxs("span",{className:"font-medium",children:[B.ratings.attack,"/100"]})]}),i.jsx(ec,{value:B.ratings.attack,className:"h-2"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{children:"Defesa"}),i.jsxs("span",{className:"font-medium",children:[B.ratings.defense,"/100"]})]}),i.jsx(ec,{value:B.ratings.defense,className:"h-2"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{children:"Saque"}),i.jsxs("span",{className:"font-medium",children:[B.ratings.serve,"/100"]})]}),i.jsx(ec,{value:B.ratings.serve,className:"h-2"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{children:"Bloqueio"}),i.jsxs("span",{className:"font-medium",children:[B.ratings.block,"/100"]})]}),i.jsx(ec,{value:B.ratings.block,className:"h-2"})]}),i.jsx("div",{className:"pt-2 border-t",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:"Nota Geral"}),i.jsx("span",{className:"text-2xl font-bold text-primary",children:B.ratings.overall})]})}),B.lastEvaluated&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Última avaliação: ",new Date(B.lastEvaluated).toLocaleDateString("pt-BR")]})]})]})]})})},B.id))}):i.jsx(ie,{className:"border-dashed",children:i.jsxs(ce,{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx(mc,{className:"h-12 w-12 text-muted-foreground mb-3"}),i.jsx("h3",{className:"mb-2",children:"Nenhum jogador para avaliar"}),i.jsx("p",{className:"text-muted-foreground",children:"Adicione jogadores ao elenco para começar a avaliar"})]})})]}),i.jsx(ft,{value:"info",className:"space-y-4",children:i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx("h3",{children:"Informações do Time"})}),i.jsxs(ce,{className:"space-y-3",children:[n.city&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Cidade:"}),i.jsx("span",{children:n.city})]}),n.founded&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Fundação:"}),i.jsx("span",{children:n.founded})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Títulos:"}),i.jsx("span",{children:n.championships||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Jogadores:"}),i.jsx("span",{children:n.players?.length||0})]}),n.bio&&i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("span",{className:"text-muted-foreground block mb-2",children:"Sobre:"}),i.jsx("p",{className:"text-sm",children:n.bio})]})]})]})})]})}),i.jsx(sn,{open:m,onOpenChange:f,children:i.jsxs(Yt,{className:"max-w-2xl",children:[i.jsxs(fn,{children:[i.jsx(on,{children:"Editar Escalação"}),i.jsx(Ln,{children:"Defina os jogadores titulares para cada posição"})]}),i.jsx("div",{className:"space-y-4",children:["Líbero","Central 1","Oposto","Levantador","Central 2","Ponteiro"].map((B,te)=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ze,{className:"w-32",children:B}),i.jsxs(qa,{children:[i.jsx(Ha,{children:i.jsx(Wa,{placeholder:"Selecione o jogador"})}),i.jsx(Ga,{children:n.players?.map(Te=>i.jsxs(tn,{value:Te.id,children:["#",Te.number," ",Te.name," - ",Te.position]},Te.id))})]})]},te))}),i.jsxs(Hi,{children:[i.jsx(q,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),i.jsxs(q,{onClick:()=>{K.success("Escalação atualizada!"),f(!1)},children:[i.jsx(f1,{className:"h-4 w-4 mr-2"}),"Salvar Escalação"]})]})]})}),i.jsx(sn,{open:v,onOpenChange:y,children:i.jsxs(Yt,{children:[i.jsxs(fn,{children:[i.jsxs(on,{children:["Avaliar ",k?.name]}),i.jsx(Ln,{children:"Avalie o desempenho do atleta em diferentes aspectos"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(ze,{children:"Ataque"}),i.jsxs("span",{className:"text-sm font-medium",children:[_.attack,"/100"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:_.attack,onChange:B=>I({..._,attack:parseInt(B.target.value)}),className:"w-full"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(ze,{children:"Defesa"}),i.jsxs("span",{className:"text-sm font-medium",children:[_.defense,"/100"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:_.defense,onChange:B=>I({..._,defense:parseInt(B.target.value)}),className:"w-full"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(ze,{children:"Saque"}),i.jsxs("span",{className:"text-sm font-medium",children:[_.serve,"/100"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:_.serve,onChange:B=>I({..._,serve:parseInt(B.target.value)}),className:"w-full"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(ze,{children:"Bloqueio"}),i.jsxs("span",{className:"text-sm font-medium",children:[_.block,"/100"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:_.block,onChange:B=>I({..._,block:parseInt(B.target.value)}),className:"w-full"})]}),i.jsx("div",{className:"p-4 bg-muted rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:"Nota Geral"}),i.jsx("span",{className:"text-2xl font-bold text-primary",children:Math.round((_.attack+_.defense+_.serve+_.block)/4)})]})}),i.jsxs("div",{children:[i.jsx(ze,{children:"Observações (opcional)"}),i.jsx(os,{placeholder:"Adicione observações sobre o desempenho do atleta...",value:_.notes,onChange:B=>I({..._,notes:B.target.value}),rows:3})]})]}),i.jsxs(Hi,{children:[i.jsx(q,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),i.jsxs(q,{onClick:le,children:[i.jsx(f1,{className:"h-4 w-4 mr-2"}),"Salvar Avaliação"]})]})]})}),i.jsx(Tu,{open:w,onOpenChange:b,children:i.jsxs(Nu,{children:[i.jsxs(Eu,{children:[i.jsxs(_u,{children:["Remover ",k?.name,"?"]}),i.jsx(Ru,{children:"Tem certeza que deseja remover este jogador do elenco? Esta ação não pode ser desfeita. O jogador será movido para o mural de ex-jogadores."})]}),i.jsxs(Pu,{children:[i.jsx(Iu,{children:"Cancelar"}),i.jsx(Au,{onClick:ee,className:"bg-destructive",children:"Sim, remover"})]})]})}),i.jsx(Tu,{open:d,onOpenChange:h,children:i.jsxs(Nu,{children:[i.jsxs(Eu,{children:[i.jsxs(_u,{children:["Deixar de seguir ",n.name,"?"]}),i.jsx(Ru,{children:"Tem certeza que deseja deixar de seguir este time? Você não verá mais as atualizações no seu feed."})]}),i.jsxs(Pu,{children:[i.jsx(Iu,{children:"Cancelar"}),i.jsx(Au,{onClick:U,children:"Sim, deixar de seguir"})]})]})})]})}function Xl({position:t,label:e}){return i.jsxs("div",{className:"bg-white rounded-lg p-3 text-center border-2 border-orange-400 shadow-md",children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:t}),i.jsx("div",{className:"text-xs text-gray-600",children:e}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Selecione"})]})}function cie({onBack:t,onEditProfile:e}){const[n,r]=g.useState(null),[s,o]=g.useState(!0),[a,l]=g.useState(!1);g.useEffect(()=>{d(),h()},[]);async function d(){o(!0);try{console.log("🔄 Carregando perfil do usuário...");const{profile:w}=await ar.getCurrentUser();console.log("📊 Meu perfil carregado:",w),console.log("📸 Photo URL:",w?.photoUrl),console.log("📊 Followers:",w?.followers,"| Following:",w?.following),r(w)}catch(w){console.error("❌ Erro ao carregar perfil:",w),K.error("Erro ao carregar perfil",{description:w.message||"Tente fazer login novamente"})}finally{o(!1)}}async function h(){try{const{isMaster:w}=await Wo.checkMasterStatus();l(w),w&&console.log("👑 MASTER USER no perfil!")}catch{l(!1)}}if(s)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(or,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Carregando perfil..."})]})});if(!n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"Perfil não encontrado"}),i.jsx(q,{onClick:t,children:"Voltar"})]})});const m=n.nickname||n.name,f=m.split(" ").map(w=>w[0]).join("").toUpperCase(),v=w=>{if(!w)return null;const b=new Date,k=new Date(w);let j=b.getFullYear()-k.getFullYear();const T=b.getMonth()-k.getMonth();return(T<0||T===0&&b.getDate()<k.getDate())&&j--,j},y=n.dateOfBirth?v(n.dateOfBirth):null;return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[i.jsxs("div",{className:"bg-gradient-to-br from-primary via-primary to-secondary pb-32 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDE0YzMuMzEgMCA2IDIuNjkgNiA2cy0yLjY5IDYtNiA2LTYtMi42OS02LTYgMi42OS02IDYtNnpNNiAzNGMzLjMxIDAgNiAyLjY5IDYgNnMtMi42OSA2LTYgNi02LTIuNjktNi02IDIuNjktNiA2LTZ6TTM2IDM0YzMuMzEgMCA2IDIuNjkgNiA2cy0yLjY5IDYtNiA2LTYtMi42OS02LTYgMi42OS02IDYtNnoiLz48L2c+PC9nPjwvc3ZnPg==')] opacity-30"}),i.jsxs("div",{className:"container mx-auto py-6 relative z-10",children:[i.jsxs(q,{variant:"ghost",onClick:t,className:"mb-6 text-white hover:bg-white/20 hover:text-white",children:[i.jsx(W0,{className:"h-4 w-4 mr-2"}),"Voltar"]}),i.jsxs("div",{className:"flex items-start gap-8",children:[i.jsxs(Gt,{className:"h-40 w-40 border-4 border-white shadow-2xl ring-4 ring-white/20",children:[n.photoUrl?i.jsx(rn,{src:n.photoUrl,alt:m,className:"object-cover"}):null,i.jsx(Kt,{className:"text-4xl bg-gradient-to-br from-white to-gray-100 text-primary",children:f})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h1",{className:"text-white",children:m}),n.nickname&&n.name!==n.nickname&&i.jsxs("span",{className:"text-white/80 text-lg",children:["(",n.name,")"]}),a&&i.jsxs(Se,{className:"bg-gradient-to-r from-yellow-400 to-amber-500 text-black border-0 shadow-lg",children:[i.jsx(H0,{className:"h-3 w-3 mr-1"}),"MASTER"]})]}),n.userType==="athlete"&&n.position&&i.jsx("p",{className:"text-white/90 text-xl",children:n.position}),n.currentTeam&&i.jsxs("p",{className:"text-white/80 flex items-center gap-2 mt-1",children:[i.jsx(wt,{className:"h-4 w-4"}),n.currentTeam]})]}),i.jsxs(q,{onClick:e,className:"bg-white text-primary hover:bg-white/90",children:[i.jsx(zE,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})]}),n.city&&i.jsxs(Se,{variant:"secondary",className:"mb-4",children:[i.jsx(_s,{className:"h-3 w-3 mr-1"}),n.city]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.userType==="athlete"&&i.jsxs(i.Fragment,{children:[y&&i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(jr,{className:"h-5 w-5 mx-auto mb-2 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Idade"}),i.jsx("p",{className:"text-2xl",children:y})]})}),n.height&&i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(JL,{className:"h-5 w-5 mx-auto mb-2 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Altura"}),i.jsx("p",{className:"text-2xl",children:Ou(n.height)})]})}),n.weight&&i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(I3,{className:"h-5 w-5 mx-auto mb-2 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Peso"}),i.jsx("p",{className:"text-2xl",children:FH(n.weight)})]})}),n.gender&&i.jsx(ie,{children:i.jsxs(ce,{className:"p-4 text-center",children:[i.jsx(Qn,{className:"h-5 w-5 mx-auto mb-2 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Sexo"}),i.jsx("p",{className:"text-2xl",children:n.gender==="M"?"M":n.gender==="F"?"F":n.gender})]})})]})})]})]})]})]}),i.jsx("div",{className:"container mx-auto -mt-24",children:i.jsxs(Ji,{defaultValue:"info",className:"space-y-6",children:[i.jsxs(Yi,{children:[i.jsx(mt,{value:"info",children:"Informações"}),n.userType==="athlete"&&i.jsxs(i.Fragment,{children:[i.jsx(mt,{value:"history",children:"Histórico"}),i.jsx(mt,{value:"achievements",children:"Conquistas"})]})]}),i.jsxs(ft,{value:"info",className:"space-y-6",children:[i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx("h3",{children:"Sobre"})}),i.jsx(ce,{children:n.bio?i.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.bio}):i.jsx("p",{className:"text-muted-foreground italic",children:'Nenhuma biografia adicionada. Clique em "Editar Perfil" para adicionar.'})})]}),n.userType==="athlete"&&i.jsxs(ie,{children:[i.jsx(et,{children:i.jsx("h3",{children:"Informações do Atleta"})}),i.jsx(ce,{className:"space-y-3",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Nome Completo"}),i.jsx("p",{children:n.name})]}),n.nickname&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Apelido"}),i.jsx("p",{children:n.nickname})]}),n.position&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Posição"}),i.jsx("p",{children:n.position})]}),n.currentTeam&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Time Atual"}),i.jsx("p",{children:n.currentTeam})]})]})})]})]}),n.userType==="athlete"&&i.jsxs(i.Fragment,{children:[i.jsx(ft,{value:"history",children:i.jsxs(ie,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wt,{className:"h-5 w-5 text-primary"}),i.jsx("h3",{children:"Histórico de Times"})]})}),i.jsx(ce,{children:n.teamHistory?i.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.teamHistory}):i.jsx("p",{className:"text-muted-foreground italic",children:'Nenhum histórico adicionado. Adicione seus times anteriores em "Editar Perfil".'})})]})}),i.jsx(ft,{value:"achievements",children:i.jsxs(ie,{children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nt,{className:"h-5 w-5 text-amber-500"}),i.jsx("h3",{children:"Conquistas e Títulos"})]})}),i.jsx(ce,{children:n.achievements?i.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:n.achievements}):i.jsx("p",{className:"text-muted-foreground italic",children:'Nenhuma conquista adicionada. Adicione seus títulos em "Editar Perfil".'})})]})})]})]})})]})}function die({open:t,onClose:e,onSuccess:n}){const[r,s]=g.useState(!1),[o,a]=g.useState(""),[l,d]=g.useState("signup"),[h,m]=g.useState(""),[f,v]=g.useState(""),[y,w]=g.useState(""),[b,k]=g.useState("fan"),[j,T]=g.useState(""),[E,P]=g.useState(""),[N,_]=g.useState(""),[I,M]=g.useState("");g.useEffect(()=>{t?(a(""),s(!1)):setTimeout(()=>{m(""),v(""),w(""),T(""),P(""),_(""),M(""),a("")},300)},[t]),g.useEffect(()=>{a("")},[l,b]);const O=async()=>{console.log("🚀 [Chrome-Optimized] Iniciando cadastro..."),a(""),s(!0);try{if(!h||!f||!y)throw new Error("Por favor, preencha todos os campos obrigatórios");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h))throw new Error("Email inválido. Use um email válido.");if(f.length<6)throw new Error("A senha deve ter no mínimo 6 caracteres");const A={};b==="athlete"&&j&&(A.position=j),E&&(A.city=E),console.log("📝 Criando usuário...",{email:h,userType:b});const Z=await Rt.signUp(h.trim().toLowerCase(),f,y.trim(),b,A);console.log("✅ Usuário criado! Fazendo login..."),await Rt.signIn(h.trim().toLowerCase(),f),console.log("✅ Login automático concluído!"),K.success(`🎉 Bem-vindo ao VolleyPro, ${y}!`,{description:"Sua conta foi criada com sucesso!"}),await new Promise(se=>setTimeout(se,500)),n(),setTimeout(()=>{e()},300)}catch(D){console.error("❌ Erro no cadastro:",D);let A="Erro ao criar conta. Por favor, tente novamente.";D.message?.toLowerCase().includes("user already registered")||D.message?.toLowerCase().includes("already registered")?(A="Este email já está cadastrado. Tente fazer login.",setTimeout(()=>d("signin"),1500)):D.message?.toLowerCase().includes("invalid email")?A="Email inválido. Verifique o formato do email.":D.message?.toLowerCase().includes("password")?A="A senha deve ter no mínimo 6 caracteres.":D.message?.toLowerCase().includes("network")||D.message?.toLowerCase().includes("fetch")?A="Erro de conexão. Verifique sua internet.":D.message&&(A=D.message),a(A),K.error(A)}finally{s(!1)}},L=async()=>{console.log("🔐 [Chrome-Optimized] Iniciando login..."),a(""),s(!0);try{if(!N||!I)throw new Error("Por favor, preencha email e senha");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N))throw new Error("Email inválido");console.log("📧 Fazendo login com:",N);const A=await Rt.signIn(N.trim().toLowerCase(),I);console.log("✅ Login concluído!"),K.success("🏐 Login realizado com sucesso!",{description:"Bem-vindo de volta ao VolleyPro!"}),await new Promise(Z=>setTimeout(Z,500)),n(),setTimeout(()=>{e()},300)}catch(D){console.error("❌ Erro no login:",D);let A="Erro ao fazer login.";D.message?.toLowerCase().includes("invalid")||D.message?.toLowerCase().includes("credentials")?A="Email ou senha incorretos. Verifique suas credenciais.":D.message?.toLowerCase().includes("not confirmed")?A="Email não confirmado. Verifique sua caixa de entrada.":D.message?.toLowerCase().includes("network")||D.message?.toLowerCase().includes("fetch")?A="Erro de conexão. Verifique sua internet.":D.message&&(A=D.message),a(A),K.error(A)}finally{s(!1)}};return t?i.jsx(sn,{open:t,onOpenChange:e,children:i.jsxs(Yt,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[i.jsxs(fn,{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-secondary",children:i.jsx(Qn,{className:"h-6 w-6 text-white"})}),i.jsx(on,{children:"VolleyPro"})]}),i.jsx(Ln,{children:"Entre ou crie sua conta para acessar a rede social do vôlei"})]}),i.jsxs(Ji,{value:l,onValueChange:D=>d(D),className:"mt-6",children:[i.jsxs(Yi,{className:"grid w-full grid-cols-2",children:[i.jsx(mt,{value:"signin",children:"Entrar"}),i.jsx(mt,{value:"signup",children:"Criar Conta"})]}),i.jsxs(ft,{value:"signin",className:"space-y-4",children:[i.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-primary",children:["💡 ",i.jsx("strong",{children:"Primeira vez?"}),' Clique em "Criar Conta" acima']})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"signin-email",children:"Email"}),i.jsx(ht,{id:"signin-email",type:"email",placeholder:"seu@email.com",value:N,onChange:D=>_(D.target.value),onKeyDown:D=>D.key==="Enter"&&!r&&L(),disabled:r,autoComplete:"email"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"signin-password",children:"Senha"}),i.jsx(ht,{id:"signin-password",type:"password",placeholder:"••••••••",value:I,onChange:D=>M(D.target.value),onKeyDown:D=>D.key==="Enter"&&!r&&L(),disabled:r,autoComplete:"current-password"})]}),o&&i.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3 flex items-start gap-2",children:[i.jsx(Jt,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),i.jsx("p",{className:"text-sm text-destructive",children:o})]}),i.jsx(q,{className:"w-full",onClick:L,disabled:r||!N||!I,children:r?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):"Entrar"}),i.jsx("p",{className:"text-xs text-center text-muted-foreground",children:'Não tem uma conta? Clique em "Criar Conta" acima.'})]}),i.jsxs(ft,{value:"signup",className:"space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-r from-secondary/10 to-primary/10 border border-secondary/20 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm",children:["🏐 ",i.jsx("strong",{children:"Junte-se ao VolleyPro!"})," Crie sua conta gratuitamente!"]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"signup-type",children:"Tipo de Conta"}),i.jsxs(qa,{value:b,onValueChange:D=>k(D),children:[i.jsx(Ha,{id:"signup-type",children:i.jsx(Wa,{})}),i.jsxs(Ga,{children:[i.jsx(tn,{value:"fan",children:"🏐 Fã / Torcedor"}),i.jsx(tn,{value:"athlete",children:"⭐ Atleta"}),i.jsx(tn,{value:"team",children:"🏆 Time / Clube"})]})]}),b==="athlete"&&i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"⭐ Compartilhe treinos, conquistas e conecte-se com times!"}),b==="team"&&i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"🏆 Recrute atletas, organize torneios e gerencie sua equipe!"}),b==="fan"&&i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"🏐 Acompanhe atletas e times favoritos, interaja e torça!"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"signup-name",children:[b==="fan"&&"Seu Nome",b==="athlete"&&"Nome do Atleta",b==="team"&&"Nome do Time/Clube"]}),i.jsx(ht,{id:"signup-name",placeholder:b==="fan"?"Ex: João Silva":b==="athlete"?"Ex: Maria Santos":"Ex: Vôlei Clube São Paulo",value:y,onChange:D=>w(D.target.value),disabled:r,autoComplete:"name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"signup-email",children:"Email"}),i.jsx(ht,{id:"signup-email",type:"email",placeholder:"seu@email.com",value:h,onChange:D=>m(D.target.value),disabled:r,autoComplete:"email"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"signup-password",children:"Senha (mínimo 6 caracteres)"}),i.jsx(ht,{id:"signup-password",type:"password",placeholder:"••••••••",value:f,onChange:D=>v(D.target.value),disabled:r,autoComplete:"new-password"})]}),b==="athlete"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"position",children:"Posição (Opcional)"}),i.jsxs(qa,{value:j,onValueChange:T,disabled:r,children:[i.jsx(Ha,{id:"position",children:i.jsx(Wa,{placeholder:"Selecione sua posição"})}),i.jsxs(Ga,{children:[i.jsx(tn,{value:"Levantador",children:"Levantador"}),i.jsx(tn,{value:"Ponteiro",children:"Ponteiro"}),i.jsx(tn,{value:"Central",children:"Central"}),i.jsx(tn,{value:"Oposto",children:"Oposto"}),i.jsx(tn,{value:"Líbero",children:"Líbero"})]})]})]}),(b==="team"||b==="fan")&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"city",children:["Cidade ",b==="fan"?"(Opcional)":""]}),i.jsx(ht,{id:"city",placeholder:"Ex: São Paulo, SP",value:E,onChange:D=>P(D.target.value),disabled:r,autoComplete:"address-level2"}),b==="fan"&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"💡 Ajuda a conectar com a comunidade local"})]}),o&&i.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3 flex items-start gap-2",children:[i.jsx(Jt,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),i.jsx("p",{className:"text-sm text-destructive",children:o})]}),i.jsx(q,{className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90",onClick:O,disabled:r||!h||!f||!y,children:r?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando conta..."]}):"Criar Conta"}),i.jsx("p",{className:"text-xs text-center text-muted-foreground",children:'Já tem uma conta? Clique em "Entrar" acima.'})]})]})]})}):null}function uie({currentPhotoUrl:t,userName:e,userId:n,onPhotoUploaded:r}){const[s,o]=g.useState(!1),[a,l]=g.useState(t||null),d=g.useRef(null),h=e.split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,2);async function m(v){const y=v.target.files?.[0];if(!y)return;const w=5*1024*1024;if(y.size>w){K.error("A imagem deve ter no máximo 5MB");return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(y.type)){K.error("Formato inválido. Use JPG, PNG ou WEBP");return}o(!0);try{console.log("📤 Iniciando upload via servidor...");const k=Nw(),{data:{session:j},error:T}=await k.auth.getSession();if(T||!j?.access_token)throw console.error("❌ Erro ao obter sessão:",T),new Error("Você precisa estar logado para fazer upload");const E=j.access_token;console.log("✅ Token de autenticação obtido com sucesso");const P=new FormData;P.append("file",y),P.append("userId",n),P.append("type","avatar");const N=await fetch(`https://${el}.supabase.co/functions/v1/make-server-0ea22bba/upload-avatar`,{method:"POST",headers:{Authorization:`Bearer ${E}`},body:P});if(!N.ok){const I=await N.json();throw console.error("❌ Erro do servidor:",I),new Error(I.error||`Upload falhou: ${N.status}`)}const{url:_}=await N.json();console.log("✅ Upload concluído!"),console.log("🔗 URL pública:",_),l(_),r(_),K.success("Foto atualizada com sucesso! 📸")}catch(k){console.error("❌ Erro completo ao fazer upload:",k),k.message?.includes("RLS")||k.message?.includes("row-level security")?K.error("Erro de permissão. Configure as políticas do Storage no Supabase.",{description:"Veja instruções em CORRECOES_LOGIN_E_FOTO.md",duration:8e3,icon:i.jsx(Jt,{className:"h-5 w-5"})}):k.message?.includes("logado")?K.error("Você precisa estar logado para fazer upload"):K.error(k.message||"Erro ao fazer upload da foto")}finally{o(!1),d.current&&(d.current.value="")}}async function f(){if(a)try{o(!0),l(null),r(""),K.success("Foto removida com sucesso")}catch(v){console.error("❌ Erro ao remover foto:",v),K.error("Erro ao remover foto")}finally{o(!1)}}return i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs(Gt,{className:"h-32 w-32 border-4 border-muted",children:[a?i.jsx(rn,{src:a,alt:e}):null,i.jsx(Kt,{className:"text-3xl bg-gradient-to-br from-primary to-secondary text-white",children:h})]}),s&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:i.jsx(or,{className:"h-8 w-8 text-white animate-spin"})}),a&&!s&&i.jsx(q,{size:"icon",variant:"destructive",className:"absolute -top-2 -right-2 h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",onClick:f,children:i.jsx(cr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[i.jsx("input",{ref:d,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:m,className:"hidden",disabled:s}),i.jsxs(q,{variant:"outline",size:"sm",onClick:()=>d.current?.click(),disabled:s,children:[i.jsx(Nr,{className:"h-4 w-4 mr-2"}),a?"Trocar Foto":"Adicionar Foto"]}),i.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"JPG, PNG ou WEBP (máx. 5MB)"})]})]})}function hie({open:t,onClose:e,onSuccess:n}){const[r,s]=g.useState(!1),[o,a]=g.useState(!0),[l,d]=g.useState(null),[h,m]=g.useState(null),[f,v]=g.useState(null),[y,w]=g.useState(""),[b,k]=g.useState(""),[j,T]=g.useState(""),[E,P]=g.useState(""),[N,_]=g.useState(""),[I,M]=g.useState(""),[O,L]=g.useState(""),[D,A]=g.useState(""),[Z,se]=g.useState(""),[fe,ae]=g.useState(""),[de,U]=g.useState(""),[G,le]=g.useState(""),[$,ee]=g.useState(""),[he,B]=g.useState("");g.useEffect(()=>{t&&(m(null),te())},[t]);async function te(){a(!0),m(null);try{const ve=await Rt.getCurrentUserIdAsync();if(!ve)throw new Error("Usuário não autenticado. Faça login novamente.");v(ve),console.log("📊 Carregando perfil para userId:",ve);const{profile:Ee}=await ar.getCurrentUser();if(console.log("📊 Perfil carregado:",Ee),!Ee)throw new Error("Perfil não encontrado");const me={...Ee,userType:Ee.userType||"fan"};d(me),w(Ee.name||""),k(Ee.nickname||""),T(Ee.bio||""),P(Ee.city||""),_(Ee.photoUrl||""),M(Ee.dateOfBirth||""),L(Ee.gender||""),A(Ee.height?.toString()||""),se(Ee.weight?.toString()||""),ae(Ee.position||""),U(Ee.currentTeam||"");const it=Array.isArray(Ee.teamHistory)?Ee.teamHistory.join(`
`):Ee.teamHistory||"";le(it);const yt=Array.isArray(Ee.achievements)?Ee.achievements.join(`
`):Ee.achievements||"";ee(yt),B(Ee.cpf||"")}catch(ve){console.error("❌ Erro ao carregar perfil:",ve);const Ee=ve.message||"Erro ao carregar perfil";m(Ee),K.error(Ee,{description:"Tente novamente ou entre em contato com o suporte"}),d({userType:"fan"})}finally{a(!1)}}async function Te(){if(!y.trim()){K.error("Nome é obrigatório",{description:"Por favor, preencha seu nome"});return}if(!l){K.error("Erro ao salvar",{description:"Perfil não carregado. Tente fechar e abrir novamente."});return}s(!0),m(null);try{const ve={name:y.trim(),city:E.trim()||null,bio:j.trim()||null,photoUrl:N||null};if(l.userType==="athlete"){ve.nickname=b.trim()||null,ve.dateOfBirth=I||null,ve.gender=O||null;const me=D?parseInt(D,10):null,it=Z?parseFloat(Z):null;console.log("🔢 Convertendo altura:",D,"->",me),console.log("🔢 Convertendo peso:",Z,"->",it),ve.height=me,ve.weight=it,ve.position=fe||null;const yt=G?G.split(`
`).map(an=>an.trim()).filter(an=>an.length>0):[];ve.teamHistory=yt.length>0?yt:null;const vt=$?$.split(`
`).map(an=>an.trim()).filter(an=>an.length>0):[];ve.achievements=vt.length>0?vt:null,ve.cpf=he.trim()||null}console.log("💾 Salvando perfil completo:",ve);const{profile:Ee}=await ar.updateCurrentUser(ve);console.log("✅ Perfil atualizado:",Ee),K.success("Perfil atualizado com sucesso! 🎉",{description:"Suas informações foram salvas"}),window.dispatchEvent(new CustomEvent("profileUpdated",{detail:Ee})),n&&n(),e()}catch(ve){console.error("❌ Erro ao salvar perfil:",ve);const Ee=ve.message||"Erro ao salvar perfil";m(Ee),K.error("Erro ao salvar perfil",{description:Ee})}finally{s(!1)}}const re=ve=>{switch(ve){case"athlete":return"Atleta";case"team":return"Time";case"fan":return"Fã/Torcedor";default:return ve}},ge=ve=>{switch(ve){case"athlete":return i.jsx(mu,{className:"h-4 w-4"});case"team":return i.jsx(Qn,{className:"h-4 w-4"});case"fan":return i.jsx(wt,{className:"h-4 w-4"});default:return i.jsx(mu,{className:"h-4 w-4"})}},_e=()=>{m(null),e()};return i.jsx(sn,{open:t,onOpenChange:_e,children:i.jsxs(Yt,{className:"sm:max-w-[600px] max-h-[90vh]",children:[i.jsxs(fn,{children:[i.jsxs(on,{className:"flex items-center gap-2",children:["Editar Perfil",l&&i.jsxs(Se,{variant:"secondary",className:"ml-2",children:[ge(l.userType),i.jsx("span",{className:"ml-1",children:re(l.userType)})]})]}),i.jsx(Ln,{children:"Atualize suas informações pessoais"})]}),h&&i.jsxs(Fi,{variant:"destructive",children:[i.jsx(Jt,{className:"h-4 w-4"}),i.jsxs(Vi,{className:"ml-2",children:[h,i.jsx(q,{variant:"link",size:"sm",onClick:te,className:"ml-2 p-0 h-auto",children:"Tentar novamente"})]})]}),o?i.jsxs("div",{className:"py-12 flex flex-col items-center justify-center gap-4",children:[i.jsx(or,{className:"h-8 w-8 animate-spin text-primary"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando perfil..."})]}):l?i.jsx(lc,{className:"max-h-[60vh] pr-4",children:i.jsxs("div",{className:"space-y-4 py-4",children:[f?i.jsx("div",{className:"flex justify-center py-4 border-b",children:i.jsx(uie,{currentPhotoUrl:N,userName:y||l?.name||"Usuário",userId:f,onPhotoUploaded:_})}):i.jsx("div",{className:"flex justify-center py-4 border-b",children:i.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[i.jsx(Jt,{className:"h-8 w-8 mx-auto mb-2"}),i.jsx("p",{children:"Não foi possível carregar o uploader de fotos"})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"name",children:[l.userType==="athlete"&&"Nome Completo",l.userType==="team"&&"Nome do Time/Clube",(!l.userType||l.userType==="fan")&&"Seu Nome",i.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),i.jsx(ht,{id:"name",placeholder:l.userType==="athlete"?"Ex: Maria Santos":l.userType==="team"?"Ex: Vôlei Clube São Paulo":"Ex: João Silva",value:y,onChange:ve=>w(ve.target.value)})]}),l.userType==="athlete"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"nickname",children:["Apelido",i.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(opcional)"})]}),i.jsx(ht,{id:"nickname",placeholder:"Ex: Maju, Bruninho, Giba...",value:b,onChange:ve=>k(ve.target.value)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"💡 Como você é conhecido(a) nas quadras. Se preenchido, será exibido no lugar do nome."})]}),l.userType==="athlete"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"dateOfBirth",children:"Data de Nascimento"}),i.jsx(ht,{id:"dateOfBirth",type:"date",value:I,onChange:ve=>M(ve.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"gender",children:"Sexo"}),i.jsxs(qa,{value:O||void 0,onValueChange:L,children:[i.jsx(Ha,{id:"gender",children:i.jsx(Wa,{placeholder:"Selecione"})}),i.jsxs(Ga,{children:[i.jsx(tn,{value:"M",children:"Masculino"}),i.jsx(tn,{value:"F",children:"Feminino"}),i.jsx(tn,{value:"Outro",children:"Outro"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"height",children:"Altura (cm)"}),i.jsx(ht,{id:"height",type:"number",min:"100",max:"250",placeholder:"Ex: 185",value:D,onChange:ve=>A(ve.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"weight",children:"Peso (kg)"}),i.jsx(ht,{id:"weight",type:"number",min:"40",max:"200",step:"0.1",placeholder:"Ex: 75",value:Z,onChange:ve=>se(ve.target.value)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"position",children:"Posição"}),i.jsxs(qa,{value:fe||void 0,onValueChange:ae,children:[i.jsx(Ha,{id:"position",children:i.jsx(Wa,{placeholder:"Selecione sua posição"})}),i.jsxs(Ga,{children:[i.jsx(tn,{value:"Levantador",children:"Levantador"}),i.jsx(tn,{value:"Ponteiro",children:"Ponteiro"}),i.jsx(tn,{value:"Central",children:"Central"}),i.jsx(tn,{value:"Oposto",children:"Oposto"}),i.jsx(tn,{value:"Líbero",children:"Líbero"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"currentTeam",children:["Time Atual",i.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(automático)"})]}),i.jsx(ht,{id:"currentTeam",placeholder:"Aguardando convocação de um time...",value:de,disabled:!0,className:"bg-muted/50 cursor-not-allowed"}),i.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["🏐 ",i.jsx("strong",{children:"Este campo é preenchido automaticamente"})," quando você for convocado e aceitar o convite de um time."]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"teamHistory",children:"Histórico de Times Anteriores"}),i.jsx(os,{id:"teamHistory",placeholder:`Sesi-SP (2018-2020)
Flamengo (2020-2022)
Minas Tênis Clube (2022-2023)`,value:G,onChange:ve=>le(ve.target.value),rows:3}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"💡 Digite um time por linha. Cada linha será exibida separadamente no seu perfil."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"achievements",children:"Conquistas"}),i.jsx(os,{id:"achievements",placeholder:`Campeão Paulista 2021
Medalha de Bronze Sul-Americano 2022
MVP do Torneio Regional 2023`,value:$,onChange:ve=>ee(ve.target.value),rows:3}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"💡 Digite uma conquista por linha. Cada linha será exibida separadamente no seu perfil."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ze,{htmlFor:"cpf",children:["CPF",i.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(opcional)"})]}),i.jsx(ht,{id:"cpf",placeholder:"000.000.000-00",value:he,onChange:ve=>B(ve.target.value),maxLength:14}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"🔒 Usado apenas para participação em times ou torneios oficiais"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"city",children:"Cidade"}),i.jsx(ht,{id:"city",placeholder:"Ex: São Paulo, SP",value:E,onChange:ve=>P(ve.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ze,{htmlFor:"bio",children:"Bio / Sobre"}),i.jsx(os,{id:"bio",placeholder:l.userType==="athlete"?"Conte um pouco sobre sua carreira e objetivos...":l.userType==="team"?"Apresente seu time ou clube...":"Conte um pouco sobre você...",value:j,onChange:ve=>T(ve.target.value),rows:3})]})]})}):i.jsx("div",{className:"py-12 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"Erro ao carregar perfil"})}),i.jsxs(Hi,{children:[i.jsx(q,{variant:"outline",onClick:_e,disabled:r,children:"Cancelar"}),i.jsx(q,{onClick:Te,disabled:r||o||!l||!!h,children:r?i.jsxs(i.Fragment,{children:[i.jsx(or,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):"Salvar Alterações"})]})]})})}function mie(t){const[e,n]=g.useState(!1);return g.useEffect(()=>{t.open&&n(!1)},[t.open]),g.useEffect(()=>{const r=s=>{console.error("❌ Erro não capturado no ProfileEditModal:",s.error),n(!0),K.error("Erro inesperado",{description:"Tente fechar e abrir o modal novamente"})};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?i.jsx(sn,{open:t.open,onOpenChange:t.onClose,children:i.jsxs(Yt,{className:"sm:max-w-[500px]",children:[i.jsx(fn,{children:i.jsxs(on,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(Jt,{className:"h-5 w-5"}),"Erro ao Carregar Editor"]})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs(Fi,{variant:"destructive",children:[i.jsx(Jt,{className:"h-4 w-4"}),i.jsx(Vi,{className:"ml-2",children:"Ocorreu um erro inesperado ao carregar o editor de perfil."})]}),i.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsx("p",{children:i.jsx("strong",{children:"Possíveis soluções:"})}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[i.jsx("li",{children:"Feche e abra o modal novamente"}),i.jsx("li",{children:"Faça logout e login novamente"}),i.jsx("li",{children:"Limpe o cache do navegador"}),i.jsx("li",{children:"Tente em uma janela anônima"})]})]})]}),i.jsxs(Hi,{children:[i.jsx(q,{variant:"outline",onClick:t.onClose,children:"Fechar"}),i.jsx(q,{onClick:()=>{n(!1),window.location.reload()},children:"Recarregar Página"})]})]})}):i.jsx(hie,{...t})}function fie(){return i.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-primary via-secondary to-primary flex items-center justify-center z-50",children:i.jsxs(si.div,{className:"text-center",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[i.jsx(si.div,{className:"inline-flex items-center justify-center mb-6",animate:{scale:[1,1.1,1]},transition:{scale:{duration:2,repeat:1/0,ease:"easeInOut"}},children:i.jsx(vc,{variant:"icon",className:"w-24 h-24 drop-shadow-2xl"})}),i.jsxs(si.div,{className:"flex items-center justify-center gap-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[i.jsx("span",{className:"text-4xl font-black text-white tracking-tight",children:"Volley"}),i.jsx("span",{className:"text-4xl font-black text-[#FFC72C] tracking-tight",children:"Pro"})]}),i.jsx(si.p,{className:"text-white/90 mt-4 text-sm tracking-wide",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"Carregando a rede social do vôlei..."}),i.jsx(si.div,{className:"mt-6 flex justify-center gap-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[0,1,2].map(t=>i.jsx(si.div,{className:"w-2 h-2 bg-white rounded-full",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:t*.2}},t))})]})})}function pie({onLoginClick:t}){const e=[{icon:wt,title:"Conecte-se com Atletas",description:"Siga seus jogadores favoritos, acompanhe suas carreiras e interaja com a comunidade do vôlei."},{icon:Qn,title:"Times e Equipes",description:"Crie perfis de times, gerencie elencos e mantenha sua equipe sempre atualizada."},{icon:Nt,title:"Torneios e Competições",description:"Organize torneios, acompanhe tabelas, classificações e rankings MVP em tempo real."},{icon:In,title:"Transmissões ao Vivo",description:"Assista e transmita jogos ao vivo, compartilhe momentos especiais com a comunidade."},{icon:gf,title:"Vitrine de Jogadores",description:"Atletas livres no mercado podem se destacar e receber convites de times interessados."},{icon:Mo,title:"Feed Social Completo",description:"Publique fotos, vídeos, enquetes e interaja com curtidas, comentários e compartilhamentos."}],n=[{value:"1000+",label:"Atletas"},{value:"200+",label:"Times"},{value:"50+",label:"Torneios"},{value:"10k+",label:"Torcedores"}];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[i.jsx("header",{className:"border-b bg-gradient-to-r from-primary via-[#0052cc] to-primary shadow-lg sticky top-0 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-6",children:[i.jsx(vc,{variant:"compact",className:"[&_img]:w-9 [&_img]:h-9 [&_span]:text-white",withShadow:!0}),i.jsx(q,{onClick:t,className:"bg-white text-primary hover:bg-white/90 shadow-lg font-semibold",size:"lg",children:"Entrar / Cadastrar"})]})}),i.jsxs("section",{className:"relative overflow-hidden py-20 md:py-32",children:[i.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%230066ff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),i.jsx("div",{className:"container mx-auto px-6 relative z-10",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx(vc,{className:"[&_img]:w-20 [&_img]:h-20"})}),i.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-primary via-[#0052cc] to-secondary bg-clip-text text-transparent",children:"A Rede Social do Vôlei"}),i.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Conecte-se com atletas, times e torcedores. Organize torneios, transmita jogos ao vivo e faça parte da maior comunidade de vôlei do Brasil!"}),i.jsxs("div",{className:"bg-gradient-to-r from-primary/10 via-secondary/10 to-primary/10 border-2 border-primary/20 rounded-xl p-6 max-w-2xl mx-auto mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[i.jsx(fu,{className:"h-5 w-5 text-primary"}),i.jsx("span",{className:"font-bold text-primary text-lg",children:"VERSÃO BETA - TESTE GRÁTIS!"}),i.jsx(fu,{className:"h-5 w-5 text-secondary"})]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Seja um dos primeiros testadores do VolleyPro! Crie sua conta gratuitamente, complete seu perfil e ajude-nos a construir a melhor rede social do vôlei.",i.jsx("strong",{className:"text-foreground",children:" Todas as funcionalidades estão liberadas!"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[i.jsxs(q,{onClick:t,size:"lg",className:"bg-gradient-to-r from-primary to-[#0052cc] hover:from-primary/90 hover:to-[#0052cc]/90 text-white shadow-2xl shadow-primary/50 text-lg px-8 py-6 h-auto",children:[i.jsx(uu,{className:"mr-2 h-5 w-5"}),"Criar Conta Grátis!"]}),i.jsx(q,{onClick:t,size:"lg",variant:"outline",className:"border-2 border-primary text-primary hover:bg-primary/10 text-lg px-8 py-6 h-auto",children:"Já tenho conta"})]}),i.jsxs("div",{className:"mt-12 flex flex-wrap justify-center gap-6 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary"}),i.jsx("span",{children:"100% Gratuito"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary"}),i.jsx("span",{children:"Sem Anúncios"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary"}),i.jsx("span",{children:"Dados Seguros"})]})]})]})})]}),i.jsx("section",{className:"py-12 bg-gradient-to-r from-primary via-[#0052cc] to-secondary",children:i.jsx("div",{className:"container mx-auto px-6",children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:n.map((r,s)=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl md:text-5xl font-bold text-white mb-2",children:r.value}),i.jsx("div",{className:"text-white/80 text-sm md:text-base",children:r.label})]},s))})})}),i.jsx("section",{className:"py-20 md:py-32",children:i.jsxs("div",{className:"container mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Tudo que você precisa em um só lugar"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Uma plataforma completa para atletas, times e fãs do vôlei profissional"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((r,s)=>i.jsx(ie,{className:"border-2 hover:border-primary/50 transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:i.jsxs(ce,{className:"p-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-primary to-secondary rounded-xl p-3 w-fit mb-4",children:i.jsx(r.icon,{className:"h-6 w-6 text-white"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:r.title}),i.jsx("p",{className:"text-muted-foreground",children:r.description})]})},s))})]})}),i.jsx("section",{className:"py-20 bg-muted/30",children:i.jsxs("div",{className:"container mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Para quem é o VolleyPro?"}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Três tipos de perfis para atender toda a comunidade do vôlei"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[i.jsx(ie,{className:"border-2 border-primary/20 hover:border-primary transition-all duration-300 hover:shadow-2xl",children:i.jsxs(ce,{className:"p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-br from-primary to-[#0052cc] rounded-full p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:i.jsx(wt,{className:"h-10 w-10 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"🏐 Atletas"}),i.jsxs("ul",{className:"space-y-3 text-left",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Crie seu perfil profissional"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Entre na vitrine de jogadores"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Receba convites de times"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Compartilhe sua jornada"})]})]})]})}),i.jsx(ie,{className:"border-2 border-secondary/20 hover:border-secondary transition-all duration-300 hover:shadow-2xl",children:i.jsxs(ce,{className:"p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-br from-secondary to-[#ff8555] rounded-full p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:i.jsx(Qn,{className:"h-10 w-10 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"⚡ Times"}),i.jsxs("ul",{className:"space-y-3 text-left",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-secondary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Gerencie seu elenco"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-secondary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Convide jogadores"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-secondary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Organize torneios"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-secondary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Cresça sua torcida"})]})]})]})}),i.jsx(ie,{className:"border-2 border-primary/20 hover:border-primary transition-all duration-300 hover:shadow-2xl",children:i.jsxs(ce,{className:"p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-br from-primary to-secondary rounded-full p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:i.jsx(Es,{className:"h-10 w-10 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"🎉 Fãs/Torcedores"}),i.jsxs("ul",{className:"space-y-3 text-left",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Siga seus ídolos"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Acompanhe times"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Assista lives"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx($e,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Interaja com a comunidade"})]})]})]})})]})]})}),i.jsxs("section",{className:"py-20 md:py-32 bg-gradient-to-br from-primary via-[#0052cc] to-secondary relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),i.jsx("div",{className:"container mx-auto px-6 relative z-10",children:i.jsxs("div",{className:"max-w-3xl mx-auto text-center text-white",children:[i.jsx(uu,{className:"h-16 w-16 mx-auto mb-6 animate-pulse"}),i.jsx("h2",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Pronto para fazer parte?"}),i.jsx("p",{className:"text-xl md:text-2xl mb-10 text-white/90",children:"Junte-se a milhares de atletas, times e torcedores na maior rede social do vôlei brasileiro!"}),i.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:i.jsxs(q,{onClick:t,size:"lg",className:"bg-white text-primary hover:bg-white/90 shadow-2xl text-lg px-10 py-7 h-auto font-bold",children:[i.jsx(Ia,{className:"mr-2 h-6 w-6"}),"Criar Minha Conta Grátis"]})}),i.jsx("p",{className:"mt-8 text-white/70 text-sm",children:"Não é necessário cartão de crédito • Comece em menos de 2 minutos"})]})})]}),i.jsx("footer",{className:"border-t bg-card py-12",children:i.jsx("div",{className:"container mx-auto px-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(vc,{variant:"compact",className:"[&_img]:w-8 [&_img]:h-8"}),i.jsx("span",{className:"text-muted-foreground",children:"© 2025 VolleyPro. Todos os direitos reservados."})]}),i.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[i.jsx(q,{variant:"ghost",size:"sm",onClick:t,children:"Sobre"}),i.jsx(q,{variant:"ghost",size:"sm",onClick:t,children:"Contato"}),i.jsx(q,{variant:"ghost",size:"sm",onClick:t,children:"Privacidade"})]})]})})})]})}function CE(){return g.useEffect(()=>{const t="2.1.0-camera-fix",e=localStorage.getItem("volleypro_version");e!==t?(console.log("🔄 Nova versão detectada! Limpando cache..."),console.log(`   Antiga: ${e||"nenhuma"}`),console.log(`   Nova: ${t}`),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(n=>{n.forEach(r=>{r.unregister(),console.log("   ✅ Service worker removido")})}),"caches"in window&&caches.keys().then(n=>{n.forEach(r=>{caches.delete(r),console.log(`   ✅ Cache ${r} removido`)})}),localStorage.setItem("volleypro_version",t),console.log("✅ Cache limpo! A página será recarregada..."),sessionStorage.getItem("volleypro_reloaded")||(sessionStorage.setItem("volleypro_reloaded","true"),window.location.reload())):sessionStorage.removeItem("volleypro_reloaded")},[]),null}function TE(){const[t,e]=g.useState(!1),n="2.1.0-camera-fix",r=localStorage.getItem("volleypro_version"),s=r===n;function o(){if(!confirm("Isso vai limpar todo o cache e recarregar a página. Continuar?"))return;console.log("🧹 Limpando cache manualmente...");const a=["volleypro_token","volleypro_user_id"];Object.keys(localStorage).forEach(l=>{a.includes(l)||localStorage.removeItem(l)}),localStorage.removeItem("volleypro_version"),sessionStorage.clear(),"caches"in window&&caches.keys().then(l=>{l.forEach(d=>caches.delete(d))}),K.success("Cache limpo!",{description:"Recarregando em 2 segundos..."}),setTimeout(()=>{window.location.reload()},2e3)}return t?i.jsx(ie,{className:"fixed bottom-4 right-4 z-50 w-80 shadow-2xl border-primary/20",children:i.jsxs(ce,{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Informações do Sistema"}),i.jsx(q,{variant:"ghost",size:"sm",onClick:()=>e(!1),children:"✕"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Versão Atual:"}),i.jsx(Se,{variant:s?"default":"destructive",children:n})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Versão Carregada:"}),i.jsx(Se,{variant:"outline",children:r||"Nenhuma"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s?i.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[i.jsx($e,{className:"h-4 w-4"}),i.jsx("span",{children:"Atualizado"})]}):i.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[i.jsx(b3,{className:"h-4 w-4"}),i.jsx("span",{children:"Desatualizado"})]})]})]}),i.jsxs("div",{className:"pt-3 border-t space-y-2",children:[i.jsxs(q,{size:"sm",variant:"outline",className:"w-full",onClick:()=>window.location.reload(),children:[i.jsx(G0,{className:"h-4 w-4 mr-2"}),"Recarregar Página"]}),i.jsxs(q,{size:"sm",variant:"destructive",className:"w-full",onClick:o,children:[i.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Limpar Cache"]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nova Correção:"})," Sistema de teste de câmera implementado"]}),i.jsx("p",{className:"mt-1",children:'Se não ver as mudanças, clique em "Limpar Cache"'})]})]})}):i.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>e(!0),className:"fixed bottom-4 right-4 z-50 bg-background/80 backdrop-blur-sm border shadow-lg",children:[i.jsx($e,{className:"h-4 w-4 mr-2"}),"v",n]})}function gie({userType:t,onComplete:e}){const[n,r]=g.useState(!1),[s,o]=g.useState(0);g.useEffect(()=>{if(!localStorage.getItem("volleypro_first_access_guide")){const v=setTimeout(()=>{r(!0)},1e3);return()=>clearTimeout(v)}},[]);const a=()=>{localStorage.setItem("volleypro_first_access_guide","true"),r(!1),e()},l={athlete:[{icon:Nr,title:"Complete seu perfil",description:"Adicione uma foto, suas estatísticas, posição e informações importantes. Um perfil completo recebe até 5x mais visibilidade!",action:"Ir para Perfil",color:"text-blue-500"},{icon:wt,title:"Conecte-se com a comunidade",description:"Siga outros atletas, times e fãs. Explore a página de Atletas e Times para encontrar pessoas do seu interesse.",action:"Ver Atletas",color:"text-green-500"},{icon:Nt,title:"Participe de torneios",description:"Inscreva-se em torneios para competir e mostrar suas habilidades. Acompanhe rankings e estatísticas.",action:"Ver Torneios",color:"text-orange-500"},{icon:In,title:"Crie conteúdo",description:"Publique no feed, compartilhe treinos e partidas. Use Lives para transmitir seus jogos ao vivo!",action:"Começar",color:"text-purple-500"}],team:[{icon:Nr,title:"Configure seu time",description:"Adicione logo, informações do time, ano de fundação e títulos conquistados. Um perfil completo atrai mais jogadores!",action:"Ir para Perfil",color:"text-blue-500"},{icon:wt,title:"Monte seu elenco",description:"Convide atletas para seu time através da Vitrine de Jogadores. Gerencie escalações e avaliações dos jogadores.",action:"Ver Vitrine",color:"text-green-500"},{icon:Nt,title:"Crie torneios",description:"Organize campeonatos e competições. Gerencie inscrições, chaveamentos e acompanhe resultados.",action:"Criar Torneio",color:"text-orange-500"},{icon:In,title:"Transmita partidas",description:"Use Lives para transmitir jogos do seu time. Mantenha torcedores e atletas sempre conectados!",action:"Começar",color:"text-purple-500"}],fan:[{icon:Nr,title:"Personalize seu perfil",description:"Adicione foto, time favorito e jogador preferido. Mostre sua paixão pelo vôlei!",action:"Ir para Perfil",color:"text-blue-500"},{icon:wt,title:"Siga seus ídolos",description:"Acompanhe atletas e times favoritos. Receba atualizações sobre treinos, jogos e bastidores.",action:"Ver Atletas",color:"text-green-500"},{icon:Nt,title:"Acompanhe torneios",description:"Veja classificações, resultados e rankings MVP. Torça pelo seu time e jogadores favoritos!",action:"Ver Torneios",color:"text-orange-500"},{icon:In,title:"Interaja com Lives",description:"Assista transmissões ao vivo, comente e reaja. Participe da comunidade em tempo real!",action:"Começar",color:"text-purple-500"}]},d=l[t]||l.fan,h=d[s],m=h?.icon;return n?i.jsx(sn,{open:n,onOpenChange:f=>!f&&a(),children:i.jsxs(Yt,{className:"max-w-2xl",children:[i.jsx(fn,{children:i.jsxs(on,{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:"👋"}),"Bem-vindo ao VolleyPro!"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex gap-2",children:d.map((f,v)=>i.jsx("div",{className:`h-2 flex-1 rounded-full transition-all ${v<=s?"bg-primary":"bg-muted"}`},v))}),i.jsx(ie,{className:"border-2 border-primary/20",children:i.jsx(et,{children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`p-3 rounded-xl bg-primary/10 ${h.color}`,children:i.jsx(m,{className:"h-8 w-8"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Vt,{className:"mb-2",children:h.title}),i.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:h.description})]})]})})}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"text-sm font-medium flex items-center gap-2",children:"💡 Dica importante:"}),t==="athlete"&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"Atletas com perfil completo e foto recebem muito mais convites de times e visualizações!"}),t==="team"&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"Times ativos que publicam conteúdo regularmente atraem os melhores jogadores!"}),t==="fan"&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"Quanto mais você interagir (curtir, comentar, reagir), melhor será sua experiência!"})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4",children:[i.jsx(q,{variant:"ghost",onClick:a,className:"text-muted-foreground",children:"Pular tutorial"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-muted-foreground",children:[s+1," de ",d.length]}),s<d.length-1?i.jsxs(q,{onClick:()=>o(s+1),children:["Próximo",i.jsx(E4,{className:"ml-2 h-4 w-4"})]}):i.jsx(q,{onClick:a,className:"bg-gradient-to-r from-primary to-secondary",children:"Começar a usar! 🚀"})]})]})]})]})}):null}function ey(){const[t,e]=g.useState(null),[n,r]=g.useState(!1);g.useEffect(()=>{"serviceWorker"in navigator&&s()},[]);async function s(){try{console.log("🔄 [PWA] Registrando Service Worker...");const a=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});console.log("✅ [PWA] Service Worker registrado:",a.scope),setInterval(()=>{a.update()},3600*1e3),a.addEventListener("updatefound",()=>{const d=a.installing;d&&(console.log("🆕 [PWA] Nova versão encontrada!"),d.addEventListener("statechange",()=>{d.state==="installed"&&navigator.serviceWorker.controller&&(console.log("⏳ [PWA] Nova versão pronta para ativar"),e(d),r(!0),K.info("Nova versão disponível!",{description:"Clique aqui para atualizar",duration:1/0,action:{label:"Atualizar",onClick:()=>o()}}))}))}),a.waiting&&(console.log("⏳ [PWA] Service Worker esperando para ativar"),e(a.waiting),r(!0)),navigator.serviceWorker.addEventListener("message",d=>{d.data&&d.data.type==="CACHE_CLEARED"&&(console.log("✅ [PWA] Cache limpo pelo Service Worker"),K.success("Cache limpo com sucesso!"))});let l=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{l||(l=!0,console.log("🔄 [PWA] Nova versão ativada, recarregando..."),window.location.reload())})}catch(a){console.error("❌ [PWA] Erro ao registrar Service Worker:",a)}}function o(){t&&(console.log("🔄 [PWA] Ativando nova versão..."),t.postMessage({type:"SKIP_WAITING"}),r(!1),K.success("Atualizando...",{description:"A página será recarregada"}))}return null}function NE(){const[t,e]=g.useState(null),[n,r]=g.useState(!1),[s,o]=g.useState(!1),[a,l]=g.useState(!1);g.useEffect(()=>{const m=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;l(m);const f=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;o(f);const v=localStorage.getItem("volleypro_pwa_prompt_closed"),y=b=>{b.preventDefault(),e(b),v||setTimeout(()=>{r(!0)},1e4)};window.addEventListener("beforeinstallprompt",y);const w=()=>{console.log("✅ PWA instalado com sucesso!"),r(!1),e(null),localStorage.setItem("volleypro_pwa_installed","true")};return window.addEventListener("appinstalled",w),()=>{window.removeEventListener("beforeinstallprompt",y),window.removeEventListener("appinstalled",w)}},[]);const d=async()=>{if(!t)return;await t.prompt();const{outcome:m}=await t.userChoice;console.log(`Usuário ${m==="accepted"?"aceitou":"rejeitou"} a instalação`),m==="accepted"&&r(!1),e(null)},h=()=>{r(!1),localStorage.setItem("volleypro_pwa_prompt_closed","true")};return a?null:s&&n?i.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-bottom-5",children:i.jsx(ie,{className:"border-2 border-primary/20 bg-gradient-to-r from-primary/5 via-secondary/5 to-primary/5 shadow-2xl",children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-secondary",children:i.jsx($E,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold mb-1",children:"Instale o VolleyPro"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Instale nosso app para uma experiência completa!"}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 mb-3 space-y-2 text-sm",children:[i.jsx("p",{className:"font-medium",children:"Como instalar no iOS:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:["Toque no botão de compartilhar ",i.jsx("span",{className:"inline-block",children:"□↑"})]}),i.jsx("li",{children:'Role e toque em "Adicionar à Tela Inicial"'}),i.jsx("li",{children:'Toque em "Adicionar"'})]})]}),i.jsx(q,{variant:"ghost",size:"sm",onClick:h,className:"w-full",children:"Fechar"})]}),i.jsx(q,{variant:"ghost",size:"icon",onClick:h,className:"shrink-0",children:i.jsx(cr,{className:"h-4 w-4"})})]})})})}):t&&n?i.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-bottom-5",children:i.jsx(ie,{className:"border-2 border-primary/20 bg-gradient-to-r from-primary/5 via-secondary/5 to-primary/5 shadow-2xl",children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-secondary",children:i.jsx(Lo,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold mb-1",children:"Instale o VolleyPro"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Instale nosso app e tenha acesso rápido, notificações e experiência completa offline!"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{onClick:d,className:"flex-1 bg-gradient-to-r from-primary to-secondary",children:[i.jsx(Lo,{className:"mr-2 h-4 w-4"}),"Instalar App"]}),i.jsx(q,{variant:"ghost",size:"sm",onClick:h,children:"Agora não"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"💡 O app funciona offline e é mais rápido!"})]}),i.jsx(q,{variant:"ghost",size:"icon",onClick:h,className:"shrink-0",children:i.jsx(cr,{className:"h-4 w-4"})})]})})})}):null}function vie(){const[t,e]=g.useState(navigator.onLine),[n,r]=g.useState(!1);return g.useEffect(()=>{const s=()=>{console.log("✅ Conectado à internet"),e(!0),r(!0),K.success("Você está online!",{description:"Conexão restabelecida",icon:i.jsx(ny,{className:"h-5 w-5 text-green-500"})}),setTimeout(()=>r(!1),3e3)},o=()=>{console.log("❌ Sem conexão com internet"),e(!1),r(!0),K.error("Você está offline",{description:"Algumas funcionalidades podem estar limitadas",icon:i.jsx(vf,{className:"h-5 w-5 text-red-500"}),duration:1/0})};return window.addEventListener("online",s),window.addEventListener("offline",o),navigator.onLine||r(!0),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",o)}},[]),n?i.jsx("div",{className:`
        fixed top-20 right-4 z-50 
        px-4 py-2 rounded-full shadow-lg
        flex items-center gap-2
        transition-all duration-300
        ${t?"bg-green-500 text-white":"bg-red-500 text-white"}
      `,children:t?i.jsxs(i.Fragment,{children:[i.jsx(ny,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):i.jsxs(i.Fragment,{children:[i.jsx(vf,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Offline"})]})}):null}function EE(){const t=g.useRef({}),e=[72,96,128,144,152,192,384,512];g.useEffect(()=>{e.forEach(o=>{n(o)})},[]);const n=o=>{const a=t.current[o];if(!a)return;const l=a.getContext("2d");if(!l)return;const d=l.createLinearGradient(0,0,o,o);d.addColorStop(0,"#0066ff"),d.addColorStop(1,"#0052cc"),l.fillStyle=d,l.fillRect(0,0,o,o);const h=o/2,m=o/2,f=o*.32;l.fillStyle="rgba(255, 255, 255, 0.95)",l.beginPath(),l.arc(h,m,f,0,Math.PI*2),l.fill(),l.strokeStyle="#0066ff",l.lineWidth=o*.02,l.beginPath(),l.moveTo(h,m-f),l.quadraticCurveTo(h-f*.4,m,h,m+f),l.stroke(),l.beginPath(),l.moveTo(h,m-f),l.quadraticCurveTo(h+f*.4,m,h,m+f),l.stroke(),l.beginPath(),l.moveTo(h-f,m),l.quadraticCurveTo(h,m-f*.4,h+f,m),l.stroke(),l.beginPath(),l.moveTo(h-f,m),l.quadraticCurveTo(h,m+f*.4,h+f,m),l.stroke(),o>=192&&(l.fillStyle="#0066ff",l.font=`bold ${o*.25}px Arial`,l.textAlign="center",l.textBaseline="middle",l.fillText("VP",h,m))},r=o=>{const a=t.current[o];a&&a.toBlob(l=>{if(!l)return;const d=URL.createObjectURL(l),h=document.createElement("a");h.href=d,h.download=`icon-${o}x${o}.png`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(d)})},s=()=>{e.forEach((o,a)=>{setTimeout(()=>{r(o)},a*300)})};return i.jsxs(ie,{className:"max-w-4xl mx-auto",children:[i.jsxs(et,{children:[i.jsx(Vt,{className:"flex items-center gap-2",children:"🎨 Gerador de Ícones PWA - VolleyPro"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Gere todos os ícones necessários para o PWA em um clique!"})]}),i.jsxs(ce,{className:"space-y-6",children:[i.jsx("div",{className:"grid grid-cols-4 gap-4",children:e.map(o=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("canvas",{ref:a=>t.current[o]=a,width:o,height:o,className:"w-full border-2 border-primary/20 rounded-lg",style:{imageRendering:"crisp-edges"}}),i.jsxs("div",{className:"text-center space-y-1",children:[i.jsxs("p",{className:"text-xs font-medium",children:[o,"x",o]}),i.jsxs(q,{size:"sm",variant:"outline",onClick:()=>r(o),className:"w-full",children:[i.jsx(Lo,{className:"h-3 w-3 mr-1"}),"Baixar"]})]})]},o))}),i.jsx("div",{className:"flex gap-3",children:i.jsxs(q,{onClick:s,className:"flex-1 bg-gradient-to-r from-primary to-secondary",size:"lg",children:[i.jsx(Lo,{className:"mr-2 h-5 w-5"}),"Baixar Todos os Ícones (8 arquivos)"]})}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[i.jsx("h3",{className:"font-semibold flex items-center gap-2",children:"📋 Próximos Passos:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[i.jsx("li",{children:'Clique em "Baixar Todos os Ícones"'}),i.jsxs("li",{children:["Mova os 8 arquivos PNG para a pasta ",i.jsx("code",{className:"bg-background px-1 rounded",children:"/public/"})]}),i.jsx("li",{children:"Faça commit e push para o repositório"}),i.jsx("li",{children:"Deploy automático ativará o PWA!"})]})]}),i.jsxs("div",{className:"bg-card-blue rounded-lg p-4 space-y-2",children:[i.jsx("h3",{className:"font-semibold flex items-center gap-2 text-primary",children:"✅ Arquivos Necessários:"}),i.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:e.map(o=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),i.jsxs("code",{className:"text-xs",children:["icon-",o,"x",o,".png"]})]},o))})]})]})]})}function PE(){const[t,e]=g.useState("checking"),[n,r]=g.useState("checking"),[s,o]=g.useState(navigator.onLine),[a,l]=g.useState(!1),[d,h]=g.useState(!1),[m,f]=g.useState(null),[v,y]=g.useState([]),[w,b]=g.useState(!1);g.useEffect(()=>{const E=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("figma.com");b(E),"serviceWorker"in navigator?navigator.serviceWorker.getRegistration().then(I=>{I?(e("registered"),console.log("✅ Service Worker registrado:",I)):(e(E?"dev-mode":"error"),console.log(E?"⚠️ Service Worker não funciona em desenvolvimento (normal)":"❌ Service Worker não encontrado"))}).catch(()=>{e(E?"dev-mode":"error")}):e("not-supported"),E?(r("found"),console.log("ℹ️ Modo dev: arquivos verificados manualmente no projeto"),y(["72x72","96x96","128x128","144x144","152x152","192x192","384x384","512x512"].map(M=>({size:M,status:"ok"})))):fetch("/manifest.json").then(I=>{if(I.ok)return r("found"),I.json();throw new Error("Manifest não encontrado")}).then(I=>{console.log("✅ Manifest carregado:",I);const M=I.icons.map(O=>({size:O.sizes,status:"loading"}));y(M),I.icons.forEach((O,L)=>{fetch(O.src).then(D=>{if(D.ok)y(A=>{const Z=[...A];return Z[L]={size:O.sizes,status:"ok"},Z});else throw new Error("Ícone não encontrado")}).catch(()=>{y(D=>{const A=[...D];return A[L]={size:O.sizes,status:"error"},A})})})}).catch(()=>{r("error")}),window.matchMedia("(display-mode: standalone)").matches&&(h(!0),console.log("✅ PWA está instalado!"));const P=I=>{I.preventDefault(),f(I),l(!0),console.log("✅ PWA pode ser instalado!")};window.addEventListener("beforeinstallprompt",P);const N=()=>o(!0),_=()=>o(!1);return window.addEventListener("online",N),window.addEventListener("offline",_),()=>{window.removeEventListener("beforeinstallprompt",P),window.removeEventListener("online",N),window.removeEventListener("offline",_)}},[]);const k=async()=>{if(!m){K.error("Instalação não disponível",{description:"O navegador não ofereceu a opção de instalação ainda."});return}m.prompt();const{outcome:E}=await m.userChoice;E==="accepted"?(K.success("🎉 VolleyPro instalado!",{description:"O app agora está disponível na sua tela inicial!"}),l(!1),h(!0)):K.info("Instalação cancelada"),f(null)},j=()=>{K.info("Teste de modo offline",{description:"Desative sua internet para testar o modo offline!"})},T=({status:E})=>{switch(E){case"registered":case"found":case"ok":return i.jsx($e,{className:"h-5 w-5 text-green-500"});case"dev-mode":return i.jsx(Jt,{className:"h-5 w-5 text-blue-500"});case"error":case"not-supported":return i.jsx(fc,{className:"h-5 w-5 text-red-500"});default:return i.jsx(Jt,{className:"h-5 w-5 text-yellow-500 animate-pulse"})}};return i.jsxs("div",{className:"container mx-auto py-8 space-y-6 max-w-4xl",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"🧪 Painel de Testes PWA"}),i.jsx("p",{className:"text-muted-foreground",children:"Verifique se todos os componentes do Progressive Web App estão funcionando"})]}),w&&i.jsx(ie,{className:"border-2 border-blue-500 bg-blue-50 dark:bg-blue-950",children:i.jsx(ce,{className:"pt-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx($e,{className:"h-5 w-5 text-blue-500 mt-0.5"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"✅ Arquivos PWA Criados com Sucesso!"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Todos os arquivos necessários foram criados no projeto:"}),i.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 list-disc list-inside space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"manifest.json"})," → Configuração do PWA ✅"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"service-worker.js"})," → Cache offline ✅"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"8 ícones SVG"})," → Ícone do app ✅"]})]}),i.jsxs("div",{className:"mt-3 p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100 font-semibold",children:"🚀 Próximo passo: Deploy na Vercel"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Após o deploy, tudo funcionará 100% (Service Worker + instalação)"})]})]})]})})}),i.jsxs(ie,{className:"border-2 border-primary/20",children:[i.jsx(et,{children:i.jsxs(Vt,{className:"flex items-center gap-2",children:[i.jsx($E,{className:"h-5 w-5 text-primary"}),"Status Geral do PWA"]})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(T,{status:t}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Service Worker"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[t==="registered"&&"Registrado e ativo",t==="dev-mode"&&"Modo desenvolvimento (normal)",t==="error"&&"Não registrado",t==="not-supported"&&"Não suportado",t==="checking"&&"Verificando..."]})]})]}),t==="registered"&&i.jsx(Se,{variant:"default",className:"bg-green-500",children:"OK"}),t==="dev-mode"&&i.jsx(Se,{variant:"outline",className:"border-blue-500 text-blue-500",children:"DEV"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(T,{status:n}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Manifest.json"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[n==="found"&&"Encontrado e carregado",n==="error"&&"Não encontrado",n==="checking"&&"Verificando..."]})]})]}),n==="found"&&i.jsx(Se,{variant:"default",className:"bg-green-500",children:"OK"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[s?i.jsx(ny,{className:"h-5 w-5 text-green-500"}):i.jsx(vf,{className:"h-5 w-5 text-red-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Conexão"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Online":"Offline"})]})]}),i.jsx(Se,{variant:s?"default":"destructive",children:s?"Conectado":"Desconectado"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[d?i.jsx($e,{className:"h-5 w-5 text-green-500"}):a?i.jsx(Lo,{className:"h-5 w-5 text-blue-500"}):i.jsx(Jt,{className:"h-5 w-5 text-yellow-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Status de Instalação"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[d&&"App instalado",!d&&a&&"Pronto para instalar",!d&&!a&&"Aguardando navegador..."]})]})]}),d&&i.jsx(Se,{variant:"default",className:"bg-green-500",children:"Instalado"}),!d&&a&&i.jsxs(q,{onClick:k,size:"sm",className:"gap-2",children:[i.jsx(Lo,{className:"h-4 w-4"}),"Instalar"]})]})]})]}),w&&i.jsxs(ie,{className:"border-2 border-green-500 bg-green-50 dark:bg-green-950",children:[i.jsxs(et,{children:[i.jsxs(Vt,{className:"flex items-center gap-2 text-green-900 dark:text-green-100",children:[i.jsx($e,{className:"h-5 w-5 text-green-500"}),"Arquivos PWA no Projeto"]}),i.jsx(xc,{className:"text-green-700 dark:text-green-300",children:"Todos os arquivos foram criados na estrutura do projeto"})]}),i.jsx(ce,{className:"space-y-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-white dark:bg-green-900/50",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsx("code",{className:"text-sm",children:"/public/manifest.json"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-white dark:bg-green-900/50",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsx("code",{className:"text-sm",children:"/public/service-worker.js"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-white dark:bg-green-900/50",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsx("code",{className:"text-sm",children:"/public/icon-*.svg (8 arquivos)"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-white dark:bg-green-900/50",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsx("code",{className:"text-sm",children:"/components/PWAManager.tsx"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-white dark:bg-green-900/50",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsx("code",{className:"text-sm",children:"/components/PWAInstallPrompt.tsx"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-white dark:bg-green-900/50",children:[i.jsx($e,{className:"h-4 w-4 text-green-500"}),i.jsx("code",{className:"text-sm",children:"/components/OfflineIndicator.tsx"})]})]})})]}),i.jsxs(ie,{children:[i.jsxs(et,{children:[i.jsx(Vt,{children:"Ícones PWA"}),i.jsx(xc,{children:w?"Ícones criados no projeto (verificação visual)":"Verificação de todos os ícones necessários (8 tamanhos)"})]}),i.jsxs(ce,{children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:v.map((E,P)=>i.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50 border",children:[i.jsx(T,{status:E.status}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:E.size}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[E.status==="ok"&&(w?"Criado":"OK"),E.status==="error"&&"Erro",E.status==="loading"&&"Carregando..."]})]})]},P))}),v.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Carregando informações dos ícones..."})]})]}),i.jsxs(ie,{children:[i.jsxs(et,{children:[i.jsx(Vt,{children:"Testes Manuais"}),i.jsx(xc,{children:"Execute estes testes para validar o funcionamento completo"})]}),i.jsxs(ce,{className:"space-y-3",children:[i.jsxs(q,{onClick:j,variant:"outline",className:"w-full justify-start gap-2",children:[i.jsx(vf,{className:"h-4 w-4"}),"Testar Modo Offline"]}),i.jsxs(q,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full justify-start gap-2",children:[i.jsx(VE,{className:"h-4 w-4"}),"Recarregar Página (testar cache)"]}),a&&i.jsxs(q,{onClick:k,className:"w-full justify-start gap-2 bg-primary",children:[i.jsx(Lo,{className:"h-4 w-4"}),"Instalar VolleyPro"]}),d&&i.jsx("div",{className:"p-4 rounded-lg bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800",children:i.jsxs("p",{className:"text-sm text-green-900 dark:text-green-100",children:["✅ ",i.jsx("strong",{children:"PWA instalado com sucesso!"}),i.jsx("br",{}),"Procure o ícone do VolleyPro na sua tela inicial ou gaveta de apps."]})})]})]}),i.jsxs(ie,{className:"border-primary/20",children:[i.jsx(et,{children:i.jsxs(Vt,{className:"flex items-center gap-2",children:[i.jsx(UE,{className:"h-5 w-5 text-primary"}),"Como Testar no Chrome Mobile"]})}),i.jsxs(ce,{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("p",{className:"font-medium",children:"📱 No Android:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2 text-muted-foreground",children:[i.jsx("li",{children:"Abra este site no Chrome para Android"}),i.jsx("li",{children:'Toque no menu (⋮) → "Instalar app" ou "Adicionar à tela inicial"'}),i.jsx("li",{children:"Confirme a instalação"}),i.jsx("li",{children:"O ícone aparecerá na tela inicial!"})]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("p",{className:"font-medium",children:"🍎 No iOS (Safari):"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2 text-muted-foreground",children:[i.jsx("li",{children:"Abra este site no Safari"}),i.jsx("li",{children:"Toque no botão Compartilhar (□↑)"}),i.jsx("li",{children:'Role e toque em "Adicionar à Tela Inicial"'}),i.jsx("li",{children:'Toque em "Adicionar"'})]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsx("p",{className:"font-medium",children:"💻 No Desktop (Chrome/Edge):"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2 text-muted-foreground",children:[i.jsx("li",{children:"Procure o ícone de instalação (⊕) na barra de endereços"}),i.jsx("li",{children:'Clique em "Instalar"'}),i.jsx("li",{children:"O app abrirá em uma janela separada!"})]})]})]})]}),i.jsx(ie,{className:`border-2 ${t==="registered"&&n==="found"&&v.every(E=>E.status==="ok")?"border-green-500 bg-green-50 dark:bg-green-950":t==="dev-mode"&&n==="found"&&v.every(E=>E.status==="ok")?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-yellow-500 bg-yellow-50 dark:bg-yellow-950"}`,children:i.jsx(ce,{className:"pt-6",children:t==="registered"&&n==="found"&&v.every(E=>E.status==="ok")?i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx($e,{className:"h-12 w-12 text-green-500 mx-auto"}),i.jsx("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:"🎉 PWA 100% Configurado!"}),i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Todos os componentes estão funcionando perfeitamente em produção!"})]}):t==="dev-mode"&&n==="found"&&v.every(E=>E.status==="ok")?i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx($e,{className:"h-12 w-12 text-blue-500 mx-auto"}),i.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"✅ PWA Configurado para Deploy!"}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Manifest e ícones OK! Service Worker funcionará em produção (HTTPS)."}),i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-semibold",children:"👉 Faça deploy na Vercel para testar 100%"})]}):i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(Jt,{className:"h-12 w-12 text-yellow-500 mx-auto"}),i.jsx("h3",{className:"text-lg font-semibold text-yellow-900 dark:text-yellow-100",children:"⚠️ Verificando componentes..."}),i.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Alguns componentes ainda estão sendo carregados. Aguarde..."})]})})})]})}function xie(){const t={title:"color: #0066ff; font-size: 24px; font-weight: bold;",subtitle:"color: #ff6b35; font-size: 16px; font-weight: bold;",success:"color: #22c55e; font-weight: bold;",info:"color: #3b82f6;",warning:"color: #f59e0b; font-weight: bold;",code:"background: #f1f5f9; padding: 2px 6px; border-radius: 3px; color: #0f172a; font-family: monospace;"};console.clear(),console.log("%c🏐 VolleyPro",t.title),console.log("%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","color: #e2e8f0;"),console.log(""),console.log("%c📦 VERSÃO: 2.1.0-camera-fix",t.success),console.log("%c✨ Correções de Câmera Implementadas!",t.success),console.log(""),console.log("%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","color: #e2e8f0;"),console.log("%c🎥 O QUE FOI CORRIGIDO:",t.subtitle),console.log(""),console.log("  ✅ Teste de câmera ANTES de criar live"),console.log("  ✅ Preview da câmera em tempo real"),console.log("  ✅ Mensagens de erro claras e acionáveis"),console.log("  ✅ Guia visual de como permitir câmera"),console.log("  ✅ Detecção automática do navegador"),console.log("  ✅ Sistema centralizado de permissões"),console.log(""),console.log("%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","color: #e2e8f0;"),console.log("%c🧪 COMO TESTAR:",t.subtitle),console.log(""),console.log("  1️⃣  Vá para a seção %cLives",t.info,t.code),console.log("  2️⃣  Clique em %cIniciar Transmissão",t.info,t.code),console.log('  3️⃣  Preencha o título (ex: "Teste")'),console.log("  4️⃣  Clique em %cIniciar Agora",t.info,t.code),console.log("  5️⃣  Você verá a tela de %cTESTE DE CÂMERA",t.info,t.code),console.log("  6️⃣  Clique em %cTestar Câmera",t.info,t.code),console.log("  7️⃣  Permita quando o navegador pedir"),console.log("  8️⃣  ✅ Preview da câmera aparece!"),console.log("  9️⃣  Live é criada automaticamente"),console.log(""),console.log("%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","color: #e2e8f0;"),console.log("%c⚠️ NÃO VÊ AS MUDANÇAS?",t.warning),console.log(""),console.log("  🔧 Solução: Clique no botão %cLimpar Cache%c no canto inferior direito",t.info,t.code,t.info),console.log("  🔄 Ou pressione: %cCtrl + Shift + R%c (Windows) ou %cCmd + Shift + R%c (Mac)",t.info,t.code,t.info,t.code,t.info),console.log("  🗑️  Ou acesse: %c?clear_cache=true%c na URL",t.info,t.code,t.info),console.log(""),console.log("%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","color: #e2e8f0;"),console.log("%c🐛 DEBUG:",t.subtitle),console.log(""),console.log("  📊 Para ver informações detalhadas:"),console.log("    • Abra o componente %cVersionChecker%c (canto inferior direito)","",t.code,""),console.log("    • Verifique se a versão é %c2.1.0-camera-fix","",t.code),console.log("    • Se não for, clique em %cLimpar Cache","",t.code),console.log(""),console.log("%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","color: #e2e8f0;"),console.log("%c💡 DICA:",t.info),console.log("  O botão de versão fica no canto inferior direito da tela"),console.log("  Clique nele para ver informações e limpar cache"),console.log(""),console.log("%c━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━","color: #e2e8f0;"),console.log("")}var yie=(t,e,n,r,s,o,a,l)=>{let d=document.documentElement,h=["light","dark"];function m(y){(Array.isArray(t)?t:[t]).forEach(w=>{let b=w==="class",k=b&&o?s.map(j=>o[j]||j):s;b?(d.classList.remove(...k),d.classList.add(o&&o[y]?o[y]:y)):d.setAttribute(w,y)}),f(y)}function f(y){l&&h.includes(y)&&(d.style.colorScheme=y)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)m(r);else try{let y=localStorage.getItem(e)||n,w=a&&y==="system"?v():y;m(w)}catch{}},bie=g.createContext(void 0),wie={setTheme:t=>{},themes:[]},Sie=()=>{var t;return(t=g.useContext(bie))!=null?t:wie};g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:a,themes:l,nonce:d,scriptProps:h})=>{let m=JSON.stringify([n,e,o,t,l,a,r,s]).slice(1,-1);return g.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${yie.toString()})(${m})`}})});const qm=({...t})=>{const{theme:e="system"}=Sie();return i.jsx(mq,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};class Wm extends we.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("🔴 ErrorBoundary capturou erro:",e,n),console.error("📍 Stack trace:",e.stack),console.error("📍 Component stack:",n.componentStack)}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background via-background to-primary/5",children:i.jsxs(ie,{className:"max-w-md w-full",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[i.jsx(Jt,{className:"h-8 w-8"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl",children:"Algo deu errado"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Ocorreu um erro inesperado na aplicação"})]})]})}),i.jsxs(ce,{className:"space-y-4",children:[i.jsxs("div",{className:"bg-muted p-3 rounded-lg space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Mensagem:"}),i.jsx("p",{className:"text-sm font-mono text-muted-foreground break-all",children:this.state.error?.message||"Erro desconhecido"}),this.state.error?.stack&&i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm font-semibold mt-2",children:"Detalhes técnicos:"}),i.jsx("p",{className:"text-xs font-mono text-muted-foreground break-all max-h-32 overflow-y-auto",children:this.state.error.stack.split(`
`).slice(0,5).join(`
`)})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(q,{onClick:()=>window.location.reload(),className:"flex-1",children:[i.jsx(G0,{className:"h-4 w-4 mr-2"}),"Recarregar Página"]}),i.jsx(q,{variant:"outline",onClick:()=>this.setState({hasError:!1,error:null}),className:"flex-1",children:"Tentar Novamente"})]})]})]})}):this.props.children}}function kie(){const[t,e]=g.useState("feed"),[n,r]=g.useState(null),[s,o]=g.useState(null),[a,l]=g.useState(!1),[d,h]=g.useState(!1),[m,f]=g.useState(!1),[v,y]=g.useState(!1),[w,b]=g.useState(!0),[k,j]=g.useState("fan"),[T,E]=g.useState(!1);g.useEffect(()=>{new URLSearchParams(window.location.search).get("clear_cache")==="true"&&(console.log("🧹 Limpando cache forçado via URL..."),localStorage.clear(),sessionStorage.clear(),"caches"in window&&caches.keys().then(O=>{O.forEach(L=>caches.delete(L))}),K.success("Cache limpo!",{description:"Recarregando página..."}),setTimeout(()=>{window.location.href=window.location.pathname},1e3))},[]),g.useEffect(()=>{const M=()=>{const O=window.location.hash.substring(1);O==="monetization"?(e("monetization"),r(null),o(null),l(!1),window.history.replaceState(null,"",window.location.pathname)):O==="icon-generator"?(e("icon-generator"),r(null),o(null),l(!1)):O==="pwa-test"&&(e("pwa-test"),r(null),o(null),l(!1))};return window.addEventListener("hashchange",M),M(),()=>window.removeEventListener("hashchange",M)},[]),g.useEffect(()=>{let M=!0,O=null;return(async()=>{try{if(xie(),console.log("🚀 [Chrome-Optimized] Inicializando aplicação..."),await P(),!M)return;const{createClient:D}=await Xn(async()=>{const{createClient:se}=await Promise.resolve().then(()=>Aa);return{createClient:se}},void 0),A=D(),{data:Z}=A.auth.onAuthStateChange(async(se,fe)=>{if(M){if(console.log("🔄 Auth state changed:",se),se==="SIGNED_IN"&&fe){if(console.log("✅ Usuário autenticado!"),y(!0),typeof window<"u")try{localStorage.setItem("volleypro_token",fe.access_token),localStorage.setItem("volleypro_user_id",fe.user.id),sessionStorage.setItem("volleypro_session_active","true")}catch(ae){console.error("Erro ao salvar tokens:",ae)}}else if(se==="SIGNED_OUT"){if(console.log("🚪 Usuário deslogou"),y(!1),typeof window<"u")try{localStorage.removeItem("volleypro_token"),localStorage.removeItem("volleypro_user_id"),sessionStorage.removeItem("volleypro_session_active")}catch(ae){console.error("Erro ao limpar tokens:",ae)}}else if(se==="TOKEN_REFRESHED"&&(console.log("🔄 Token atualizado"),fe&&typeof window<"u"))try{localStorage.setItem("volleypro_token",fe.access_token)}catch(ae){console.error("Erro ao atualizar token:",ae)}}});O=()=>{Z?.subscription?.unsubscribe()}}catch(D){console.error("❌ Erro na inicialização:",D)}})(),()=>{M=!1,O&&O()}},[]);async function P(){try{console.log("🔍 Verificando autenticação...");const M=await Rt.getSession();if(!M){console.log("❌ Nenhuma sessão encontrada"),y(!1);return}if(console.log("✅ Sessão encontrada para:",M.user.email),typeof window<"u")try{localStorage.setItem("volleypro_token",M.access_token),localStorage.setItem("volleypro_user_id",M.user.id),sessionStorage.setItem("volleypro_session_active","true"),console.log("✅ Token salvo no localStorage")}catch(O){console.error("⚠️ Erro ao salvar token:",O)}try{const{user:O,userType:L}=await ar.getCurrentUser();L&&(j(L),console.log("✅ Tipo de usuário:",L)),localStorage.getItem("volleypro_first_access_guide")||E(!0)}catch(O){console.error("⚠️ Erro ao carregar perfil do usuário:",O)}y(!0)}catch(M){console.error("❌ Erro ao verificar autenticação:",M),y(!1)}finally{setTimeout(()=>{b(!1),console.log("✅ Inicialização completa")},500)}}async function N(){try{console.log("🚪 Fazendo logout..."),await Rt.signOut(),y(!1),K.success("Até logo! 👋",{description:"Você saiu da sua conta"}),console.log("✅ Logout concluído")}catch(M){console.error("❌ Erro ao fazer logout:",M),K.error("Erro ao sair da conta")}}const _=()=>{if(t==="icon-generator")return i.jsx("div",{className:"container mx-auto py-6",children:i.jsx(EE,{})});if(t==="pwa-test")return i.jsx(PE,{});if(a)return i.jsx(cie,{onBack:()=>l(!1),onEditProfile:()=>{l(!1),f(!0)}});if(n!==null)return i.jsx(aie,{athleteId:n,onBack:()=>r(null)});if(s!==null)return i.jsx(lie,{teamId:s,onBack:()=>o(null)});const M={isAuthenticated:v,onLoginPrompt:()=>h(!0)};switch(t){case"feed":return i.jsx(mT,{...M});case"athletes":return i.jsx(VH,{onSelectAthlete:r,...M});case"teams":return i.jsx(BH,{onSelectTeam:o,...M});case"tournaments":return i.jsx(QH,{...M});case"showcase":return i.jsx(tG,{onSelectAthlete:r,...M});case"lives":return i.jsx(Lse,{...M});case"invitations":return i.jsx(Use,{...M});case"polls":return i.jsx(Kse,{});case"photos":return i.jsx(Yse,{});case"videos":return i.jsx(Zse,{});case"verified":return i.jsx(eie,{});case"monetization":return i.jsx(oie,{});default:return i.jsx(mT,{...M})}};if(w)return i.jsx(fie,{});if(t==="icon-generator")return i.jsxs(Wm,{children:[i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-primary/10 py-12",children:i.jsx(EE,{})}),i.jsx(qm,{})]});if(t==="pwa-test")return i.jsxs(Wm,{children:[i.jsx(ey,{}),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-primary/10",children:i.jsx(PE,{})}),i.jsx(qm,{})]});if(!v)return i.jsxs(Wm,{children:[i.jsx(ey,{}),i.jsx(CE,{}),i.jsx(pie,{onLoginClick:()=>h(!0)}),i.jsx(die,{open:d,onClose:()=>h(!1),onSuccess:async()=>{console.log("🎉 onSuccess chamado - verificando autenticação..."),await P(),console.log("✅ Estado de autenticação atualizado"),K.success("🎉 Bem-vindo ao VolleyPro!",{description:"Explore a comunidade, complete seu perfil e conecte-se com outros apaixonados por vôlei!",duration:5e3})}}),i.jsx(NE,{}),i.jsx(TE,{}),i.jsx(qm,{})]});const I=[{id:"feed",label:"Feed",icon:pL},{id:"athletes",label:"Atletas",icon:wt},{id:"teams",label:"Times",icon:Qn},{id:"tournaments",label:"Torneios",icon:Nt},{id:"showcase",label:"Vitrine",icon:p3},{id:"lives",label:"Lives",icon:In},{id:"invitations",label:"Convites",icon:ty},{id:"monetization",label:"Monetização",icon:H0}];return i.jsxs(Wm,{children:[i.jsx(CE,{}),i.jsx(XV,{children:i.jsxs("div",{className:"flex min-h-screen w-full",children:[i.jsx(d8,{currentView:t,onNavigate:e,isAuthenticated:v,onProfileClick:()=>l(!0)}),i.jsxs("main",{className:"flex-1 bg-gradient-to-br from-background via-muted/30 to-primary/10",children:[i.jsx("div",{className:"sticky top-0 z-40 border-b bg-gradient-to-r from-primary via-[#0052cc] to-primary shadow-lg",children:i.jsx("div",{className:"container mx-auto px-6",children:i.jsxs("div",{className:"flex h-16 items-center justify-between gap-4",children:[i.jsx(vc,{variant:"compact",className:"[&_img]:w-16 [&_img]:h-16 shrink-0",withShadow:!0}),i.jsx("nav",{className:"flex items-center gap-1 flex-1 justify-center",children:I.map(M=>{const O=M.icon,L=t===M.id;return i.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>{e(M.id),r(null),o(null),l(!1)},className:`
                            gap-2 text-white hover:bg-white/20 hover:text-white transition-all
                            ${L?"bg-white/20 shadow-sm":""}
                          `,children:[i.jsx(O,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden lg:inline",children:M.label})]},M.id)})}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>{e("pwa-test"),r(null),o(null),l(!1)},className:"text-white bg-white/10 hover:bg-white/20 hover:text-white border border-white/30",title:"Testar PWA",children:["🧪",i.jsx("span",{className:"hidden lg:inline ml-2",children:"PWA"})]}),i.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>{l(!0),r(null),o(null)},className:"text-white hover:bg-white/20 hover:text-white",children:[i.jsx(mu,{className:"h-4 w-4 lg:mr-2"}),i.jsx("span",{className:"hidden lg:inline",children:"Perfil"})]}),i.jsxs(q,{variant:"ghost",size:"sm",onClick:N,className:"text-white hover:bg-white/20 hover:text-white",children:[i.jsx(CL,{className:"h-4 w-4 lg:mr-2"}),i.jsx("span",{className:"hidden lg:inline",children:"Sair"})]})]})]})})}),_()]})]})}),i.jsx(mie,{open:m,onClose:()=>f(!1),onSuccess:()=>{K.success("Perfil atualizado! Suas mudanças foram salvas. 🎉"),a&&window.location.reload()}}),T&&i.jsx(gie,{userType:k,onComplete:()=>E(!1)}),i.jsx(ey,{}),i.jsx(NE,{}),i.jsx(vie,{}),i.jsx(TE,{}),i.jsx(qm,{})]})}p4.createRoot(document.getElementById("root")).render(i.jsx(kie,{}));
